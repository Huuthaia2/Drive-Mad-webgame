function boot(){var e=function(){window._CCSettings=void 0,cc.loader.downloader._subpackages=settings.subpackages,cc.view.enableRetina(!0),cc.view.resizeWithBrowserSize(!0),cc.sys.isMobile&&("landscape"===settings.orientation?cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE):"portrait"===settings.orientation&&cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT),cc.view.enableAutoFullScreen(!1)),"undefined"!=typeof XFBI&&XFBI.initializeAsync().then(function(){XFBI.logEvent("InitFBInstant",1,{}),XFBI.startGameAsync().then(function(){var e=settings.launchScene;cc.director.loadScene(e,function(e,t,n){var s=t/e*100|0;s=Math.min(s,100),XFBI.setLoadingProgress(s)},function(){cc.view.setDesignResolutionSize(750,1334,4),cc.loader.onProgress=null,console.log("Success to load scene: "+e)})})})};loadJsListModules(settings.jsList).then(function(){(boot.systemGlobal||System).import("virtual:///prerequisite-imports:main").then(function(){cc.game.run(e)}).catch(function(e){console.error("Load project module error: \n"+e)})})}function initOptions(){var e=settings.uuids,t=settings.rawAssets,n=settings.assetTypes,s=settings.rawAssets={};for(var a in t){var r=t[a],o=s[a]={};for(var i in r){var c=r[i],d=c[1];"number"==typeof d&&(c[1]=n[d]),o[e[i]||i]=c}}for(var u=settings.scenes,p=0;p<u.length;++p){var v=u[p];"number"==typeof v.uuid&&(v.uuid=e[v.uuid])}var l=settings.packedAssets;for(var g in l)for(var m=l[g],f=0;f<m.length;++f)"number"==typeof m[f]&&(m[f]=e[m[f]]);var b=settings.subpackages;for(var h in b){var w=b[h].uuids;if(w)for(var y=0,A=w.length;y<A;y++)"number"==typeof w[y]&&(w[y]=e[w[y]])}const C={libraryPath:"res/import",rawAssetsBase:"res/raw-",rawAssets:settings.rawAssets,packedAssets:settings.packedAssets,md5AssetsMap:settings.md5AssetsMap,subPackages:settings.subpackages},E={scenes:settings.scenes,debugMode:settings.debug?1:3,showFPS:settings.debug,frameRate:60,groupList:settings.groupList,collisionMatrix:settings.collisionMatrix,renderPipeline:settings.renderPipeline,adapter:prepare.findCanvas("GameCanvas"),assetOptions:C,customJointTextureLayouts:settings.customJointTextureLayouts||[]};return E}function loadJsListModules(e){var t=Promise.resolve();return e&&e.forEach(function(e){t=t.then(function(){return prepare.loadIIFE(boot.jsListRoot+"/"+e)})}),t}function loadScriptPackages(e){var t=[];if(e)for(var n=0;n<e.length;++n)t.push(prepare.loadIIFE(e[n]));return Promise.all(t)}function addClass(e,t){const n=(" "+e.className+" ").indexOf(" "+t+" ")>-1;n||(e.className&&(e.className+=" "),e.className+=t)}var settings=window._CCSettings;window.boot=boot;var prepare=function(){return settings=window._CCSettings,Promise.resolve(prepare.engine?prepare.engine():void 0).then(function(){return(boot.systemGlobal||System).import("cc")}).then(function(){var e=initOptions();return new Promise(function(t,n){let s=cc.game.init(e);s?t():n()})}).then(function(){return loadScriptPackages(settings.scriptPackages)})};prepare.engine=void 0,prepare.loadIIFE=void 0,prepare.findCanvas=void 0,boot.jsListRoot="src",boot.systemGlobal=void 0,boot.prepare=prepare;const canvas=document.getElementById("GameCanvas"),$p=canvas.parentElement,bcr=$p.getBoundingClientRect();canvas.width=bcr.width,canvas.height=bcr.height;var boot=window.boot;boot.prepare.engine=function(){var e={imports:{}};e.imports.cc="./js/cocos3d-js.min.js";var t=document.createElement("script");t.type="systemjs-importmap",t.text=JSON.stringify(e,void 0,2),document.body.appendChild(t)},boot.prepare.loadIIFE=function(e){return new Promise(function(t,n){function s(t){t.filename===e&&(a=t.error)}var a;window.addEventListener("error",s);var r=document.createElement("script");r.charset="utf-8",r.async=!0,r.crossOrigin="anonymous",r.addEventListener("error",function(){window.removeEventListener("error",s),n(Error("Error loading "+e))}),r.addEventListener("load",function(){window.removeEventListener("error",s),document.head.removeChild(r),a?n(a):t()}),r.src=e,document.head.appendChild(r)})},boot.prepare.findCanvas=function(){canvas&&"CANVAS"===canvas.tagName||console.error("unknown canvas id:",el);var e=canvas.width,t=canvas.height,n=document.createElement("div");canvas&&canvas.parentNode&&canvas.parentNode.insertBefore(n,canvas),n.setAttribute("id","Cocos3dGameContainer"),n.appendChild(canvas);var s=n.parentNode===document.body?document.documentElement:n.parentNode;return addClass(canvas,"gameCanvas"),canvas.setAttribute("width",e||"480"),canvas.setAttribute("height",t||"320"),canvas.setAttribute("tabindex","99"),{frame:s,canvas:canvas,container:n}},boot.prepare().then(boot);