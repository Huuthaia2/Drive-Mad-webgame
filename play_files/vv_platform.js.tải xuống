var callBcak=null,preloadedRewardedVideo=null,preloadedInterstitial=null,suc=null,interTimer=0;function ViVOgamePlatform(){console.log("-------fb-----"),this.login()}ViVOgamePlatform.prototype={constructor:ViVOgamePlatform,initializeAsync:function(n){"undefined"!=typeof FBInstant?FBInstant.initializeAsync().then(()=>{FBInstant.setLoadingProgress(10),FBInstant.startGameAsync().then(()=>{this.RewardedVideo(),this.Interstitial(),n()})}):n()},RewardedVideo:function(){FBInstant.getRewardedVideoAsync("2656310851160040_2661142457343546").then(function(n){return(preloadedRewardedVideo=n).loadAsync()}).then(function(){console.log("Rewarded video preloaded")}).catch(function(n){console.error("Rewarded video failed to preload: "+n.message)})},Interstitial:function(){FBInstant.getInterstitialAdAsync("2656310851160040_2661143667343425").then(function(n){return(preloadedInterstitial=n).loadAsync()}).then(function(){console.log("Interstitial preloaded")}).catch(function(n){console.error("Interstitial failed to preload: "+n.message)})},login:function(n){"undefined"!=typeof qg&&qg.hasShortcutInstalled({success:function(n){n?console.log("已创建"):console.log("未创建")}})},getZip:function(n){if("undefined"==typeof wx)return;let t=0;wx.loadSubpackage({name:"data",root:"game/",success:()=>{console.log("第一个"),++t>=2&&n&&n()}}),wx.loadSubpackage({name:"data2",root:"data2/",success:()=>{console.log("第二个"),++t>=2&&n&&n()}})},launchInfo:function(){if("undefined"==typeof hg)return;let n=hg.getSystemInfoSync(),t=["en-us","id","pt-br","vi"];for(let e=0;e<t.length;e++)return n.language==t[e]?n.language:"en-us"},getUserInfo:function(){},startLoading:function(n){this._loadingCallback=n},onLoading:function(){"undefined"!=typeof hg&&hg.gameLoadResult&&hg.gameLoadResult({code:0})},destroyButton:function(){this.button&&(this.button.destroy(),this.button=null),this.button1&&(this.button1.destroy(),this.button1=null),this.feedbackBtn&&(this.feedbackBtn.destroy(),this.feedbackBtn=null)},authorize:function(n,t){},isAuthorize:function(n){},hideAuthenticLoginBtn:function(){this.authenticLoginBtn&&this.authenticLoginBtn.hide()},createFeedbackButton:function(n){},setFeedbackButtonVisible:function(n){this.feedbackBtn&&(n?this.feedbackBtn.show():this.feedbackBtn.hide())},onShow:function(n){},onHide:function(n){},GetRandomNum:function(n,t){var e=t-n,o=Math.random();return n+Math.round(o*e)},onShare:function(n){},isSharing:function(){return this._isSharing},navigateToMiniProgram:function(n){},createBannerAd:function(){if(console.log("创建banner"),"undefined"!=typeof wx){var n=wx.getSystemInfoSync().windowWidth,t=wx.getSystemInfoSync().windowHeight,e=(Laya.stage.height/2+450)/Laya.stage.height;null==this.bannerAd&&(console.log("创建banner"),this.bannerAd=wx.createBannerAd({adUnitId:"adunit-27bcdf8a8105b476",adIntervals:30,style:{left:0,top:t*e,width:n}}),this.bannerAd.onError(n=>{console.log("fetch banner error:"+n.errCode),console.log("fetch banner error:"+n.errMsg)}),this.bannerAd.onResize(e=>{this.bannerAd.style.top=.98*t-e.height,this.bannerAd.style.left=(n-e.width)/2})),this.bannerAd.onLoad(()=>{this.bannerAd.show()})}},showBanner:function(){this.bannerAd&&this.bannerAd.show()},closeBannerAd:function(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)},setBannerVisible:function(n){this.bannerAd&&(n?this.bannerAd.show():this.bannerAd.hide())},createRewardedVideoAd:function(n){suc=n,FBInstant.getSupportedAPIs().includes("getRewardedVideoAsync")?preloadedRewardedVideo.showAsync().then(()=>{suc&&suc(!0),suc=null,console.log("Rewarded video watched successfully"),this.RewardedVideo()}).catch(n=>{suc&&suc(!1),suc=null,console.error(n.message),console.log("NO ads"),this.RewardedVideo()}):(suc&&suc(!1),suc=null,console.log("NO ads"))},interstitialAd:function(){(new Date).getTime()-interTimer<3e4||FBInstant.getSupportedAPIs().includes("getInterstitialAdAsync")&&preloadedInterstitial.showAsync().then(()=>{console.log("Interstitial ad finished successfully"),interTimer=(new Date).getTime(),this.Interstitial()}).catch(n=>{console.error(n.message),this.Interstitial()})},showNativeAd:function(n,t,e){var o;if("undefined"!=typeof qg&&(0!=e&&!(qg.getSystemInfoSync().platformVersionCode<1053)))return console.log("平台号大于1053"),function(){o=qg.createNativeAd({posId:t}),function(){let n=o.load();n&&n.then(()=>{}).catch(n=>{console.log("加载失败",JSON.stringify(n)),this.interstitialAd(),console.log("asdasdasdasdasd>>>>>>>>>>>")})}(),o.onLoad(e);var e=function(t){if(console.log("原生广告加载完成",JSON.stringify(t)),t&&t.adList){var i=t.adList.pop();!function(n){console.log("this.nativeCurrentAdList"+n.adId.toString()),o.reportAdShow({adId:n.adId.toString()})}(i),n(i,o)}o.offLoad(e)}}(),o},createNativeAdClick:function(n,t,e){console.log("this.res"+n.adId),0!=t&&e.reportAdClick({adId:n.adId.toString()})},showNativeAd2:function(n,t,e){var o;if("undefined"!=typeof qg&&(0!=e&&!(qg.getSystemInfoSync().platformVersionCode<1053)))return console.log("平台号大于1053"),function(){o=qg.createNativeAd({posId:t}),function(){let n=o.load();n&&n.then(()=>{}).catch(n=>{console.log("加载失败",JSON.stringify(n)),this.interstitialAd(),console.log("asdasdasdasdasd>>>>>>>>>>>")})}(),o.onLoad(e);var e=function(t){if(console.log("原生广告加载完成",JSON.stringify(t)),t&&t.adList){var i=t.adList.pop();!function(n){console.log("this.nativeCurrentAdList"+n.adId.toString()),o.reportAdShow({adId:n.adId.toString()})}(i),n(i,o)}o.offLoad(e)}}(),o},vibrateShort:function(){},vibrateLong:function(){null!=qg.vibrateLong&&0!=this.isOpenVibration&&qg.vibrateLong({})},openCustomerServiceConversation:function(n){},setUserCloudStorage:function(n){},getUserCloudStorage:function(n){},createInnerAudioContext:function(){},getOpenDataContext:function(){},postMessage:function(n){},getSystemInfoSync:function(){},createCanvas:function(){},encode:function(n){return escape(n)},decode:function(n){return unescape(n)}},window.platform=new ViVOgamePlatform;