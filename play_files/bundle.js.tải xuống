var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function __(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(__.prototype=a.prototype,new __)}}();!function(){return function r(e,t,a){function o(n,s){if(!t[n]){if(!e[n]){var l="function"==typeof require&&require;if(!s&&l)return l(n,!0);if(i)return i(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){return o(e[n][1][t]||t)},u,u.exports,r,e,t,a)}return t[n].exports}for(var i="function"==typeof require&&require,n=0;n<a.length;n++)o(a[n]);return o}}()({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./base/base/Button"),n=e("./game/ui/equipWeapon/EquipWeaponItem"),s=e("./game/ui/result/view/AwardItem"),o=e("./game/ui/game/GameBuffItem"),l=e("./game/ui/common/ZombieInfoItem"),r=e("./game/ui/common/ExhibitionComponent"),d=e("./game/ui/index/item/CombineItem"),u=e("./game/ui/index/view/DragItem"),h=e("./game/ui/common/LevelView"),c=e("./game/ui/shop/ShopItem"),m=e("./game/ui/inviteReward/InviteRewardItem"),p=e("./game/ui/turn/TurnItem");class f{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("base/base/Button.ts",i.default),e("game/ui/equipWeapon/EquipWeaponItem.ts",n.default),e("game/ui/result/view/AwardItem.ts",s.default),e("game/ui/game/GameBuffItem.ts",o.default),e("game/ui/common/ZombieInfoItem.ts",l.default),e("game/ui/common/ExhibitionComponent.ts",r.default),e("game/ui/index/item/CombineItem.ts",d.default),e("game/ui/index/view/DragItem.ts",u.default),e("game/ui/common/LevelView.ts",h.default),e("game/ui/shop/ShopItem.ts",c.default),e("game/ui/inviteReward/InviteRewardItem.ts",m.default),e("game/ui/turn/TurnItem.ts",p.default)}}a.default=f,f.width=750,f.height=1334,f.scaleMode="noscale",f.screenMode="vertical",f.alignV="middle",f.alignH="center",f.startScene="LoadingView.scene",f.sceneRoot="",f.debug=!1,f.stat=!1,f.physicsDebug=!1,f.exportSceneToJson=!0,f.init()},{"./base/base/Button":6,"./game/ui/common/ExhibitionComponent":190,"./game/ui/common/LevelView":192,"./game/ui/common/ZombieInfoItem":193,"./game/ui/equipWeapon/EquipWeaponItem":196,"./game/ui/game/GameBuffItem":215,"./game/ui/index/item/CombineItem":237,"./game/ui/index/view/DragItem":242,"./game/ui/inviteReward/InviteRewardItem":248,"./game/ui/result/view/AwardItem":271,"./game/ui/shop/ShopItem":285,"./game/ui/turn/TurnItem":297}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./GameConfig"),n=e("./game/data/user/UserData"),s=e("./base/olympus/OlympusSDK"),o=e("./Version"),l=e("./base/olympus/data/LogLoad"),r=e("./game/network/NetworkModule"),d=e("./util/MiniGameSDK");class u{constructor(){Laya.Browser.onMiniGame&&(Laya.MiniAdpter.init(!0,!1),Laya.MiniAdpter.getUrlEncode=u.getUrlAndEncode),Laya3D.init(Laya.Browser.width,Laya.Browser.height),Laya.stage.screenMode=i.default.screenMode,Laya.stage.scaleMode=i.default.scaleMode,Laya.URL.exportSceneToJson=i.default.exportSceneToJson,UIConfig.closeDialogOnSide=!1,i.default.debug&&Laya.enableDebugPanel(),i.default.stat&&!Laya.Browser.onMiniGame&&Laya.Stat.show(),Laya.MouseManager.multiTouchEnabled=!1,Laya.alertGlobalError=!Laya.Browser.onMiniGame,UIConfig.closeDialogOnSide=!1,Laya.loader.retryDelay=100,Laya.loader.retryNum=3,n.default.SetupTime=Date.now(),s.default.init("wx_zombie_checker","bOEu3Zb6YuQ=","wechat",o.default.client);let e=Laya.LocalStorage.getItem("isNewPlayer"),t=Laya.LocalStorage.getItem("version");e&&""!=e?n.default.IsNewClient=!1:(Laya.LocalStorage.setItem("isNewPlayer","1"),n.default.IsNewClient=!0,""!=t&&(n.default.IsNewClient=!1)),r.default.logLoadEvent(l.LoadStep.LoadStepLaunch),d.default.init()}static getUrlAndEncode(e,t){return-1!=e.indexOf(".json")?"utf8":"arraybuffer"==t?"":"ascii"}}new u},{"./GameConfig":1,"./Version":3,"./base/olympus/OlympusSDK":28,"./base/olympus/data/LogLoad":39,"./game/data/user/UserData":86,"./game/network/NetworkModule":166,"./util/MiniGameSDK":319}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.gameName="wx_zombie_shooter",i.client=3,i.asset="2"},{}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{static isContains(e,t){if(e)for(let a=0;a<e.length;a++)if(e[a]===t)return!0;return!1}static add(e,t){return!this.isContains(e,t)&&(e.push(t),!0)}static remove(e,t){if(e)for(let a=0;a<e.length;a++)if(e[a]===t)return e.splice(a,1),!0;return!1}static clear(e){e&&e.splice(0,e.length)}}},{}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../game/ui/result/data/AwardItemData"),n=e("../../game/ui/result/view/AwardItem"),s=e("./Pool"),o=e("../../game/common/ui/UIUtil"),l=e("../../game/ui/result/data/AwardType");class r{constructor(){this._flyOver=null,this._item=null}static create(e,t){let a=s.default.get(r.poolName,r);return a.init(e,t),a}destroy(){}clear(){this._flyOver=null}recover(){Laya.Tween.clearAll(this._item),this._item.imgBg.visible=!0,this._item.imgNameBg.visible=!0,this._item.imgLevelBg.visible=!0,this._item.tfLevel.visible=!0,this._item.tfWeaponName.visible=!0,this._item.clearData(),this._item.removeSelf(),s.default.recover(n.default.poolName,this._item),s.default.recover(r.poolName,this)}init(e,t){this._flyOver=t,this._item=s.default.get(n.default.poolName,n.default),this._item.setData(e),null!=e.stagePos?this._item.pos(e.stagePos.x,e.stagePos.y):this._item.pos(.5*Laya.stage.width,.5*Laya.stage.height),e.type==l.EAwardType.COIN?this._item.imgIcon.scale(.3,.3):this._item.imgIcon.scale(1,1),this._item.zOrder=1e3,this._item.imgBg.visible=!1,this._item.imgNameBg.visible=!1,this._item.imgLevelBg.visible=!1,this._item.tfLevel.visible=!1,this._item.tfWeaponName.visible=!1,o.default.addToStage(this._item)}playTXAnim(e,t){Laya.Tween.clearAll(this._item),0!=t?this.scaleAnim(e,t):this.flyAnim(e,t)}scaleAnim(e,t){let a=this._item.scaleX,i=this._item.scaleY,n={scaleX:1.5*a,scaleY:1.5*i},s=.5*t,o=Laya.Ease.linearNone;Laya.Tween.to(this._item,n,s,o,null,0,!0,!0);let l={scaleX:a,scaleY:i},r=Laya.Handler.create(this,this.flyAnim,[e,0]);Laya.Tween.to(this._item,l,s,o,r,s,!1,!0)}flyAnim(e,t){let a={x:e.x,y:e.y},i=Laya.Ease.circOut,n=Laya.Handler.create(this,this.flyAnimOver);Laya.Tween.to(this._item,a,500,i,n,t,!0,!0)}flyAnimOver(){if(null!=this._flyOver){let e=s.default.get(i.default.poolName,i.default);e.copyTo(this._item.awardItemData),this._flyOver.runWith(e)}this.recover()}get awardItemData(){return this._item.awardItemData}get awardItem(){return this._item}}a.default=r,r.poolName="awardFLy"},{"../../game/common/ui/UIUtil":73,"../../game/ui/result/data/AwardItemData":268,"../../game/ui/result/data/AwardType":269,"../../game/ui/result/view/AwardItem":271,"./Pool":12}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class extends Laya.Button{constructor(e,t){super(e,t),this._toScale=.9,this._defaultScaleX=-1,this._defaultScaleY=-1,this.showDefaultS=.5}destroy(){Laya.Tween.clearAll(this),null!=this.clickHandler&&(this.clickHandler.recover(),this.clickHandler=null),super.destroy()}setDefaultScale(e,t){this._defaultScaleX=e,this._defaultScaleY=t}onMouse(e){super.onMouse(e),-1==this._defaultScaleX&&(this._defaultScaleX=this.scaleX,this._defaultScaleY=this.scaleY),Laya.Event.MOUSE_DOWN==e.type?Laya.Tween.to(this,{scaleX:this._defaultScaleX*this._toScale,scaleY:this._defaultScaleX*this._toScale},50):Laya.Event.MOUSE_UP==e.type||Laya.Event.MOUSE_OUT==e.type?Laya.Tween.to(this,{scaleX:this._defaultScaleX,scaleY:this._defaultScaleX},50):(Laya.Event.CLICK,e.type)}}},{}],7:[function(e,t,a){"use strict";var i;Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.LIGHT=0]="LIGHT",e[e.YELLOW=1]="YELLOW",e[e.BLACK=2]="BLACK",e[e.DRAK_RED=3]="DRAK_RED",e[e.Mask=4]="Mask",e[e.YellowGold=5]="YellowGold"}(i=a.EColorFilter||(a.EColorFilter={}));class n{static getColorFilter(e){switch(e){case i.LIGHT:return new Laya.ColorFilter(n.LightMatrix);case i.YELLOW:return new Laya.ColorFilter(n.YellowMatrix);case i.BLACK:return new Laya.ColorFilter(n.BlackMatrix);case i.DRAK_RED:return new Laya.ColorFilter(n.DarkRedMatrix);case i.Mask:return new Laya.ColorFilter(n.MaskMatrix);case i.YellowGold:return new Laya.ColorFilter(n.YellowGoldMatrix);default:return null}}static getOutPutFilter(){return null==this._outPutFilter&&(this._outPutFilter=new Laya.ColorFilter,this._outPutFilter.setColor("#29e127")),this._outPutFilter}static getShopWeaponFilter(){return null==this._weaponFilter&&(this._weaponFilter=new Laya.ColorFilter,this._weaponFilter.setColor("#7e7450")),this._weaponFilter}static getEarnYellow(){return null==this._earnFilter&&(this._earnFilter=new Laya.ColorFilter,this._earnFilter.setColor("#ffd200")),this._earnFilter}static getUnlockLevelFilter(){return null==this._unlockLevelFilter&&(this._unlockLevelFilter=new Laya.ColorFilter,this._unlockLevelFilter.setColor("#4a230d")),this._unlockLevelFilter}static getBtnFontShadow(){return null==this._btnFontShadow&&(this._btnFontShadow=new Laya.GlowFilter("0x000000",4,2,2)),this._btnFontShadow}}a.default=n,n.LightMatrix=[1,0,0,0,51,0,1,0,0,224*.2,0,0,1,0,141*.2,0,0,0,1,0],n.YellowMatrix=[.95294,0,0,0,0,0,.80784,0,0,0,0,0,0,0,0,0,0,0,1,0],n.YellowGoldMatrix=[1,0,0,0,0,0,.8,0,0,0,0,0,0,0,0,0,0,0,1,0],n.BlackMatrix=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],n.DarkRedMatrix=[148/255,0,0,0,0,0,66/255,0,0,0,0,0,15/255,0,0,0,0,0,1,0],n.MaskMatrix=[1,0,0,0,-100,0,1,0,0,-100,0,0,1,0,-100,0,0,0,.8,0],n._outPutFilter=null,n._weaponFilter=null,n._earnFilter=null,n._unlockLevelFilter=null,n._btnFontShadow=null},{}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{static log(e,...t){null!=t&&t.length>0?console.log(e,t):console.log(e)}static warn(e,...t){null!=t&&t.length>0?console.warn(e,t):console.warn(e)}static error(e,...t){null!=t&&t.length>0?console.error(e,t):console.error(e),Laya.Browser.onPC&&alert(e)}}a.default=i,i.IsDebugOffLine=!1,i.IsDebugShopTip=!1},{}],9:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{constructor(){this._keys=null,this._values=null,this._keys=new Array,this._values=new Array}destroy(){this.clear(),this._keys=null,this._values=null}setValue(e,t){let a=this.indexOf(e);a>=0?this._values[a]=t:(this._keys.push(e),this._values.push(t))}indexOf(e){return this._keys.indexOf(e)}containsKey(e){return-1!=this._keys.indexOf(e)}getValue(e){var t=this.indexOf(e);return t<0?null:this._values[t]}remove(e){var t=this.indexOf(e);return t>=0&&(this._keys.splice(t,1),this._values.splice(t,1),!0)}clear(){this._values.splice(0,this._values.length),this._keys.splice(0,this._keys.length)}get values(){return this._values}get keys(){return this._keys}forEach(e){for(let t=0;t<this._keys.length;t++)if(!1===e(this._keys[t],this._values[t]))return}get length(){return this._values.length}isEmpty(){return this._values.length<=0}}},{}],10:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./Pool"),n=e("../../game/common/ui/UIUtil");a.default=class{constructor(){this._render=null,this._timeScale=1,this._complete=null,this._startX=0,this._startY=0,this._middleX=0,this._middleY=0,this._endX=0,this._endY=0,this._render=i.default.getSysObj("Image",Laya.Image),this._render.anchorX=.5,this._render.anchorY=.5,this._render.zOrder=910,this._render.mouseEnabled=!1}destroy(){null!=this._render&&(this._render.removeSelf(),this._render.destroy(),this._render=null)}clear(){null!=this._render&&(this._render.skin="",this._render.removeSelf()),this._timeScale=1,this._complete=null}setData(e){this._render.skin=e,n.default.addToStage(this._render)}fly(e,t,a,i,n){if(null!=e&&null!=t)if(0==i&&(i=1),this._timeScale=i,this._render.x=e.x,this._render.y=e.y,this._complete=n,null==a||a.x==e.x&&a.y==e.y)this.finalFly(e,t,a);else{let n=e.x+a.x,s=e.y+a.y,o=Laya.TimeLine.to(this._render,{x:n,y:s},100*i,Laya.Ease.quartIn);o.to(this._render,{},50*i),o.on(Laya.Event.COMPLETE,this,this.onMiddleComplete,[e,t,a]),o.play()}}onMiddleComplete(e,t,a){this.finalFly(e,t,a)}finalFly(e,t,a){let n=(300+100*Math.random())*this._timeScale;this._startX=this._render.x,this._startY=this._render.y;let s=this.calcOffset(e.x,e.y,t.x,t.y,e.x+a.x,e.y+a.y);this._middleX=s.x,this._middleY=s.y,this._endX=t.x,this._endY=t.y,i.default.recoverPoint(e),i.default.recoverPoint(t),i.default.recoverPoint(a),i.default.recoverPoint(s),Laya.Tween.to(this._render,{x:this._endX,y:this._endY},n,null,Laya.Handler.create(this,this.flyComplete))}calcOffset(e,t,a,n,s,o){let l=[e-a,t-n],r=[s-a,o-n],d=l[0]*r[1]-l[1]*r[0],u=[e+(a-e)/2,t+(n-t)/2],h=i.default.getPoint();return d>0?(h.x=Math.min(Laya.stage.width-20,u[0]+Math.max(3*(e-s),200)),h.y=u[1]):d<0?(h.x=Math.max(u[0]+Math.max(3*(e-s),-200),20),h.y=u[1]):(h.x=a+s-e,h.y=n+o-t),h}flyComplete(){null!=this._complete&&(this._complete.run(),this._complete=null)}}},{"../../game/common/ui/UIUtil":73,"./Pool":12}],11:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../game/common/ui/UIUtil");class n{static random(e,t){return e+Math.random()*(t-e)}static randomInt(e,t){let a=t-e+1;return Math.floor(e+Math.random()*a)}static randomBoolean(){return Math.random()>=.5}static randomColor(){return"#"+Math.ceil(255*Math.random()).toString(16)+Math.ceil(255*Math.random()).toString(16)+Math.ceil(255*Math.random()).toString(16)}static getColor(e,t,a){return"#"+Math.ceil(e).toString(16)+Math.ceil(t).toString(16)+Math.ceil(a).toString(16)}static randomColorValue(){return Math.ceil(255*Math.random())}static getSign(e){return e>0?1:0==e?0:-1}static formatNumber(e,t=1){if(e<=0)return"0";let a="",i=this.UNIT_VALUE.length-1;do{if(e>=this.UNIT_VALUE[i])break}while(i--);let n=this.UNIT_VALUE[i];if(0==e%n)a=e/n+this.UNIT_NAME[i];else{a=(e/n).toFixed(1)+this.UNIT_NAME[i]}return a}static getRadiansByVector(e,t){return Math.atan2(e.z,e.x)-Math.atan2(t.z,t.x)}static colorToVector3(e){let t=new Laya.Vector3;return t.x=parseInt(e.substr(0,2),16)/255,t.y=parseInt(e.substr(2,2),16)/255,t.z=parseInt(e.substr(4,2),16)/255,t}static getDistance(e,t){let a=e.x-t.x,i=e.y-t.y;return Math.sqrt(a*a+i*i)}static rectangleRandom(e,t,a){let n=this.random(0,.5*t)*i.default.getHeightRate(),s=-1;Math.random()>.5&&(s=1);let o=this.random(0,.5*a),l=-1;Math.random()>.5&&(l=1);let r=new Laya.Point;return r.x=e.x+n*s,r.y=e.y+o*l,r}static circleRandom(e,t){let a=new Laya.Point,i=this.randomInt(0,360)*Math.PI/180;return a.x=e.x+Math.sin(i)*t,a.y=e.y+Math.cos(i)*t,a}static getCurDate(){null==this.DATE&&(this.DATE=new Date);let e=this.DATE.getFullYear().toString().substring(2,4),t=this.DATE.getMonth()+1+"";t.length<2&&(t="0"+t);let a=this.DATE.getDate()+"";return a.length<2&&(a="0"+a),e+t+a}}a.default=n,n.TEMP_V3=new Laya.Vector3,n.UNIT_NAME=["","K","M","B","Aa","Ab","Ac","Ad","Ae","Af"],n.UNIT_VALUE=[1,1e3,1e6,1e9,1e12,1e15,1e18,1e21,1e24,1e27],n.DATE=null},{"../../game/common/ui/UIUtil":73}],12:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{static get(e,t){return Laya.Pool.getItemByClass(e,t)}static recover(e,t){null!=t&&(t.clear(),Laya.Pool.recover(e,t))}static getSysObj(e,t){return Laya.Pool.getItemByClass(e,t)}static recoverSysObj(e,t){null!=t&&Laya.Pool.recover(e,t)}static getVector3(){return Laya.Pool.getItemByClass("Vector3",Laya.Vector3)}static recoverVector3(e){null!=e&&(e.toDefault(),Laya.Pool.recover("Vector3",e))}static getPoint(){return i.getSysObj("Point",Laya.Point)}static recoverPoint(e){null!=e&&(e.x=0,e.y=0,i.recoverSysObj("Point",e))}static getImg(){return i.getSysObj("image",Laya.Image)}static recoverImg(e){null!=e&&(e.removeSelf(),e.anchorX=0,e.anchorY=0,e.scaleX=1,e.scaleY=1,e.skin="",e.x=0,e.y=0,i.recoverSysObj("image",e))}}a.default=i},{}],13:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./Pool"),n=e("./FlyUnit"),s=e("./Debug");var o;!function(e){e[e.COIN=0]="COIN",e[e.DIAMOND=1]="DIAMOND",e[e.LIFE=2]="LIFE",e[e.SPEEND_DOWN=3]="SPEEND_DOWN",e[e.INFINITE_BULLET=4]="INFINITE_BULLET"}(o=a.EnumRewardFly||(a.EnumRewardFly={}));class l{constructor(){this._flyNum=0,this._oneFlyOver=null,this._allFlyOver=null}static fly(e,t,a,n=30,s=1,o=null,r=null){if(n<=0)return null!=o&&o.run(),void(null!=r&&r.run());var d=i.default.get("RewardFly",l);l._rewardFlys.push(d),d.fly(e,t,a,n,s,o,r)}static get isFlying(){return null!=l._rewardFlys&&l._rewardFlys.length>0}destroy(){this.clear()}clear(){this._flyNum=0,this._oneFlyOver=null,this._allFlyOver=null}fly(e,t,a,l=30,r=1,d=null,u=null){if(l<=0)s.default.log("飞行数量不能等于0");else{this._oneFlyOver=d,this._allFlyOver=u,this._flyNum=Math.min(l,30);for(let s=0;s<this._flyNum;s++){let s=i.default.get("FlyUnit",n.default),l="";if(o.COIN==a?l="index/img_coin.png":o.DIAMOND==a?l="index/img_dimond.png":o.LIFE==a?l="game/img_life.png":o.SPEEND_DOWN==a?l="game/SpeedDown.png":o.INFINITE_BULLET==a&&(l="game/InfiniteBullet.png"),s.setData(l),this._flyNum>1){let a=30,n=150,o=50,l=80,d=a+Math.random()*(n-a),u=o+Math.random()*(l-o),h=Math.cos(d)*u,c=Math.sin(d)*u,m=i.default.getPoint();m.setTo(h,c),s.fly(e,t,m,r,Laya.Handler.create(this,this.removeUnit,[s]))}else s.fly(e,t,e,r,Laya.Handler.create(this,this.removeUnit,[s]))}}}removeUnit(e){if(null!=this._oneFlyOver&&this._oneFlyOver.run(),null!=e&&i.default.recover("FlyUnit",e),this._flyNum--,this._flyNum<=0){if(null!=l._rewardFlys){let e=l._rewardFlys.indexOf(this);-1!=e&&l._rewardFlys.splice(e,1)}null!=this._allFlyOver&&this._allFlyOver.run(),i.default.recover("RewardFly",this)}}}a.default=l,l._rewardFlys=new Array},{"./Debug":8,"./FlyUnit":10,"./Pool":12}],14:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{static shakeScreen(e,t){this.vibrateObj.view&&(Laya.timer.clearAll(this.vibrateObj),this.vibrateObj.view.x=this.vibrateObj.x,this.vibrateObj.view.y=this.vibrateObj.y,this.vibrateObj.view.rotation=this.vibrateObj.rotation),this.vibrateObj.x=e.x,this.vibrateObj.y=e.y,this.vibrateObj.rotation=e.rotation,this.vibrateObj.view=e;let a,i,n=t?t/10:30,s=0,o=1,l=this;Laya.timer.loop(5,this.vibrateObj,function(){s++,o=Math.random()>.5?1:-1,a=2*Math.random()*o+l.vibrateObj.x,i=2*Math.random()*o*-1+l.vibrateObj.y,Laya.Tween.to(e,{x:a,y:i,rotation:void 0},10,Laya.Ease.linearNone,Laya.Handler.create(l.vibrateObj,function(){if(s>n)return Laya.timer.clearAll(l.vibrateObj),e.x=l.vibrateObj.x,e.y=l.vibrateObj.y,e.rotation=l.vibrateObj.rotation,void(l.vibrateObj.view=null)}))})}}a.default=i,i.vibrateObj={x:0,y:0,rotation:0,view:null}},{}],15:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./Pool"),n=e("../../ui/layaMaxUI"),s=e("../../game/common/ui/UIUtil");class o extends n.ui.effect.WeaponFlyUI{constructor(){super(...arguments),this._flyOver=null}static fly(e,t,a,n,l,r=null){let d=i.default.get(o.poolName,o);d.pos(t.x,t.y),d.imgWeapon.rotation=n,d.imgWeapon.skin=e,d.zOrder=910,s.default.addToStage(d),d.playFlyAnim(a,l,r)}destroy(){}clear(){this._flyOver=null}recover(){Laya.Tween.clearAll(this),Laya.Tween.clearAll(this.imgWeapon),this.imgWeapon.alpha=1,this.imgWeapon.scaleX=1,this.imgWeapon.scaleY=1,this.removeSelf(),i.default.recover(o.poolName,this)}playFlyAnim(e,t,a=null){this._flyOver=a;let i={x:e.x,y:e.y},n=Laya.Ease.linearNone;Laya.Tween.to(this,i,500,n,null,0,!0,!0),this.imgWeapon.scaleX=1,this.imgWeapon.scaleY=1,this.imgWeapon.alpha=1;let s={alpha:0,rotation:t,scaleX:.3,scaleY:.3},o=Laya.Handler.create(this,this.flyAnimOver);Laya.Tween.to(this.imgWeapon,s,500,n,o,0,!0,!0)}flyAnimOver(){null!=this._flyOver&&this._flyOver.run(),this.recover()}}a.default=o,o.poolName="weaponfly"},{"../../game/common/ui/UIUtil":73,"../../ui/layaMaxUI":315,"./Pool":12}],16:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{constructor(e){this._ctrlNodes=null,this._ctrlNodes=e}bezier(e,t){if(e<=0)return this._ctrlNodes[0];if(e>=1)return this._ctrlNodes[this._ctrlNodes.length-1];let a=0,i=0,n=this._ctrlNodes.length-1;for(let t=0;t<this._ctrlNodes.length;++t){let s=this._ctrlNodes[t];0==t?(a+=s.x*Math.pow(1-e,n-t)*Math.pow(e,t),i+=s.y*Math.pow(1-e,n-t)*Math.pow(e,t)):(a+=this.factorial(n)/this.factorial(t)/this.factorial(n-t)*s.x*Math.pow(1-e,n-t)*Math.pow(e,t),i+=this.factorial(n)/this.factorial(t)/this.factorial(n-t)*s.y*Math.pow(1-e,n-t)*Math.pow(e,t))}return t?t.setTo(a,i):new Laya.Point(a,i)}factorial(e){return e<=1?1:e*this.factorial(e-1)}}},{}],17:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../base/Debug"),n=e("../base/MathUtil");a.default=class{constructor(e,t){this._values=null,this._weights=null,this._totalWeight=0,e&&t&&this.setData(e,t)}setData(e,t){if(null!=e&&null!=t&&e.length==t.length){this._values=e,this._weights=t,this._totalWeight=0;for(const e of t)this._totalWeight+=e}else i.default.error("WeightRandom setData error")}random(){let e=n.default.randomInt(0,this._totalWeight),t=0;for(let a=0;a<this._weights.length;a++)if((t+=this._weights[a])>=e)return this._values[a];return this._values[0]}}},{"../base/Debug":8,"../base/MathUtil":11}],18:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class extends Laya.EventDispatcher{constructor(){super()}destroy(){}initialize(){}uninitialize(){}update(e){}}},{}],19:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../base/Dictionary"),n=e("../base/Debug");a.default=class{constructor(){this._modules=null,this._modules=new i.default}destroy(){this._modules.clear(),this._modules=null}initialize(){this._modules.forEach((e,t)=>{t.initialize()}),Laya.timer.frameLoop(1,this,this.update)}uninitialize(){Laya.timer.clear(this,this.update),this._modules.forEach((e,t)=>{t.uninitialize()})}update(){this._modules.forEach((e,t)=>{t.update(Laya.timer.delta)})}get(e){return null==this._modules?null:this._modules.getValue(e)}add(e){null!=this._modules&&(null==this._modules.getValue(e)?this._modules.setValue(e,new e):n.default.error("重复添加模块："+e.prototype.constructor.name))}}},{"../base/Debug":8,"../base/Dictionary":9}],20:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{constructor(){this._main=null,this._dataMgr=null,this._viewMgr=null}destroy(){this._viewMgr=null,this._dataMgr=null,this._main=null}assemble(e,t,a){this._main=e,this._dataMgr=t,this._viewMgr=a}update(e){}getData(e){return null==this._dataMgr?null:this._dataMgr.get(e)}getView(e){return null==this._viewMgr?null:this._viewMgr.get(e)}get main(){return this._main}}},{}],21:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../base/Dictionary");a.default=class{constructor(e,t,a){this._main=null,this._dataMgr=null,this._viewMgr=null,this._controlMgr=null,this._controlMap=null,this._main=e,this._dataMgr=t,this._viewMgr=a,this._controlMap=new i.default}destroy(){this._main=null,this._dataMgr=null,this._viewMgr=null,this._controlMap.forEach((e,t)=>{null!=t&&t.destroy()}),this._controlMap.clear(),this._controlMap=null}initialize(){this._controlMap.forEach((e,t)=>{null!=t&&t.initialize()})}uninitialize(){this._controlMap.forEach((e,t)=>{null!=t&&t.uninitialize()})}update(e){this._controlMap.forEach((t,a)=>{null!=a&&a.update(e)})}get(e){return null==this._controlMap?null:this._controlMap.getValue(e)}add(e){if(null==this._controlMap)return null;if(this._controlMap.containsKey(e))return this._controlMap.getValue(e);let t=new e;return t.assemble(this._main,this._dataMgr,this._viewMgr),this._controlMap.setValue(e,t),t}}},{"../base/Dictionary":9}],22:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{constructor(){this._main=null}destroy(){this._main=null}clear(){}assemble(e){this._main=e}initialize(){}uninitialize(){}get main(){return this._main}}},{}],23:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../base/Dictionary");a.default=class{constructor(e){this._main=null,this._dataMap=null,this._main=e,this._dataMap=new i.default}destroy(){this._main=null,this._dataMap.forEach((e,t)=>{null!=t&&t.destroy()}),this._dataMap.clear(),this._dataMap=null}initialize(){this._dataMap.forEach((e,t)=>{null!=t&&t.initialize()})}uninitialize(){this._dataMap.forEach((e,t)=>{null!=t&&t.uninitialize()})}get(e){return null==this._dataMap?null:this._dataMap.getValue(e)}add(e){if(null==this._dataMap)return null;if(this._dataMap.containsKey(e))return this._dataMap.getValue(e);let t=new e;return t.assemble(this._main),this._dataMap.setValue(e,t),t}}},{"../base/Dictionary":9}],24:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{constructor(){this._main=null,this._dataMgr=null}destroy(){this._dataMgr=null,this._main=null}assemble(e,t){this._main=e,this._dataMgr=t}get main(){return this._main}}},{}],25:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../base/Dictionary");a.default=class{constructor(e,t){this._main=null,this._dataMgr=null,this._viewMap=null,this._main=e,this._dataMgr=t,this._viewMap=new i.default}destroy(){this._main=null,this._dataMgr=null,null!=this._viewMap&&(this._viewMap.forEach((e,t)=>{null!=t&&t.destroy()}),this._viewMap.clear(),this._viewMap=null)}initialize(){this._viewMap.forEach((e,t)=>{null!=t&&t.initialize()})}uninitialize(){this._viewMap.forEach((e,t)=>{null!=t&&t.uninitialize()})}get(e){return null==this._viewMap?null:this._viewMap.getValue(e)}add(e){if(null==this._viewMap)return null;if(this._viewMap.containsKey(e))return this._viewMap.getValue(e);let t=new e;return t.assemble(this._main,this._dataMgr),this._viewMap.setValue(e,t),t}}},{"../base/Dictionary":9}],26:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./MVCDataManager"),n=e("./MVCViewManager"),s=e("./MVCControlManager");a.default=class extends Laya.EventDispatcher{constructor(){super(),this._dataMgr=null,this._viewMgr=null,this._controlMgr=null,this._dataMgr=new i.default(this),this._viewMgr=new n.default(this,this._dataMgr),this._controlMgr=new s.default(this,this._dataMgr,this._viewMgr)}destroy(){null!=this._controlMgr&&(this._controlMgr.destroy(),this._controlMgr=null),null!=this._viewMgr&&(this._viewMgr.destroy(),this._viewMgr=null),null!=this._dataMgr&&(this._dataMgr.destroy(),this._dataMgr=null)}clear(){}initialize(){null!=this._dataMgr&&this._dataMgr.initialize(),null!=this._viewMgr&&this._viewMgr.initialize(),null!=this._controlMgr&&this._controlMgr.initialize()}uninitialize(){null!=this._controlMgr&&this._controlMgr.uninitialize(),null!=this._viewMgr&&this._viewMgr.uninitialize(),null!=this._dataMgr&&this._dataMgr.uninitialize()}update(e){null!=this._controlMgr&&this._controlMgr.update(e)}getData(e){return null==this._dataMgr?null:this._dataMgr.get(e)}addData(e){return null==this._dataMgr?null:this._dataMgr.add(e)}getView(e){return null==this._viewMgr?null:this._viewMgr.get(e)}addView(e){return null==this._viewMgr?null:this._viewMgr.add(e)}getControl(e){return null==this._controlMgr?null:this._controlMgr.get(e)}addControl(e){return null==this._controlMgr?null:this._controlMgr.add(e)}}},{"./MVCControlManager":21,"./MVCDataManager":23,"./MVCViewManager":25}],27:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.RequestError="olympus.event.RequestError",i.EnterRoom="olympus.event.EnterRoom",i.LeaveRoom="olympus.event.LeaveRoom",i.RoomDataChanged="olympus.event.RoomDataChanged",i.GameStartResult="olympus.event.GameStartResult",i.GameStarted="olympus.event.GameStarted",i.GameStopResult="olympus.event.GameStopResult",i.GameStopped="olympus.event.GameStopped",i.FrameTick="olympus.event.FrameTick",i.PlayerEnterRoom="olympus.event.PlayerEnterRoom",i.PlayerLeaveRoom="olympus.event.PlayerLeaveRoom",i.RoomOwnerChanged="olympus.event.RoomOwnerChanged"},{}],28:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./base/Log"),n=e("./base/Request"),s=e("./base/Signature");class o{static init(e,t,a,s,o=!1,l=null){this._gameId=e,this._gameKey=t,this._clientVersion=s,i.default.Debug=o,n.Request.init(e,o,l)}static login(e,t,a){n.Request.post(this.packRequest("login",e),t,a)}static setUserInfo(e,t,a){n.Request.post(this.packRequest("set-user-info",e),t,a)}static setPackData(e,t,a){n.Request.post(this.packRequest("set-pack-data",e),t,a)}static getPackData(e,t,a){n.Request.post(this.packRequest("get-pack-data",e),t,a)}static orderRequest(e,t,a){n.Request.post(this.packRequest("create-order",e),t,a)}static cancelOrderRequest(e,t){n.Request.cancelPost("create-order",e,t)}static closePayRequest(e){n.Request.post(this.packRequest("close-order",e))}static queryStrategy(e,t,a){n.Request.post(this.packRequest("query-strategy",e),t,a)}static cancelQueryStrategy(e,t){n.Request.cancelPost("query-strategy",e,t)}static queryInviteReward(e,t,a){n.Request.post(this.packRequest("query-invite-reward",e),t,a)}static cancelQueryInviteReward(e,t){n.Request.cancelPost("query-invite-reward",e,t)}static takeInviteReward(e,t,a){n.Request.post(this.packRequest("take-invite-reward",e),t,a)}static cancelTakeInviteReward(e,t){n.Request.cancelPost("take-invite-reward",e,t)}static getPromo(e,t,a){n.Request.post(this.packRequest("get-promo",e),t,a)}static useCDKey(e,t,a){n.Request.post(this.packRequest("use-cdkey",e),t,a)}static dailyRankReportBestScore(e,t,a){n.Request.post(this.packRequest("daily-rank-report-best-score",e),t,a)}static dailyRankGetMyRank(e,t,a){n.Request.post(this.packRequest("daily-rank-get-my-rank",e),t,a)}static dailyRankGetPage(e,t,a){n.Request.post(this.packRequest("daily-rank-get-page",e),t,a)}static dailyRankGetHistoryAward(e,t,a){n.Request.post(this.packRequest("daily-rank-get-history-award",e),t,a)}static dailyRankGetLastAward(e,t,a){n.Request.post(this.packRequest("daily-rank-get-last-award",e),t,a)}static dailyRankTakeAward(e){n.Request.post(this.packRequest("daily-rank-take-award",e))}static logPay(e){n.Request.post(this.packRequest("log-pay",e))}static logLoad(e){n.Request.post(this.packRequest("log-load",e))}static logAdLoad(e){n.Request.post(this.packRequest("log-ad-load",e))}static logEnter(e){n.Request.post(this.packRequest("log-enter",e))}static logExit(e){n.Request.post(this.packRequest("log-exit",e))}static logEvent(e){n.Request.post(this.packRequest("log-event",e))}static logOnlineTick(e){n.Request.post(this.packRequest("log-online-tick",e))}static logGameProgress(e){n.Request.post(this.packRequest("log-game-progress",e))}static logPromo(e){n.Request.post(this.packRequest("log-promo",e))}static logPromoResult(e){n.Request.post(this.packRequest("log-promo-result",e))}static packRequest(e,t){return t.cmd=e,t.game_id=this._gameId,t.client_version=this._clientVersion,t.sig=s.default.run(t,this._gameKey),t}}a.default=o,o.E=new Laya.EventDispatcher,o._gameId="",o._gameKey="",o._platform="",o._clientVersion=0},{"./base/Log":29,"./base/Request":30,"./base/Signature":32}],29:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{static log(e,...t){console.log(e,...t)}static error(e,...t){console.error(e,...t)}static debug(e,...t){this.Debug&&console.debug(e,...t)}}a.default=i,i.Debug=!1},{}],30:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../OlympusSDK"),n=e("./Log"),s=e("../OlympusEvent");class o{static init(e,t,a){let i="";i=t?this._debugUrlTemplate:this._urlTemplate,a&&(i=a),this._url=i.replace("{gameid}",e),this._event=new Laya.EventDispatcher}static post(e,t,a){null!=e?console.log("向服务器请求数据",e):console.log("向服务器请求数据错误")}static cancelPost(e,t,a){e&&t&&a&&this._event.off(e,t,a)}static layaRequestPost(e,t){let a=this._url+e,o=new Laya.HttpRequest;o.http.timeout=500,o.once(Laya.Event.COMPLETE,this,t=>{let a=t;if(!t||!a||null==a.code)return n.default.error("wxRequestPost code undefined"+e),i.default.E.event(s.default.RequestError,[1,"request error"]),void i.default.E.event(e,{cmd:e,code:1,message:"request error"});0!=a.code&&(n.default.error("wxRequestPost cmd "+e+"rsp code "+a.code+" msg "+a.message),i.default.E.event(s.default.RequestError,[a.code,a.message])),this._event.event(e,t)}),o.once(Laya.Event.ERROR,this,t=>{n.default.error("layaRequestPost 执行失败 cmd "+e+" "+t),i.default.E.event(s.default.RequestError,[1,"request error"]),this._event.event(e,{cmd:e,code:1,message:"request error"})}),o.send(a,t,"post","json",["Content-Type","application/x-www-form-urlencoded"])}static wxRequestPost(e,t){let a=this,o=this._url+e;Laya.Browser.window.wx.request({url:o,data:t,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},responseType:"text",fail:function(){n.default.error("wxRequestPost 执行失败 cmd "+e),i.default.E.event(s.default.RequestError,[1,"request error"]),a._event.event(e,{cmd:e,code:1,message:"request error"})},success:function(t){let o=t.data;if(!t||!o||null==o.code)return n.default.error("wxRequestPost code undefined"+e),i.default.E.event(s.default.RequestError,[1,"request error"]),void a._event.event(e,{cmd:e,code:1,message:"request error"});0!=o.code&&(n.default.error("wxRequestPost cmd "+e+"rsp code "+o.code+" msg "+o.message),i.default.E.event(s.default.RequestError,[o.code,o.message])),a._event.event(e,t.data)}})}}a.Request=o,o._urlTemplate="https://temple.touchjoy.net/{gameid}/",o._debugUrlTemplate="http://jarekzha-mbp:2001/",o._url="",o._event=null},{"../OlympusEvent":27,"../OlympusSDK":28,"./Log":29}],31:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{static hex_sha256(e){return this.rstr2hex(this.rstr_sha256(this.str2rstr_utf8(e)))}static b64_sha256(e){return this.rstr2b64(this.rstr_sha256(this.str2rstr_utf8(e)))}static any_sha256(e,t){return this.rstr2any(this.rstr_sha256(this.str2rstr_utf8(e)),t)}static hex_hmac_sha256(e,t){return this.rstr2hex(this.rstr_hmac_sha256(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))}static b64_hmac_sha256(e,t){return this.rstr2b64(this.rstr_hmac_sha256(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))}static any_hmac_sha256(e,t,a){return this.rstr2any(this.rstr_hmac_sha256(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),a)}static sha256_vm_test(){return"ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad"==this.hex_sha256("abc").toLowerCase()}static rstr_sha256(e){return this.binb2rstr(this.binb_sha256(this.rstr2binb(e),8*e.length))}static rstr_hmac_sha256(e,t){var a=this.rstr2binb(e);a.length>16&&(a=this.binb_sha256(a,8*e.length));for(var i=Array(16),n=Array(16),s=0;s<16;s++)i[s]=909522486^a[s],n[s]=1549556828^a[s];var o=this.binb_sha256(i.concat(this.rstr2binb(t)),512+8*t.length);return this.binb2rstr(this.binb_sha256(n.concat(o),768))}static rstr2hex(e){try{this.hexcase}catch(e){this.hexcase=0}for(var t,a=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",n=0;n<e.length;n++)t=e.charCodeAt(n),i+=a.charAt(t>>>4&15)+a.charAt(15&t);return i}static rstr2b64(e){try{this.b64pad}catch(e){this.b64pad=""}for(var t="",a=e.length,i=0;i<a;i+=3)for(var n=e.charCodeAt(i)<<16|(i+1<a?e.charCodeAt(i+1)<<8:0)|(i+2<a?e.charCodeAt(i+2):0),s=0;s<4;s++)8*i+6*s>8*e.length?t+=this.b64pad:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>>6*(3-s)&63);return t}static rstr2any(e,t){var a,i,n,s,o=t.length,l=Array(),r=Array(Math.ceil(e.length/2));for(a=0;a<r.length;a++)r[a]=e.charCodeAt(2*a)<<8|e.charCodeAt(2*a+1);for(;r.length>0;){for(s=Array(),n=0,a=0;a<r.length;a++)n=(n<<16)+r[a],n-=(i=Math.floor(n/o))*o,(s.length>0||i>0)&&(s[s.length]=i);l[l.length]=n,r=s}var d="";for(a=l.length-1;a>=0;a--)d+=t.charAt(l[a]);var u=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2)));for(a=d.length;a<u;a++)d=t[0]+d;return d}static str2rstr_utf8(e){for(var t,a,i="",n=-1;++n<e.length;)t=e.charCodeAt(n),a=n+1<e.length?e.charCodeAt(n+1):0,55296<=t&&t<=56319&&56320<=a&&a<=57343&&(t=65536+((1023&t)<<10)+(1023&a),n++),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}static str2rstr_utf16le(e){for(var t="",a=0;a<e.length;a++)t+=String.fromCharCode(255&e.charCodeAt(a),e.charCodeAt(a)>>>8&255);return t}static str2rstr_utf16be(e){for(var t="",a=0;a<e.length;a++)t+=String.fromCharCode(e.charCodeAt(a)>>>8&255,255&e.charCodeAt(a));return t}static rstr2binb(e){for(var t=Array(e.length>>2),a=0;a<t.length;a++)t[a]=0;for(a=0;a<8*e.length;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<24-a%32;return t}static binb2rstr(e){for(var t="",a=0;a<32*e.length;a+=8)t+=String.fromCharCode(e[a>>5]>>>24-a%32&255);return t}static sha256_S(e,t){return e>>>t|e<<32-t}static sha256_R(e,t){return e>>>t}static sha256_Ch(e,t,a){return e&t^~e&a}static sha256_Maj(e,t,a){return e&t^e&a^t&a}static sha256_Sigma0256(e){return this.sha256_S(e,2)^this.sha256_S(e,13)^this.sha256_S(e,22)}static sha256_Sigma1256(e){return this.sha256_S(e,6)^this.sha256_S(e,11)^this.sha256_S(e,25)}static sha256_Gamma0256(e){return this.sha256_S(e,7)^this.sha256_S(e,18)^this.sha256_R(e,3)}static sha256_Gamma1256(e){return this.sha256_S(e,17)^this.sha256_S(e,19)^this.sha256_R(e,10)}static sha256_Sigma0512(e){return this.sha256_S(e,28)^this.sha256_S(e,34)^this.sha256_S(e,39)}static sha256_Sigma1512(e){return this.sha256_S(e,14)^this.sha256_S(e,18)^this.sha256_S(e,41)}static sha256_Gamma0512(e){return this.sha256_S(e,1)^this.sha256_S(e,8)^this.sha256_R(e,7)}static sha256_Gamma1512(e){return this.sha256_S(e,19)^this.sha256_S(e,61)^this.sha256_R(e,6)}static binb_sha256(e,t){var a,i,n,s,o,l,r,d,u,h,c,m,p=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),f=new Array(64);for(e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t,u=0;u<e.length;u+=16){for(a=p[0],i=p[1],n=p[2],s=p[3],o=p[4],l=p[5],r=p[6],d=p[7],h=0;h<64;h++)f[h]=h<16?e[h+u]:this.safe_add(this.safe_add(this.safe_add(this.sha256_Gamma1256(f[h-2]),f[h-7]),this.sha256_Gamma0256(f[h-15])),f[h-16]),c=this.safe_add(this.safe_add(this.safe_add(this.safe_add(d,this.sha256_Sigma1256(o)),this.sha256_Ch(o,l,r)),this.sha256_K[h]),f[h]),m=this.safe_add(this.sha256_Sigma0256(a),this.sha256_Maj(a,i,n)),d=r,r=l,l=o,o=this.safe_add(s,c),s=n,n=i,i=a,a=this.safe_add(c,m);p[0]=this.safe_add(a,p[0]),p[1]=this.safe_add(i,p[1]),p[2]=this.safe_add(n,p[2]),p[3]=this.safe_add(s,p[3]),p[4]=this.safe_add(o,p[4]),p[5]=this.safe_add(l,p[5]),p[6]=this.safe_add(r,p[6]),p[7]=this.safe_add(d,p[7])}return p}static safe_add(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}}a.default=i,i.hexcase=0,i.b64pad="",i.sha256_K=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998)},{}],32:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./Sha256");a.default=class{static run(e,t){let a=Object.keys(e),n=new Array;(n=a.filter(t=>null!=e[t]&&"sig"!=t)).sort();let s=n.map(t=>t+"="+e[t]).join("&");return s+=t,i.default.hex_hmac_sha256(t,s)}}},{"./Sha256":31}],33:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{constructor(){this.cmd="",this.game_id="",this.client_version=0,this.sig=""}}},{}],34:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");a.default=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0}};a.QueryInviteRewardResponseData=class{constructor(){this.invite_user_count=0,this.taken_reward_count=0}};a.TakeInviteRewardRequestData=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0}}},{"./BaseRequestData":33}],35:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");!function(e){e[e.LoadADStepStart=1]="LoadADStepStart",e[e.LoadADStepOver=2]="LoadADStepOver"}(a.LoadAdStep||(a.LoadAdStep={}));a.default=class extends i.default{constructor(){super(...arguments),this.user_id=void 0,this.step=void 0,this.launch_pass_time=0,this.start_pass_time=0,this.platform_code=void 0}}},{"./BaseRequestData":33}],36:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");a.default=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0,this.new=0,this.scene=void 0,this.channel=void 0}};a.LogExitRequestData=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0}}},{"./BaseRequestData":33}],37:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");a.default=class extends i.default{constructor(){super(...arguments),this.user_id=void 0,this.event_id=0}}},{"./BaseRequestData":33}],38:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");a.default=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0,this.game_progress=0}}},{"./BaseRequestData":33}],39:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");!function(e){e[e.LoadStepLaunch=1]="LoadStepLaunch",e[e.LoadStepStartLoadCDN=5]="LoadStepStartLoadCDN",e[e.LoadStepLoadCDNOk=6]="LoadStepLoadCDNOk",e[e.LoadStepPfLoginOk=10]="LoadStepPfLoginOk",e[e.LoadStepSvrLoginOk=20]="LoadStepSvrLoginOk"}(a.LoadStep||(a.LoadStep={}));a.default=class extends i.default{constructor(){super(...arguments),this.step=0,this.pass_time=0,this.new_client=0,this.user_id=0,this.device=0,this.channel=void 0,this.scene=void 0,this.share_uuid=void 0,this.ad_trace_id=void 0,this.ad_id=void 0}}},{"./BaseRequestData":33}],40:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");a.default=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0}}},{"./BaseRequestData":33}],41:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");!function(e){e[e.ADShow=1]="ADShow",e[e.ADClick=2]="ADClick",e[e.ADSuccess=3]="ADSuccess",e[e.ShareShow=11]="ShareShow",e[e.ShareClick=12]="ShareClick",e[e.ShareSuccess=13]="ShareSuccess"}(a.PayAction||(a.PayAction={}));a.default=class extends i.default{constructor(){super(...arguments),this.user_id=0,this.pay_id=0,this.action=void 0,this.share_page_id=0,this.ad_time=0}}},{"./BaseRequestData":33}],42:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");a.default=class extends i.default{constructor(){super(...arguments),this.device=0,this.code="",this.channel=void 0,this.scene=void 0,this.share_uuid=void 0,this.ad_trace_id=void 0,this.ad_id=void 0,this.new_client=void 0}};a.PaySeqInfo=class{constructor(){this.id=0,this.seq=""}};a.PayInfo=class{constructor(){this.id=0,this.seq_id=0}};a.LoginResponseData=class{constructor(){this.new=!1,this.account="",this.user_id=0,this.token="",this.audit=!0,this.cheat_click=!0,this.default_share_uuid="",this.pay=null,this.pay_seq=null,this.share_page=null}}},{"./BaseRequestData":33}],43:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");a.default=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0,this.pay_id=0}};a.OrderResponseData=class{constructor(){this.pay_id=0,this.strategy="",this.order_id=0,this.share_uuid="",this.share_page=null}};a.ClosePayRequestData=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0,this.pay_id=0,this.strategy="",this.order_id=0,this.result=0,this.ad_over=0,this.ad_over_code=void 0,this.share_uuid=""}}},{"./BaseRequestData":33}],44:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");a.default=class extends i.default{constructor(){super(...arguments),this.token=""}};a.PromoData=class{};a.LogPromoRequestData=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=void 0,this.promo_id=void 0,this.promo_click_uuid=void 0,this.game_progress=void 0}};a.LogPromoResultRequestData=class extends i.default{constructor(){super(...arguments),this.token="",this.promo_click_uuid=void 0,this.result=void 0}},function(e){e[e.Ok=1]="Ok",e[e.Cancel=2]="Cancel"}(a.PromoResult||(a.PromoResult={}))},{"./BaseRequestData":33}],45:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");a.SetPackDataRequestData=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0,this.pack_data="",this.version=0}};a.GetPackDataRequestData=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0,this.version=0}};a.GetPackDataResponseData=class{constructor(){this.pack_data="",this.version=0}}},{"./BaseRequestData":33}],46:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BaseRequestData");a.QueryStrategyRequestData=class extends i.default{constructor(){super(...arguments),this.token="",this.user_id=0}};a.QueryStrategyResponseData=class{constructor(){this.strategy=void 0}},function(e){e[e.Client=0]="Client",e[e.PriorAD=1]="PriorAD",e[e.ForceAD=2]="ForceAD"}(a.Strategy||(a.Strategy={}))},{"./BaseRequestData":33}],47:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../base/Debug");a.default=class{constructor(){this._stack=new Array}destroy(){this.clearState(),this._stack=null}pushState(e){null!=e?(this._stack.length>0&&this._stack[this._stack.length-1].onStateOverride(),this._stack.push(e),e.onStateEnter()):i.default.log("The push state is null")}popState(){if(0==this._stack.length)return null;let e=this._stack.pop();return e.onStateLeave(),this._stack.length>0&&this._stack[this._stack.length-1].onStateResume(),e}changeState(e){if(null==e)return i.default.log("The change state is null"),null;let t=null;return this._stack.length>0&&(t=this._stack.pop()).onStateLeave(),this._stack.push(e),e.onStateEnter(),t}setState(e){if(null!=e){for(;this._stack.length>0;)this._stack.pop().onStateLeave();this._stack.push(e),e.onStateEnter()}else i.default.log("The set state is null")}topState(){return this._stack.length>0?this._stack[this._stack.length-1]:null}clearState(){let e=new Array;for(;this._stack.length>0;){let t=this._stack.pop();t.onStateLeave(),e.push(t)}return e}get count(){return this._stack.length}update(){this._stack.forEach(e=>{e.update()})}}},{"../base/Debug":8}],48:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.CDN="",i.DynamicConfigUrl=i.CDN+"DynamicConfig.json",i.SceneUrls=["res/scene/Zombie.lh","res/scene/Effect.lh","res/scene/Objects.lh","res/scene/WeaponParticle.lh"],i.UIUrls=["res/atlas/index.atlas","res/atlas/game.atlas","res/atlas/activity.atlas","res/atlas/weapon.atlas","res/atlas/anim.atlas"],i.ConfigUrls=["res/data/weapon.json","res/data/zombie.json","res/data/boss.json","res/data/scene.json","res/data/level.json","res/data/chapter.json","res/data/buff.json","res/data/func.json","res/data/turn.json","res/data/talk.json","res/data/illustrated.json"],i.Prefabs=["prefab/sight1.json","prefab/shootArrow.json","prefab/blood.json"],i.FontNames=["yazi","brownFont","btnFont"]},{}],49:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.INVAIL=0]="INVAIL",e[e.REWARD=1]="REWARD"}(a.EnumFunc||(a.EnumFunc={})),function(e){e[e.INVAIL=0]="INVAIL",e[e.BUFF=1]="BUFF"}(a.EnumReward||(a.EnumReward={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.CAR=1]="CAR"}(a.EnumBoss||(a.EnumBoss={})),function(e){e[e.INVAIL=0]="INVAIL",e[e.RELOAD=1]="RELOAD",e[e.CARTRIDGE=2]="CARTRIDGE",e[e.ATTACK=3]="ATTACK",e[e.ADD_HP=4]="ADD_HP",e[e.INFINITE_BULLET=5]="INFINITE_BULLET",e[e.SPEED_DOWN=6]="SPEED_DOWN",e[e.FILLUP=7]="FILLUP"}(a.EnumBuff||(a.EnumBuff={}))},{}],50:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./ResConfig"),n=e("../game/state/LoadingState");class s{static initData(){this.weapons=Laya.loader.getRes(i.default.ConfigUrls[0]),this.zombies=Laya.loader.getRes(i.default.ConfigUrls[1]),this.bosss=Laya.loader.getRes(i.default.ConfigUrls[2]),this.scenes=Laya.loader.getRes(i.default.ConfigUrls[3]),this.levels=Laya.loader.getRes(i.default.ConfigUrls[4]),this.chapters=Laya.loader.getRes(i.default.ConfigUrls[5]),this.buffs=Laya.loader.getRes(i.default.ConfigUrls[6]),this.funcs=Laya.loader.getRes(i.default.ConfigUrls[7]),this.turns=Laya.loader.getRes(i.default.ConfigUrls[8]),this.levelTalks=Laya.loader.getRes(i.default.ConfigUrls[9]),this.illustrateds=Laya.loader.getRes(i.default.ConfigUrls[10])}static getWeapon(e){if(e<=0||e>this.weapons.length)return null;let t=this.weapons.length;for(let a=0;a<t;a++){const t=this.weapons[a];if(t.level==e)return t}return null}static getZombie(e){let t=this.zombies.length;for(let a=0;a<t;a++){const t=this.zombies[a];if(t.id==e)return t}return null}static getBoss(e){let t=this.bosss.length;for(let a=0;a<t;a++){const t=this.bosss[a];if(t.id==e)return t}return null}static getWeaponIcon(e){let t=s.getWeapon(e);if(null!=t){let e=null!=t.type?t.type:"";return"weapon/"+t.resName+e+".png"}return""}static getBigWeaponIcon(e){let t=this.getWeapon(e),a="";if(null!=t){let e=null!=t.type?t.type:"";a=n.default.cdnPic+t.resName+e+".png"}return a}static getRadarIconByLevel(e){let t=this.getWeapon(e),a="";return null!=t&&(a=n.default.cdnRadar+t.resRadar+".png"),a}static getLevel(e){let t=this.levels.length;for(let a=0;a<t;a++){const t=this.levels[a];if(t.id==e)return t}return this.levels[t-1]}static getChapter(e){let t=this.chapters.length;for(let a=0;a<t;a++){const t=this.chapters[a];if(t.id==e)return t}return this.chapters[t-1]}static getChapterByLevel(e){let t=e-1,a=Math.floor(t/s.LevelNumOfChapter)+1;return this.getChapter(a)}static getMaxChapterID(){return this.chapters[length-1].id}static getMaxWeaponLevel(){return this.weapons.length-1}static getScene(e){let t=this.scenes.length;for(let a=0;a<t;a++){const t=this.scenes[a];if(t.id==e)return t}return this.scenes[0]}static getBuff(e){let t=this.buffs.length;for(let a=0;a<t;a++){const t=this.buffs[a];if(t.id==e)return t}return null}static getFunc(e){let t=this.funcs.length;for(let a=0;a<t;a++){const t=this.funcs[a];if(t.id==e)return t}return null}static getTalk(e){let t=this.levelTalks.length;for(let a=0;a<t;a++){const t=this.levelTalks[a];if(t.levelId==e)return t.talk&&t.talk.length>0?t:null}return null}static getIllustrated(e){let t=this.illustrateds.length;for(let a=0;a<t;a++){const t=this.illustrateds[a];if(t.id==e)return t}return null}}a.default=s,s.PER_FRAME_TIME=1e3/60,s.InitLevel=1,s.InitCoin=1e3,s.InitDiamond=100,s.AccRate=2,s.MaxLife=100,s.LevelNumOfChapter=5,s.WeaponLevelUpPay=4,s.ChickenID=8,s.GoldChickenID=11,s.BonusTimes=2,s.BonusUnlockLevel=6,s.AppendMyProgramDiamonds=300,s.CustomerServiceDiamonds=10,s.MaxZombieNum=8,s.MaxInviteFriendNum=5,s.InviteDiamonds=300,s.BonusNormalDiamonds=1,s.BonusGoldDiamonds=3,s.shareDatas=[{id:0,title:"僵尸来袭！弹药补给已到位！努力活下来！",image_url:i.default.CDN+"share/2019101601.png"}],s.shareTips=[{title:"系统提示",text:"分享失败，请分享到微信群",cancel_text:"退出",sure_text:"分享到群"},{title:"分享失败",text:"未分享到微信群",cancel_text:"退出",sure_text:"分享到群"},{title:"系统提示",text:"分享到不同微信群，才能获得奖励",cancel_text:"含泪拒绝",sure_text:"领取奖励"},{title:"提示",text:"分享到群就能立即获得奖励",cancel_text:"含泪拒绝",sure_text:"立即领奖"},{title:"系统提示",text:"已分享过该群，请换个群分享",cancel_text:"退出",sure_text:"换群分享"},{title:"系统提示",text:"由于网络原因，分享失败，请重试",cancel_text:"含泪拒绝",sure_text:"重新分享"},{title:"温馨提示",text:"已经分享过该群，请换群分享",cancel_text:"含泪拒绝",sure_text:"再试一次"},{title:"系统提示",text:"每个群每天只能分享一次，请换群重试",cancel_text:"含泪拒绝",sure_text:"换群分享"}],s.zeroShareTemplate={title:"提示",text:"",cancel_text:"取消",sure_text:"去分享"},s.weapons=null,s.zombies=null,s.bosss=null,s.scenes=null,s.levels=null,s.chapters=null,s.buffs=null,s.funcs=null,s.turns=null,s.levelTalks=null,s.illustrateds=null},{"../game/state/LoadingState":168,"./ResConfig":48}],51:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.SHARE=1]="SHARE",e[e.AD=2]="AD",e[e.FORCE_SHARE=3]="FORCE_SHARE",e[e.FORCE_AD=4]="FORCE_AD"}(a.EnumPay||(a.EnumPay={}))},{}],52:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./state/StateModule"),n=e("../base/module/ModuleCenter"),s=e("./data/GameDataModule"),o=e("./common/ui/UIModule"),l=e("./network/NetworkModule");class r extends n.default{constructor(){super(),this.add(s.default),this.add(l.default),this.add(o.default),this.add(i.default)}static get instance(){return r.create(),r._instance}static create(){null==r._instance&&(r._instance=new r)}}a.default=r,r._instance=null},{"../base/module/ModuleCenter":19,"./common/ui/UIModule":70,"./data/GameDataModule":77,"./network/NetworkModule":166,"./state/StateModule":171}],53:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../ui/layaMaxUI"),n=e("../../base/base/MathUtil"),s=e("../../base/base/Pool"),o=e("./ui/UIUtil");class l extends i.ui.effect.AwardEeffectUI{constructor(){super(),this.isCoin=!1,this.overFunc=null}static createAwardEffect(e,t,a,i,r,d){let u=n.default.randomInt(10,20);for(let h=0;h<u;h++){let u=s.default.get(l.poolName,l),h=n.default.rectangleRandom(e,200,160);u.pos(e.x,e.y),u.overFunc=d,u.zOrder=9,u.isCoin=r,a?o.default.addToStage(u):i.addChild(u);let c=u.imgDiamond;if(r){let e=n.default.randomInt(0,35);u.animCoin.play(e,!0),u.animCoin.interval=l.AnimInterval,c=u.imgCoin}else{let e=n.default.randomInt(0,70);u.animDiamond.play(e,!0),u.animDiamond.interval=l.AnimInterval}u.imgDiamond.visible=!r,u.imgCoin.visible=r,u.playTX(c,h,t)}}destroy(){}clear(){this.removeSelf()}recover(){null!=this.overFunc&&this.overFunc.recover(),Laya.Tween.clearAll(this),Laya.Tween.clearAll(this.imgCoin),Laya.Tween.clearAll(this.imgDiamond),this.animCoin.stop(),this.animDiamond.stop(),this.imgCoin.rotation=0,this.imgDiamond.rotation=0,this.imgCoin.scale(1,1),this.imgDiamond.scale(1,1),this.zOrder-=1e3,this.removeSelf(),s.default.recover(l.poolName,this)}playTX(e,t,a){e.rotation=n.default.random(0,360),this.zOrder+=1e3;let i={x:t.x,y:t.y},s=n.default.random(300,400),o=Laya.Ease.circOut;Laya.Tween.to(this,i,s,o,null,0,!0,!0);let l={x:a.x,y:a.y},r=n.default.random(400,600),d=Laya.Ease.circIn,u=Laya.Handler.create(this,this.awardAnimOver);Laya.Tween.to(this,l,r,d,u,s,!1,!0)}awardAnimOver(){null!=this.overFunc&&this.overFunc.run(),this.recover()}}a.default=l,l.poolName="award_effect",l.AnimInterval=1e3/45},{"../../base/base/MathUtil":11,"../../base/base/Pool":12,"../../ui/layaMaxUI":315,"./ui/UIUtil":73}],54:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../ui/layaMaxUI"),n=e("../../base/base/Pool"),s=e("./ui/UIUtil");class o extends i.ui.effect.BubbleUI{clear(){}static createBubble(){let e=n.default.get(o.poolName,o);return e.initBubble(),e.zOrder=1e4,s.default.addToStage(e),e.x=Laya.stage.mouseX,e.y=Laya.stage.mouseY,e}initBubble(){this.animBubble.on(Laya.Event.END,this,this.onBubbleAnimOver),this.animBubble.play(0,!1)}onBubbleAnimOver(){this.animBubble.loop||this.recover()}recover(){this.animBubble.off(Laya.Event.COMPLETE,this,this.onBubbleAnimOver),this.removeSelf(),n.default.recover(o.poolName,this)}}a.default=o,o.poolName="BubbleEffect"},{"../../base/base/Pool":12,"../../ui/layaMaxUI":315,"./ui/UIUtil":73}],55:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../ui/layaMaxUI"),n=e("../../base/base/Pool"),s=e("../../base/base/MathUtil"),o=e("./ui/UIUtil");class l extends i.ui.effect.CoinEffectUI{constructor(){super(),this._xMoveSpeed=0,this._yMoveSpeed=0,this._gravity=.5}static createCoinEffect(e,t,a){let i=n.default.get(l.poolName,l);i.pos(e.x,e.y),a.addChild(i),i.zOrder=9,i.playTX(t,0)}static earnCoinEffect(e,t,a){let i=n.default.getPoint();i.x=-44,i.y=-80;let s=n.default.getPoint();s.x=-24,s.y=-88;let o=n.default.getPoint();o.x=0,o.y=-97;let r=n.default.getPoint();r.x=16,r.y=-100;let d=n.default.getPoint();d.x=24,d.y=-88;let u=new Array;u.push(i),u.push(s),u.push(o),u.push(r),u.push(d);for(let t=0;t<5;t++){let i=n.default.get(l.poolName,l);i.pos(e.x,e.y),a.addChild(i),i.zOrder=9,i.imgCoin.skin="anim/img_coin1.png";let s=!0;4==t&&(s=!1);let o=u[t];o.x+=e.x,o.y+=e.y,i.earnMoneyAnim(o,s)}}static createCoinParabola(e){let t=s.default.randomInt(10,20);for(let a=0;a<t;a++){let t=50*a,i=n.default.get(l.poolName,l);i.pos(e.x,e.y),o.default.addToStage(i),i.zOrder=9,i.playParabolaUp(t)}}destroy(){}clear(){this.removeSelf()}recover(){Laya.Tween.clearAll(this),Laya.Tween.clearAll(this.imgCoin),this.zOrder-=1e3,this.animCoin.stop(),this.scale(1,1),this.alpha=1,this.visible=!0,this.removeSelf(),n.default.recover(l.poolName,this)}playTX(e,t){this.zOrder+=1e3,this.animCoin.interval=l.AnimInterval,this.animCoin.play(0,!0);let a=this.y+60;this.y=a-120;let i={y:a};Laya.Tween.to(this,i,1e3,Laya.Ease.bounceOut,null,0+t,!0,!0);let n={x:e.x,y:e.y};Laya.Tween.to(this,n,500,Laya.Ease.linearNone,null,1500+t,!1,!0);Laya.Tween.to(this.imgCoin,{scaleX:2,scaleY:2},250,Laya.Ease.linearNone,null,1500+t,!0,!0);let s=Laya.Handler.create(this,this.recover);Laya.Tween.to(this.imgCoin,{scaleX:1,scaleY:1},250,Laya.Ease.linearNone,s,1750+t,!1,!0)}playFreeDownTX(e,t){this.animCoin.interval=l.AnimInterval,this.animCoin.play(0,!0),this.zOrder+=1e3;let a=this.y+60;this.y=a-120;let i={y:a},n=s.default.random(500,1500);this.alpha=0,Laya.Tween.to(this,i,n,Laya.Ease.bounceOut,null,t,!0,!0),Laya.Tween.to(this,{alpha:1},50,Laya.Ease.linearNone,null,t,!1,!0);let o=!1,r=this.imgCoin.x,d=s.default.random(0,72),u={x:r+d};Math.random()>.5&&(o=!0,u={x:r-d}),Laya.Tween.to(this.imgCoin,u,n,Laya.Ease.linearNone,null,t,!1,!0);let h={x:e.x,y:e.y};Laya.Tween.to(this,h,500,Laya.Ease.linearNone,null,n+200+t,!1,!0);let c={scaleX:1.5,scaleY:1.5,x:r};Laya.Tween.to(this.imgCoin,c,250,Laya.Ease.linearNone,null,n+200+t,!1,!0);let m=Laya.Handler.create(this,this.recover);Laya.Tween.to(this.imgCoin,{scaleX:1,scaleY:1},250,Laya.Ease.linearNone,m,n+450+t,!1,!0)}playParabolaUp(e){this.visible=!1,Laya.timer.once(e,this,this.initParabola)}initParabola(){this.visible=!0,this._xMoveSpeed=s.default.random(-2,2),this._yMoveSpeed=s.default.random(-6,-8),this.animCoin.interval=.5*l.AnimInterval,this.animCoin.play(0,!0),this.zOrder+=1e3,this.rotation=90,Laya.timer.once(3e3,this,this.recoverParabo),Laya.timer.loop(1,this,this.loopMove)}recoverParabo(){Laya.timer.clear(this,this.initParabola),Laya.timer.clear(this,this.recoverParabo),Laya.timer.clear(this,this.loopMove),this.zOrder-=1e3,this.animCoin.stop(),this.rotation=0,this.removeSelf(),n.default.recover("CoinEffect",this)}loopMove(){this.y+=this._yMoveSpeed,this._yMoveSpeed+=this._gravity,this.x+=this._xMoveSpeed}earnMoneyAnim(e,t){let a=n.default.getPoint();t?(a.x=e.x-s.default.random(5,10),a.y=e.y+s.default.random(5,10)):(a.x=e.x+s.default.random(5,15),a.y=e.y+s.default.random(5,10));let i={x:e.x,y:e.y},o=Laya.Ease.circOut;Laya.Tween.to(this,i,300,o,null,null,!0,!0);let l={x:a.x,y:a.y,alpha:0},r=Laya.Ease.linearNone,d=Laya.Handler.create(this,this.recover);Laya.Tween.to(this,l,500,r,d,300,!1,!0)}get coinImg(){return this.imgCoin}}a.default=l,l.poolName="coinEffect",l.AnimInterval=1e3/45},{"../../base/base/MathUtil":11,"../../base/base/Pool":12,"../../ui/layaMaxUI":315,"./ui/UIUtil":73}],56:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../ui/layaMaxUI"),n=e("../../base/base/MathUtil");a.default=class extends i.ui.effect.LightEffectUI{constructor(){super(),this._bgLights=null,this._fgLights=null}destroy(){if(Laya.Tween.clearAll(this.boxBg),Laya.Tween.clearAll(this.boxFg),null!=this._bgLights){for(let e of this._bgLights)null!=e&&this.removeImg(e);this._bgLights=null}if(null!=this._fgLights){for(let e of this._fgLights)null!=e&&this.removeImg(e);this._fgLights=null}}clear(){this.removeSelf()}initImg(){this._fgLights=new Array,this._bgLights=new Array;for(let e=0;e<9;e++){let t=this.createImg(),a=n.default.random(40*e,40*(e+1));t.rotation=a,t.pos(100,100),this.boxBg.addChild(t),this._bgLights.push(t);let i=this.createImg(),s=n.default.random(40*e,40*(e+1));i.rotation=s,i.pos(100,100),this.boxFg.addChild(i),this._fgLights.push(i)}}playAnim(){this.playFgRotateAnim(),this.playBgRotateAnim()}playFgRotateAnim(){let e=n.default.random(1.1,1.5),t=n.default.random(.8,1);if(null!=this._fgLights)for(let a of this._fgLights)null!=a&&this.fgImgAnim(a,e,t);this.boxFg.rotation=0;let a=Laya.Handler.create(this,this.playFgRotateAnim);Laya.Tween.to(this.boxFg,{rotation:60},1800,null,a,0,!0,!0)}playBgRotateAnim(){let e=n.default.random(2,3),t=n.default.random(.6,.8);if(null!=this._bgLights)for(let a of this._bgLights)null!=a&&this.bgImgAnim(a,e,t);this.boxBg.rotation=0;let a=Laya.Handler.create(this,this.playBgRotateAnim);Laya.Tween.to(this.boxBg,{rotation:-30},2100,null,a,300,!0,!0)}fgImgAnim(e,t,a){e.scaleX=t,e.scaleY=0;let i={scaleY:a},n=Laya.Ease.circOut;Laya.Tween.to(e,i,300,n,null,0,!0,!0);let s=Laya.Ease.linearNone;Laya.Tween.to(e,{scaleX:0},1e3,s,null,300,!1,!0)}bgImgAnim(e,t,a){e.scaleX=t,e.scaleY=0;let i={scaleY:a},n=Laya.Ease.circOut;Laya.Tween.to(e,i,600,n,null,0,!0,!0);let s=Laya.Ease.linearNone;Laya.Tween.to(e,{scaleX:0},1500,s,null,600,!1,!0)}createImg(){let e=new Laya.Image("index/img_light_bar.png");return e.anchorX=.5,e.anchorY=1,e}removeImg(e){null!=e&&(Laya.Tween.clearAll(e),e.removeSelf(),e.destroy())}}},{"../../base/base/MathUtil":11,"../../ui/layaMaxUI":315}],57:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../ui/layaMaxUI"),n=e("../../base/base/Pool"),s=e("./ui/UIUtil");class o extends i.ui.common.NoticeUI{constructor(){super()}destroy(){super.destroy()}clear(){}static show(e){let t=n.default.get("Notice",o);t.zOrder=1e3,s.default.addToStage(t),t.setData(e)}setData(e){if(null==this)return void this.onDisappear();this.tfNotice.text=e;let t=199;null!=this.tfNotice.textField&&(t=this.tfNotice.textField.textWidth),this.tfNotice.width=t;let a=t+40;a=a<200?200:a,this.imgBG.width=a,this.width=a,this.x=(Laya.stage.width-this.width*this.scaleX)/2,this.y=(Laya.stage.height-this.height*this.scaleY)/2,this.alpha=1,Laya.Tween.to(this,{alpha:1,y:this.y-60},200,null,Laya.Handler.create(this,this.onAppear))}onAppear(){Laya.Tween.to(this,{y:this.y-60},600,null,Laya.Handler.create(this,this.onWaitDisappear),600)}onWaitDisappear(){Laya.Tween.to(this,{alpha:0,y:this.y-60},300,null,Laya.Handler.create(this,this.onDisappear))}onDisappear(){null!=this&&(n.default.recover("Notice",this),this.removeSelf())}}a.default=o},{"../../base/base/Pool":12,"../../ui/layaMaxUI":315,"./ui/UIUtil":73}],58:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../ui/layaMaxUI"),n=e("../../base/base/Pool"),s=e("./ui/UIUtil");class o extends i.ui.effect.TipUI{constructor(){super()}destroy(){super.destroy()}clear(){}static show(e,t){let a=n.default.get("Tip",o);s.default.addToStage(a),a.zOrder=1e4,a.pos(t.x,t.y-50),a.tipAnim(e)}tipAnim(e){this.tfTip.text=e,e.length>6?this.imgBG.width=10*(e.length-6)+120:this.imgBG.width=120;let t={y:this.y-30},a=Laya.Ease.circOut,i=Laya.Handler.create(this,this.tipAnimOver);Laya.Tween.to(this,t,1e3,a,i,0,!0,!0)}tipAnimOver(){null!=this&&(n.default.recover("Tip",this),this.removeSelf())}}a.default=o},{"../../base/base/Pool":12,"../../ui/layaMaxUI":315,"./ui/UIUtil":73}],59:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{static ScaleUpOut(e,t,a=400,i=0){e.scale(0,0);let n=Laya.Ease.backOut;Laya.Tween.to(e,{scaleX:1,scaleY:1},a,n,t,i,!0,!0)}static PosMoveUpOut(e){let t=e.y;e.y=t+50;let a={y:t},i=Laya.Ease.circOut;Laya.Tween.to(e,a,400,i,null,0,!0,!0)}static CenterMoveUpOut(e){let t=e.centerY;e.centerY=t+50;let a={centerY:t},i=Laya.Ease.circOut;Laya.Tween.to(e,a,400,i,null,0,!0,!0)}static CenterMoveDownIn(e){let t=e.centerY+50,a=t.centerY,i={centerY:t},n=Laya.Ease.circIn;Laya.Handler.create(this,this.CenterMoveDownInOver,[e,a]),Laya.Tween.to(e,i,400,n,null,0,!0,!0)}static CenterMoveDownInOver(e,t){e.centerY=t}static ScaleUpCirOut(e,t){let a=Laya.Ease.circOut;Laya.Tween.to(e,{scaleX:1,scaleY:1},400,a,t,0,!0,!0)}static ScaleuDownCirIn(e,t){let a=Laya.Ease.circIn;Laya.Tween.to(e,{scaleX:0,scaleY:0},400,a,t,0,!0,!0)}static ScaleDownIn(e,t){e.scale(1,1);let a=Laya.Ease.backIn;Laya.Tween.to(e,{scaleX:0,scaleY:0},400,a,t,0,!0,!0)}}},{}],60:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/base/MathUtil");a.default=class extends Laya.Image{constructor(){super(),this.directionX=0,this.speed=0,this.angle=0,this.lift=0,this.maxLift=0,this.initialScale=0,this.scaleSpeed=.05,this.speedScale=0,this._skinUrl=["game/img_chip0.png","game/img_chip1.png"]}destroy(){this.clear(),super.destroy()}clear(){this.removeSelf()}setData(){this.anchorX=.5,this.anchorY=.5,this.initialScale=i.default.random(.1,1),this.scale(this.initialScale,this.initialScale),this.speed=i.default.randomInt(20,25),this.skin=this._skinUrl[i.default.randomInt(0,this._skinUrl.length-1)],this.alpha=0,this.lift=i.default.randomInt(1,3),this.maxLift=this.lift,this.angle=0,this.directionX=Math.random()>.5?-1:1,this.directionX>0?this.x=i.default.randomInt(-50,50):this.x=i.default.randomInt(700,800),this.y=i.default.randomInt(-250,1e3)}}},{"../../../base/base/MathUtil":11}],61:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./Ribbon"),n=e("../../../base/base/Pool");class s extends Laya.Sprite{constructor(){super(),this.MAX_CHIP=50,this._ribbons=null,this.isBegin=!0,this._ribbons=new Array,Laya.timer.frameLoop(1,this,this.onLoop)}static playRibbon(e,t){let a=new s;t.addChild(a),a.isBegin=!0,a.creatRibbon(e)}destory(){Laya.timer.clear(this,this.onLoop),this._ribbons.forEach(e=>{n.default.recover("Ribbon",e)}),this._ribbons.splice(0,this._ribbons.length),this._ribbons=null,this.removeSelf(),super.destroy()}onLoop(){if(this._ribbons.length<=0&&!this.isBegin)this.destory();else for(let t=0;t<this._ribbons.length;){var e=this._ribbons[t];if(null!=e){if(e.lift>0)return e.alpha=(e.maxLift-e.lift)/e.maxLift,void e.lift--;e.alpha=1,e.x+=e.directionX*Math.cos(e.angle/180*Math.PI)*(e.speed*e.speedScale),e.y+=Math.sin(e.angle/180*Math.PI)*e.speed,e.angle<90?e.angle+=1:e.angle=90,(e.scaleX<0||e.scaleX>e.initialScale)&&(e.scaleSpeed=-e.scaleSpeed),e.scaleX-=e.scaleSpeed,e.rotation+=5,e.y>2e3?(n.default.recover("Ribbon",e),this._ribbons.splice(t,1)):t++}else this._ribbons.splice(t,1)}}creatRibbon(e){for(let t=0;t<e;t++){let e=this.createChip();e.setData(),e.speedScale=.5,this.addChild(e),this._ribbons.push(e)}this.isBegin=!1}createChip(){if(this._ribbons.length>=this.MAX_CHIP){let e=this._ribbons.splice(0,1)[0];return e.clear(),e}return n.default.get("Ribbon",i.default)}}a.default=s},{"../../../base/base/Pool":12,"./Ribbon":60}],62:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/base/Dictionary");a.default=class{constructor(){this._actionDic=new i.default,this._curAnim=null}registerAnim(e,t){null==this._actionDic.getValue(t)&&(this._actionDic.setValue(t,e),e.setID(t))}destroy(){null!=this._curAnim&&(this._curAnim.onStop(),this._curAnim=null);for(let e of this._actionDic.values)e.onDestroy();this._actionDic.clear()}changeAnim(e){null!=this._curAnim&&(this._curAnim.onStop(),this._curAnim=null);let t=this.getAnim(e);null!=t&&(this._curAnim=t,this._curAnim.onPlay())}getAnim(e){return this._actionDic.getValue(e)}get curAnim(){return this._curAnim}}},{"../../../base/base/Dictionary":9}],63:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/base/MathUtil");a.default=class extends Laya.Image{constructor(){super(),this.radian=0,this.speedRadius=0,this.life=0,this.rotateSpeed=0,this.initLife=0,this.radius=0,this.initScale=0}destroy(){this.clear(),super.destroy()}clear(){this.removeSelf()}setData(e){this.skin="index/img_smoke.png",this.initScale=.3*Math.random()+.1,this.scale(this.initScale,this.initScale),this.anchorX=this.anchorY=.5,this.speedRadius=.05*-Math.random(),this.rotateSpeed=1*Math.random(),this.radian=Math.random()*Math.PI*2,this.life=i.default.randomInt(50,80),this.initLife=this.life}}},{"../../../base/base/MathUtil":11}],64:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.Min=1]="Min",e[e.Max=7]="Max",e[e.Red=1]="Red",e[e.Orange=2]="Orange",e[e.Yellow=3]="Yellow",e[e.Green=4]="Green",e[e.Blue=5]="Blue",e[e.Indigo=6]="Indigo",e[e.Purple=7]="Purple"}(a.ESmoke||(a.ESmoke={}))},{}],65:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./Smoke"),n=e("./SmokeDefine"),s=e("../../../base/base/MathUtil"),o=e("../ui/UIUtil");class l extends Laya.Sprite{constructor(){super(...arguments),this._smokes=null}static createEffect(e){let t=l.getSmokeEffect();o.default.addToStage(t),t.pos(e.x,e.y);let a=s.default.randomInt(20,60);t.init(),t.addChip(a),t.zOrder=910}static getSmoke(){return 0==this.smokePool.length?new i.default:this.smokePool.pop()}static recoverSmoke(e){null!=e&&(e.clear(),this.smokePool.push(e))}static getSmokeEffect(){return 0==this.smokeEffectPool.length?new l:this.smokeEffectPool.pop()}static recoverSmokeEffect(e){null!=e&&(e.clear(),this.smokeEffectPool.push(e))}clear(){null!=this&&this.removeSelf()}recover(){null!=this&&(Laya.timer.clear(this,this.onLoop),this._smokes.forEach(e=>{null!=e&&l.recoverSmoke(e)}),this._smokes.splice(0,this._smokes.length),this._smokes=null,l.recoverSmokeEffect(this))}init(){this._smokes=new Array,Laya.timer.frameLoop(1,this,this.onLoop)}onLoop(){if(null!=this._smokes){for(var e=0;e<this._smokes.length&&0!=this._smokes.length;){var t=this._smokes[e];if(null!=t){if(t.radius+=t.speedRadius,t.radius<0&&(t.radius=0),t.x+=Math.cos(t.radian)*t.radius,t.y+=Math.sin(t.radian)*t.radius,t.rotation+=t.rotateSpeed,t.life<=30){let e=t.initScale*t.life/30;t.scale(e,e)}t.life--,t.life<=0?(l.recoverSmoke(t),this._smokes.splice(e,1)):e++}else this._smokes.splice(e,1)}0==this._smokes.length&&this.recover()}}addChip(e){let t=s.default.randomInt(10,20);for(let e=0;e<t;e++){let e=s.default.randomInt(n.ESmoke.Min,n.ESmoke.Max),t=l.getSmoke();if(null==t)continue;let a=Math.random()*Math.PI*2,i=20*Math.random();t.x=Math.cos(a)*i,t.y=Math.sin(a)*i,t.radius=3*Math.random()+1,t.alpha=1,t.setData(e),this.addChild(t),this._smokes.push(t)}}}a.default=l,l.MAX_SMOKE=80,l.smokePool=new Array,l.smokeEffectPool=new Array},{"../../../base/base/MathUtil":11,"../ui/UIUtil":73,"./Smoke":63,"./SmokeDefine":64}],66:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCData");a.default=class extends i.default{constructor(){super(...arguments),this.openParamClass=null,this.isOpened=!1,this.isLoading=!1,this.isLoaded=!1}}},{"../../../base/mvc/MVCData":22}],67:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./UIEvent"),n=e("../../../base/base/Dictionary"),s=e("./UIModule"),o=e("../../../base/base/Debug");a.default=class{constructor(){this._uis=null,this._uis=new n.default}destroy(){if(null!=this._uis)for(var e=0;e<this._uis.values.length;e++){var t=this._uis.values[e];null!=t&&t.destroy()}}openUI(e){let t=this._uis.getValue(e);return null==t?(t=new e,this._uis.setValue(e,t),t.open()):o.default.log("UI已打开："+e.prototype.constructor.name),t}closeUI(e){let t=this._uis.getValue(e);null!=t?(s.default.instance.event(i.default.CLOSE,t),t.close(),t.destroy(),this._uis.remove(e)):o.default.log("要关闭的UI未打开："+e.prototype.constructor.name)}isOpen(e){return this._uis.containsKey(e)}getUI(e){return this._uis.getValue(e)}}},{"../../../base/base/Debug":8,"../../../base/base/Dictionary":9,"./UIEvent":69,"./UIModule":70}],68:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCView"),n=e("./UIUtil");a.default=class extends i.default{constructor(e){super(),this._ui=null,this._uiClass=null,this._closeOther=!1,this._showEffect=!0,this._uiClass=e}initialize(){this._ui=new this._uiClass,n.default.adapt(this._ui),this._ui.isPopupCenter=!1,this.centerDialog(this._ui),this._ui.popup(this._closeOther,this._showEffect)}uninitialize(){null!=this._ui&&(this._ui.isShowEffect=!1,this._ui.close(),this._ui.destroy(),this._ui=null)}get ui(){return this._ui}centerDialog(e){e.x=Math.round((Laya.stage.width-e.width*n.default.scale>>1)+e.pivotX),e.y=Math.round((Laya.stage.height-e.height*n.default.scale>>1)+e.pivotY)}}},{"../../../base/mvc/MVCView":24,"./UIUtil":73}],69:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.OPEN="open",i.CLOSE="close"},{}],70:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../GameCenter"),n=e("./UICenter"),s=e("../../../base/module/Module"),o=e("./UIUtil");class l extends s.default{constructor(){super(),this._uiCenter=null,UIConfig.closeDialogOnSide=!1,UIConfig.popupBgAlpha=.8,Laya.Dialog.manager.popupEffectHandler=Laya.Handler.create(this,this.dialogPopupEffect,null,!1),this._uiCenter=new n.default}destroy(){this._uiCenter.destroy(),this._uiCenter=null}static get instance(){return i.default.instance.get(l)}initialize(){super.initialize()}uninitialize(){super.uninitialize()}openUI(e){return this._uiCenter.openUI(e)}closeUI(e){this._uiCenter.closeUI(e)}isOpen(e){return this._uiCenter.isOpen(e)}getUI(e){return this._uiCenter.getUI(e)}dialogPopupEffect(e){e.scale(o.default.scale,o.default.scale),e._effectTween=Laya.Tween.from(e,{x:Laya.stage.width/2,y:Laya.stage.height/2,scaleX:0,scaleY:0},300,Laya.Ease.backOut,Laya.Handler.create(Laya.Dialog.manager,Laya.Dialog.manager.doOpen,[e]),0,!1,!1)}}a.default=l},{"../../../base/module/Module":18,"../../GameCenter":52,"./UICenter":67,"./UIUtil":73}],71:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../../util/RewardedVideoAdUtil"),s=e("../../network/NetworkModule"),o=e("../../../util/Wechat"),l=e("../../data/GameDataModule"),r=e("../../data/user/UserData"),d=e("../../../base/olympus/data/StrategyData"),u=e("../../../base/base/Debug"),h=e("../../../config/ResPay"),c=e("../../../base/olympus/data/LogPay"),m=e("../../../util/WechatEvent");a.default=class extends i.default{constructor(){super(...arguments),this._shareCount=0,this._isPaying=!1,this._payType=h.EnumPay.FORCE_AD,this._isAd=!0,this._source="",this._isLogShow=!1,this._shareInfoId=0,this._isNoAdToShare=!1}initialize(){o.default.instance.on(m.default.REWARDED_VIDEO_AD_LOADED,this,this.onRewardedVideoAdLoaded),l.default.getData(r.default).Audit?this.calcStrategy(d.Strategy.ForceAD):(this.calcStrategy(d.Strategy.Client),s.default.queryStrategy(this,this.rspQueryStrategy))}uninitialize(){s.default.cancelQueryStrategy(this,this.rspQueryStrategy),o.default.instance.off(m.default.REWARDED_VIDEO_AD_LOADED,this,this.onRewardedVideoAdLoaded),o.default.cancelShare(),n.default.cancelShow()}pay(e){this._isPaying||(this._isLogShow||(s.default.logPay(this.payId,this._isAd?c.PayAction.ADShow:c.PayAction.ShareShow),this._isLogShow=!0),this._source=e,this._isPaying=!0,this._isAd?(s.default.logPay(this.payId,c.PayAction.ADClick),n.default.show(this,this.onRewardedVideoClose,e)):this.doShare())}rspQueryStrategy(e){if(0==e.code){let t=e.data;t&&(this.calcStrategy(t.strategy),u.default.log("查询付费策略成功",t.strategy,this._isAd),s.default.logPay(this.payId,this._isAd?c.PayAction.ADShow:c.PayAction.ShareShow),this._isLogShow=!0)}else u.default.log("查询付费策略失败",e.code,e.message)}onRewardedVideoAdLoaded(){this._isNoAdToShare&&(this._isAd=!0,this.onRefreshStrategy(this._isAd),s.default.logPay(this.payId,c.PayAction.ADShow),u.default.log("开始没有视频转分享了，现在有视频又转视频了"))}calcStrategy(e){this._payType=h.EnumPay.FORCE_AD;let t=n.default.isVaild;if(d.Strategy.Client==e){let e=l.default.getData(r.default);this._payType=e.getPayType(this.payId)}else d.Strategy.PriorAD==e?(this._payType=t?h.EnumPay.FORCE_AD:h.EnumPay.FORCE_SHARE,this._isNoAdToShare=!t):this._payType=h.EnumPay.FORCE_AD;h.EnumPay.AD==this._payType?(this._isAd=!!t,this._isNoAdToShare=!t):h.EnumPay.SHARE==this._payType?this._isAd=!o.default.isShareVaild:h.EnumPay.FORCE_SHARE==this._payType?this._isAd=!1:this._isAd=!0,this.onRefreshStrategy(this._isAd)}doShare(){s.default.logPay(this.payId,c.PayAction.ShareClick),this._shareCount++;let e=l.default.getData(r.default),t=e.getRandomShareInfo();this._shareInfoId=t.id;let a=this.genShareUUID(e.UserId,t.id);o.default.share(this,this.onShareCallback,this._source,a,this._shareCount,t)}onRewardedVideoClose(e,t){if(this._isPaying=!1,e)s.default.logPay(this.payId,c.PayAction.ADSuccess),this.doPaySuccess(!1);else if(t)this.onPayFail(!1);else if(this._payType!=h.EnumPay.FORCE_AD){this._isAd=!1,this.onRefreshStrategy(this._isAd),s.default.logPay(this.payId,c.PayAction.ShareShow);let e=this;wx.showModal({title:"系统消息",content:"激励视频已看完，是否进行分享领取奖励",showCancel:!0,cancelText:"放弃",confirmText:"分享",fail:function(){e._isPaying=!1},success:function(t){t.confirm?e.doShare():t.cancel&&(s.default.logPay(e.payId,c.PayAction.ShareSuccess),e._isPaying=!1)}})}else this.onPayFail(!1)}onShareCallback(e){this._isPaying=!1,e?(s.default.logPay(this.payId,c.PayAction.ShareSuccess,this._shareInfoId),this.doPaySuccess(!0)):this.onPayFail(!0)}doPaySuccess(e){let t=l.default.getData(r.default);t.Audit||s.default.queryStrategy(this,this.rspQueryStrategy),t.addPaySeqCount(this.payId),this.onPaySuccess(e)}genShareUUID(e,t){return e+this.payId+"0"+t}}},{"../../../base/base/Debug":8,"../../../base/mvc/MVCControl":20,"../../../base/olympus/data/LogPay":41,"../../../base/olympus/data/StrategyData":46,"../../../config/ResPay":51,"../../../util/RewardedVideoAdUtil":322,"../../../util/Wechat":324,"../../../util/WechatEvent":325,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../network/NetworkModule":166}],72:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.VIEW=0]="VIEW",e[e.DIALOG=1]="DIALOG"}(a.EUIType||(a.EUIType={}))},{}],73:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../GameConfig");class n{static adapt(e){null!=e&&e.scale(this.scale,this.scale)}static addToStage(e){null!=e&&(e.scale(this.scale,this.scale),Laya.stage.addChild(e))}static get scale(){return 0==this._scale&&(Laya.Browser.width/Laya.Browser.height<this.EDGE_SCALE?this._scale=Laya.Browser.width/i.default.width:this._scale=Laya.Browser.height/i.default.height),this._scale}static getStageWidth(){return 0==this._width&&(Laya.Browser.width/Laya.Browser.height<this.EDGE_SCALE?this._width=i.default.width:this._width=Laya.Browser.width/Laya.Browser.height*i.default.height),this._width}static getStageHeight(){return 0==this._height&&(Laya.Browser.width/Laya.Browser.height<this.EDGE_SCALE?this._height=Laya.Browser.height/Laya.Browser.width*i.default.width:this._height=i.default.height),this._height}static getHeightRate(){return this.getStageHeight()/this.getStageWidth()/(i.default.height/i.default.width)}}a.default=n,n.EDGE_SCALE=2/3,n._scale=0,n._width=0,n._height=0},{"../../../GameConfig":1}],74:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCView"),n=e("./UIUtil");a.default=class extends i.default{constructor(e){super(),this._ui=null,this._uiClass=null,this._uiClass=e}initialize(){this._ui=new this._uiClass,this._ui.zOrder=900,n.default.addToStage(this._ui)}uninitialize(){null!=this._ui&&(this._ui.removeSelf(),this._ui.destroy(),this._ui=null)}get ui(){return this._ui}}},{"../../../base/mvc/MVCView":24,"./UIUtil":73}],75:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCable"),n=e("./UIBaseData"),s=e("./UIType"),o=e("./UIEvent"),l=e("./UIModule"),r=e("../../../base/base/Debug");a.default=class extends i.default{constructor(e){super(),this._atlasUrls=null,this._baseData=null,this._progressHandler=null,this._type=s.EUIType.VIEW,this._type=e,this._baseData=this.addData(n.default),this._atlasUrls=new Array}destroy(){null!=this._atlasUrls&&(Laya.loader.cancelLoadByUrls(this._atlasUrls),this._atlasUrls.splice(0,this._atlasUrls.length),this._atlasUrls=null),this._baseData=null,Laya.loader.cancelLoadByUrls(this._atlasUrls),null!=this._progressHandler&&(this._progressHandler.recover(),this._progressHandler=null),super.destroy()}setOpenParam(e){this._baseData.openParamClass=e,this.addData(this._baseData.openParamClass)}getOpenParam(){return null==this._baseData.openParamClass?(r.default.error("没有设置打开参数类"),null):this.getData(this._baseData.openParamClass)}open(){this._baseData.isLoading||this._baseData.isOpened||(this._baseData.isLoaded?Laya.timer.callLater(this,this.doOpen):Laya.timer.callLater(this,this.doLoad))}close(){Laya.timer.clear(this,this.doOpen),Laya.timer.clear(this,this.doLoad),!this._baseData.isLoading&&this._baseData.isOpened&&this.doHide()}addAtlas(e){this._atlasUrls.push("res/atlas/"+e+".atlas")}get isOpen(){return this._baseData.isOpened}onOpen(){}doLoad(){null!=this._baseData&&(this._baseData.isLoading=!0,this._progressHandler=Laya.Handler.create(this,this.onAtlasLoadProgress,null,!1),this._atlasUrls.length>0?Laya.loader.load(this._atlasUrls,Laya.Handler.create(this,this.onAtlasLoadComplete),this._progressHandler):this.onAtlasLoadComplete(!0))}onAtlasLoadComplete(e){if(null!=this._progressHandler&&(this._progressHandler.recover(),this._progressHandler=null),!e)return Laya.MouseManager.instance.disableMouseEvent=!1,void r.default.error(!1,"atlas 资源加载失败！");this._baseData.isLoading=!1,this.doOpen()}onAtlasLoadProgress(e){}doOpen(){null!=this._dataMgr&&null!=this._viewMgr&&null!=this._controlMgr&&null!=this._baseData&&(this._baseData.isOpened=!0,this._dataMgr.initialize(),this._viewMgr.initialize(),this._controlMgr.initialize(),this.onOpen(),l.default.instance.event(o.default.OPEN,this))}doHide(){null!=this._dataMgr&&null!=this._viewMgr&&null!=this._controlMgr&&this._baseData.isOpened&&(this._controlMgr.uninitialize(),this._viewMgr.uninitialize(),this._dataMgr.uninitialize(),this._baseData.isOpened=!1)}}},{"../../../base/base/Debug":8,"../../../base/mvc/MVCable":26,"./UIBaseData":66,"./UIEvent":69,"./UIModule":70,"./UIType":72}],76:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class extends Laya.EventDispatcher{destroy(){}setPackData(e){}getPackData(e){}}},{}],77:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../base/module/Module"),n=e("../../base/base/Dictionary"),s=e("./user/UserData"),o=e("../GameCenter"),l=e("../../base/olympus/data/SetPackData"),r=e("../../base/olympus/OlympusSDK"),d=e("../../base/base/Debug"),u=e("./network/NetWorkData"),h=e("../../Version"),c=e("./combine/CombineData"),m=e("./buff/BuffData"),p=e("./limit/LimitData"),f=e("./illustrated/IllustratedData");class g extends i.default{constructor(){super(),this._dataDic=new n.default,this._version=0,this.addData(s.default),this.addData(u.default),this.addData(c.default),this.addData(m.default),this.addData(p.default),this.addData(f.default);let e=Laya.LocalStorage.getItem(h.default.gameName+"version");this._version=e?parseInt(e):0}static getData(e){return null==o.default.instance?null:o.default.instance.get(g).getData(e)}static get instance(){return o.default.instance.get(g)}destroy(){null!=this._dataDic&&(this._dataDic.clear(),this._dataDic=null),super.destroy()}initialize(){super.initialize()}uninitialize(){super.uninitialize()}getData(e){return this._dataDic.getValue(e)}get version(){return this._version}getPackData(e){let t=null;null!=e&&e.version>0&&e.version>=this._version&&null!=e.pack_data&&e.pack_data.length>0?(this._version=e.version,t=JSON.parse(e.pack_data)):t=Laya.LocalStorage.getJSON(h.default.gameName+"packData");for(const e of this._dataDic.values)e.getPackData(t);null==t&&this.markSync()}markSync(){Laya.timer.callLater(this,this.onSetPackData)}onSetPackData(){let e={};for(const t of this._dataDic.values)t.setPackData(e);this._version++,Laya.LocalStorage.setJSON(h.default.gameName+"packData",e),Laya.LocalStorage.setItem(h.default.gameName+"version",this._version+"");let t=this.getData(s.default);if(null!=t&&0!=t.UserId){let a=new l.SetPackDataRequestData;a.token=t.Token,a.user_id=t.UserId,a.pack_data=JSON.stringify(e),a.version=this._version,r.default.setPackData(a,this,this.onSetPackDataRsp)}}onSetPackDataRsp(e){0==e.code?d.default.log("set-pack-data成功 version "+this._version):d.default.log("set-pack-data失败 version "+this._version+"code "+e.code+e.message)}addData(e){this._dataDic.containsKey(e)?d.default.error("重复添加数据："+e.prototype.constructor.name):this._dataDic.setValue(e,new e)}}a.default=g},{"../../Version":3,"../../base/base/Debug":8,"../../base/base/Dictionary":9,"../../base/module/Module":18,"../../base/olympus/OlympusSDK":28,"../../base/olympus/data/SetPackData":45,"../GameCenter":52,"./buff/BuffData":78,"./combine/CombineData":80,"./illustrated/IllustratedData":83,"./limit/LimitData":84,"./network/NetWorkData":85,"./user/UserData":86}],78:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../BaseData");a.default=class extends i.default{constructor(){super(...arguments),this._buffId=0,this.buffRecords=new Array}get buffId(){return this._buffId}set buffId(e){this._buffId=e}}},{"../BaseData":76}],79:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{constructor(){this.level=0,this.coinBuyCount=0,this.diamondBuyCount=0}setPackData(e){e.level=this.level,e.coinBuyCount=this.coinBuyCount,e.diamondBuyCount=this.diamondBuyCount}getPackData(e){e?(this.level=null==e.level?0:e.level,this.coinBuyCount=null==e.coinBuyCount?0:e.coinBuyCount,this.diamondBuyCount=null==e.diamondBuyCount?0:e.diamondBuyCount):(this.level=0,this.coinBuyCount=0,this.diamondBuyCount=0)}}},{}],80:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../BaseData"),n=e("./CombineBuyData"),s=e("../GameDataModule"),o=e("./CombineEvent"),l=e("./CombineDefine"),r=e("../../ui/index/tool/CombineDefine"),d=e("../../../config/ResGameConfig");class u extends i.default{constructor(){super(...arguments),this.airDropLock=!1,this._slots=null,this._buyDatas=null,this._coinOutput=0,this._coinOutputRate=1,this._slotMaxLevel=1}destroy(){null!=this._slots&&(this._slots.splice(0,this._slots.length),this._slots=null),null!=this._buyDatas&&(this._buyDatas.splice(0,this._buyDatas.length),this._buyDatas=null)}setPackData(e){let t=new Array;this._slots.forEach(e=>{t.push(e)});let a=new Array;this._buyDatas.forEach(e=>{let t={};e.setPackData(t),a.push(t)});let i={slots:t,buyDatas:a,slotMaxLevel:this._slotMaxLevel};e.combineData=i}getPackData(e){if(this._slots=new Array,this._buyDatas=new Array,e&&e.combineData){if(e.combineData.slots)for(const t of e.combineData.slots)this._slots.push(t);if(e.combineData.buyDatas)for(const t of e.combineData.buyDatas){let e=new n.default;e.getPackData(t),this._buyDatas.push(e)}this._slotMaxLevel=null==e.combineData.slotMaxLevel?1:e.combineData.slotMaxLevel}else this._slotMaxLevel=d.default.InitLevel;if(this._slots.length<=0&&this._slotMaxLevel==d.default.InitLevel){this._slots.push(1);for(let e=1;e<u.SLOT_NUM;e++)this._slots.push(0);this._slotMaxLevel=1}}get slots(){return this._slots}setSlot(e,t){e<0||e>=u.SLOT_NUM||(t!=r.EAirdrop.NORMAL&&t!=r.EAirdrop.SUPER&&t>this._slotMaxLevel&&(this._slotMaxLevel=t,this.event(o.default.SLOT_MAX_LEVEL,this._slotMaxLevel)),this._slots[e]=t,Laya.timer.callLater(this,this.event,[o.default.SLOT_CHANGE,[this._slots]]),s.default.instance.markSync())}getEmptySlot(){for(let e=0;e<u.SLOT_NUM;e++)if(this._slots[e]<=0)return e;return-1}checkIsAirDrop(){for(let e=0;e<u.SLOT_NUM;e++){let t=this._slots[e];if(t==r.EAirdrop.NORMAL||t==r.EAirdrop.SUPER)return!0}return!1}getBuyCount(e,t){let a=this._buyDatas.length;for(let i=0;i<a;i++){const a=this._buyDatas[i];if(a.level==t)return l.EnumBuy.COIN==e?a.coinBuyCount:a.diamondBuyCount}return 0}addBuyCount(e,t){let a=null,i=this._buyDatas.length;for(let e=0;e<i;e++){const i=this._buyDatas[e];if(i.level==t){a=i;break}}null==a&&((a=new n.default).level=t,this._buyDatas.push(a)),l.EnumBuy.COIN==e?a.coinBuyCount+=1:a.diamondBuyCount+=1}getAllSlots(){let e=new Array;for(let t=0;t<this._slots.length;t++)this._slots[t]<=0&&e.push(t);return e}set coinOutput(e){e!=this._coinOutput&&(this._coinOutput=e,this.event(o.default.OUTPUT_CHANGE,this.coinOutput))}get coinOutput(){return this._coinOutput*this._coinOutputRate}set coinOutputRate(e){this._coinOutputRate=e}get coinOutputRate(){return this._coinOutputRate}get slotMaxLevel(){return this._slotMaxLevel}}a.default=u,u.SLOT_NUM=10},{"../../../config/ResGameConfig":50,"../../ui/index/tool/CombineDefine":240,"../BaseData":76,"../GameDataModule":77,"./CombineBuyData":79,"./CombineDefine":81,"./CombineEvent":82}],81:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.UNBUY=0]="UNBUY",e[e.COIN=1]="COIN",e[e.DIAMOND=2]="DIAMOND",e[e.VIDEO=3]="VIDEO"}(a.EnumBuy||(a.EnumBuy={}))},{}],82:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.SLOT_CHANGE="slot_change",i.OUTPUT_CHANGE="output_change",i.SLOT_MAX_LEVEL="slot_max_level"},{}],83:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../BaseData"),n=e("../../../base/base/ArrayUtil");a.default=class extends i.default{constructor(){super(...arguments),this._unlocks=null,this._unReads=null}destroy(){null!=this._unlocks&&(this._unlocks.splice(0,this._unlocks.length),this._unlocks=null),null!=this._unReads&&(this._unReads.splice(0,this._unReads.length),this._unReads=null)}setPackData(e){let t=new Array;this._unlocks.forEach(e=>{t.push(e)});let a=new Array;this._unReads.forEach(e=>{a.push(e)});let i={unlocks:t,unReads:a};e.illustratedData=i}getPackData(e){if(this._unlocks=new Array,this._unReads=new Array,e&&e.illustratedData){if(e.illustratedData.unlocks)for(const t of e.illustratedData.unlocks)this._unlocks.push(t);if(e.illustratedData.unReads)for(const t of e.illustratedData.unReads)this._unReads.push(t)}}isUnlock(e){return-1!=this._unlocks.indexOf(e)}unlock(e){-1==this._unlocks.indexOf(e)&&this._unlocks.push(e),-1==this._unReads.indexOf(e)&&(this._unReads.push(e),this.event(Laya.Event.CHANGE))}read(e){n.default.remove(this._unReads,e),this.event(Laya.Event.CHANGE)}get unReads(){return this._unReads}}},{"../../../base/base/ArrayUtil":4,"../BaseData":76}],84:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../BaseData");a.default=class extends i.default{constructor(){super(...arguments),this.inviteFriendNum=0}setPackData(e){let t={inviteFriendNum:this.inviteFriendNum};e.limitData=t}getPackData(e){if(e&&e.limitData){let t=e.limitData;this.inviteFriendNum=null==t.inviteFriendNum?0:t.inviteFriendNum}else this.refresh()}refresh(){this.inviteFriendNum=0}}},{"../BaseData":76}],85:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../BaseData");a.default=class extends i.default{constructor(){super(...arguments),this.promoDatas=null,this.promoIndex=0,this._inviteUserCount=0,this._takenRewardCount=0}get inviteUserCount(){return this._inviteUserCount}set inviteUserCount(e){this._inviteUserCount=e,this.event(Laya.Event.CHANGED)}get takenRewardCount(){return this._takenRewardCount}set takenRewardCount(e){this._takenRewardCount=e,this.event(Laya.Event.CHANGED)}}},{"../BaseData":76}],86:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../BaseData"),n=e("./UserDataEvent"),s=e("../../../config/ResGameConfig"),o=e("../../../base/base/Debug"),l=e("../../../base/base/MathUtil"),r=e("../../network/NetworkModule"),d=e("../../../util/Wechat"),u=e("../../../base/base/Dictionary"),h=e("../../../config/ResPay");class c extends i.default{constructor(){super(),this.UserId=0,this.Account="",this.Token="",this.New=0,this.Audit=!0,this.ShareUuid="",this.CheatClick=!1,this.payInfos=null,this.paySeqInfos=null,this.sharePageInfos=null,this._paySeqCountDic=new u.default,this._coin=0,this._diamond=0,this._level=0,this._isSoundOn=1,this._isVibrateOn=1,this._lastExitTime=0,this._equipWeaponLevel=1,this._isCombineNew=1,this._isGameNew=1,this._isUnlockNew=1,this._bonusTimes=0,this._day="",this._registerDate="",this._appendMyProgram=0,this._shareCount=0,this._lastWeaponDps=-1,this._isNewChapter=0,this._bonusGuide=0,this._bonusRule=1,this._turnCount=0}destroy(){super.destroy()}setPackData(e){let t={coin:this.coin,diamond:this.diamond,isSoundOn:this.isSoundOn,isVibrateOn:this.isVibrateOn,level:this.level,lastExitTime:this.lastExitTime,equipWeaponLevel:this.equipWeaponLevel,isCombineNew:this._isCombineNew,isGameNew:this._isGameNew,isUnlockNew:this._isUnlockNew,bonusTimes:this.bonusTimes,day:this.day,registerDate:this._registerDate,appendMyProgram:this._appendMyProgram,shareCount:this._shareCount,lastWeaponDps:this._lastWeaponDps,isNewChapter:this._isNewChapter,bonusGuide:this._bonusGuide,bonusRule:this._bonusRule,turnCount:this._turnCount};e.userData=t}getPackData(e){if(e&&e.userData){let t=e.userData;this.coin=null==t.coin?s.default.InitCoin:t.coin,this.diamond=null==t.diamond?s.default.InitDiamond:t.diamond,this.isSoundOn=null==t.isSoundOn?1:t.isSoundOn,this.isVibrateOn=null==t.isVibrateOn?1:t.isVibrateOn,this.level=null==t.level?1:t.level,this.lastExitTime=null==t.lastExitTime?0:t.lastExitTime,this.equipWeaponLevel=null==t.equipWeaponLevel?1:t.equipWeaponLevel,this._isCombineNew=null==t.isCombineNew?1:t.isCombineNew,this._isGameNew=null==t.isGameNew?1:t.isGameNew,this._isUnlockNew=null==t.isUnlockNew?1:t.isUnlockNew,this.bonusTimes=null==t.bonusTimes?0:t.bonusTimes,this.day=null==t.day?"":t.day,this._registerDate=null==t.registerDate?"":t.registerDate,this._appendMyProgram=null==t.appendMyProgram?0:t.appendMyProgram,this._shareCount=null==t.shareCount?0:t.shareCount,this._lastWeaponDps=null==t.lastWeaponDps?-1:t.lastWeaponDps,this._isNewChapter=null==t.isNewChapter?0:t.isNewChapter,this._bonusGuide=null==t.bonusGuide?0:t.bonusGuide,this._bonusRule=null==t.bonusRule?1:t.bonusRule,this._turnCount=null==t.turnCount?0:t.turnCount}else this.coin=s.default.InitCoin,this.diamond=s.default.InitDiamond,this.isSoundOn=1,this.isVibrateOn=1,this.level=1,this.lastExitTime=0,this.equipWeaponLevel=1,this._isCombineNew=1,this._isGameNew=1,this._isUnlockNew=1,this._bonusTimes=0,this.day="",this._appendMyProgram=0,this._shareCount=0,this._lastWeaponDps=-1,this._isNewChapter=0,this._bonusGuide=0,this._bonusRule=1,this._turnCount=0;""==this._registerDate&&(this._registerDate=l.default.getCurDate()),d.default.updateRankData(this.level)}getPayType(e){let t=h.EnumPay.FORCE_AD;if(this.payInfos&&this.paySeqInfos){for(let a=0;a<this.payInfos.length;a++){const i=this.payInfos[a];if(i.id==e){for(let a=0;a<this.paySeqInfos.length;a++){const n=this.paySeqInfos[a];if(n.id==i.seq_id){if(n.seq.length<=0)o.default.error("error, payId:"+e+" seq is null ");else{let a=this._paySeqCountDic.getValue(n.id);(null==a||a>=n.seq.length)&&(a=0,this._paySeqCountDic.setValue(n.id,a)),t=parseInt(n.seq[a]),o.default.log("getPayType, payId:"+e+" seqId:"+n.id+" seq:"+n.seq+" count:"+a)}break}}break}}return t}}addPaySeqCount(e){let t=-1;if(this.payInfos)for(let a=0;a<this.payInfos.length;a++){const i=this.payInfos[a];if(i.id==e){t=i.seq_id;break}}if(-1!=t)if(this._paySeqCountDic.containsKey(t)){let e=this._paySeqCountDic.getValue(t);e++,this._paySeqCountDic.setValue(t,e)}else this._paySeqCountDic.setValue(t,0)}getRandomShareInfo(){let e=l.default.randomInt(0,this.sharePageInfos.length-1);return this.sharePageInfos[e]}set coin(e){this._coin!=e&&(this._coin=e,this.event(n.default.COIN_CHANGE,this._coin))}get coin(){return this._coin}set diamond(e){this._diamond!=e&&(this._diamond=e,this.event(n.default.DIAMOND_CHANGE,this._diamond))}get diamond(){return this._diamond}get isSoundOn(){return this._isSoundOn}set isSoundOn(e){this._isSoundOn!=e&&(this._isSoundOn=e,this.event(n.default.SOUND_ON_CHANGE,this._isSoundOn))}get isVibrateOn(){return this._isVibrateOn}set isVibrateOn(e){this._isVibrateOn=e}get level(){return this._level}set level(e){this._level=e,r.default.logGameProgress(e)}get lastExitTime(){return this._lastExitTime}set lastExitTime(e){this._lastExitTime=e}get equipWeaponLevel(){return this._equipWeaponLevel}set equipWeaponLevel(e){this._equipWeaponLevel!=e&&(this._equipWeaponLevel=e,this.event(n.default.EQUIP_WEAPON_LEVEL_CHANGE,this._equipWeaponLevel))}get isCombineNew(){return this._isCombineNew>0}set isCombineNew(e){this._isCombineNew=e?1:-1}get isGameNew(){return this._isGameNew>0}set isGameNew(e){this._isGameNew=e?1:-1}get isUnlockNew(){return this._isUnlockNew>0}set isUnlockNew(e){this._isUnlockNew=e?1:-1}set bonusTimes(e){this._bonusTimes!=e&&(this._bonusTimes=e,this.event(n.default.BONUS_TIMES,this._bonusTimes))}get bonusTimes(){return this._bonusTimes}set day(e){this._day=e}get day(){return this._day}getRegisterDate(){return this._registerDate}get appendMyProgram(){return this._appendMyProgram>0}set appendMyProgram(e){this._appendMyProgram=e?1:0,this.event(n.default.APPEND_MY_PROGRAM,e)}get isCanShowBanner(){return this.CheatClick&&!this.Audit}get shareCount(){return this._shareCount}set shareCount(e){this._shareCount=e}get lastWeaponDps(){return this._lastWeaponDps}set lastWeaponDps(e){this._lastWeaponDps=e}get isNewChapter(){return 0!=this._isNewChapter}set isNewChapter(e){this._isNewChapter=e?1:0}get bonusGuide(){return 0!=this._bonusGuide}set bonusGuide(e){this._bonusGuide=e?1:0}get bonusRule(){return 0!=this._bonusRule}set bonusRule(e){this._bonusRule=e?1:0}get turnCount(){return this._turnCount}set turnCount(e){this._turnCount=e}getIsTurn(){return this._turnCount<1}}a.default=c,c.SetupTime=0,c.IsNewClient=!1},{"../../../base/base/Debug":8,"../../../base/base/Dictionary":9,"../../../base/base/MathUtil":11,"../../../config/ResGameConfig":50,"../../../config/ResPay":51,"../../../util/Wechat":324,"../../network/NetworkModule":166,"../BaseData":76,"./UserDataEvent":87}],87:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.COIN_CHANGE="coin_change",i.DIAMOND_CHANGE="diamond_change",i.LEVEL_CHANGE="level_change",i.EQUIP_WEAPON_LEVEL_CHANGE="equip_weapon_level_change",i.SOUND_ON_CHANGE="soundOnChange",i.BONUS_TIMES="bonus_times",i.APPEND_MY_PROGRAM="append_my_program"},{}],88:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../base/module/Module"),n=e("../GameCenter"),s=e("../../base/state/StateStack"),o=e("./state/NormalState"),l=e("../../base/base/Dictionary"),r=e("./scene/Scene"),d=e("./logic/GameLogic"),u=e("../ui/loading/LoadingUI"),h=e("../common/ui/UIModule");class c extends i.default{constructor(){super(),this._stateStack=null,this._stateDic=null,this._scene=null,this._gameLogic=null,this._stateStack=new s.default,this._stateDic=new l.default,this._scene=new r.default,this._gameLogic=new d.default}destroy(){this._stateStack.destroy(),this._stateStack=null,this._stateDic.destroy(),this._stateDic=null,this._scene.destroy(),this._scene=null,this._gameLogic.destroy(),this._gameLogic=null}static get instance(){return n.default.instance.get(c)}initialize(){this._scene.initialize(),this._gameLogic.initialize(),this.changeState(o.default),h.default.instance.closeUI(u.default)}uninitialize(){this._scene.uninitialize(),this._gameLogic.uninitialize()}update(e){this._stateStack.update(),this._gameLogic.update(e)}pushState(e){let t=this._stateDic.getValue(e);null==t&&(t=new e,this._stateDic.setValue(e,t)),this._stateStack.pushState(t)}popState(){return this._stateStack.popState()}changeState(e){let t=this._stateDic.getValue(e);return null==t&&(t=new e,this._stateDic.setValue(e,t)),this._stateStack.changeState(t)}topState(){return this._stateStack.topState()}}a.default=c},{"../../base/base/Dictionary":9,"../../base/module/Module":18,"../../base/state/StateStack":47,"../GameCenter":52,"../common/ui/UIModule":70,"../ui/loading/LoadingUI":252,"./logic/GameLogic":126,"./scene/Scene":136,"./state/NormalState":143}],89:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./ZombieLogicScript"),n=e("../common/WeaponLogicScript"),s=e("./LifeLogicScript"),o=e("./FlowLogicScript"),l=e("./GuideLogicScript"),r=e("../common/BuffLogicScript"),d=e("../common/CommonEvent"),u=e("../common/DropLogicScript"),h=e("./OpeningLogicScript");class c extends Laya.Sprite3D{constructor(){super(c.Name)}init(){this.addComponent(i.default),this.addComponent(n.default),this.addComponent(s.default),this.addComponent(o.default),this.addComponent(r.default),this.addComponent(u.default),this.addComponent(l.default),this.addComponent(h.default)}set pause(e){this.event(d.default.PAUSE,e)}}a.default=c,c.Name="Battle"},{"../common/BuffLogicScript":99,"../common/CommonEvent":100,"../common/DropLogicScript":102,"../common/WeaponLogicScript":108,"./FlowLogicScript":90,"./GuideLogicScript":91,"./LifeLogicScript":92,"./OpeningLogicScript":93,"./ZombieLogicScript":95}],90:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../GameModule"),n=e("../event/GameEvent"),s=e("../../common/ui/UIModule"),o=e("../../data/GameDataModule"),l=e("../../data/user/UserData"),r=e("../state/SettleState"),d=e("../logic/GameLogic"),u=e("../state/FailState"),h=e("../state/PauseState"),c=e("../../ui/revive/ReviveUI"),m=e("../tool/GameTool"),p=e("../../ui/zombieInfo/ZombieInfoUI");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this._isRevive=!1}onEnable(){i.default.instance.on(n.default.MASTER_DEAD,this,this.onDead),i.default.instance.on(n.default.VICTORY,this,this.onVictory),this._isRevive=!1}onDisable(){i.default.instance.off(n.default.MASTER_DEAD,this,this.onDead),i.default.instance.off(n.default.VICTORY,this,this.onVictory),this._isRevive=!1}onDead(){if(this._isRevive)Laya.timer.callLater(this,this.changeStateToFail);else{this._isRevive=!0,i.default.instance.pushState(h.default);let e=o.default.instance.getData(l.default),t=s.default.instance.openUI(c.default).getOpenParam();t.isBossLevel=m.default.isBossLevel(),t.isBossLevel?t.levelProgress=d.default.instance.gameLogicData.getBossRate():t.levelProgress=d.default.instance.gameLogicData.getRemainRate(),t.level=e.level}}changeStateToFail(){s.default.instance.closeUI(p.default),i.default.instance.changeState(u.default)}onVictory(){s.default.instance.closeUI(p.default),i.default.instance.pushState(r.default)}}},{"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../ui/revive/ReviveUI":276,"../../ui/zombieInfo/ZombieInfoUI":313,"../GameModule":88,"../event/GameEvent":122,"../logic/GameLogic":126,"../state/FailState":142,"../state/PauseState":145,"../state/SettleState":146,"../tool/GameTool":148}],91:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIUtil"),n=e("../GameModule"),s=e("../scene/Scene"),o=e("../event/GameEvent"),l=e("../../../base/base/MathUtil");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this._shootArrow=null,this._shootArrowAni=null,this._camera=null,this._target=null,this._targetHead=null,this._isBoss=!1,this._targetScreenPos=new Laya.Vector3}onAwake(){let e=Laya.loader.getRes("prefab/shootArrow.json");this._shootArrow=e.create(),this._shootArrowAni=this._shootArrow.aniShake,i.default.addToStage(this._shootArrow)}onDestroy(){null!=this._shootArrow&&(this._shootArrow.destroy(),this._shootArrow=null),this._shootArrowAni=null}onEnable(){this._camera=s.default.instance.view.camera,n.default.instance.on(o.default.ZOMBIE_DEAD,this,this.onZombieDead),n.default.instance.on(o.default.BOSS_BORN,this,this.onBossBorn),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onStageMouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onStageMouseUp),Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onStageMouseUp),this.onStageMouseUp(null),this._isBoss=!1}onDisable(){this.hideShootGuide(),n.default.instance.off(o.default.ZOMBIE_DEAD,this,this.onZombieDead),n.default.instance.off(o.default.BOSS_BORN,this,this.onBossBorn),Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onStageMouseDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onStageMouseUp),Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onStageMouseUp),this._camera=null}onUpdate(){null!=this._targetHead&&(this._targetHead.transform.position.cloneTo(l.default.TEMP_V3),this._camera.worldToViewportPoint(l.default.TEMP_V3,this._targetScreenPos),this._shootArrow.x=this._targetScreenPos.x,this._shootArrow.y=this._targetScreenPos.y)}onStageMouseDown(e){this._isBoss||this.hideShootGuide()}onStageMouseUp(e){this._isBoss||Laya.timer.once(2e3,this,this.showShootGuide)}showShootGuide(){let e=!1,t=this.owner.getChildAt(0);null!=t&&(this._targetHead=t.getChildByName("Head"),null!=this._targetHead&&(this._target=t,this._targetHead.transform.position.cloneTo(l.default.TEMP_V3),this._camera.worldToViewportPoint(l.default.TEMP_V3,this._targetScreenPos),null!=this._shootArrow&&(this._shootArrow.x=this._targetScreenPos.x,this._shootArrow.y=this._targetScreenPos.y),this.showShootArrow(!1),e=!0)),e||Laya.timer.once(2e3,this,this.showShootGuide)}hideShootGuide(){Laya.timer.clear(this,this.showShootGuide),this._target=null,this._targetHead=null,null!=this._shootArrow&&(this._shootArrow.visible=!1),null!=this._shootArrowAni&&this._shootArrowAni.stop()}onZombieDead(e,t){this._target==t&&(this._isBoss?this.hideShootGuide():this.showShootGuide())}onBossBorn(e){if(null==e)return;let t=e.getChildByName("Head");null!=t&&(this._target=e,this._targetHead=t,this._targetHead.transform.position.cloneTo(l.default.TEMP_V3),this._camera.worldToViewportPoint(l.default.TEMP_V3,this._targetScreenPos),null!=this._shootArrow&&(this._shootArrow.x=this._targetScreenPos.x,this._shootArrow.y=this._targetScreenPos.y),this.showShootArrow(!0),this._isBoss=!0,Laya.timer.clear(this,this.showShootGuide))}showShootArrow(e){if(null!=this._shootArrow){let t=this._shootArrow.getChildByName("imgShoot");null!=t&&(t.visible=!e);let a=this._shootArrow.getChildByName("imgShootBoss");null!=a&&(a.visible=e),this._shootArrow.visible=!0}null!=this._shootArrowAni&&this._shootArrowAni.play(0,!0)}}},{"../../../base/base/MathUtil":11,"../../common/ui/UIUtil":73,"../GameModule":88,"../event/GameEvent":122,"../scene/Scene":136}],92:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../scene/Scene"),n=e("../common/SpritePool"),s=e("../GameModule"),o=e("../event/GameEvent"),l=e("../../../config/ResGameConfig");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this._life=0,this._scene=null,this._invincible=!1}onEnable(){this._invincible=!1,this._scene=i.default.instance.view.scene,this._life=l.default.MaxLife,s.default.instance.on(o.default.REVIVE,this,this.onRevive),s.default.instance.on(o.default.BOSS_HP,this,this.onBossHp),s.default.instance.on(o.default.BEHIT,this,this.onBehit)}onDisable(){this._scene=null,s.default.instance.off(o.default.REVIVE,this,this.onRevive),s.default.instance.off(o.default.BOSS_HP,this,this.onBossHp),s.default.instance.off(o.default.BEHIT,this,this.onBehit),Laya.timer.clear(this,this.onInvincibleOver)}onUpdate(){}get life(){return this._life}set life(e){e=Math.max(0,e),e=Math.min(e,l.default.MaxLife),this._life!=e&&(this._life=e,s.default.instance.event(o.default.LIFE_CHANGE,this._life))}onBossHp(e,t){e<=0&&(this._invincible=!0)}onBehit(e){if(!this._invincible&&(this._life-=e,s.default.instance.event(o.default.LIFE_CHANGE,this._life),this._life<=0)){let e=n.default.get(n.EnumSprite.EFFECT,"Dead",1e3);e.transform.position=i.default.instance.view.deadEffect,e.transform.scale.setValue(2,2,2),this._scene.addChild(e),e.particleSystem.simulate(0,!0),e.particleSystem.play(),s.default.instance.event(o.default.MASTER_DEAD)}}onRevive(){this.life=l.default.MaxLife,this._invincible=!0,Laya.timer.once(100,this,this.onInvincibleOver)}onInvincibleOver(){this._invincible=!1}}},{"../../../config/ResGameConfig":50,"../GameModule":88,"../common/SpritePool":106,"../event/GameEvent":122,"../scene/Scene":136}],93:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../common/SpritePool"),n=e("../scene/Scene"),s=e("../common/ShakeScript"),o=e("../../../config/ResGameConfig"),l=e("../../common/ui/UIModule"),r=e("../../common/ui/UIEvent"),d=e("../../ui/talk/TalkUI"),u=e("../../data/GameDataModule"),h=e("../../data/user/UserData"),c=e("../GameModule"),m=e("../event/GameEvent"),p=e("../../../util/Wechat"),f=e("../../../util/SoundUrl");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this._isGameNew=!1}onEnable(){let e=u.default.getData(h.default);1==e.level&&(this._isGameNew=e.isGameNew,e.isGameNew=!1,Laya.MouseManager.enabled=!1,Laya.timer.once(2e3,this,this.doStart))}onDisable(){l.default.instance.off(r.default.CLOSE,this,this.onUIClose),Laya.timer.clear(this,this.doStart)}doStart(){let e=n.default.instance.view,t=i.default.get(i.EnumSprite.EFFECT,"Dead",1e3);this.owner,t.transform.position.x=0,t.transform.position.y=0,t.transform.position.z=e.zombieBorn1.z,t.transform.scale.setValue(100,100,100),t.particleSystem.simulate(0,!0),t.particleSystem.play(),e.scene.addChild(t);let a=e.camera.getComponent(s.default);null!=a&&a.shake(600,.3),Laya.timer.once(1e3,this,this.onShowTalk),p.default.playSound(f.default.Explosion)}onShowTalk(){Laya.MouseManager.enabled=!0;let e=o.default.getTalk(1);null!=e&&(l.default.instance.on(r.default.CLOSE,this,this.onUIClose),l.default.instance.openUI(d.default).getOpenParam().id=e.levelId,this.owner.pause=!0)}onUIClose(e){if(e instanceof d.default){l.default.instance.off(r.default.CLOSE,this,this.onUIClose),this.owner.pause=!1;let e=u.default.getData(h.default);1==e.level&&(e.isGameNew=this._isGameNew),c.default.instance.event(m.default.SHOW_OPERATE_GUIDE,!0),p.default.playSound(f.default.bgmOfTheFirstZombie)}}}},{"../../../config/ResGameConfig":50,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/ui/UIEvent":69,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../ui/talk/TalkUI":292,"../GameModule":88,"../common/ShakeScript":105,"../common/SpritePool":106,"../event/GameEvent":122,"../scene/Scene":136}],94:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{constructor(){this.waveIndex=0,this.illustratedId=0,this.isBoss=!1,this.resName="",this.levelHp=0,this.hp=0,this.attack=0,this.attackInterval=0,this.funcID=0,this.delay=0,this.scale=1,this.isScaleX=!1,this.isLastWave=!1,this.isWaitWaveEnd=!1}destroy(){this.clear()}clear(){this.waveIndex=0,this.illustratedId=0,this.isBoss=!1,this.resName="",this.hp=0,this.speedRate=1,this.delay=0,this.isLastWave=!1,this.isWaitWaveEnd=!1}}a.default=i,i.Name="ZombieBornData"},{}],95:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/base/MathUtil"),n=e("../../../config/ResGameConfig"),s=e("../common/SpritePool"),o=e("../zombie/ZombieScript"),l=e("../scene/Scene"),r=e("../GameModule"),d=e("../event/GameEvent"),u=e("../zombie/ZombieDefine"),h=e("../../data/GameDataModule"),c=e("../../data/user/UserData"),m=e("./ZombieBornData"),p=e("../../../base/base/Pool"),f=e("../../data/combine/CombineData"),g=e("../../../config/ResData"),_=e("../../../util/Wechat"),y=e("../../../util/SoundUrl"),w=e("../../../base/base/Debug"),v=e("../zombie/StateScript"),b=e("../zombie/LifeScript"),I=e("../../../base/math/WeightRandom"),x=e("../zombie/FuncScript"),M=e("../common/CommonEvent"),L=e("../zombie/boss/BossCarScript"),C=e("../common/HeadShotScript"),D=e("../../data/illustrated/IllustratedData"),k=e("../../common/ui/UIModule"),S=e("../../common/ui/UIEvent"),E=e("../../ui/game/GameUI");class U extends Laya.Script3D{constructor(){super(...arguments),this._zombieAssembly=null,this._zombieBorn1=null,this._zombieBorn2=null,this._totalHp=0,this._remainHp=0,this._bornDatas=new Array,this._createIndex=0,this._firstWaveNum=0,this._idleMin=0,this._idleMax=0,this._isLastWave=!1,this._checkWaveEndCount=0,this._delayRate=1,this._isBossLevel=!1,this._isPause=!1,this._bornOverOffsetMin=0,this._bornOverOffsetMax=0,this._zombieMaxHp=0,this._zombieRandom=new I.default,this._zombieSpeedPercent=100}onEnable(){let e=l.default.instance.view;this._zombieAssembly=e.zombieAssembly,this._zombieBorn1=e.zombieBorn1,this._zombieBorn2=e.zombieBorn2,this._zombieSpeedPercent=100,this.generateLevel(),r.default.instance.on(d.default.ADD_ZOMBIE,this,this.onAddZombie),r.default.instance.on(d.default.ZOMBIE_DEAD,this,this.onZombieDead),r.default.instance.on(d.default.REVIVE,this,this.onRevive),r.default.instance.on(d.default.VICTORY,this,this.onVictory),r.default.instance.on(d.default.ZOMBIE_SPEED_DOWN,this,this.onZombieSpeedDown),r.default.instance.on(d.default.ZOMBIE_SPEED_UP,this,this.onZombieSpeedUp),this.owner.timer.loop(U.DelayReduceTime,this,this.onDelayReduce),this.owner.on(M.default.PAUSE,this,this.onPause),k.default.instance.on(S.default.OPEN,this,this.onUIOpen)}onDisable(){k.default.instance.off(S.default.OPEN,this,this.onUIOpen),this.owner.off(M.default.PAUSE,this,this.onPause),this.owner.timer.clearAll(this),this.owner.timer.clear(this,this.onDelayReduce),this.owner.timer.clear(this,this.createBoss),r.default.instance.off(d.default.ADD_ZOMBIE,this,this.onAddZombie),r.default.instance.off(d.default.ZOMBIE_DEAD,this,this.onZombieDead),r.default.instance.off(d.default.REVIVE,this,this.onRevive),r.default.instance.off(d.default.VICTORY,this,this.onVictory),r.default.instance.off(d.default.ZOMBIE_SPEED_DOWN,this,this.onZombieSpeedDown),r.default.instance.off(d.default.ZOMBIE_SPEED_UP,this,this.onZombieSpeedUp),this._zombieAssembly=null,this._zombieBorn1=null,this._zombieBorn2=null;for(let e=this.owner.numChildren-1;e>=0;e--){const t=this.owner.getChildAt(e);s.default.recover(t)}for(let e=this._bornDatas.length-1;e>=0;e--){const t=this._bornDatas[e];p.default.recover(m.default.Name,t)}this._bornDatas.splice(0,this._bornDatas.length),this._isPause=!1}onUpdate(){}onUIOpen(e){e instanceof E.default&&(k.default.instance.off(S.default.OPEN,this,this.onUIOpen),this.createFirstWave())}onPause(e){this._isPause=e;let t=this.owner.numChildren;for(let a=0;a<t;a++){let t=this.owner.getChildAt(a).getComponent(o.default);null!=t&&(t.pause=e)}}onZombieDead(e){this._remainHp-=e,this._remainHp=Math.max(this._remainHp,0),r.default.instance.event(d.default.LEVEL_HP,[this._remainHp,this._totalHp])}onAddZombie(e){if(this.owner.numChildren>=n.default.MaxZombieNum)return;let t=h.default.getData(c.default);const a=n.default.getLevel(t.level).waves[0];let s=p.default.get(m.default.Name,m.default);s.waveIndex=0;let o=this._zombieRandom.random(),l=n.default.getZombie(o);null!=l?(s.illustratedId=l.illustratedId,s.resName=l.resName,s.levelHp=Math.floor(t.lastWeaponDps*a.ratio*i.default.random(.8,1.2)),s.levelHp>this._zombieMaxHp&&(s.levelHp=this._zombieMaxHp),s.hp=Math.floor(s.levelHp*l.hpRatio),s.speedRate=l.speedRate*i.default.random(.8,1.2),s.attack=l.attack,s.attackInterval=l.attackInterval,s.funcID=l.funcID,s.delay=Math.floor(a.interval*i.default.random(.8,1.2)),s.scale=i.default.random(.8,1.2),s.isScaleX=i.default.randomBoolean(),this.createZombie(s,u.EnumZombieState.BORN,e),p.default.recover(m.default.Name,s)):w.default.error("读取僵尸配置失败，zombieID =",o)}onRevive(){for(let e=this.owner.numChildren-1;e>=0;e--){const t=this.owner.getChildAt(e);let a=t.getComponent(o.default),n=t.getComponent(v.default);null==a||u.EnumZombieState.MOVE!=n.state&&u.EnumZombieState.ATTACK!=n.state||(t.transform.position.z=i.default.random(this._zombieBorn1.z-2,this._zombieAssembly.z+2),t.transform.position=t.transform.position,a.onMasterRevive())}}onVictory(){let e=l.default.instance.view.scene;for(let t=this.owner.numChildren-1;t>=0;t--){const a=this.owner.getChildAt(t);let i=a.getComponent(b.default);if(null!=i){i.onDamage(i.curHp);let t=s.default.get(s.EnumSprite.EFFECT,"BloodSplatter",1e3);a.transform.position.cloneTo(t.transform.position),t.transform.position=t.transform.position,t.particleSystem.simulate(0,!0),t.particleSystem.play(),e.addChild(t);let n=s.default.get(s.EnumSprite.OBJECTS,"HeadShot",1e3);null==n.getComponent(C.default)&&n.addComponent(C.default),a.transform.position.cloneTo(n.transform.position),n.transform.position=n.transform.position,i.isBoss?n.transform.scale.setValue(300,300,300):n.transform.scale.setValue(100,100,100),n.transform.scale=n.transform.scale,e.addChild(n)}}}onZombieSpeedDown(e){this._zombieSpeedPercent-=e,this._zombieSpeedPercent=Math.max(1,this._zombieSpeedPercent);for(let e=this.owner.numChildren-1;e>=0;e--){const t=this.owner.getChildAt(e);let a=t.getComponent(o.default);if(null!=a){a.speedRate*=this._zombieSpeedPercent/100;let e=t.getComponent(b.default);null!=e&&e.playerSpeedDown()}}}onZombieSpeedUp(e){let t=this._zombieSpeedPercent;this._zombieSpeedPercent+=e,this._zombieSpeedPercent=Math.min(100,this._zombieSpeedPercent);for(let e=this.owner.numChildren-1;e>=0;e--){let a=this.owner.getChildAt(e).getComponent(o.default);null!=a&&(a.speedRate*=this._zombieSpeedPercent/t)}}onDelayReduce(){this._isPause||this._delayRate>U.DelayReduceMinRate&&(this._delayRate-=U.DelayReduceRate,this._delayRate=Math.max(this._delayRate,U.DelayReduceMinRate))}generateLevel(){let e=h.default.getData(c.default),t=n.default.getLevel(e.level);this._zombieMaxHp=t.zombieMaxHp,this._bornOverOffsetMin=t.bornMin,this._bornOverOffsetMax=t.bornMax,this._idleMin=t.idleMin,this._idleMax=t.idleMax;let a=new Array;for(let e=1;e<=t.zombie.length;e++)a.push(e);this._zombieRandom.setData(a,t.zombie);let i=t.waves.length;if(this._totalHp=0,e.lastWeaponDps<=0){let t=h.default.getData(f.default),a=n.default.getWeapon(t.slotMaxLevel);e.lastWeaponDps=a.dps}for(let a=0;a<i;a++){if(a==i-1){let e=p.default.get(m.default.Name,m.default);e.isLastWave=!0,this._bornDatas.push(e)}const n=t.waves[a];let s=this.generateWave(a,n,e.lastWeaponDps);this._totalHp+=n.hp+s,0==a&&(this._firstWaveNum=this._bornDatas.length);let o=p.default.get(m.default.Name,m.default);o.isWaitWaveEnd=!0,this._bornDatas.push(o)}this._remainHp=this._totalHp,this._createIndex=0,this._isLastWave=!1,this._delayRate=1;let s=n.default.getBoss(t.bossID);null!=s?(this._isBossLevel=!0,this.owner.timer.once(s.appearDelay,this,this.createBoss,[s])):this._isBossLevel=!1}generateWave(e,t,a){let s=t.hp;for(;s>0;){let o=p.default.get(m.default.Name,m.default);o.waveIndex=e;let l=this._zombieRandom.random(),r=n.default.getZombie(l);null!=r?(o.illustratedId=r.illustratedId,o.resName=r.resName,o.levelHp=Math.floor(a*t.ratio*i.default.random(.8,1.2)),o.levelHp>this._zombieMaxHp&&(o.levelHp=this._zombieMaxHp),o.hp=Math.floor(o.levelHp*r.hpRatio),o.speedRate=r.speedRate*i.default.random(.8,1.2),o.attack=r.attack,o.attackInterval=r.attackInterval,o.funcID=r.funcID,o.delay=Math.floor(t.interval*i.default.random(.8,1.2)),o.scale=i.default.random(.8,1.2),o.isScaleX=i.default.randomBoolean(),this._bornDatas.push(o),s-=o.levelHp):w.default.error("读取僵尸配置失败，zombieID =",l)}return-s}createFirstWave(){let e=Math.min(this._idleMin,this._firstWaveNum),t=Math.min(this._idleMax,this._firstWaveNum),a=i.default.randomInt(e,t),n=null;for(let e=0;e<a;e++)n=this._bornDatas[this._createIndex],this.createZombie(n,u.EnumZombieState.IDLE),this._createIndex++;null!=n&&this.owner.timer.once(n.delay,this,this.onCreateZombie),1!=h.default.getData(c.default).level&&_.default.playSound(y.default.bgmOfTheFirstZombie)}createZombie(e,t,a=null){let n=s.default.get(s.EnumSprite.ZOMBIE,e.resName),l=i.default.randomBoolean(),h=0,c=0;if(u.EnumZombieState.IDLE==t)n.transform.position.x=this._zombieAssembly.x+i.default.random(-4,4),n.transform.position.z=this._zombieAssembly.z+i.default.random(-5,8);else if(null!=a)l=!1,n.transform.position=a,c=i.default.random(-4,0);else{h=i.default.random(this._bornOverOffsetMin,this._bornOverOffsetMax);let e=l?this._zombieBorn1:this._zombieBorn2;n.transform.position.x=e.x,n.transform.position.z=e.z+i.default.random(-2,2)}n.transform.position.y=0,n.transform.position=n.transform.position;let m=e.scale*(e.isScaleX?-1:1);n.transform.scale.setValue(m,e.scale,e.scale),n.transform.scale=n.transform.scale,n.transform.rotation=new Laya.Quaternion(0,0,0,-1);let p=n.getComponent(o.default);p.speedRate=e.speedRate*this._zombieSpeedPercent/100,p.attack=e.attack,p.attackInterval=e.attackInterval,p.isBornLeft=l,p.bornOverTarget=c,p.bornOverOffset=h,n.getComponent(v.default).state=t;let f=n.getComponent(b.default);f.isBoss=e.isBoss,f.levelHp=e.levelHp,f.totalHp=e.hp,f.BloodShow=!0,n.getComponent(x.default).funcID=e.funcID,this.owner.addChild(n),e.isBoss&&r.default.instance.event(d.default.BOSS_BORN,n),p.pause=this._isPause,this.checkIsNewZombie(e.illustratedId)}onCreateZombie(){if(this.owner.numChildren>=n.default.MaxZombieNum)return void this.owner.timer.once(1e3,this,this.onCreateZombie);if(this._createIndex>=this._bornDatas.length)return;let e=this._bornDatas[this._createIndex];this._createIndex++,e.isWaitWaveEnd?(this._checkWaveEndCount=0,this.owner.timer.loop(1e3,this,this.checkWaveEnd)):e.isLastWave?(this._isBossLevel||r.default.instance.event(d.default.LAST_WAVE),this._isLastWave=!0,this.owner.timer.once(1e3,this,this.onCreateZombie)):(this.createZombie(e,u.EnumZombieState.BORN),this.owner.timer.once(e.delay*this._delayRate,this,this.onCreateZombie))}checkWaveEnd(){this._checkWaveEndCount++,this._isLastWave?this._createIndex>=this._bornDatas.length&&this.owner.numChildren<=0&&(this.owner.timer.clear(this,this.checkWaveEnd),this._isBossLevel||r.default.instance.event(d.default.VICTORY)):(this.owner.numChildren<=3||this._checkWaveEndCount>=10)&&(this._delayRate=1,this.owner.timer.clear(this,this.checkWaveEnd),this.onCreateZombie())}createBoss(e){if(g.EnumBoss.NORMAL==e.type){let t=p.default.get(m.default.Name,m.default);t.isBoss=!0,t.illustratedId=e.illustratedId,t.waveIndex=0,t.resName=e.resName,t.hp=e.hp,t.levelHp=e.hp,t.speedRate=e.speedRate,t.attack=e.attack,t.attackInterval=e.attackInterval,t.delay=e.appearDelay,t.scale=e.sizeRate,t.isScaleX=i.default.randomBoolean(),this.createZombie(t,u.EnumZombieState.BORN),p.default.recover(m.default.Name,t)}else if(g.EnumBoss.CAR==e.type){let t=s.default.get(s.EnumSprite.BOSS,e.resName);t.transform.position.x=this._zombieBorn1.x,t.transform.position.z=this._zombieBorn1.z,t.transform.position.y=0,t.transform.position=t.transform.position,t.transform.scale.setValue(e.sizeRate,e.sizeRate,e.sizeRate),t.transform.scale=t.transform.scale,t.transform.rotation=new Laya.Quaternion(0,0,0,-1),t.getComponent(v.default).state=u.EnumZombieState.MOVE;let a=t.getComponent(b.default);a.isBoss=!0,a.levelHp=e.hp,a.totalHp=e.hp,a.BloodShow=!0,r.default.instance.event(d.default.BOSS_BORN,t);let i=t.getComponent(L.default);i.pause=this._isPause,i.speedRate=e.speedRate,i.attackInterval=e.attackInterval,this.owner.addChild(t),this.checkIsNewZombie(e.illustratedId)}else w.default.error("boss type error! type = ",e.type);r.default.instance.event(d.default.BOSS_APPEAR)}checkIsNewZombie(e){if(e&&e>0){let t=h.default.getData(D.default);t.isUnlock(e)||(t.unlock(e),r.default.instance.event(d.default.NEW_ZOMBIE,e))}}}a.default=U,U.DelayReduceTime=1e4,U.DelayReduceRate=.2,U.DelayReduceMinRate=.2},{"../../../base/base/Debug":8,"../../../base/base/MathUtil":11,"../../../base/base/Pool":12,"../../../base/math/WeightRandom":17,"../../../config/ResData":49,"../../../config/ResGameConfig":50,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/ui/UIEvent":69,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/illustrated/IllustratedData":83,"../../data/user/UserData":86,"../../ui/game/GameUI":222,"../GameModule":88,"../common/CommonEvent":100,"../common/HeadShotScript":103,"../common/SpritePool":106,"../event/GameEvent":122,"../scene/Scene":136,"../zombie/FuncScript":152,"../zombie/LifeScript":153,"../zombie/StateScript":154,"../zombie/ZombieDefine":156,"../zombie/ZombieScript":158,"../zombie/boss/BossCarScript":159,"./ZombieBornData":94}],96:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../common/WeaponLogicScript"),n=e("./BonusLogicScript"),s=e("../common/BuffLogicScript"),o=e("../common/CommonEvent");class l extends Laya.Sprite3D{constructor(){super(l.Name)}init(){this.addComponent(i.default),this.addComponent(n.default),this.addComponent(s.default)}set pause(e){this.event(o.default.PAUSE,e)}}a.default=l,l.Name="Bonus"},{"../common/BuffLogicScript":99,"../common/CommonEvent":100,"../common/WeaponLogicScript":108,"./BonusLogicScript":97}],97:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../config/ResGameConfig"),n=e("../../../base/base/Debug"),s=e("../common/SpritePool"),o=e("../../../base/base/MathUtil"),l=e("../scene/Scene"),r=e("../zombie/ChickenScript"),d=e("../../data/GameDataModule"),u=e("../zombie/LifeScript"),h=e("../GameModule"),c=e("../event/GameEvent"),m=e("../state/BonusSettleState"),p=e("../../data/user/UserData"),f=e("../common/CommonEvent"),g=e("../zombie/StateScript"),_=e("../zombie/ZombieDefine");class y extends Laya.Script3D{constructor(){super(...arguments),this._zombieBorn1=null,this._zombieBorn2=null,this._reminTime=0,this._isPause=!1,this._weaponDps=0}onEnable(){let e=l.default.instance.view;this._zombieBorn1=e.zombieBorn1,this._zombieBorn2=e.zombieBorn2;let t=d.default.getData(p.default),a=i.default.getWeapon(t.equipWeaponLevel);this._weaponDps=a.dps,this._reminTime=y.TIME,this.owner.timer.loop(1e3,this,this.onTimeLoop),this.owner.on(f.default.PAUSE,this,this.onPause),this.onBornLoop()}onDisable(){this.owner.off(f.default.PAUSE,this,this.onPause),this.owner.timer.clear(this,this.onBornLoop),this.owner.timer.clear(this,this.onTimeLoop),this.owner.timer.clear(this,this.checkChicken),this._zombieBorn1=null,this._zombieBorn2=null;for(let e=this.owner.numChildren-1;e>=0;e--){const t=this.owner.getChildAt(e);s.default.recover(t)}this._isPause=!1}onPause(e){this._isPause=e;let t=this.owner.numChildren;for(let a=0;a<t;a++){let t=this.owner.getChildAt(a).getComponent(r.default);null!=t&&(t.pause=e)}e?(this.owner.timer.clear(this,this.onTimeLoop),this.owner.timer.clear(this,this.onBornLoop)):(this.owner.timer.loop(1e3,this,this.onTimeLoop),this.onBornLoop())}onBornLoop(){this.owner.numChildren>=i.default.MaxZombieNum?this.owner.timer.once(y.BornInterval,this,this.onBornLoop):(this.createChick(),this.owner.timer.once(y.BornInterval*o.default.random(.5,1.5),this,this.onBornLoop))}onTimeLoop(){this._reminTime-=1e3,h.default.instance.event(c.default.BONUS_TIME,this._reminTime),this._reminTime<=0&&(this.owner.timer.clear(this,this.onTimeLoop),this.owner.timer.clear(this,this.onBornLoop),this.owner.timer.loop(100,this,this.checkChicken))}createChick(){let e=o.default.randomInt(1,100)>70?i.default.GoldChickenID:i.default.ChickenID,t=i.default.getZombie(e);if(null==t)return void n.default.error("读取僵尸鸡配置失败，zombieID",e);let a=s.default.get(s.EnumSprite.CHICKEN,t.resName),l=this._zombieBorn1;a.transform.position.x=l.x,a.transform.position.z=l.z+o.default.random(-4,4),a.transform.position.y=0,a.transform.position=a.transform.position,a.transform.rotation=new Laya.Quaternion(0,0,0,-1);let d=o.default.random(1.5,2);a.transform.scale.setValue(d,d,d),a.transform.scale=a.transform.scale,a.transform.rotate(new Laya.Vector3(0,90,0),!0);let h=a.getComponent(u.default);h.totalHp=Math.floor(this._weaponDps*t.hpRatio*o.default.random(.8,1.2)),h.BloodShow=!0,a.getComponent(g.default).state=_.EnumZombieState.MOVE;let c=a.getComponent(r.default);c.speedRate=t.speedRate*o.default.random(.5,1.5),c.isBornLeft=!0,this.owner.addChild(a)}checkChicken(){this.owner.numChildren<=0&&(this.owner.timer.clear(this,this.checkChicken),h.default.instance.changeState(m.default))}}a.default=y,y.BornInterval=300,y.TIME=3e4},{"../../../base/base/Debug":8,"../../../base/base/MathUtil":11,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../GameModule":88,"../common/CommonEvent":100,"../common/SpritePool":106,"../event/GameEvent":122,"../scene/Scene":136,"../state/BonusSettleState":140,"../zombie/ChickenScript":151,"../zombie/LifeScript":153,"../zombie/StateScript":154,"../zombie/ZombieDefine":156}],98:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./SpritePool"),n=e("../../../config/ResGameConfig");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this.delayTime=100,this._remainingTime=0}onEnable(){this._remainingTime=this.delayTime}onDisable(){this._remainingTime=0}onUpdate(){this._remainingTime-=n.default.PER_FRAME_TIME,this._remainingTime<=0&&i.default.recover(this.owner)}}},{"../../../config/ResGameConfig":50,"./SpritePool":106}],99:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/base/Dictionary"),n=e("./buff/Buff"),s=e("../../../base/base/Pool"),o=e("../../../config/ResGameConfig"),l=e("../../data/GameDataModule"),r=e("../../data/buff/BuffData"),d=e("../GameModule"),u=e("../event/GameEvent"),h=e("./CommonEvent");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this._buffDic=new i.default,this._isPause=!1}onEnable(){let e=l.default.getData(r.default);e.buffId>0&&this.addBuff(e.buffId),d.default.instance.on(u.default.ADD_BUFF,this,this.onAddBuff),this.owner.on(h.default.PAUSE,this,this.onPause)}onDisable(){this._isPause=!1,this.owner.off(h.default.PAUSE,this,this.onPause),d.default.instance.off(u.default.ADD_BUFF,this,this.onAddBuff);let e=this;this._buffDic.forEach((t,a)=>{a.off(Laya.Event.END,e,e.onBuffEnd),s.default.recover("Buff",a)}),this._buffDic.clear()}onUpdate(){this._isPause||this._buffDic.forEach((e,t)=>{t.onUpdate()})}addBuff(e){this._buffDic.containsKey(e)&&this.removeBuff(e);let t=o.default.getBuff(e);if(null==t)return;let a=s.default.get("Buff",n.default);a.on(Laya.Event.END,this,this.onBuffEnd),this._buffDic.setValue(e,a),a.init(t,this.owner),d.default.instance.event(u.default.BUFF_START,e)}removeBuff(e){d.default.instance.event(u.default.BUFF_END,e);let t=this._buffDic.getValue(e);null!=t&&(t.off(Laya.Event.END,this,this.onBuffEnd),s.default.recover("Buff",t),this._buffDic.remove(e))}onBuffEnd(e){this.removeBuff(e)}onAddBuff(e){this.addBuff(e)}onPause(e){this._isPause=e}}},{"../../../base/base/Dictionary":9,"../../../base/base/Pool":12,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/buff/BuffData":78,"../GameModule":88,"../event/GameEvent":122,"./CommonEvent":100,"./buff/Buff":109}],100:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.PAUSE="pause"},{}],101:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../config/ResData");a.default=class{constructor(){this.type=i.EnumReward.INVAIL,this.param=0,this.time=0,this.sprite=null}destroy(){}clear(){}}},{"../../../config/ResData":49}],102:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../config/ResData"),n=e("../GameModule"),s=e("../event/GameEvent"),o=e("./SpritePool"),l=e("./CommonEvent"),r=e("./DropData"),d=e("../scene/Scene"),u=e("../../../base/base/MathUtil"),h=e("../../../config/ResGameConfig"),c=e("../../ui/game/GameUI"),m=e("../../../base/base/RewardFly"),p=e("../../../base/base/Debug"),f=e("../../../base/base/Pool"),g=e("../../../base/base/ArrayUtil");class _ extends Laya.Script3D{constructor(){super(...arguments),this._drops=new Array,this._isPause=!1}onEnable(){n.default.instance.on(s.default.DROP,this,this.onDrop),n.default.instance.on(s.default.FIRE_HIT,this,this.onFirHit),this.owner.on(l.default.PAUSE,this,this.onPause)}onDisable(){this._isPause=!1,n.default.instance.off(s.default.DROP,this,this.onDrop),n.default.instance.off(s.default.FIRE_HIT,this,this.onFirHit),this.owner.off(l.default.PAUSE,this,this.onPause)}onUpdate(){if(this._isPause)return;for(let e=this._drops.length-1;e>=0;e--){const t=this._drops[e];t.time+=h.default.PER_FRAME_TIME,t.time>=_.StayTime&&this.collect(t)}}onDrop(e,t,a){if(i.EnumReward.INVAIL!=e&&null!=a){if(i.EnumReward.BUFF==e){let n=h.default.getBuff(t);if(null!=n){let s=null;i.EnumBuff.ADD_HP==n.type?s=o.default.get(o.EnumSprite.OBJECTS,"Life"):i.EnumBuff.INFINITE_BULLET==n.type?s=o.default.get(o.EnumSprite.OBJECTS,"Cartridge"):i.EnumBuff.SPEED_DOWN==n.type&&(s=o.default.get(o.EnumSprite.OBJECTS,"Reload"));let l=f.default.get("DropData",r.default);l.type=e,l.param=t,l.sprite=s,l.time=0,a.cloneTo(s.transform.position),s.transform.position=s.transform.position,this.owner.addChild(s),this._drops.push(l)}}}else p.default.error("drop param error!")}onPause(e){this._isPause=e}onFirHit(e,t){if(null==e)return;for(let t=this._drops.length-1;t>=0;t--){const a=this._drops[t];if(a.sprite==e){this.collect(a);break}}}collect(e){if(null!=e){if(e.sprite){d.default.instance.view.camera.worldToViewportPoint(e.sprite.transform.position,u.default.TEMP_V3),o.default.recover(e.sprite);let t=new Laya.Point(u.default.TEMP_V3.x,u.default.TEMP_V3.y);if(i.EnumReward.BUFF==e.type){let a=h.default.getBuff(e.param);if(null!=a)if(i.EnumBuff.ADD_HP==a.type){let a=c.default.getBuffPos();m.default.fly(t,a,m.EnumRewardFly.LIFE,1,.7,null,Laya.Handler.create(this,this.onCollectOver,[e.type,e.param]))}else if(i.EnumBuff.SPEED_DOWN==a.type){let a=c.default.getBuffPos();m.default.fly(t,a,m.EnumRewardFly.SPEEND_DOWN,1,.7,null,Laya.Handler.create(this,this.onCollectOver,[e.type,e.param]))}else if(i.EnumBuff.INFINITE_BULLET==a.type){let a=c.default.getBuffPos();m.default.fly(t,a,m.EnumRewardFly.INFINITE_BULLET,1,.7,null,Laya.Handler.create(this,this.onCollectOver,[e.type,e.param]))}else this.onCollectOver(e.type,e.param)}}else this.onCollectOver(e.type,e.param);g.default.remove(this._drops,e),f.default.recover("DropData",e)}}onCollectOver(e,t){if(i.EnumReward.BUFF==e){let e=h.default.getBuff(t);null!=e&&(e.type==i.EnumBuff.ADD_HP&&c.default.playAddLifeAnimation(),n.default.instance.event(s.default.ADD_BUFF,t))}}}a.default=_,_.StayTime=3e3},{"../../../base/base/ArrayUtil":4,"../../../base/base/Debug":8,"../../../base/base/MathUtil":11,"../../../base/base/Pool":12,"../../../base/base/RewardFly":13,"../../../config/ResData":49,"../../../config/ResGameConfig":50,"../../ui/game/GameUI":222,"../GameModule":88,"../event/GameEvent":122,"../scene/Scene":136,"./CommonEvent":100,"./DropData":101,"./SpritePool":106}],103:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/base/Pool"),n=e("../../../base/base/MathUtil");class s extends Laya.Script3D{constructor(){super(...arguments),this._heads=new Array,this._targetPoss=new Array,this._process=0,this._ySpeed=0}onEnable(){for(let e=1;e<=s.HEAD_NUM;e++){let t=this.owner.getChildByName("Head_0"+e);this._heads.push(t);let a=i.default.getVector3();a.setValue(n.default.random(-.1,.1),n.default.random(.4,.6),n.default.random(-.1,.1)),this._targetPoss.push(a)}this._process=0,this._ySpeed=0}onDisable(){for(let e=0;e<this._heads.length;e++){const t=this._heads[e];t.active=!0,t.transform.localPosition.toDefault(),t.transform.localPosition=t.transform.localPosition,i.default.recoverVector3(this._targetPoss[e])}this._heads.splice(0,this._heads.length),this._targetPoss.splice(0,this._targetPoss.length)}onUpdate(){this._process+=.006;for(let e=0;e<this._heads.length;e++){const t=this._heads[e];if(t.transform.position.y<=0)continue;const a=this._targetPoss[e];let i=a.x*this._process;this._ySpeed+=.004*this._process;let n=a.y*this._process-this._ySpeed,s=a.z*this._process;t.transform.position.y<=0&&(t.transform.position.y<0&&(t.transform.position.y=0,t.transform.position=t.transform.position),n=t.transform.localPosition.y),t.transform.localPosition.setValue(i,n,s),t.transform.localPosition=t.transform.localPosition}}}a.default=s,s.HEAD_NUM=5},{"../../../base/base/MathUtil":11,"../../../base/base/Pool":12}],104:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class extends Laya.Script3D{constructor(){super(...arguments),this._rotate=new Laya.Vector3(0,1,0)}onEnable(){}onDisable(){}onUpdate(){this.owner.transform.rotate(this._rotate,!1,!1)}}},{}],105:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class extends Laya.Script3D{constructor(){super(...arguments),this._isShaking=!1,this._shakeTime=0,this._shakeAmount=.7,this._originalPos=null}onAwake(){this._transform=this.owner.transform}onEnable(){this._originalPos=this._transform.localPosition.clone()}onUpdate(){this._isShaking&&(this._shakeTime>0?(this._transform.localPosition.x=this._originalPos.x+Math.random()*this._shakeAmount,this._transform.localPosition.y=this._originalPos.y+Math.random()*this._shakeAmount,this._transform.localPosition.z=this._originalPos.z+Math.random()*this._shakeAmount,this._transform.localPosition=this._transform.localPosition,this._shakeTime-=Laya.timer.delta):(this._shakeTime=0,this._transform.localPosition=this._originalPos,this._isShaking=!1))}shake(e,t){this._isShaking=!0,this._shakeTime=e,this._shakeAmount=t}}},{}],106:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/base/Debug"),n=e("../zombie/ZombieScript"),s=e("./AutoRecoverScript"),o=e("../zombie/ChickenScript"),l=e("../zombie/StateScript"),r=e("../zombie/LifeScript"),d=e("../zombie/FuncScript"),u=e("../zombie/boss/BossCarScript"),h=e("./RotateScript");var c;!function(e){e[e.ZOMBIE=0]="ZOMBIE",e[e.WEAPON=1]="WEAPON",e[e.EFFECT=2]="EFFECT",e[e.OBJECTS=3]="OBJECTS",e[e.CHICKEN=4]="CHICKEN",e[e.BOSS=5]="BOSS"}(c=a.EnumSprite||(a.EnumSprite={}));class m{static get(e,t,a){let m=Laya.Pool.getItem(t);if(null==m){let a="";switch(e){case c.ZOMBIE:case c.CHICKEN:case c.BOSS:a="res/scene/Zombie.lh";break;case c.EFFECT:a="res/scene/Effect.lh";break;case c.WEAPON:break;case c.OBJECTS:a="res/scene/Objects.lh";break;default:return void i.default.error("error sprite type",e)}if(null==(m=Laya.loader.getRes(a)))return m;if(""!=t&&null==(m=m.getChildByName(t)))return i.default.error("error sprite name",t),m;switch(m=m.clone(),e){case c.ZOMBIE:m.addComponent(l.default),m.addComponent(r.default),m.addComponent(n.default),m.addComponent(d.default);break;case c.CHICKEN:m.addComponent(l.default),m.addComponent(r.default),m.addComponent(o.default);break;case c.BOSS:m.addComponent(l.default),m.addComponent(r.default),-1!=t.indexOf("Car")&&m.addComponent(u.default);break;case c.OBJECTS:"Cartridge"!=t&&"Reload"!=t||m.addComponent(h.default)}}if(null!=a){let e=m.getComponent(s.default);null==e&&(e=m.addComponent(s.default)),e.delayTime=a}return m}static recover(e){null!=e&&(e.removeSelf(),Laya.Pool.recover(e.name,e))}}a.default=m,m.DefaultPosV3=new Laya.Vector3(0,0,0)},{"../../../base/base/Debug":8,"../zombie/ChickenScript":151,"../zombie/FuncScript":152,"../zombie/LifeScript":153,"../zombie/StateScript":154,"../zombie/ZombieScript":158,"../zombie/boss/BossCarScript":159,"./AutoRecoverScript":98,"./RotateScript":104}],107:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.BATTLE=0]="BATTLE",e[e.BONUS=1]="BONUS",e[e.OPERA=2]="OPERA"}(a.EnumStartType||(a.EnumStartType={}))},{}],108:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../config/ResGameConfig"),n=e("../common/SpritePool"),s=e("../weapon/WeaponScript"),o=e("../scene/Scene"),l=e("../GameModule"),r=e("../event/GameEvent"),d=e("../../data/GameDataModule"),u=e("../effect/DamageEffect"),h=e("../../data/user/UserData"),c=e("../../common/ui/UIModule"),m=e("../../common/ui/UIEvent"),p=e("../../ui/game/GameUI"),f=e("./CommonEvent");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this._weapon=null}onEnable(){let e=d.default.getData(h.default),t=i.default.getWeapon(e.equipWeaponLevel),a=n.default.get(n.EnumSprite.WEAPON,t.resName);this._weapon=a.getComponent(s.default),this._weapon.type=t.type,this._weapon.sightType=t.sightType,this._weapon.damage=t.damage,this._weapon.maxBulletNum=t.bulletNum,this._weapon.fireSpeedRate=t.fireRate,this._weapon.reloadSpeedRate=t.reloadRate,this._weapon.shootSound=t.shootSound,this._weapon.reloadSound=t.reloadSound,this._weapon.animFireDelay=t.animFireDelay,o.default.instance.view.masterBorn.addChild(a),this._weapon.sightEnable=!0,l.default.instance.on(r.default.RELOAD,this,this.onReload),l.default.instance.on(r.default.WEAPON_MOUSE_DOWN,this,this.onWeaponMouseDown),c.default.instance.on(m.default.OPEN,this,this.onUIOpen),u.default.start(),this.owner.on(f.default.PAUSE,this,this.onPause)}onDisable(){this.owner.off(f.default.PAUSE,this,this.onPause),u.default.stop(),n.default.recover(this._weapon.owner),this._weapon=null,l.default.instance.off(r.default.RELOAD,this,this.onReload),l.default.instance.off(r.default.WEAPON_MOUSE_DOWN,this,this.onWeaponMouseDown),c.default.instance.off(m.default.OPEN,this,this.onUIOpen)}onUpdate(){}onPause(e){this._weapon.pause=e}mouseDown(e){this._weapon.mouseDown(e)}setWeaponAble(e){this._weapon.operable=e}get weapon(){return this._weapon}onReload(){this._weapon.onReload()}onWeaponMouseDown(e){this._weapon.mouseDown(e)}onUIOpen(e){e instanceof p.default&&(c.default.instance.off(m.default.OPEN,this,this.onUIOpen),l.default.instance.event(r.default.UPDATE_BULLET,[this._weapon.isInfiniteBullet?-1:this._weapon.maxBulletNum,this._weapon.maxBulletNum]))}}},{"../../../config/ResGameConfig":50,"../../common/ui/UIEvent":69,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../ui/game/GameUI":222,"../GameModule":88,"../common/SpritePool":106,"../effect/DamageEffect":120,"../event/GameEvent":122,"../scene/Scene":136,"../weapon/WeaponScript":150,"./CommonEvent":100}],109:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./effect/BuffEffectFactory"),n=e("../../../../base/base/Pool");a.default=class extends Laya.EventDispatcher{constructor(){super(),this._data=null,this._carrier=null,this._effect=null}destroy(){this.clear()}clear(){this._data=null,this._carrier=null,this._effect.off(Laya.Event.END,this,this.onEffectEnd),n.default.recover("BuffEffect",this._effect)}init(e,t){this._carrier=t,this._data=e,this._effect=i.default.create(e),null!=this._effect&&(this._effect.init(this),this._effect.on(Laya.Event.END,this,this.onEffectEnd),this._effect.start())}onUpdate(){null!=this._effect&&this._effect.onUpdate()}get data(){return this._data}get carrier(){return this._carrier}onEffectEnd(){this.event(Laya.Event.END,this.data.id)}}},{"../../../../base/base/Pool":12,"./effect/BuffEffectFactory":114}],110:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../../config/ResGameConfig");a.default=class extends Laya.EventDispatcher{constructor(){super(),this._buff=null,this._isEnd=!1,this._time=0,this._timeCount=0}destroy(){this.clear()}clear(){this.end(),this._buff=null}init(e){this._buff=e,this._time=e.data.time,this._timeCount=0}onUpdate(){return!this._isEnd&&-1!=this._time&&(this._timeCount+=i.default.PER_FRAME_TIME,this._timeCount>=this._time&&(this._timeCount=this._time,this.timeOut()),!0)}start(){this._isEnd=!1}end(){this._isEnd=!0}timeOut(){this.event(Laya.Event.END)}}},{"../../../../../config/ResGameConfig":50}],111:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../battle/LifeLogicScript"),n=e("./BuffEffectInterval");a.default=class extends n.default{constructor(){super(...arguments),this._carrier=null,this._addHp=0}init(e){super.init(e),this._carrier=e.carrier,this._interval=e.data.param[0],this._addHp=e.data.param[1]}onEffect(){if(null!=this._carrier){let e=this._carrier.getComponent(i.default);null!=e&&(e.life+=this._addHp)}}}},{"../../../battle/LifeLogicScript":92,"./BuffEffectInterval":117}],112:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BuffEffect"),n=e("../../WeaponLogicScript");a.default=class extends i.default{constructor(){super(...arguments),this._carrier=null,this._addRate=0}init(e){super.init(e),this._carrier=e.carrier,this._addRate=e.data.param[0]}start(){if(super.start(),null!=this._carrier){let e=this._carrier.getComponent(n.default);if(null!=e&&null!=e.weapon){let t=e.weapon.damage;t=Math.ceil(t*(1+this._addRate)),e.weapon.damage=t}}this.event(Laya.Event.END)}end(){super.end()}}},{"../../WeaponLogicScript":108,"./BuffEffect":110}],113:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BuffEffect"),n=e("../../WeaponLogicScript");a.default=class extends i.default{constructor(){super(...arguments),this._carrier=null,this._addRate=0}init(e){super.init(e),this._carrier=e.carrier,this._addRate=e.data.param[0]}start(){if(super.start(),null!=this._carrier){let e=this._carrier.getComponent(n.default);if(null!=e&&null!=e.weapon){let t=e.weapon.maxBulletNum;t=Math.ceil(t*(1+this._addRate)),e.weapon.maxBulletNum=t,e.weapon.curBulletNum=t}}this.event(Laya.Event.END)}end(){super.end()}}},{"../../WeaponLogicScript":108,"./BuffEffect":110}],114:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../../config/ResData"),n=e("../../../../../base/base/Debug"),s=e("../../../../../base/base/Pool"),o=e("./BuffEffectReload"),l=e("./BuffEffectAddHp"),r=e("./BuffEffectCartidge"),d=e("./BuffEffectAttack"),u=e("./BuffEffectInfiniteBullet"),h=e("./BuffEffectFillUp"),c=e("./BuffEffectSpeedDown");a.default=class{static create(e){if(null==e)return null;let t=null;switch(e.type){case i.EnumBuff.RELOAD:t=s.default.get("BuffEffectReload",o.default);break;case i.EnumBuff.CARTRIDGE:t=s.default.get("BuffEffectCartidge",r.default);break;case i.EnumBuff.ATTACK:t=s.default.get("BuffEffectAttack",d.default);break;case i.EnumBuff.ADD_HP:t=s.default.get("BuffEffectAddHp",l.default);break;case i.EnumBuff.INFINITE_BULLET:t=s.default.get("BuffEffectInfiniteBullet",u.default);break;case i.EnumBuff.SPEED_DOWN:t=s.default.get("BuffEffectSpeedDown",c.default);break;case i.EnumBuff.FILLUP:t=s.default.get("BuffEffectFillUp",h.default);break;default:n.default.error("buff type error!type = ",e.type)}return t}}},{"../../../../../base/base/Debug":8,"../../../../../base/base/Pool":12,"../../../../../config/ResData":49,"./BuffEffectAddHp":111,"./BuffEffectAttack":112,"./BuffEffectCartidge":113,"./BuffEffectFillUp":115,"./BuffEffectInfiniteBullet":116,"./BuffEffectReload":118,"./BuffEffectSpeedDown":119}],115:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BuffEffect"),n=e("../../WeaponLogicScript");a.default=class extends i.default{constructor(){super(...arguments),this._carrier=null}init(e){super.init(e),this._carrier=e.carrier}start(){if(super.start(),null!=this._carrier){let e=this._carrier.getComponent(n.default);null!=e&&null!=e.weapon&&(e.weapon.curBulletNum=e.weapon.maxBulletNum)}this.event(Laya.Event.END)}end(){super.end()}}},{"../../WeaponLogicScript":108,"./BuffEffect":110}],116:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BuffEffect"),n=e("../../WeaponLogicScript");a.default=class extends i.default{constructor(){super(...arguments),this._carrier=null}init(e){super.init(e),this._carrier=e.carrier}start(){super.start(),this.isInfiniteBullet=!0}end(){this.isInfiniteBullet=!1,super.end()}set isInfiniteBullet(e){if(null!=this._carrier){let t=this._carrier.getComponent(n.default);null!=t&&null!=t.weapon&&(t.weapon.isInfiniteBullet=e)}}}},{"../../WeaponLogicScript":108,"./BuffEffect":110}],117:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BuffEffect"),n=e("../../../../../config/ResGameConfig"),s=e("../../../../../base/base/Debug");a.default=class extends i.default{constructor(){super(...arguments),this._interval=0,this._intervalTimeCount=0}onUpdate(){if(super.onUpdate())return this._intervalTimeCount+=n.default.PER_FRAME_TIME,this._intervalTimeCount>=this._interval&&(this.onEffect(),this._intervalTimeCount-=this._interval),!0}start(){super.start(),this.onEffect()}end(){super.end()}onEffect(){s.default.error("请实现接口")}}},{"../../../../../base/base/Debug":8,"../../../../../config/ResGameConfig":50,"./BuffEffect":110}],118:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BuffEffect"),n=e("../../WeaponLogicScript");a.default=class extends i.default{constructor(){super(...arguments),this._carrier=null,this._addRate=0}init(e){super.init(e),this._carrier=e.carrier,this._addRate=e.data.param[0]}start(){if(super.start(),null!=this._carrier){let e=this._carrier.getComponent(n.default);null!=e&&null!=e.weapon&&(e.weapon.reloadSpeedRate=1+this._addRate)}this.event(Laya.Event.END)}end(){super.end()}}},{"../../WeaponLogicScript":108,"./BuffEffect":110}],119:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BuffEffect"),n=e("../../../GameModule"),s=e("../../../event/GameEvent");a.default=class extends i.default{constructor(){super(...arguments),this._carrier=null,this._percent=0}init(e){super.init(e),this._carrier=e.carrier,this._percent=e.data.param[0]}start(){super.start(),n.default.instance.event(s.default.ZOMBIE_SPEED_DOWN,this._percent)}end(){n.default.instance.event(s.default.ZOMBIE_SPEED_UP,this._percent),super.end()}}},{"../../../GameModule":88,"../../../event/GameEvent":122,"./BuffEffect":110}],120:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../../base/base/MathUtil"),s=e("../../../base/base/Pool"),o=e("../../common/ui/UIUtil");class l extends i.ui.effect.DamageUI{static start(){Laya.stage.addChild(this._root)}static stop(){this._root.removeSelf()}static addEffect(e,t,a,i){let n=s.default.get("DamageEffect",l);n.fcDamage.value=e.toString(),n.fcDamage.skin=t?"game/fontClip_red.png":"game/fontClip_white.png",n.x=a,n.y=i,o.default.adapt(n),this._root.addChild(n),n.play(),this._effects.push(n)}static clearAllEffect(){let e=this._effects.length;for(let t=0;t<e;t++){const e=this._effects[t];s.default.recover("DamageEffect",e)}this._effects.splice(0,e)}clear(){this.aniLeft.stop(),this.aniRight.stop(),this.aniLeft.off(Laya.Event.COMPLETE,this,this.onPlayerOver),this.aniRight.off(Laya.Event.COMPLETE,this,this.onPlayerOver),this.removeSelf()}play(){let e=n.default.randomBoolean()?this.aniLeft:this.aniRight;e.on(Laya.Event.COMPLETE,this,this.onPlayerOver),e.play(0,!1)}onPlayerOver(e){let t=l._effects.indexOf(this);t>=0&&l._effects.splice(t,1),s.default.recover("DamageEffect",this)}}a.default=l,l._root=new Laya.Sprite,l._effects=new Array},{"../../../base/base/MathUtil":11,"../../../base/base/Pool":12,"../../../ui/layaMaxUI":315,"../../common/ui/UIUtil":73}],121:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../../base/base/Pool");var s;!function(e){e[e.NULL=0]="NULL",e[e.BEFORE=1]="BEFORE",e[e.AFTER=2]="AFTER"}(s=a.EnumHandClick||(a.EnumHandClick={}));class o extends i.ui.effect.HandUI{constructor(){super(...arguments),this.handStartPoint=null,this.handEndPoint=null,this.moveTime=400,this.nextDealy=200,this.count=3,this.isRecover=!1,this.curCount=0,this.overFunc=null,this.clickType=s.NULL,this._ySpeed=1,this._dir=1}clear(){}recover(){this.isRecover||(null!=this.overFunc&&(this.overFunc.recover(),this.overFunc=null),this.aniClick.off(Laya.Event.COMPLETE,this,this.onAniClickOver),Laya.timer.clearAll(this),this.isRecover=!0,Laya.Tween.clearAll(this),this.removeSelf(),n.default.recover(o.poolName,this))}static createClickHand(e,t,a){let i=n.default.get(o.poolName,o);return i.isRecover=!1,i.rotation=0,i.aniClick.play(0,!0),i.pos(t,a),e.addChild(i),i}static createHand(e,t,a,i,s,l,r,d){let u=n.default.get(o.poolName,o);return u.overFunc=d,u.isRecover=!1,u.handStartPoint=i,u.handEndPoint=s,u.moveTime=r,u.count=l,u.curCount=0,u.rotation=a,u.clickType=e,t.addChild(u),u.startHandMove(),u}startHandMove(){this.visible=!0,s.BEFORE==this.clickType?(this.pos(this.handStartPoint.x,this.handStartPoint.y),this.aniClick.once(Laya.Event.COMPLETE,this,this.onAniClickOver,[this,this.handMoveTween]),this.aniClick.play(0,!1)):this.handMoveTween()}handMoveTween(){this.pos(this.handStartPoint.x,this.handStartPoint.y);let e={x:this.handEndPoint.x,y:this.handEndPoint.y},t=Laya.Ease.linearNone,a=Laya.Handler.create(this,this.onHandMoveTweenOver);Laya.Tween.to(this,e,this.moveTime,t,a,0,!0,!0)}onHandMoveTweenOver(){this.count>0&&++this.curCount>=this.count?(null!=this.overFunc&&this.overFunc.run(),this.recover()):s.AFTER==this.clickType?(this.aniClick.once(Laya.Event.COMPLETE,this,this.onAniClickOver,[this,this.startNextHandMove]),this.aniClick.play(0,!1)):this.startNextHandMove()}startNextHandMove(){this.visible=!1,Laya.timer.once(this.nextDealy,this,this.startHandMove)}onAniClickOver(e,t){e&&t&&t.call(e)}}a.default=o,o.poolName="handEffect"},{"../../../base/base/Pool":12,"../../../ui/layaMaxUI":315}],122:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.SCENE_INITED="scene_inited",i.START_GAME="start_game",i.BUFF_OVER="buff_over",i.RELOAD="reload",i.UPDATE_BULLET="update_bullet",i.HEAD_SHOT="head_shot",i.LIFE_CHANGE="life_change",i.ADD_ZOMBIE="add_zombie",i.ZOMBIE_DEAD="zombie_dead",i.ZOMBIE_HIT="zombie_hit",i.MASTER_DEAD="master_dead",i.LEVEL_HP="level_hp",i.BOSS_HP="boss_hp",i.BEHIT="behit",i.VICTORY="victory",i.BOSS_APPEAR="boss_appear",i.LAST_WAVE="last_wave",i.SHOP_BUY="shop_buy",i.SHOP_BUY_SUCCESS="shop_buy_success",i.UNLOCK_GET_SUCCESS="unlockGetSuccess",i.RESULT_AWARD_GET="resultAwardGet",i.AWARD_FLY_OVER="awardFlyOver",i.AIRDROP_CLOSE="airdropClose",i.AIRDROP_AWARD_GET="airdropAwardGet",i.REVIVE="revive",i.BONUS_TIME="bonus_time",i.PAUSE="pause",i.RESUME="resume",i.UNLOCK_GET_FAIL="unlockGetFail",i.BOSS_BORN="boss_born",i.WEAPON_MOUSE_DOWN="weapon_mouse_down",i.REQ_INVITE_DATA="req_invite_data",i.TAKE_INVITE_REWARD="take_invite_reward",i.ADD_BUFF="add_buff",i.DROP="drop",i.FIRE_HIT="fire_hit",i.TURN_AWARD_GET="turn_award_get",i.BUFF_START="buff_START",i.BUFF_END="buff_END",i.ZOMBIE_SPEED_DOWN="zombie_speed_down",i.ZOMBIE_SPEED_UP="zombie_speed_up",i.NEW_ZOMBIE="new_zombie",i.SHOW_OPERATE_GUIDE="show_operate_guide"},{}],123:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../GameModule"),s=e("../event/GameEvent"),o=e("../../../base/base/AwardFly"),l=e("../../common/ui/UIModule"),r=e("../../common/ui/UIEvent"),d=e("../../ui/index/IndexUI"),u=e("../../data/combine/CombineData"),h=e("../../data/GameDataModule"),c=e("../../ui/index/view/IndexView"),m=e("../../ui/result/data/AwardType"),p=e("../../../base/base/Pool");a.default=class extends i.default{constructor(){super(...arguments),this._awardFlyArray=null}initialize(){n.default.instance.on(s.default.RESULT_AWARD_GET,this,this.onResultAwardGet),n.default.instance.on(s.default.AIRDROP_AWARD_GET,this,this.onAirdropAwardGet),n.default.instance.on(s.default.TURN_AWARD_GET,this,this.onTurnAwardGet),l.default.instance.on(r.default.OPEN,this,this.onUIOpen),this._awardFlyArray=new Array}uninitialize(){n.default.instance.off(s.default.RESULT_AWARD_GET,this,this.onResultAwardGet),n.default.instance.off(s.default.AIRDROP_AWARD_GET,this,this.onAirdropAwardGet),n.default.instance.off(s.default.TURN_AWARD_GET,this,this.onTurnAwardGet),l.default.instance.off(r.default.OPEN,this,this.onUIOpen)}onTurnAwardGet(e){this.awardFlyAnim(e,500)}onResultAwardGet(e,t){for(let t of e){let e=Laya.Handler.create(this,this.flyOverCallBack),a=o.default.create(t,e);this._awardFlyArray.push(a)}}onAirdropAwardGet(e){this.awardFlyAnim(e,0)}awardFlyAnim(e,t){let a=l.default.instance.getUI(d.default);if(null!=a)for(let i of e){let e=Laya.Handler.create(this,this.flyOverCallBack),n=o.default.create(i,e),s=a.getView(c.default).getDiamondPos();i.type==m.EAwardType.WEAPON?s=this.addWeapon(n,a):i.type==m.EAwardType.COIN&&(s=a.getView(c.default).getCoinPos()),n.playTXAnim(s,t)}}onUIOpen(e){Laya.timer.callLater(this,this.doUIOpen,[e])}doUIOpen(e){if(e instanceof d.default){for(let t of this._awardFlyArray){let a=t.awardItemData,i=e.getView(c.default).getDiamondPos();a.type==m.EAwardType.WEAPON?i=this.addWeapon(t,e):a.type==m.EAwardType.COIN&&(i=d.default.getCoinPos()),t.playTXAnim(i,500)}this._awardFlyArray.splice(0,this._awardFlyArray.length)}}addWeapon(e,t){let a=e.awardItemData;h.default.instance.getData(u.default).setSlot(a.slotIndex,a.weaponLevel);let i=t.getView(c.default).combineItems[a.slotIndex];i.setData(a.weaponLevel,a.icon),i.awardFlyStar();let n=p.default.getPoint();return n.x=.5*i.width,n.y=.5*i.height,i.localToGlobal(n,!1),n}flyOverCallBack(e){n.default.instance.event(s.default.AWARD_FLY_OVER,[e])}}},{"../../../base/base/AwardFly":5,"../../../base/base/Pool":12,"../../../base/mvc/MVCControl":20,"../../common/ui/UIEvent":69,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../ui/index/IndexUI":228,"../../ui/index/view/IndexView":243,"../../ui/result/data/AwardType":269,"../GameModule":88,"../event/GameEvent":122}],124:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../common/BubbleEffect");a.default=class extends i.default{initialize(){Laya.stage.on(Laya.Event.CLICK,this,this.onClick)}uninitialize(){Laya.stage.off(Laya.Event.CLICK,this,this.onClick)}onClick(){n.default.createBubble()}}},{"../../../base/mvc/MVCControl":20,"../../common/BubbleEffect":54}],125:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../network/NetworkModule"),s=e("../GameModule"),o=e("../event/GameEvent"),l=e("../../../base/base/Debug"),r=e("../../../config/ResGameConfig"),d=e("../../ui/reward/RewardUI"),u=e("../../data/GameDataModule"),h=e("../../data/network/NetWorkData"),c=e("../../network/NetwordEvent");a.default=class extends i.default{initialize(){n.default.instance.on(c.default.RELOGIN_SUCCESS,this,this.onReloginSuccess),s.default.instance.on(o.default.REQ_INVITE_DATA,this,this.reqInviteReward),s.default.instance.on(o.default.TAKE_INVITE_REWARD,this,this.onTakeInviteReward),this.reqInviteReward()}uninitialize(){n.default.instance.off(c.default.RELOGIN_SUCCESS,this,this.onReloginSuccess),n.default.unreqInviteReward(this,this.rspInviteReward),n.default.unTakeInviteReward(this,this.rspTakeInviteReward),s.default.instance.off(o.default.REQ_INVITE_DATA,this,this.reqInviteReward),s.default.instance.off(o.default.TAKE_INVITE_REWARD,this,this.onTakeInviteReward)}onReloginSuccess(){n.default.reqInviteReward(this,this.rspInviteReward)}reqInviteReward(){n.default.reqInviteReward(this,this.rspInviteReward)}onTakeInviteReward(){n.default.takeInviteReward(this,this.rspTakeInviteReward)}rspInviteReward(e){if(0!=e.code)l.default.log("请求邀请奖励回复失败",e.code,e.message);else{let t=e.data;if(null!=t){let e=u.default.getData(h.default);e.inviteUserCount=t.invite_user_count,e.takenRewardCount=t.taken_reward_count}}}rspTakeInviteReward(e){0!=e.code?l.default.log("领取邀请奖励失败",e.code,e.message):(u.default.getData(h.default).takenRewardCount++,d.default.show(r.default.InviteDiamonds))}}},{"../../../base/base/Debug":8,"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/network/NetWorkData":85,"../../network/NetwordEvent":165,"../../network/NetworkModule":166,"../../ui/reward/RewardUI":280,"../GameModule":88,"../event/GameEvent":122}],126:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCable"),n=e("./GameLogicOutputControl"),s=e("./GameOffLineControl"),o=e("./GameAwardAnimControl"),l=e("./GameLogicData"),r=e("./GameBubbleControl"),d=e("./GameNextDayRefreshControl"),u=e("./GameInviteRewardControl");class h extends i.default{constructor(){super(),this.addData(l.default),this.addControl(n.default),this.addControl(s.default),this.addControl(o.default),this.addControl(r.default),this.addControl(d.default),this.addControl(u.default),h.instance=this}get gameLogicData(){return this.getData(l.default)}}a.default=h,h.instance=null},{"../../../base/mvc/MVCable":26,"./GameAwardAnimControl":123,"./GameBubbleControl":124,"./GameInviteRewardControl":125,"./GameLogicData":127,"./GameLogicOutputControl":128,"./GameNextDayRefreshControl":129,"./GameOffLineControl":130}],127:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCData"),n=e("../../ui/index/tool/CombineDefine"),s=e("../GameModule"),o=e("../event/GameEvent"),l=e("../../common/ui/UIModule"),r=e("../../common/ui/UIEvent"),d=e("../../ui/game/GameUI"),u=e("../../ui/turn/TurnUI");a.default=class extends i.default{constructor(){super(...arguments),this.bonusCoins=0,this.bonusDiamonds=0,this._headShotCount=0,this._killCount=0,this._remainRate=0,this._bossRate=0,this._airdropType=n.EAirdrop.NORMAL,this._isPassLevel=!1,this._turnTipCount=0}initialize(){s.default.instance.on(o.default.HEAD_SHOT,this,this.onHeadShot),s.default.instance.on(o.default.ZOMBIE_DEAD,this,this.onZombieDead),s.default.instance.on(o.default.LEVEL_HP,this,this.onLevelHp),s.default.instance.on(o.default.BOSS_HP,this,this.onBossHp),l.default.instance.on(r.default.OPEN,this,this.onUIOpen),s.default.instance.on(o.default.AIRDROP_CLOSE,this,this.onAirdropClose),s.default.instance.on(o.default.VICTORY,this,this.onVictory),s.default.instance.on(o.default.START_GAME,this,this.onStartGame)}uninitialize(){s.default.instance.off(o.default.HEAD_SHOT,this,this.onHeadShot),s.default.instance.off(o.default.ZOMBIE_DEAD,this,this.onZombieDead),l.default.instance.off(r.default.OPEN,this,this.onUIOpen),s.default.instance.off(o.default.LEVEL_HP,this,this.onLevelHp),s.default.instance.off(o.default.BOSS_HP,this,this.onBossHp),s.default.instance.off(o.default.AIRDROP_CLOSE,this,this.onAirdropClose),s.default.instance.off(o.default.VICTORY,this,this.onVictory),s.default.instance.off(o.default.START_GAME,this,this.onStartGame)}onStartGame(){this._isPassLevel=!1}onVictory(){this._isPassLevel=!0}onAirdropClose(e){e||this._airdropType!=n.EAirdrop.SUPER&&(this._airdropType=n.EAirdrop.SUPER)}onLevelHp(e,t){this._remainRate=e/t}onBossHp(e,t){this._bossRate=e/t}onUIOpen(e){e instanceof d.default&&(this._headShotCount=0,this._killCount=0,this._remainRate=1,this._bossRate=1),e instanceof u.default&&this._turnTipCount++}onHeadShot(){this._headShotCount++}onZombieDead(){this._killCount++}getHeadShotCount(){return this._headShotCount}getKillCount(){return this._killCount}getRemainRate(){return this._remainRate}getBossRate(){return this._bossRate}getAirdropType(){return this._airdropType}getIsPassLevel(){return this._isPassLevel}getIsTipTurn(){return this._turnTipCount>=1}}},{"../../../base/mvc/MVCData":22,"../../common/ui/UIEvent":69,"../../common/ui/UIModule":70,"../../ui/game/GameUI":222,"../../ui/index/tool/CombineDefine":240,"../../ui/turn/TurnUI":300,"../GameModule":88,"../event/GameEvent":122}],128:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../data/GameDataModule"),s=e("../../data/combine/CombineData"),o=e("../../data/combine/CombineEvent"),l=e("../../../config/ResGameConfig"),r=e("../../data/user/UserData");a.default=class extends i.default{constructor(){super(...arguments),this._combineData=null,this._userData=null}initialize(){this._combineData=n.default.getData(s.default),this._combineData.on(o.default.SLOT_CHANGE,this,this.onSlotChange),this.onSlotChange(this._combineData.slots),this._userData=n.default.getData(r.default),Laya.timer.loop(1e3,this,this.onOutputLoop)}uninitialize(){Laya.timer.clear(this,this.onOutputLoop),this._combineData.off(o.default.SLOT_CHANGE,this,this.onSlotChange),this._combineData=null,this._userData=null}onSlotChange(e){let t=0,a=e.length;for(let i=0;i<a;i++){const a=e[i];if(a<=0)continue;let n=l.default.getWeapon(a);null!=n&&(t+=n.outputGoldPerSecond)}this._combineData.coinOutput=t}onOutputLoop(){this._userData.coin+=this._combineData.coinOutput}}},{"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/combine/CombineEvent":82,"../../data/user/UserData":86}],129:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../data/GameDataModule"),s=e("../../data/user/UserData"),o=e("../../data/limit/LimitData");a.default=class extends i.default{constructor(){super(...arguments),this._userData=null,this._date=null}initialize(){this._userData=n.default.getData(s.default),this._date=new Date,Laya.timer.loop(1e4,this,this.onLoop),this.onLoop()}uninitialize(){Laya.timer.clear(this,this.onLoop),this._userData=null}onLoop(){this._date.setTime(Date.now()),this._userData.day!=this._date.toDateString()&&(this._userData.day=this._date.toDateString(),this._userData.bonusTimes=0,this._userData.turnCount=0,n.default.getData(o.default).refresh(),n.default.instance.markSync())}}},{"../../../base/mvc/MVCControl":20,"../../data/GameDataModule":77,"../../data/limit/LimitData":84,"../../data/user/UserData":86}],130:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../data/user/UserData"),s=e("../../data/GameDataModule"),o=e("../../data/combine/CombineData"),l=e("../../../config/ResGameConfig"),r=e("../../../base/base/Debug"),d=e("../../common/ui/UIModule"),u=e("../../ui/offLineCoin/OffLineCoinUI");a.default=class extends i.default{constructor(){super(...arguments),this._minOffTime=12e4,this._maxOffTime=72e5,this._userData=null,this._combineData=null,this._normalRecordRate=1e4,this._debugRecordRate=1e3,this._date=null}initialize(){this._userData=s.default.instance.getData(n.default),this._combineData=s.default.instance.getData(o.default),this._date=new Date;let e=this._normalRecordRate;r.default.IsDebugOffLine&&(e=this._debugRecordRate),Laya.timer.callLater(this,this.setOffLineAward),Laya.timer.loop(e,this,this.loopRecord)}uninitialize(){Laya.timer.clear(this,this.loopRecord)}loopRecord(){this._userData.lastExitTime=this._date.getTime(),s.default.instance.markSync()}setOffLineAward(){if(this.isOffLineAward()){let e=this._date.getTime()-this._userData.lastExitTime;e>this._maxOffTime&&(e=this._maxOffTime);let t=this.getPerCoinOutput(),a=Math.floor(.001*e),i=t*a;if(0!=i){let e="离线时间: "+a+"s",n="每秒收益: "+t,s="离线奖励: "+i;r.default.log(e+"\n"+n+"\n"+s);let o=d.default.instance.openUI(u.default).getOpenParam();o.offLineTime=a,o.offLineCoin=i}}this.loopRecord()}isOffLineAward(){if(0==this._combineData.slots.length)return!1;if(0==this._userData.lastExitTime)return!1;let e=this._date.getTime()-this._userData.lastExitTime;return!(!r.default.IsDebugOffLine&&e<=this._minOffTime||e<1e3)}getPerCoinOutput(){let e=this._combineData.coinOutput;if(0==e){let t=this._combineData.slots,a=t.length;for(let i=0;i<a;i++){const a=t[i];if(a<=0)continue;let n=l.default.getWeapon(a);null!=n&&(e+=n.outputGoldPerSecond)}}return e}}},{"../../../base/base/Debug":8,"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/user/UserData":86,"../../ui/offLineCoin/OffLineCoinUI":259}],131:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./NormalWeaponLogicScript"),n=e("./NormalZombieLogicScript"),s=e("../common/CommonEvent");class o extends Laya.Sprite3D{constructor(){super(o.Name)}init(){this.addComponent(n.default),this.addComponent(i.default)}set pause(e){this.event(s.default.PAUSE,e)}}a.default=o,o.Name="Normal"},{"../common/CommonEvent":100,"./NormalWeaponLogicScript":132,"./NormalZombieLogicScript":133}],132:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/base/MathUtil"),n=e("../../../config/ResGameConfig"),s=e("../common/SpritePool"),o=e("../weapon/WeaponScript"),l=e("../scene/Scene"),r=e("../GameModule"),d=e("../event/GameEvent"),u=e("../../data/GameDataModule"),h=e("../../data/user/UserData"),c=e("../../data/user/UserDataEvent"),m=e("../effect/DamageEffect"),p=e("../../../base/base/RewardFly"),f=e("../../ui/index/IndexUI"),g=e("../../data/combine/CombineData"),_=e("../common/CommonEvent");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this._weaponUrl="",this._weapon=null,this._target=null,this._targetScreenPos=new Laya.Vector3,this._scene=null,this._camera=null,this._rayPoint=new Laya.Vector2,this._ray=new Laya.Ray(new Laya.Vector3(0,0,0),new Laya.Vector3(0,0,0)),this._hitResult=new Laya.HitResult}onEnable(){this._scene=l.default.instance.view.scene,this._camera=l.default.instance.view.camera;let e=u.default.getData(h.default);this.onEquipWeaponLevelChange(e.equipWeaponLevel),e.on(c.default.EQUIP_WEAPON_LEVEL_CHANGE,this,this.onEquipWeaponLevelChange),r.default.instance.on(d.default.ZOMBIE_DEAD,this,this.onZombieDead),Laya.timer.loop(1e3,this,this.onFindTarget),m.default.start(),this.owner.on(_.default.PAUSE,this,this.onPause)}onDisable(){for(m.default.stop(),u.default.getData(h.default).off(c.default.EQUIP_WEAPON_LEVEL_CHANGE,this,this.onEquipWeaponLevelChange),s.default.recover(this._weapon.owner),this._weapon=null,r.default.instance.off(d.default.ZOMBIE_DEAD,this,this.onZombieDead),this._target=null,Laya.timer.clear(this,this.onFindTarget),this._scene=null,this._camera=null;this.owner.numChildren>0;){let e=this.owner.getChildAt(0);e.timer.clearAll(e),s.default.recover(e)}this.owner.off(_.default.PAUSE,this,this.onPause)}onUpdate(){if(null!=this._weapon&&null!=this._target&&Math.abs(this._target.transform.position.x)<6){let e=this._target.getChildByName("Head");if(null!=e){e.transform.position.cloneTo(i.default.TEMP_V3),this._camera.worldToViewportPoint(i.default.TEMP_V3,this._targetScreenPos);let t=(this._weapon.sight.x-this._targetScreenPos.x)/30,a=(this._weapon.sight.y-this._targetScreenPos.y)/30;(Math.abs(t)>.1||Math.abs(a)>.1)&&(t=i.default.getSign(t)*Math.max(Math.abs(t),2),a=i.default.getSign(a)*Math.max(Math.abs(a),2),this._weapon.move(t,a));let n=this.rayCast(this._weapon.sight.x,this._weapon.sight.y);n.succeeded&&"Ground"!=n.collider.owner.name&&this._weapon.fire()}}}onEquipWeaponLevelChange(e){null!=this._weapon&&(this._weapon.owner.removeSelf(),this._weapon.owner.destroy(),this._weapon=null,Laya.Resource.destroyUnusedResources(),Laya.loader.clearRes(this._weaponUrl));let t=n.default.getWeapon(e),a=s.default.get(s.EnumSprite.WEAPON,t.resName);a?this.initWeapon(a,t):(Laya.MouseManager.enabled=!1,this._weaponUrl="res/scene/"+t.resName+".lh",Laya.loader.create(this._weaponUrl,Laya.Handler.create(this,this.onWeaponLoaded,[t])))}onWeaponLoaded(e){Laya.MouseManager.enabled=!0;let t=Laya.loader.getRes(this._weaponUrl).getChildByName(e.resName);t.addComponent(o.default),this.initWeapon(t,e)}initWeapon(e,t){this._weapon=e.getComponent(o.default),this._weapon.type=t.type,this._weapon.sightType=t.sightType,this._weapon.damage=t.damage,this._weapon.maxBulletNum=t.bulletNum,this._weapon.fireSpeedRate=t.fireRate,this._weapon.reloadSpeedRate=t.reloadRate,this._weapon.shootSound=t.shootSound,this._weapon.reloadSound=t.reloadSound,this._weapon.animFireDelay=t.animFireDelay,l.default.instance.view.masterBorn.addChild(e),this._weapon.operable=!1,this._weapon.sightEnable=!1}onZombieDead(e,t){if(this._target==t){let e=s.default.get(s.EnumSprite.OBJECTS,"Coin");this._target.transform.position.cloneTo(e.transform.position),e.transform.position=e.transform.position;let t=this;e.timer.once(1e3,e,()=>{l.default.instance.view.camera.worldToViewportPoint(e.transform.position,i.default.TEMP_V3),s.default.recover(e);let a=new Laya.Point(i.default.TEMP_V3.x,i.default.TEMP_V3.y),n=f.default.getCoinPos();p.default.fly(a,n,p.EnumRewardFly.COIN,1,.7,null,Laya.Handler.create(t,t.onCollectIconOver))}),this.owner.addChild(e),this._target=null,Laya.timer.loop(1e3,this,this.onFindTarget)}}onFindTarget(){if(this.owner.numChildren>0)for(let e=0;e<this.owner.numChildren;e++){const t=this.owner.getChildAt(e);if(-1!=t.name.indexOf("Zombie")){this._target=t,Laya.timer.clear(this,this.onFindTarget);break}}}rayCast(e,t){return this._rayPoint.x=e,this._rayPoint.y=t,this._camera.viewportPointToRay(this._rayPoint,this._ray),this._scene.physicsSimulation.rayCast(this._ray,this._hitResult),this._hitResult}onCollectIconOver(){f.default.playCoinAnimation();let e=u.default.getData(g.default),t=n.default.getWeapon(e.slotMaxLevel);null!=t&&(u.default.getData(h.default).coin+=t.outputGoldPerSecond)}onPause(e){this._weapon.owner.active=!e}}},{"../../../base/base/MathUtil":11,"../../../base/base/RewardFly":13,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/user/UserData":86,"../../data/user/UserDataEvent":87,"../../ui/index/IndexUI":228,"../GameModule":88,"../common/CommonEvent":100,"../common/SpritePool":106,"../effect/DamageEffect":120,"../event/GameEvent":122,"../scene/Scene":136,"../weapon/WeaponScript":150}],133:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../config/ResGameConfig"),n=e("../../../base/base/MathUtil"),s=e("../common/SpritePool"),o=e("../zombie/ZombieDefine"),l=e("../scene/Scene"),r=e("../../data/user/UserData"),d=e("../../data/GameDataModule"),u=e("../../data/user/UserDataEvent"),h=e("../GameModule"),c=e("../event/GameEvent"),m=e("../zombie/LifeScript"),p=e("../zombie/StateScript"),f=e("../zombie/ZombieScript"),g=e("../common/CommonEvent");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this._zombieBorn1=null,this._zombieBorn2=null,this._weaponDamage=0,this._zombieNum=0,this._masterPosZ=0}onEnable(){let e=l.default.instance.view;this._zombieBorn1=e.zombieBorn1,this._zombieBorn2=e.zombieBorn2,this._masterPosZ=e.masterBorn.transform.position.z,Laya.timer.loop(1e3,this,this.createZombie);let t=d.default.getData(r.default);this.onEquipWeaponLevelChange(t.equipWeaponLevel),t.on(u.default.EQUIP_WEAPON_LEVEL_CHANGE,this,this.onEquipWeaponLevelChange),h.default.instance.on(c.default.ZOMBIE_DEAD,this,this.onZombieDead),this.owner.on(g.default.PAUSE,this,this.onPause)}onDisable(){Laya.timer.clear(this,this.createZombie),this._zombieBorn1=null,this._zombieBorn2=null,this._zombieNum=0,this._masterPosZ=0,d.default.getData(r.default).off(u.default.EQUIP_WEAPON_LEVEL_CHANGE,this,this.onEquipWeaponLevelChange),h.default.instance.off(c.default.ZOMBIE_DEAD,this,this.onZombieDead),this.owner.off(g.default.PAUSE,this,this.onPause)}onUpdate(){}createZombie(){if(this._zombieNum>=2)return;let e=n.default.randomBoolean()?i.default.zombies[0].resName:i.default.zombies[1].resName,t=s.default.get(s.EnumSprite.ZOMBIE,e),a=n.default.randomBoolean(),l=a?this._zombieBorn1:this._zombieBorn2;t.transform.position.x=l.x,t.transform.position.z=l.z+n.default.random(-2,2),t.transform.position.y=0,t.transform.position=t.transform.position;let r=n.default.random(.8,1.2),d=r*(n.default.randomBoolean()?-1:1);t.transform.scale.setValue(d,r,r),t.transform.scale=t.transform.scale,t.transform.rotationEuler=new Laya.Vector3(0,0,0),t.transform.localRotationEuler=new Laya.Vector3(0,0,0);let u=t.getComponent(m.default);u.isBoss=!1,u.totalHp=this._weaponDamage*n.default.randomInt(2,3),u.BloodShow=!1,t.getComponent(p.default).state=o.EnumZombieState.BORN;let h=t.getComponent(f.default);h.speedRate=n.default.random(3,4),h.isBornLeft=a,h.bornOverOffset=n.default.random(2,6),h.bornOverTarget=0,this.owner.addChild(t),this._zombieNum++}onEquipWeaponLevelChange(e){let t=i.default.getWeapon(e);this._weaponDamage=t.damage}onZombieDead(e,t){this._zombieNum--}onPause(e){let t=this.owner.numChildren;for(let a=0;a<t;a++){let t=this.owner.getChildAt(a).getComponent(f.default);null!=t&&(t.pause=e)}}}},{"../../../base/base/MathUtil":11,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../data/user/UserDataEvent":87,"../GameModule":88,"../common/CommonEvent":100,"../common/SpritePool":106,"../event/GameEvent":122,"../scene/Scene":136,"../zombie/LifeScript":153,"../zombie/StateScript":154,"../zombie/ZombieDefine":156,"../zombie/ZombieScript":158}],134:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./OperaLogicScript");class n extends Laya.Sprite3D{constructor(){super(n.Name)}init(){this.addComponent(i.default)}}a.default=n,n.Name="Opera"},{"./OperaLogicScript":135}],135:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../common/ui/UIUtil"),s=e("../weapon/WeaponScript"),o=e("../scene/Scene"),l=e("../../data/GameDataModule"),r=e("../../data/user/UserData"),d=e("../common/SpritePool"),u=e("../../../config/ResGameConfig"),h=e("../GameModule"),c=e("../event/GameEvent"),m=e("../state/TalkState"),p=e("../../../base/math/BezierMaker"),f=e("../../../base/base/Pool");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this.MapPosList=[new Laya.Point(98,226),new Laya.Point(394,320),new Laya.Point(272,112),new Laya.Point(272,210)],this.PathNum=30,this._enterView=null,this._weapon=null,this._scene=null,this._camera=null,this._weaponDefaultPosition=null,this._camareDefaultPosition=null,this._startMove=!1,this._translation=new Laya.Vector3,this._speed=3,this._pathPoints=new Array,this._startPath=!1,this._pathIndex=0}onEnable(){let e=l.default.getData(r.default);this._enterView=new i.ui.index.EnterViewUI;let t=u.default.getChapterByLevel(e.level);this._enterView.tfDesc.text=t.opera,this._enterView.tfStart.text="Go to "+t.name,this._enterView.btnStart.clickHandler=Laya.Handler.create(this,this.onClickStart),n.default.addToStage(this._enterView),this._scene=o.default.instance.view.scene,this._camera=o.default.instance.view.camera,this._camareDefaultPosition=this._camera.transform.position.clone(),this.initWeapon(e.equipWeaponLevel),this._startMove=!1;let a=t.id%3,s=a+1;s=s>=3?0:s;let d=this.MapPosList[a],h=this.MapPosList[s];this._enterView.imgHead.pos(d.x,d.y),this._enterView.imgDestination.pos(h.x,h.y);let c=new p.default([d,this.MapPosList[3],h]),m=f.default.getPoint();for(let e=5;e<=this.PathNum;e++){m=c.bezier(e/(this.PathNum+5),m);let t=new Laya.Image("game/img_path_point.png");t.anchorX=.5,t.anchorY=.5,this._enterView.imgMap.addChild(t),t.pos(m.x,m.y),t.visible=!1,this._pathPoints.push(t)}f.default.recoverPoint(m),this._enterView.aniShowDestination.once(Laya.Event.COMPLETE,this,this.onAniShowDestinationOver),this._enterView.aniShowDestination.play(0,!1)}onDisable(){this._pathPoints.forEach(e=>{e.destroy()}),this._pathPoints.splice(0,this._pathPoints.length),Laya.timer.clear(this,this.onStartMove);let e=this._weapon.owner;e.transform.position=this._weaponDefaultPosition,this._camera.transform.position=this._camareDefaultPosition,d.default.recover(e),null!=this._enterView&&(this._enterView.removeSelf(),this._enterView.destroy(),this._enterView=null),this._weapon=null,this._scene=null,this._camera=null}onUpdate(){if(this._startPath&&(this._pathIndex<this._pathPoints.length?(this._pathPoints[this._pathIndex].visible=!0,this._pathIndex++):(this._startPath=!1,this._enterView.aniShow.play(0,!1))),this._startMove){let e=.02;this._translation.toDefault(),this._translation.z=-this._speed*e,this._camera.transform.translate(this._translation,!1),this._weapon.owner.transform.translate(this._translation,!1)}}onAniShowDestinationOver(){this._pathIndex=0,this._startPath=!0}onClickStart(){this._enterView.aniHide.once(Laya.Event.COMPLETE,this,this.onAniHideOver),this._enterView.aniHide.play(0,!1)}onAniHideOver(){this._weapon.run(),Laya.timer.once(2400,this,this.onStartMove)}initWeapon(e){let t=u.default.getWeapon(e),a=d.default.get(d.EnumSprite.WEAPON,t.resName);this._weapon=a.getComponent(s.default),this._weapon.type=t.type,this._weapon.sightType=t.sightType,this._weapon.damage=t.damage,this._weapon.maxBulletNum=t.bulletNum,this._weapon.shootSound=t.shootSound,this._weapon.reloadSound=t.reloadSound,this._weapon.animFireDelay=t.animFireDelay,o.default.instance.view.masterBorn.addChild(a),this._weapon.operable=!1,this._weapon.sightEnable=!1,this._weaponDefaultPosition=a.transform.position.clone()}onStartMove(){this._startMove=!0,this._enterView.aniStartRun.once(Laya.Event.COMPLETE,this,this.onAniStartRunOver),this._enterView.aniStartRun.play(0,!1)}onAniStartRunOver(){this.changeScene()}changeScene(){let e=l.default.getData(r.default),t=u.default.getChapterByLevel(e.level);h.default.instance.on(c.default.SCENE_INITED,null,()=>{h.default.instance.changeState(m.default)}),o.default.instance.changeScene(t.sceneId)}}},{"../../../base/base/Pool":12,"../../../base/math/BezierMaker":16,"../../../config/ResGameConfig":50,"../../../ui/layaMaxUI":315,"../../common/ui/UIUtil":73,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../GameModule":88,"../common/SpritePool":106,"../event/GameEvent":122,"../scene/Scene":136,"../state/TalkState":147,"../weapon/WeaponScript":150}],136:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCable"),n=e("./SceneControl"),s=e("./SceneView");class o extends i.default{constructor(){super(),this.addView(s.default),this.addControl(n.default),o.instance=this}get view(){return this.getView(s.default)}changeScene(e){this.getControl(n.default).changeScene(e)}}a.default=o,o.instance=null},{"../../../base/mvc/MVCable":26,"./SceneControl":137,"./SceneView":138}],137:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../data/GameDataModule"),s=e("../../data/user/UserData"),o=e("../../../config/ResGameConfig"),l=e("./SceneView"),r=e("../GameModule"),d=e("../event/GameEvent"),u=e("../../common/ui/UIUtil"),h=e("../../../util/Wechat"),c=e("../common/SpritePool"),m=e("../common/HeadShotScript"),p=e("../effect/DamageEffect");a.default=class extends i.default{constructor(){super(...arguments),this._loadingUI=null,this._curSceneID=0}initialize(){this._loadingUI=this.getView(l.default).loadingUI;let e=n.default.getData(s.default),t=o.default.getChapterByLevel(e.level);this.loadScene(t.sceneId,!1)}uninitialize(){}changeScene(e){if(this._curSceneID==e)return void r.default.instance.event(d.default.SCENE_INITED);let t=this.getView(l.default);null!=t.scene&&(t.scene.destroy(),t.scene=null),Laya.Resource.destroyUnusedResources(),h.default.triggerGC(),this.loadScene(e,!0)}loadScene(e,t){this._curSceneID=e;let a=o.default.getScene(e),i=n.default.getData(s.default),l=o.default.getChapterByLevel(i.level);if(this._loadingUI.imgIcon.skin="index/img_"+l.icon+".png",this._loadingUI.tfTitle.text="Going "+a.name,this._loadingUI.pgProgress.value=0,Laya.Tween.to(this._loadingUI.pgProgress,{value:1},500),u.default.addToStage(this._loadingUI),t)Laya.loader.create("res/scene/"+a.resName+".ls",Laya.Handler.create(this,this.onSceneLoaded,[e,t]));else{let n=o.default.getWeapon(i.equipWeaponLevel);Laya.loader.create(["res/scene/"+a.resName+".ls","res/scene/"+n.resName+".lh"],Laya.Handler.create(this,this.onSceneLoaded,[e,t]))}}onSceneLoaded(e,t){this.getView(l.default).initScene(e),t?(this._loadingUI.aniHide.once(Laya.Event.COMPLETE,this,this.onHideOver),this._loadingUI.aniHide.play(0,!1)):(this.onHideOver(),this.particlePrePlay())}onHideOver(){r.default.instance.event(d.default.SCENE_INITED),this._loadingUI.removeSelf()}particlePrePlay(){let e=c.default.get(c.EnumSprite.EFFECT,"Impact",500);this.doParticlePlay(e);let t=c.default.get(c.EnumSprite.EFFECT,"Hit",500);this.doParticlePlay(t);let a=c.default.get(c.EnumSprite.EFFECT,"BloodSplatter",1e3);this.doParticlePlay(a);let i=c.default.get(c.EnumSprite.EFFECT,"Dead",1e3);this.doParticlePlay(i);let n=c.default.get(c.EnumSprite.OBJECTS,"HeadShot",1e3);null==n.getComponent(m.default)&&n.addComponent(m.default);let s=this.getView(l.default);n.transform.position.setValue(0,0,1e3),n.transform.position=n.transform.position,s.scene.addChild(n),p.default.addEffect(0,!0,-100,-100)}doParticlePlay(e){let t=this.getView(l.default);e.transform.position.setValue(0,0,1e3),e.transform.position=e.transform.position,t.scene.addChild(e)}}},{"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../../util/Wechat":324,"../../common/ui/UIUtil":73,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../GameModule":88,"../common/HeadShotScript":103,"../common/SpritePool":106,"../effect/DamageEffect":120,"../event/GameEvent":122,"./SceneView":138}],138:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCView"),n=e("../../../base/base/MathUtil"),s=e("../../../config/ResGameConfig"),o=e("../../../ui/layaMaxUI"),l=e("../common/ShakeScript");a.default=class extends i.default{constructor(){super(...arguments),this.scene=null,this.camera=null,this.light=null,this.lifeLineStartPoint=null,this.lifeLineEndPoint=null,this.masterBorn=null,this.deadEffect=null,this.zombieAssembly=null,this.zombieBorn1=null,this.zombieBorn2=null,this.isInited=!1,this._loadingUI=null}initialize(){this._loadingUI=new o.ui.index.MiniLoadingViewUI,this._loadingUI.zOrder=1001}uninitialize(){null!=this._loadingUI&&(this._loadingUI.destroy(),this._loadingUI=null)}initScene(e){let t=s.default.getScene(e);this.scene=Laya.loader.getRes("res/scene/"+t.resName+".ls"),Laya.stage.addChild(this.scene),this.camera=this.scene.getChildByName("Camera"),this.camera.addComponent(l.default),this.light=this.scene.getChildByName("Light"),this.scene.enableFog=!0,this.scene.fogColor=n.default.colorToVector3(t.fogColor),this.scene.fogRange=200;let a=this.scene.getChildByName("LifeLineStart"),i=this.scene.getChildByName("LifeLineEnd");this.lifeLineStartPoint=a.transform.position,this.lifeLineStartPoint.y=.5,this.lifeLineEndPoint=i.transform.position,this.lifeLineEndPoint.y=.5,this.masterBorn=this.scene.getChildByName("MasterBorn"),this.deadEffect=this.scene.getChildByName("DeadEffect").transform.position,this.zombieAssembly=this.scene.getChildByName("ZombieAssembly").transform.position,this.zombieBorn1=this.scene.getChildByName("ZombieBorn1").transform.position,this.zombieBorn2=this.scene.getChildByName("ZombieBorn2").transform.position,this.isInited=!0}get loadingUI(){return this._loadingUI}}},{"../../../base/base/MathUtil":11,"../../../base/mvc/MVCView":24,"../../../config/ResGameConfig":50,"../../../ui/layaMaxUI":315,"../common/ShakeScript":105}],139:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIModule"),n=e("../../ui/game/GameUI"),s=e("../battle/Battle"),o=e("../scene/Scene"),l=e("../../../util/Wechat"),r=e("../../../util/SoundUrl"),d=e("../../data/GameDataModule"),u=e("../../data/buff/BuffData"),h=e("../../data/user/UserData");a.default=class{constructor(){this._battle=null,this._battle=new s.default,this._battle.init()}onStateEnter(){let e=d.default.instance.getData(h.default).level;l.default.logEvent("Level"+e+"Start"),i.default.instance.openUI(n.default),o.default.instance.view.scene.addChild(this._battle),l.default.playMusic(r.default.gameBgm,!0)}onStateLeave(){i.default.instance.closeUI(n.default),this._battle.removeSelf(),l.default.triggerGC(),d.default.getData(u.default).buffId=0}onStateOverride(){this._battle.pause=!0}onStateResume(){this._battle.pause=!1}update(){}}},{"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/buff/BuffData":78,"../../data/user/UserData":86,"../../ui/game/GameUI":222,"../battle/Battle":89,"../scene/Scene":136}],140:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../logic/GameLogic"),n=e("../../common/ui/UIModule"),s=e("../../ui/bonusResult/BonusResultUI"),o=e("../../../util/Wechat"),l=e("../../../util/SoundUrl");a.default=class{onStateEnter(){o.default.playSound(l.default.levelWin);let e=n.default.instance.openUI(s.default).getOpenParam();e.coin=i.default.instance.gameLogicData.bonusCoins,e.diamond=i.default.instance.gameLogicData.bonusDiamonds}onStateLeave(){}onStateOverride(){}onStateResume(){}update(){}}},{"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../ui/bonusResult/BonusResultUI":181,"../logic/GameLogic":126}],141:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../bonus/Bonus"),n=e("../../common/ui/UIModule"),s=e("../../ui/game/GameUI"),o=e("../scene/Scene"),l=e("../../../util/Wechat"),r=e("../../../util/SoundUrl");a.default=class{constructor(){this._bonus=null,this._bonus=new i.default,this._bonus.init()}onStateEnter(){n.default.instance.openUI(s.default),o.default.instance.view.scene.addChild(this._bonus),l.default.playMusic(r.default.bonusBgm,!0)}onStateLeave(){n.default.instance.closeUI(s.default),this._bonus.removeSelf(),l.default.triggerGC()}onStateOverride(){this._bonus.pause=!0}onStateResume(){this._bonus.pause=!1}update(){}}},{"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../ui/game/GameUI":222,"../bonus/Bonus":96,"../scene/Scene":136}],142:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../data/GameDataModule"),n=e("../../data/user/UserData"),s=e("../../common/ui/UIModule"),o=e("../logic/GameLogic"),l=e("../../ui/fail/FailUI"),r=e("../GameModule"),d=e("../event/GameEvent"),u=e("../tool/GameTool"),h=e("../../../util/Wechat"),c=e("./TalkState");a.default=class{onStateEnter(){let e=i.default.instance.getData(n.default),t=e.level;h.default.logEvent("Level"+t+"Fail");let a=s.default.instance.openUI(l.default).getOpenParam();a.isBossLevel=u.default.isBossLevel(),a.isBossLevel?a.remainRate=o.default.instance.gameLogicData.getBossRate():a.remainRate=o.default.instance.gameLogicData.getRemainRate(),a.level=e.level,r.default.instance.on(d.default.BUFF_OVER,this,this.onBuffOver)}onStateLeave(){r.default.instance.off(d.default.BUFF_OVER,this,this.onBuffOver),s.default.instance.closeUI(l.default)}onStateOverride(){}onStateResume(){}update(){}onBuffOver(){r.default.instance.changeState(c.default)}}},{"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../ui/fail/FailUI":206,"../GameModule":88,"../event/GameEvent":122,"../logic/GameLogic":126,"../tool/GameTool":148,"./TalkState":147}],143:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIModule"),n=e("../../ui/index/IndexUI"),s=e("../../../util/Wechat"),o=e("../normal/Normal"),l=e("../scene/Scene"),r=e("../GameModule"),d=e("../event/GameEvent"),u=e("../../ui/buff/BuffUI"),h=e("../../data/GameDataModule"),c=e("../../data/user/UserData"),m=e("../../../config/ResGameConfig"),p=e("../../../util/SoundUrl"),f=e("./BonusState"),g=e("../common/StartType"),_=e("./OperaState"),y=e("../../data/limit/LimitData"),w=e("../../ui/inviteFriend/InviteFriendUI"),v=e("../../data/user/UserDataEvent"),b=e("../../ui/unlockFunc/UnlockFuncUI"),I=e("../../ui/bonusRule/BonusRuleUI"),x=e("../../common/ui/UIEvent"),M=e("./TalkState"),L=e("./BattleState");a.default=class{constructor(){this._normal=null,this._curLevel=0,this._isBonus=!1,this._isPassLevel=!1,this._cameraDefaultZ=0,this._isLastOpenInviteUI=!1,this._normal=new o.default,this._normal.init(),this._curLevel=h.default.getData(c.default).level}onStateEnter(){s.default.playMusic(p.default.indexBgm,!0);let e=l.default.instance.view;if(this._isPassLevel=!1,e.isInited){let e=h.default.instance.getData(c.default),t=e.level;if(this._curLevel!=t){let a=m.default.getChapterByLevel(this._curLevel),i=m.default.getChapterByLevel(t);a.id!=i.id&&(e.isNewChapter=!0),this._curLevel=t,this._isPassLevel=!0}this.onSceneInited()}else r.default.instance.on(d.default.SCENE_INITED,this,this.onSceneInited);r.default.instance.on(d.default.START_GAME,this,this.onStartGame),r.default.instance.on(d.default.BUFF_OVER,this,this.onBuffOver)}onStateLeave(){h.default.getData(c.default).off(v.default.EQUIP_WEAPON_LEVEL_CHANGE,this,this.onEquipWeaponLevelChange),r.default.instance.off(d.default.SCENE_INITED,this,this.onSceneInited),r.default.instance.off(d.default.START_GAME,this,this.onStartGame),r.default.instance.off(d.default.BUFF_OVER,this,this.onBuffOver),i.default.instance.off(x.default.CLOSE,this,this.onUIClose)}onStateOverride(){this._normal.pause=!0}onStateResume(){this._normal.pause=!1}update(){}onSceneInited(){let e=l.default.instance.view;e.scene.addChild(this._normal),this._cameraDefaultZ=e.camera.transform.position.z;let t=h.default.getData(c.default);t.on(v.default.EQUIP_WEAPON_LEVEL_CHANGE,this,this.onEquipWeaponLevelChange);let a=this._isPassLevel&&m.default.BonusUnlockLevel==this._curLevel;if(a&&(t.bonusGuide=!0),this.onEquipWeaponLevelChange(t.equipWeaponLevel),i.default.instance.openUI(n.default).getOpenParam().isNewChapter=t.isNewChapter,s.default.needVersion("2.9.0")&&this._isPassLevel&&t.level>=5){let e=h.default.getData(y.default);e.inviteFriendNum<m.default.MaxInviteFriendNum&&Math.random()>.7&&!this._isLastOpenInviteUI?(this._isLastOpenInviteUI=!0,i.default.instance.openUI(w.default),e.inviteFriendNum++):this._isLastOpenInviteUI=!1}a&&i.default.instance.openUI(b.default)}onStartGame(e){this._isBonus=e==g.EnumStartType.BONUS,i.default.instance.closeUI(n.default);let t=l.default.instance.view;t.scene.removeChild(this._normal),t.camera.transform.position.z=this._cameraDefaultZ,t.camera.transform.position=t.camera.transform.position;let a=h.default.instance.getData(c.default);1==a.level?r.default.instance.changeState(L.default):g.EnumStartType.OPERA==e?(a.isNewChapter=!1,r.default.instance.changeState(_.default)):g.EnumStartType.BONUS==e&&h.default.getData(c.default).bonusRule?(i.default.instance.on(x.default.CLOSE,this,this.onUIClose),i.default.instance.openUI(I.default)):this.openBuffUI()}openBuffUI(){i.default.instance.openUI(u.default).getOpenParam().source=this._isBonus?"Bonus":"Normal"}onBuffOver(){this._isBonus?r.default.instance.changeState(f.default):r.default.instance.changeState(M.default)}onEquipWeaponLevelChange(e){let t,a=m.default.getWeapon(e);t="w1018"==a.resName||"w1017"==a.resName?1.9:2.5;let i=l.default.instance.view.camera;null!=i&&(i.transform.position.z=this._cameraDefaultZ+t,i.transform.position=i.transform.position)}onUIClose(e){e instanceof I.default&&(i.default.instance.off(x.default.CLOSE,this,this.onUIClose),this.openBuffUI())}}},{"../../../config/ResGameConfig":50,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/ui/UIEvent":69,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/limit/LimitData":84,"../../data/user/UserData":86,"../../data/user/UserDataEvent":87,"../../ui/bonusRule/BonusRuleUI":184,"../../ui/buff/BuffUI":188,"../../ui/index/IndexUI":228,"../../ui/inviteFriend/InviteFriendUI":245,"../../ui/unlockFunc/UnlockFuncUI":304,"../GameModule":88,"../common/StartType":107,"../event/GameEvent":122,"../normal/Normal":131,"../scene/Scene":136,"./BattleState":139,"./BonusState":141,"./OperaState":144,"./TalkState":147}],144:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../opera/Opera"),n=e("../scene/Scene");a.default=class{constructor(){this._opera=null}onStateEnter(){this._opera=new i.default,this._opera.init(),n.default.instance.view.scene.addChild(this._opera)}onStateLeave(){null!=this._opera&&(this._opera.removeSelf(),this._opera.destroy(),this._opera=null)}onStateOverride(){}onStateResume(){}update(){}}},{"../opera/Opera":134,"../scene/Scene":136}],145:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../GameModule"),n=e("../event/GameEvent");a.default=class{onStateEnter(){i.default.instance.event(n.default.PAUSE)}onStateLeave(){i.default.instance.event(n.default.RESUME)}onStateOverride(){}onStateResume(){}update(){}}},{"../GameModule":88,"../event/GameEvent":122}],146:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../data/GameDataModule"),n=e("../../data/user/UserData"),s=e("../../ui/result/AwardTool"),o=e("../../../config/ResGameConfig"),l=e("../../common/ui/UIModule"),r=e("../../ui/result/ResultUI"),d=e("../logic/GameLogic"),u=e("../../../util/Wechat"),h=e("../../data/combine/CombineData");a.default=class{onStateEnter(){let e=i.default.getData(n.default),t=d.default.instance.gameLogicData.getHeadShotCount(),a=d.default.instance.gameLogicData.getKillCount(),c=s.default.getResultAwardDatas(e.level,t,a),m=e.level;u.default.logEvent("Level"+m+"Success"),e.level<o.default.levels.length&&(e.level++,u.default.updateRankData(e.level));let p=i.default.getData(h.default),f=o.default.getWeapon(p.slotMaxLevel);e.lastWeaponDps=f.dps;let g=l.default.instance.openUI(r.default).getOpenParam();g.awardArray=c,g.level=m}onStateLeave(){l.default.instance.closeUI(r.default)}onStateOverride(){}onStateResume(){}update(){}}},{"../../../config/ResGameConfig":50,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/user/UserData":86,"../../ui/result/AwardTool":264,"../../ui/result/ResultUI":265,"../logic/GameLogic":126}],147:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIModule"),n=e("../../ui/talk/TalkUI"),s=e("../../common/ui/UIEvent"),o=e("../GameModule"),l=e("../../data/GameDataModule"),r=e("../../data/user/UserData"),d=e("../../../config/ResGameConfig"),u=e("./BattleState");a.default=class{onStateEnter(){let e=l.default.getData(r.default),t=d.default.getTalk(e.level);null!=t?(i.default.instance.on(s.default.CLOSE,this,this.onUIClose),i.default.instance.openUI(n.default).getOpenParam().id=t.levelId):o.default.instance.changeState(u.default)}onStateLeave(){i.default.instance.off(s.default.CLOSE,this,this.onUIClose)}onStateOverride(){}onStateResume(){}update(){}onUIClose(e){e instanceof n.default&&o.default.instance.changeState(u.default)}}},{"../../../config/ResGameConfig":50,"../../common/ui/UIEvent":69,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../ui/talk/TalkUI":292,"../GameModule":88,"./BattleState":139}],148:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../data/GameDataModule"),n=e("../../data/user/UserData"),s=e("../../../config/ResGameConfig");a.default=class{static isBossLevel(){let e=i.default.getData(n.default),t=s.default.getLevel(e.level);return null!=t&&t.bossID>0}}},{"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/user/UserData":86}],149:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.IDLE="Idle",i.FIRE="Fire",i.ASSAULT="Assault",i.RELOAD="Reload",i.RUN="Run"},{}],150:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./WeaponAction"),n=e("../../common/ui/UIUtil"),s=e("../scene/Scene"),o=e("../common/SpritePool"),l=e("../GameModule"),r=e("../event/GameEvent"),d=e("../../ui/game/GameUI"),u=e("../../../util/Wechat"),h=e("../../../base/base/MathUtil"),c=e("../effect/DamageEffect"),m=e("../common/HeadShotScript"),p=e("../../../util/SoundUrl"),f=e("../zombie/LifeScript"),g=e("../zombie/ChickenScript");class _ extends Laya.Script3D{constructor(){super(...arguments),this.sightType=1,this.damage=20,this.maxBulletNum=0,this.fireSpeedRate=1,this.reloadSpeedRate=1,this.shootSound="",this.reloadSound="",this.animFireDelay=0,this._isInfiniteBullet=!1,this._scene=null,this._camera=null,this._animator=null,this._state=i.default.IDLE,this._isMouseDown=!1,this._rayPoint=new Laya.Vector2,this._ray=new Laya.Ray(new Laya.Vector3(0,0,0),new Laya.Vector3(0,0,0)),this._hitResult=new Laya.HitResult,this._curBulletNum=0,this._sight=null,this._sightArrows=new Array,this._sightPoint=null,this._sightShotAni=null,this._lastMouseX=0,this._lastMouseY=0,this._spawnPoint=null,this._sparkParticle=null,this._glowParticle=null,this._particleRoot=null,this._bulletTrail=null,this._cameraRotationX=0,this._cameraRotationY=0,this._rotation=new Laya.Vector3,this._sightNode=null,this._sightPosition=new Laya.Vector3,this._weaponDefaultRotationEuler=null,this._camareDefaultRotationEuler=null,this._sightEnable=!0,this._bulletTrailT=0,this._bulletTrailStartPosition=new Laya.Vector3,this._bulletTrailEndPosition=new Laya.Vector3,this._operable=!1}onAwake(){let e=Laya.loader.getRes("prefab/sight"+this.sightType+".json");this._sight=e.create(),this._sight.x=Laya.stage.width/2,this._sight.y=Laya.stage.height/2,this._sightShotAni=this._sight.aniShot,this._spawnPoint=this.owner.getChildByName("SpawnPoint"),this._particleRoot=Laya.loader.getRes("res/scene/WeaponParticle.lh"),this._sparkParticle=this._particleRoot.getChildByName("SparkParticle"),this._glowParticle=this._particleRoot.getChildByName("GlowParticle"),this._bulletTrail=this._particleRoot.getChildByName("BulletTrail"),this._sightNode=this.owner.getChildByName("Sight");for(let e=0;e<4;e++){let t=this._sight.getChildByName("imgArrow"+e).getChildByName("clipArrow"+e);null!=t&&this._sightArrows.push(t)}this._sightPoint=this._sight.getChildByName("imgPoint").getChildByName("clipPoint"),this._weaponDefaultRotationEuler=this.owner.transform.rotationEuler.clone(),this._sparkParticle.particleSystem.play(),this._glowParticle.particleSystem.play()}onDestroy(){this._particleRoot=null,this._bulletTrail=null,this._spawnPoint=null,this._sight.destroy(),this._sight=null,this._sparkParticle=null,this._glowParticle=null,this._weaponDefaultRotationEuler=null,this._sightArrows.splice(0,this._sightArrows.length),this._sightArrows=null,this._sightPoint=null}onEnable(){this._scene=s.default.instance.view.scene,this._camera=s.default.instance.view.camera,this._camareDefaultRotationEuler=this._camera.transform.rotationEuler.clone(),n.default.addToStage(this._sight),this._animator=this.owner.getComponent(Laya.Animator),this.operable=!0,this.curBulletNum=this.maxBulletNum,this.owner.transform.rotationEuler=this._weaponDefaultRotationEuler,this._cameraRotationX=this._camera.transform.rotationEuler.x,this._cameraRotationY=this._camera.transform.rotationEuler.y,this._animator.play(i.default.ASSAULT),this._state=i.default.ASSAULT,this._sightShotAni.gotoAndStop(this._sightShotAni.count-1),this.owner.scene.addChild(this._particleRoot),this._bulletTrailT=1}onDisable(){Laya.timer.clear(this,this.playFirAnim),this._isMouseDown=!1,this._state=i.default.IDLE,this.operable=!1,this._sight.removeSelf(),this.fireSpeedRate=1,this.reloadSpeedRate=1,this._scene=null,this._camera.transform.rotationEuler=this._camareDefaultRotationEuler,this._camareDefaultRotationEuler=null,this._camera=null,this._particleRoot.removeSelf(),this._isInfiniteBullet=!1}onUpdate(){this._animator.getCurrentAnimatorPlayState().normalizedTime>=1&&(this._animator.getCurrentAnimatorPlayState()._resetPlayState(0),i.default.RELOAD==this._state&&(this._animator.speed=1,this.curBulletNum=this.maxBulletNum),i.default.RUN==this._state?this._animator.play(i.default.RUN):i.default.FIRE==this._state&&!this._isInfiniteBullet&&this.curBulletNum<=0?this.onReload():(this._animator.play(i.default.IDLE),this._state=i.default.IDLE));let e=this.rayCast(this._sight.x,this._sight.y);e.succeeded&&"Ground"!=e.collider.owner.name?(this.setSignArrow(!0),this._isMouseDown&&this.fire()):this.setSignArrow(!1);let t=this._camera.transform.rotationEuler.x,a=this._camera.transform.rotationEuler.y,n=this._cameraRotationX-t,s=this._cameraRotationY-a;this._rotation.x=t+.1*n,this._rotation.y=a+.1*s,this._camera.transform.rotationEuler=this._rotation,this._camera.worldToViewportPoint(this._sightNode.transform.position,this._sightPosition),this._sight.x=this._sightPosition.x,this._sight.y=this._sightPosition.y,this._bulletTrailT<1&&(this._bulletTrail.trailFilter.time=.2,Laya.Vector3.lerp(this._bulletTrailStartPosition,this._bulletTrailEndPosition,this._bulletTrailT,this._bulletTrail.transform.position),this._bulletTrail.transform.position=this._bulletTrail.transform.position,this._bulletTrailT+=.1)}set pause(e){this.operable=!e,this._animator.speed=e?0:1}mouseDown(e){this.onStageMouseDown(e)}set type(e){if(e&&""!=e){let t=this.owner.getChildByName("gun_mesh");Laya.Texture2D.load("res/scene/Assets/ZombieShooter/LowPolyFPSPackTexture_"+e+".jpg",Laya.Handler.create(this,this.onLoadedTexture,[t.skinnedMeshRenderer.material]))}}onReload(){this.curBulletNum>=this.maxBulletNum||(this._animator.speed=this.reloadSpeedRate,this._animator.play(i.default.RELOAD),this._state=i.default.RELOAD,u.default.playSound("res/sounds/"+this.reloadSound+".mp3"))}fire(){if(this._state==i.default.IDLE)if(!this._isInfiniteBullet&&this.curBulletNum<=0)this.onReload();else{if(this._sightEnable){let e=this._sightShotAni.count,t=e-(e-this._sightShotAni.index-1)-15;t=Math.max(0,t),this._sightShotAni.play(t,!1)}this._state=i.default.FIRE,this._isInfiniteBullet||this.curBulletNum--;let e=this.rayCast(this._sight.x,this._sight.y);if(e.succeeded){l.default.instance.event(r.default.FIRE_HIT,[e.collider.owner,e.point]),this._bulletTrail.trailFilter.time=0,this._spawnPoint.transform.rotationEuler.cloneTo(this._bulletTrail.transform.rotationEuler),this._bulletTrail.transform.rotationEuler=this._bulletTrail.transform.rotationEuler,this._spawnPoint.transform.position.cloneTo(this._bulletTrail.transform.position),this._bulletTrail.transform.position=this._bulletTrail.transform.position,this._bulletTrail.transform.position.cloneTo(this._bulletTrailStartPosition),e.point.cloneTo(this._bulletTrailEndPosition),this._bulletTrailT=0;let t=e.collider.owner.name;if("Ground"!=t){let a=e.collider.owner.parent,i=null;if(null!=a&&(i=a.getComponent(f.default)),null!=i&&i.curHp>0){let n=!1;-1==t.indexOf("Hat")&&-1==t.indexOf("Head")||(n=!0);let s=h.default.random(.9,1.1),d=this.damage*(n?2:1)*s;if(d=Math.floor(d),i.onDamage(d),null!=a.getComponent(g.default)&&u.default.playSound(p.default.chicken,!1),i.curHp<=0)if(n&&!i.isBoss&&l.default.instance.event(r.default.HEAD_SHOT),i.isBoss)i.startBulletTime();else{let t=o.default.get(o.EnumSprite.EFFECT,"BloodSplatter",1e3);a.transform.position.cloneTo(t.transform.position),t.transform.position=t.transform.position,t.particleSystem.simulate(0,!0),t.particleSystem.play(),this._scene.addChild(t);let n=o.default.get(o.EnumSprite.OBJECTS,"HeadShot",1e3);null==n.getComponent(m.default)&&n.addComponent(m.default),e.point.cloneTo(n.transform.position),n.transform.position=n.transform.position,i.isBoss?n.transform.scale.setValue(300,300,300):n.transform.scale.setValue(100,100,100),n.transform.scale=n.transform.scale,this._scene.addChild(n)}else{let t=o.default.get(o.EnumSprite.EFFECT,"Hit",500);t.transform.position=e.point,t.particleSystem.simulate(0,!0),t.particleSystem.play(),this._scene.addChild(t)}this._camera.worldToViewportPoint(e.point,h.default.TEMP_V3),c.default.addEffect(d,n,h.default.TEMP_V3.x,h.default.TEMP_V3.y)}}let a=o.default.get(o.EnumSprite.EFFECT,"Impact",500);a.transform.position=e.point,this._scene.addChild(a),a.particleSystem.simulate(0),a.particleSystem.play()}this._operable&&u.default.vibrateShort(),u.default.playSound("res/sounds/"+this.shootSound+".mp3"),this._spawnPoint.transform.rotationEuler.cloneTo(this._sparkParticle.transform.rotationEuler),this._sparkParticle.transform.rotationEuler=this._sparkParticle.transform.rotationEuler,this._spawnPoint.transform.position.cloneTo(this._sparkParticle.transform.position),this._sparkParticle.transform.position=this._sparkParticle.transform.position,this._sparkParticle.particleSystem.stop(),this._sparkParticle.particleSystem.simulate(0,!0),this._sparkParticle.particleSystem.play(),this._spawnPoint.transform.rotationEuler.cloneTo(this._glowParticle.transform.rotationEuler),this._glowParticle.transform.rotationEuler=this._glowParticle.transform.rotationEuler,this._spawnPoint.transform.position.cloneTo(this._glowParticle.transform.position),this._glowParticle.transform.position=this._glowParticle.transform.position,this._glowParticle.particleSystem.stop(),this._glowParticle.particleSystem.simulate(0,!0),this._glowParticle.particleSystem.play(),this.animFireDelay>0?Laya.timer.once(this.animFireDelay,this,this.playFirAnim):this.playFirAnim()}}run(){this._animator.play(i.default.RELOAD),this._state=i.default.RUN}set operable(e){this._operable=e,e?(Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onStageMouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onStageMouseUp),Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onStageMouseUp),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onStageMouseMove)):(this._isMouseDown=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onStageMouseDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onStageMouseUp),Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onStageMouseUp),Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.onStageMouseMove))}set sightEnable(e){this._sightEnable=e,this._sight.visible=e}get sight(){return this._sight}move(e,t){let a=e/Laya.stage.width,i=t/Laya.stage.height,n=this.owner,s=n.transform.rotationEuler.x,o=n.transform.rotationEuler.y;s-=i*(_.WEAPON_MAX_ROTATION.x-_.WEAPON_MIN_ROTATION.x),o+=a*(_.WEAPON_MAX_ROTATION.y-_.WEAPON_MIN_ROTATION.y),s=Math.min(s,_.WEAPON_MAX_ROTATION.x),s=Math.max(s,_.WEAPON_MIN_ROTATION.x),o=Math.min(o,_.WEAPON_MAX_ROTATION.y),o=Math.max(o,_.WEAPON_MIN_ROTATION.y),n.transform.rotationEuler=new Laya.Vector3(s,o,0),this._cameraRotationX+=i*(_.CAMERA_MAX_ROTATION.x-_.CAMERA_MIN_ROTATION.x),this._cameraRotationY+=a*(_.CAMERA_MAX_ROTATION.y-_.CAMERA_MIN_ROTATION.y),this._cameraRotationX=Math.min(this._cameraRotationX,_.CAMERA_MAX_ROTATION.x),this._cameraRotationX=Math.max(this._cameraRotationX,_.CAMERA_MIN_ROTATION.x),this._cameraRotationY=Math.min(this._cameraRotationY,_.CAMERA_MAX_ROTATION.y),this._cameraRotationY=Math.max(this._cameraRotationY,_.CAMERA_MIN_ROTATION.y)}set isInfiniteBullet(e){this._isInfiniteBullet!=e&&(this._isInfiniteBullet=e,l.default.instance.event(r.default.UPDATE_BULLET,[this._isInfiniteBullet?-1:this._curBulletNum,this.maxBulletNum]))}get isInfiniteBullet(){return this._isInfiniteBullet}set curBulletNum(e){this._curBulletNum!=e&&(this._curBulletNum=e,l.default.instance.event(r.default.UPDATE_BULLET,[this._isInfiniteBullet?-1:this._curBulletNum,this.maxBulletNum]))}get curBulletNum(){return this._curBulletNum}playFirAnim(){this._animator.speed=this.fireSpeedRate,this._animator.play(i.default.FIRE)}onStageMouseDown(e){d.default.isMouseDown||(this._isMouseDown=!0,this._lastMouseX=e.stageX,this._lastMouseY=e.stageY)}onStageMouseUp(){this._isMouseDown=!1}onStageMouseMove(){if(this._isMouseDown){let e=1.8*(this._lastMouseX-Laya.stage.mouseX),t=1.8*(this._lastMouseY-Laya.stage.mouseY);this._lastMouseX=Laya.stage.mouseX,this._lastMouseY=Laya.stage.mouseY,this.move(e,t)}}rayCast(e,t){return this._rayPoint.x=e,this._rayPoint.y=t,this._camera.viewportPointToRay(this._rayPoint,this._ray),this._scene.physicsSimulation.rayCast(this._ray,this._hitResult),this._hitResult}onLoadedTexture(e,t){null!=e&&(e.albedoTexture=t)}setSignArrow(e){this._sightArrows.forEach(t=>{t.index=e?1:0}),this._sightPoint.index=e?1:0}}a.default=_,_.WEAPON_MIN_ROTATION=new Laya.Vector3(-30,-195,0),_.WEAPON_MAX_ROTATION=new Laya.Vector3(30,-145,0),_.CAMERA_MIN_ROTATION=new Laya.Vector3(-16,-6,0),_.CAMERA_MAX_ROTATION=new Laya.Vector3(-4,6,0)},{"../../../base/base/MathUtil":11,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/ui/UIUtil":73,"../../ui/game/GameUI":222,"../GameModule":88,"../common/HeadShotScript":103,"../common/SpritePool":106,"../effect/DamageEffect":120,"../event/GameEvent":122,"../scene/Scene":136,"../zombie/ChickenScript":151,"../zombie/LifeScript":153,"./WeaponAction":149}],151:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../scene/Scene"),n=e("./ZombieAction"),s=e("../common/SpritePool"),o=e("../../../base/base/MathUtil"),l=e("./ZombieDefine"),r=e("./StateScript");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this.isBornLeft=!1,this._totalHp=0,this._curHp=0,this._speed=.8,this._speedRate=1,this._translation=new Laya.Vector3,this._zombieBorn1=null,this._zombieBorn2=null,this._animator=null,this._isJumping=!1,this._translationY=0,this._jumpRatio=.2,this._isPause=!1}onEnable(){let e=i.default.instance.view;this._zombieBorn1=e.zombieBorn1,this._zombieBorn2=e.zombieBorn2,this._animator=this.owner.getComponent(Laya.Animator);let t=this.owner.getComponent(r.default);l.EnumZombieState.EXHIBITION==t.state?(this._animator.speed=1,this._animator.play(n.default.WALK),this._isPause=!0):(this._animator.play(n.default.WALK),this._isJumping=!1,this._jumpRatio=.2*o.default.random(.7,1),this._isPause=!1)}onDisable(){this._zombieBorn1=null,this._zombieBorn2=null,this.onJumpOver(),this._isPause=!1}onUpdate(){if(this._isPause)return;if(this._animator.getCurrentAnimatorPlayState().normalizedTime>=1){this._animator.getCurrentAnimatorPlayState()._resetPlayState(0);let e=Math.random()>.8&&!this._isJumping;this._animator.play(e?n.default.JUMP:n.default.WALK),e&&this.jump()}let e=this.owner;this._translation.toDefault(),this._translation.x=.02*this._speed*this._speedRate,this._translation.x*=this.isBornLeft?1:-1,this._translation.y=this._translationY,e.transform.translate(this._translation,!1),this._isJumping&&(this._translationY-=.005,this._translationY<-this._jumpRatio&&this.onJumpOver()),(this.isBornLeft&&e.transform.position.x>this._zombieBorn2.x||!this.isBornLeft&&e.transform.position.x<this._zombieBorn1.x)&&s.default.recover(e)}set speedRate(e){this._speedRate=e,this.owner.getComponent(Laya.Animator).speed=this.calcAnimatorSpeed()}set pause(e){this._isPause=e;let t=this.owner.getComponent(Laya.Animator);t.speed=e?0:this.calcAnimatorSpeed()}calcAnimatorSpeed(){return this._speedRate>1?1+.4*(this._speedRate-1):this._speedRate}jump(){this._isJumping=!0,this._translationY=this._jumpRatio}onJumpOver(){this._isJumping=!1,this._translationY=0;let e=this.owner;e.transform.position.y=0,e.transform.position=e.transform.position}}},{"../../../base/base/MathUtil":11,"../common/SpritePool":106,"../scene/Scene":136,"./StateScript":154,"./ZombieAction":155,"./ZombieDefine":156}],152:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/base/Dictionary"),n=e("../../../config/ResGameConfig"),s=e("../../../base/base/Pool"),o=e("./func/FuncContainer");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this.funcID=0,this._funcDic=new i.default}onEnable(){this.funcID>0&&this.addFunc(this.funcID)}onDisable(){this._funcDic.forEach((e,t)=>{s.default.recover("FuncContainer",t)}),this._funcDic.clear()}onUpdate(){}addFunc(e){if(this._funcDic.containsKey(e))return;let t=n.default.getFunc(e);if(null==t)return;let a=s.default.get("FuncContainer",o.default);this._funcDic.setValue(e,a),a.init(t,this.owner)}removeFunc(e){let t=this._funcDic.getValue(e);null!=t&&(s.default.recover("FuncContainer",t),this._funcDic.remove(e))}}},{"../../../base/base/Dictionary":9,"../../../base/base/Pool":12,"../../../config/ResGameConfig":50,"./func/FuncContainer":161}],153:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../GameModule"),n=e("../event/GameEvent"),s=e("./ZombieDefine"),o=e("../common/SpritePool"),l=e("./StateScript"),r=e("../../../base/base/MathUtil"),d=e("../scene/Scene"),u=e("../common/HeadShotScript"),h=e("./ZombieEvent"),c=e("../../common/ui/UIUtil"),m=e("../../../base/base/Pool");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this.isBoss=!1,this.invincible=!1,this.BloodShow=!0,this._levelHp=0,this._totalHp=0,this._curHp=0,this._rotateV3=new Laya.Vector3,this._scaleV3=new Laya.Vector3,this._defaultScale=1,this._scaleXSign=1,this._stateScript=null,this._isAdd=!0,this._scale=0,this._scene=null,this._angleDis=0,this._timeScale=1,this._downTime=0,this._downDura=0,this._lastDownTime=0,this._scaleRate=.1,this._rotateInterval=.02,this._head=null,this._blood=null,this._pgBlood=null,this._pgBloodEffect=null,this._isBloodShow=!1,this._bloodPosition=new Laya.Vector3,this._camera=null,this._speedDownImage=null}onAwake(){let e=Laya.loader.getRes("prefab/blood.json");this._blood=e.create(),this._pgBlood=this._blood.getChildByName("pgBlood"),this._pgBloodEffect=this._blood.getChildByName("pgBloodEffect")}onDestroy(){this._blood.destroy(),this._blood=null,this._pgBlood=null,this._pgBloodEffect=null}onEnable(){this._camera=d.default.instance.view.camera,this._stateScript=this.owner.getComponent(l.default);let e=this.owner;this._defaultScale=e.transform.scale.z,this._scaleXSign=r.default.getSign(e.transform.scale.x),this._scale=this._defaultScale,this._scene=d.default.instance.view.scene,this._head=e.getChildByName("Head"),this._pgBloodEffect.value=1}onDisable(){this._head=null,this._camera=null,this.isBoss=!1,Laya.Tween.clearAll(this),this.owner.timer.clearAll(this),this._scene=null,this.invincible=!1,Laya.timer.clear(this,this.hideBlood),this.hideBlood(),null!=this._speedDownImage&&(Laya.Tween.clearAll(this._speedDownImage),this.onPlaySpeedDownOver())}onUpdate(){this._isBloodShow&&null!=this._head&&(this._camera.worldToViewportPoint(this._head.transform.position,this._bloodPosition),this._blood.x=this._bloodPosition.x,this._blood.y=this._bloodPosition.y)}set levelHp(e){this._levelHp=e}get levelHp(){return this._levelHp}set totalHp(e){this._totalHp=e,this._curHp=e}get totalHp(){return this._totalHp}set curHp(e){this._curHp=e}get curHp(){return this._curHp}onDamage(e){if(!this.invincible)if(this._curHp-=e,this._curHp=Math.max(0,this._curHp),this.isBoss&&i.default.instance.event(n.default.BOSS_HP,[this._curHp,this._totalHp]),i.default.instance.event(n.default.ZOMBIE_HIT,this.owner),this.playHitEffect(),this._curHp<=0)this.playDeadEffect(),this.owner.event(h.default.DEAD),i.default.instance.event(n.default.ZOMBIE_DEAD,[this._levelHp,this.owner]),this.hideBlood();else{let e=this._curHp/this._totalHp;this._pgBlood.value=e,Laya.Tween.to(this._pgBloodEffect,{value:e},300,null,null,50),this.showBlood()}}stopHitEffect(){let e=this.owner;e.timer.clear(this,this.doScale),this._scaleV3.setValue(this._defaultScale*this._scaleXSign,this._defaultScale,this._defaultScale),e.transform.scale=this._scaleV3;let t=this._scale-this._defaultScale;t>0&&(this._rotateV3.setValue(this._rotateInterval*t/.01,0,0),e.transform.rotate(this._rotateV3,!0))}startBulletTime(){this._timeScale=Laya.timer.scale,Laya.timer.scale=this._timeScale*this._scaleRate}topBulletTime(){Laya.timer.scale=this._timeScale}playerSpeedDown(){if(null==this._speedDownImage){this._speedDownImage=m.default.getSysObj("Image",Laya.Image),this._speedDownImage.anchorX=.5,this._speedDownImage.anchorY=.5,this._speedDownImage.skin="game/img_speed_down.png",this._camera.worldToViewportPoint(this._head.transform.position,this._bloodPosition),this._speedDownImage.x=this._bloodPosition.x,this._speedDownImage.y=this._bloodPosition.y,c.default.addToStage(this._speedDownImage);let e=this._speedDownImage.y-60*c.default.scale;Laya.Tween.to(this._speedDownImage,{y:e},500,null,Laya.Handler.create(this,this.onPlaySpeedDownOver))}}onPlaySpeedDownOver(){null!=this._speedDownImage&&(this._speedDownImage.removeSelf(),m.default.recoverSysObj("Image",this._speedDownImage),this._speedDownImage=null)}playHitEffect(){this.stopHitEffect(),this._isAdd=!0,this._scale=this._defaultScale,this.owner.timer.frameLoop(1,this,this.doScale)}playDeadEffect(){this._stateScript.state=s.EnumZombieState.DEATH;let e=this.owner;this.isBoss?(this.stopHitEffect(),Laya.timer.once(100,this,this.bossDeadDown)):Laya.timer.once(100,this,()=>{o.default.recover(e)})}doScale(){let e=this.owner;this._isAdd?(this._scale+=.01,this._scaleV3.setValue(this._scale*this._scaleXSign,this._scale,this._scale),e.transform.scale=this._scaleV3,this._rotateV3.setValue(-this._rotateInterval,0,0),e.transform.rotate(this._rotateV3,!0),this._scale-this._defaultScale>.04&&(this._isAdd=!1)):(this._scale-=.01,this._scale<=this._defaultScale&&(this._scale=this._defaultScale,e.timer.clear(this,this.doScale)),this._scaleV3.setValue(this._scale*this._scaleXSign,this._scale,this._scale),e.transform.scale=this._scaleV3,this._rotateV3.setValue(this._rotateInterval,0,0),e.transform.rotate(this._rotateV3,!0))}bossDeadDown(){let e=this.owner,t=300/this._scaleRate;this._downDura=t/5;let a=Laya.Ease.linearNone,i=e.transform.localRotationEulerX;this._angleDis=i;let n=new Laya.Handler(this,this.updateRotate),s={_angleDis:-80,_downTime:t,update:n},o=Laya.Handler.create(this,this.deadDownOver,[n]);Laya.Tween.to(this,s,t,a,o,0,!0,!0)}updateRotate(){this.owner.transform.localRotationEulerX=this._angleDis,this._lastDownTime+this._downDura<this._downTime&&(this._lastDownTime=this._downTime,this.playDeadBoom())}deadDownOver(e){null!=e&&e.recover(),this.topBulletTime();let t=o.default.get(o.EnumSprite.EFFECT,"Dead",1e3),a=this.owner;t.transform.position=a.transform.position,t.transform.position.z+=r.default.random(2,4),t.transform.scale.setValue(100,100,100),t.particleSystem.simulate(0,!0),t.particleSystem.play(),this._scene.addChild(t),o.default.recover(a),i.default.instance.event(n.default.VICTORY)}playDeadBoom(){let e=this.owner,t=o.default.get(o.EnumSprite.OBJECTS,"HeadShot",1e3);null==t.getComponent(u.default)&&t.addComponent(u.default);let a=e.getChildByName("Body");t.transform.position=null!=a?a.transform.position:e.transform.position,t.transform.scale.setValue(150,150,150),t.transform.scale=t.transform.scale,this._scene.addChild(t)}showBlood(){this.BloodShow&&!this.isBoss&&(this._isBloodShow=!0,c.default.addToStage(this._blood),Laya.timer.once(3e3,this,this.hideBlood))}hideBlood(){this._isBloodShow=!1,this._blood.removeSelf()}}},{"../../../base/base/MathUtil":11,"../../../base/base/Pool":12,"../../common/ui/UIUtil":73,"../GameModule":88,"../common/HeadShotScript":103,"../common/SpritePool":106,"../event/GameEvent":122,"../scene/Scene":136,"./StateScript":154,"./ZombieDefine":156,"./ZombieEvent":157}],154:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./ZombieDefine");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this.state=i.EnumZombieState.IDLE}}},{"./ZombieDefine":156}],155:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.IDLE="Zombie_Idle",i.WALK="Zombie_Walk",i.EATING="Zombie_Eating",i.JUMP="Zombie_Jump"},{}],156:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.EXHIBITION=0]="EXHIBITION",e[e.IDLE=1]="IDLE",e[e.BORN=2]="BORN",e[e.MOVE=3]="MOVE",e[e.ATTACK=4]="ATTACK",e[e.DEATH=5]="DEATH"}(a.EnumZombieState||(a.EnumZombieState={}))},{}],157:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.DEAD="dead"},{}],158:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./ZombieAction"),n=e("../GameModule"),s=e("../event/GameEvent"),o=e("./ZombieDefine"),l=e("../../../base/base/MathUtil"),r=e("../scene/Scene"),d=e("./StateScript"),u=e("./LifeScript"),h=e("../../../config/ResGameConfig");class c extends Laya.Script3D{constructor(){super(...arguments),this.isBornLeft=!1,this.bornOverTarget=0,this.bornOverOffset=0,this.attack=0,this.attackInterval=0,this._lifeZ=0,this._speed=.4,this._speedRate=1,this._translation=new Laya.Vector3,this._directionRadians=0,this._isPause=!1,this._stateScript=null,this._attackTime=0,this._attackPosIndex=-1,this._attackDisperseOffset=0}onEnable(){let e=r.default.instance.view.lifeLineEndPoint;this._lifeZ=e.z,this._stateScript=this.owner.getComponent(d.default);let t=this.owner.getComponent(Laya.Animator),a=this.owner;if(o.EnumZombieState.IDLE==this._stateScript.state){let e=this.owner.getComponent(Laya.Animator);e.speed=1,e.play(i.default.EATING),this.owner.timer.once(l.default.randomInt(2e3,3e3),this,this.onIdleOver)}else if(o.EnumZombieState.EXHIBITION==this._stateScript.state){let e=this.owner.getComponent(Laya.Animator);e.speed=1,e.play(i.default.WALK)}else t.play(i.default.WALK),o.EnumZombieState.BORN==this._stateScript.state&&(a.transform.rotate(new Laya.Vector3(0,this.isBornLeft?90:-90,0),!0),this.speedRate=2*this._speedRate);this._directionRadians=Math.PI/2,this.owner.getComponent(u.default).isBoss||this._stateScript.state==o.EnumZombieState.EXHIBITION||this.dismemberZombie()}onDisable(){this._attackPosIndex>=0&&this._attackPosIndex<c.AttackPosIndexs.length&&(c.AttackPosIndexs[this._attackPosIndex]-=1),this.owner.timer.clear(this,this.onIdleOver);let e=this.owner;e.timer.clearAll(e),e.transform.rotationEuler=new Laya.Vector3(0,0,0),e.transform.localRotationEuler=new Laya.Vector3(0,0,0),e.transform.scale=new Laya.Vector3(1,1,1),this._isPause=!1,this._stateScript=null,this.unDismemberZombie()}onUpdate(){if(this._isPause||o.EnumZombieState.IDLE==this._stateScript.state||o.EnumZombieState.DEATH==this._stateScript.state||o.EnumZombieState.EXHIBITION==this._stateScript.state)return;let e=this.owner,t=h.default.PER_FRAME_TIME/1e3;if(this._translation.toDefault(),o.EnumZombieState.BORN==this._stateScript.state){if(this._translation.x=this._speed*t*this._speedRate,this._translation.x*=this.isBornLeft?1:-1,this.checkBornOver()){let t=r.default.instance.view.masterBorn.transform.position.clone();t.x=0,this.owner.getComponent(u.default).stopHitEffect();let a=l.default.getRadiansByVector(e.transform.position,t),i=this.isBornLeft?Math.PI/2:-Math.PI/2;i+=a,this.bornOverTarget<0&&(i+=Math.PI/4),this._directionRadians=a-Math.PI/2,e.transform.rotate(new Laya.Vector3(0,i,0),!0),this._stateScript.state=o.EnumZombieState.MOVE,this.speedRate=this._speedRate/2}this.doTransform()}else if(o.EnumZombieState.MOVE==this._stateScript.state){let e=this._speed*t*this._speedRate;this._translation.x=Math.cos(this._directionRadians)*e,this._translation.z=Math.sin(this._directionRadians)*e,this.doTransform()}else o.EnumZombieState.ATTACK==this._stateScript.state&&(this._attackTime+=h.default.PER_FRAME_TIME,this._attackTime>=this.attackInterval&&(this._attackTime=0,n.default.instance.event(s.default.BEHIT,this.attack)),this.doDisperse())}doDisperse(){if(0!=this._attackDisperseOffset){let e=.01*l.default.getSign(this._attackDisperseOffset);this._attackDisperseOffset-=e,Math.abs(this._attackDisperseOffset)<=.02&&(this._attackDisperseOffset=0),this._translation.x=e,this._translation.z=0,this.owner.transform.translate(this._translation,!1)}}checkBornOver(){let e=this.owner;return 0!=this.bornOverTarget?this.bornOverTarget<0?e.transform.position.x<=this.bornOverTarget:e.transform.position.x>=this.bornOverTarget:Math.abs(e.transform.position.x)<this.bornOverOffset||this.isBornLeft&&e.transform.position.x>=0||!this.isBornLeft&&e.transform.position.x<=0}set pause(e){this._isPause=e;let t=this.owner.getComponent(Laya.Animator);e?t.speed=0:o.EnumZombieState.IDLE==this._stateScript.state?t.speed=1:t.speed=this.calcAnimatorSpeed()}set speedRate(e){this._speedRate=e,this.owner.getComponent(Laya.Animator).speed=this.calcAnimatorSpeed()}get speedRate(){return this._speedRate}onMasterRevive(){let e=this.owner.getComponent(Laya.Animator);e.speed=1,e.play(i.default.IDLE),this._stateScript.state=o.EnumZombieState.IDLE,this.owner.transform.rotate(new Laya.Vector3(0,l.default.randomInt(0,360),0),!0),this.owner.timer.once(l.default.randomInt(1e3,2e3),this,this.onIdleOver)}doTransform(){let e=this.owner,t=c.AttackPosIndexs.length,a=e.transform.position.z+this._translation.z;if(a>this._lifeZ){this._stateScript.state=o.EnumZombieState.ATTACK,this._attackTime=this.attackInterval,this._translation.z-=a-this._lifeZ;let i=Math.floor(e.transform.position.x)+6;i>=t&&(i=t-1);let n=1,s=!0;for(;c.AttackPosIndexs[i]>0;){let e=i-n;if((e<0||c.AttackPosIndexs[e]>0)&&(e=i+n),i=e,++n>=t){s=!1;break}}s?(this._attackPosIndex=i,c.AttackPosIndexs[i]+=1,this._attackDisperseOffset=(i-(t/2+1))/2-e.transform.position.x):(this._attackDisperseOffset=0,this._attackPosIndex=-1,c.AttackPosIndexs[i]+=1)}e.transform.translate(this._translation,!1)}calcAnimatorSpeed(){return this._isPause?0:this._speedRate>1?1+.4*(this._speedRate-1):this._speedRate}onIdleOver(){let e=this.owner.getComponent(Laya.Animator);e.speed=this.calcAnimatorSpeed(),e.crossFade(i.default.WALK,.5),this._stateScript.state=o.EnumZombieState.MOVE,this.owner.transform.rotation=new Laya.Quaternion(0,0,0,-1)}dismemberZombie(){let e=this.owner;if(-1==e.name.indexOf("Zombie"))return;e.getChildByName("Hand_Left").active=!1,e.getChildByName("Hand_Right").active=!1;let t=l.default.randomInt(1,10);t/2<=1?(e.getChildByName("LowerArm_Left").active=!1,e.getChildByName("LowerArm_Right").active=!1,e.getChildByName("Foot_Left").active=!1):t/4<=1?(e.getChildByName("LowerArm_Left").active=!1,e.getChildByName("LowerArm_Right").active=!1,e.getChildByName("Foot_Right").active=!1):t/6<=1?(e.getChildByName("LowerArm_Right").active=!1,e.getChildByName("UpperArm_Right").active=!1,e.getChildByName("Foot_Left").active=!1):t/9<=1&&(e.getChildByName("LowerArm_Left").active=!1,e.getChildByName("UpperArm_Left").active=!1,e.getChildByName("Foot_Left").active=!1)}unDismemberZombie(){let e=this.owner;-1!=e.name.indexOf("Zombie")&&(e.getChildByName("LowerArm_Right").active=!0,e.getChildByName("UpperArm_Right").active=!0,e.getChildByName("LowerArm_Left").active=!0,e.getChildByName("UpperArm_Left").active=!0,e.getChildByName("Foot_Left").active=!0,e.getChildByName("Foot_Right").active=!0)}}a.default=c,c.AttackPosIndexs=[0,0,0,0,0,0,0,0,0,0]},{"../../../base/base/MathUtil":11,"../../../config/ResGameConfig":50,"../GameModule":88,"../event/GameEvent":122,"../scene/Scene":136,"./LifeScript":153,"./StateScript":154,"./ZombieAction":155,"./ZombieDefine":156}],159:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../StateScript"),n=e("../ZombieDefine"),s=e("../../scene/Scene"),o=e("../LifeScript"),l=e("../../GameModule"),r=e("../../event/GameEvent"),d=e("../../../../config/ResGameConfig");a.default=class extends Laya.Script3D{constructor(){super(...arguments),this.speedRate=1,this.attackInterval=0,this._isPause=!1,this._speed=.4,this._translation=new Laya.Vector3,this._stateScript=null,this._lifeScript=null,this._moveTargetZ=0,this._attackTime=0,this._turnCount=25}onEnable(){this._stateScript=this.owner.getComponent(i.default),this._lifeScript=this.owner.getComponent(o.default),this._moveTargetZ=s.default.instance.view.zombieBorn1.z/2}onDisable(){this._isPause=!1,this._stateScript=null,this._lifeScript=null}onUpdate(){if(!this._isPause)if(n.EnumZombieState.MOVE==this._stateScript.state){let e=this.owner;e.transform.position.x<-7?(e.transform.rotationEuler.y<90&&(e.transform.rotationEuler.y=90,e.transform.rotationEuler=e.transform.rotationEuler),this._translation.x=this._speed*this.speedRate,this._translation.z=0):(e.transform.rotationEuler.y>10&&(e.transform.rotationEuler.y-=80/this._turnCount*this.speedRate,e.transform.position.x+=9/this._turnCount*this.speedRate,e.transform.rotationEuler.y<0&&(e.transform.rotationEuler.y=0,e.transform.position.x=2),e.transform.rotationEuler=e.transform.rotationEuler),this._translation.x=0,this._translation.z=this._speed*this.speedRate);let t=e.transform.position.z+this._translation.z;t>this._moveTargetZ&&(e.transform.position.x=2,e.transform.rotationEuler.y=10,e.transform.rotationEuler=e.transform.rotationEuler,this._stateScript.state=n.EnumZombieState.ATTACK,this._translation.z-=t-this._moveTargetZ),e.transform.translate(this._translation,!1),this._lifeScript.invincible=!0}else n.EnumZombieState.ATTACK==this._stateScript.state&&(this._lifeScript.invincible=!1,this._attackTime+=d.default.PER_FRAME_TIME,this._attackTime>=this.attackInterval&&(this._attackTime=0,this.createZombie()))}set pause(e){this._isPause=e}createZombie(){l.default.instance.event(r.default.ADD_ZOMBIE,new Laya.Vector3(3,0,this._moveTargetZ+2))}}},{"../../../../config/ResGameConfig":50,"../../GameModule":88,"../../event/GameEvent":122,"../../scene/Scene":136,"../LifeScript":153,"../StateScript":154,"../ZombieDefine":156}],160:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{constructor(){this._func=null}destroy(){this.clear()}clear(){this.end(),this._func=null}init(e){this._func=e}}},{}],161:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/base/Pool"),n=e("./FuncFactory");a.default=class{constructor(){this._data=null,this._carrier=null,this._func=null}destroy(){this.clear()}clear(){this._data=null,this._carrier=null,i.default.recover("Func",this._func)}init(e,t){this._carrier=t,this._data=e,this._func=n.default.create(e),null!=this._func&&(this._func.init(this),this._func.start())}get carrier(){return this._carrier}get data(){return this._data}}},{"../../../../base/base/Pool":12,"./FuncFactory":162}],162:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../config/ResData"),n=e("../../../../base/base/Debug"),s=e("../../../../base/base/Pool"),o=e("./FuncReward");a.default=class{static create(e){if(null==e)return n.default.error("Func data is invaild"),null;let t=null;switch(e.type){case i.EnumFunc.REWARD:t=s.default.get("FuncReward",o.default);break;default:n.default.error("Func type error! type = ",e.type)}return t}}},{"../../../../base/base/Debug":8,"../../../../base/base/Pool":12,"../../../../config/ResData":49,"./FuncReward":163}],163:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./Func"),n=e("../../../../config/ResData"),s=e("../ZombieEvent"),o=e("../../GameModule"),l=e("../../event/GameEvent");a.default=class extends i.default{constructor(){super(...arguments),this._type=n.EnumReward.INVAIL,this._param=0,this._carrier=null}init(e){super.init(e),this._carrier=e.carrier,this._type=e.data.param[0],this._param=e.data.param[1]}start(){this._carrier.once(s.default.DEAD,this,this.onDead)}end(){this._carrier.off(s.default.DEAD,this,this.onDead)}onDead(){if(n.EnumReward.BUFF==this._type){let e=null;this._carrier instanceof Laya.Sprite3D&&(e=this._carrier.transform.position),o.default.instance.event(l.default.DROP,[this._type,this._param,e])}this.end()}}},{"../../../../config/ResData":49,"../../GameModule":88,"../../event/GameEvent":122,"../ZombieEvent":157,"./Func":160}],164:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.Invalid=-1]="Invalid",e[e.FirstLvStart=9]="FirstLvStart",e[e.FirstLvOver=10]="FirstLvOver"}(a.EnumLogEvent||(a.EnumLogEvent={})),function(e){e[e.Invalid=0]="Invalid",e[e.Revive=1]="Revive",e[e.Result=2]="Result",e[e.Shop=3]="Shop",e[e.OffLineCoin=4]="OffLineCoin",e[e.Unlock=5]="Unlock",e[e.Buff=6]="Buff",e[e.Airdrop=7]="Airdrop",e[e.FreeCoin=8]="FreeCoin",e[e.Bonus=9]="Bonus",e[e.BonusResult=10]="BonusResult",e[e.Turn=11]="Turn"}(a.EnumPayID||(a.EnumPayID={}))},{}],165:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.RELOGIN_SUCCESS="relogin_success"},{}],166:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../base/module/Module"),n=e("../GameCenter"),s=e("../../util/Wechat"),o=e("../data/GameDataModule"),l=e("../data/user/UserData"),r=e("./NetwordEvent"),d=e("../data/network/NetWorkData"),u=e("../../base/olympus/data/InviteRewardData"),h=e("../../base/olympus/OlympusSDK"),c=e("../../base/olympus/OlympusEvent"),m=e("../../base/olympus/data/LogLoad"),p=e("../../base/olympus/data/LoginData"),f=e("../../base/olympus/data/LogOnlineTick"),g=e("../../base/base/Debug"),_=e("../../base/olympus/data/LogEvent"),y=e("../../base/olympus/data/LogGameProgress"),w=e("../../base/olympus/data/LogAdLoad"),v=e("../../base/olympus/data/OrderData"),b=e("../../base/olympus/data/LogEnterExitData"),I=e("../../base/olympus/data/PromoData"),x=e("../../base/olympus/data/LogPay");class M extends i.default{constructor(){super(),this.TryLoginTime=6e3,this.OnlineTime=1e4}static get instance(){return n.default.instance.get(M)}destroy(){super.destroy()}initialize(){h.default.E.on(c.default.RequestError,this,this.onRequestError),Laya.timer.loop(this.OnlineTime,this,this.logOnlineTick)}uninitialize(){h.default.E.on(c.default.RequestError,this,this.onRequestError),Laya.timer.clear(this,this.logOnlineTick)}doTryLogin(){Laya.timer.loop(this.TryLoginTime,this,this.tryLogin)}onRequestError(e,t){1008==e&&""!=o.default.getData(l.default).Account&&(console.log("token令牌过期 重新登陆"),this.tryLogin(),Laya.timer.loop(this.TryLoginTime,this,this.tryLogin))}tryLogin(){let e=this;Laya.Browser.window.wx.login({success:t=>{if(t.code){M.logLoadEvent(m.LoadStep.LoadStepPfLoginOk);let a=new p.default;a.device=Laya.Browser.onIOS?1:2,a.code=t.code,a.channel=s.default.chanel,a.scene=null==s.default.scene?null:s.default.scene.toString(),a.share_uuid=s.default.share_uuid,a.ad_trace_id=s.default.gdt_vid,a.ad_id=s.default.aid,a.new_client=0,h.default.login(a,e,e.onTryLoginRsp),Laya.timer.clear(e,e.tryLogin),console.log("重登微信成功")}}})}onTryLoginRsp(e){let t=this;if(0==e.code){let t=e.data,a=o.default.getData(l.default);a.New=t.new?1:0,a.Account=t.account,a.UserId=t.user_id,a.Token=t.token,a.Audit=t.audit,a.CheatClick=t.cheat_click,a.ShareUuid=t.default_share_uuid,a.payInfos=t.pay,a.paySeqInfos=t.pay_seq,a.sharePageInfos=t.share_page,M.logLoadEvent(m.LoadStep.LoadStepSvrLoginOk),g.default.log("重登服务器成功"),M.logEnter(s.default.scene),M.getPromo(),M.instance.event(r.default.RELOGIN_SUCCESS)}else g.default.log("重登服务器失败"),Laya.timer.loop(t.TryLoginTime,t,t.tryLogin)}logOnlineTick(){let e=o.default.getData(l.default);if(""==e.Account)return;let t=new f.default;t.user_id=0==e.UserId?void 0:e.UserId,t.token=""==e.Token?void 0:e.Token,h.default.logOnlineTick(t)}static logLoadEvent(e){if(m.LoadStep.LoadStepPfLoginOk==e){if(this._isLogLoadStepPfLoginOk)return;this._isLogLoadStepPfLoginOk=!0}else if(m.LoadStep.LoadStepSvrLoginOk==e){if(this._isLogLoadStepSvrLoginOk)return;this._isLogLoadStepSvrLoginOk=!0}let t=new m.default;t.step=e;let a=o.default.getData(l.default);t.pass_time=Date.now()-l.default.SetupTime,t.new_client=l.default.IsNewClient?1:0,t.user_id=0==a.UserId?void 0:a.UserId,t.device=Laya.Browser.onIOS?1:2,t.channel=s.default.chanel,t.scene=s.default.scene+"",t.share_uuid=s.default.share_uuid,t.ad_trace_id=s.default.gdt_vid,t.ad_id=s.default.aid,h.default.logLoad(t)}static logAdLoad(e,t,a){let i=new w.default,n=o.default.getData(l.default);i.user_id=0==n.UserId?void 0:n.UserId,i.step=e,i.launch_pass_time=Date.now()-l.default.SetupTime,i.start_pass_time=t,i.platform_code=a,h.default.logAdLoad(i)}static logEvent(e){let t=o.default.getData(l.default),a=new _.default;a.user_id=0==t.UserId?void 0:t.UserId,a.event_id=e,h.default.logEvent(a)}static logGameProgress(e){let t=o.default.getData(l.default),a=new y.default;a.user_id=0==t.UserId?void 0:t.UserId,a.token=""==t.Token?void 0:t.Token,a.game_progress=e,h.default.logGameProgress(a)}static reqInviteReward(e,t){let a=new u.default,i=o.default.getData(l.default);a.user_id=0==i.UserId?void 0:i.UserId,a.token=""==i.Token?void 0:i.Token,h.default.queryInviteReward(a,e,t)}static unreqInviteReward(e,t){h.default.cancelQueryInviteReward(e,t)}static takeInviteReward(e,t){let a=new u.TakeInviteRewardRequestData,i=o.default.getData(l.default);a.user_id=0==i.UserId?void 0:i.UserId,a.token=""==i.Token?void 0:i.Token,h.default.takeInviteReward(a,e,t)}static unTakeInviteReward(e,t){h.default.cancelTakeInviteReward(e,t)}static getPromo(){let e=o.default.getData(l.default),t=new I.default;t.token=""==e.Token?void 0:e.Token,h.default.getPromo(t,this,this.onRequstPromo)}static onRequstPromo(e){0==e.code?o.default.getData(d.default).promoDatas=e.data:console.log(e.code+e.message)}static logPromo(e){let t=o.default.getData(l.default),a=new I.LogPromoRequestData;a.token=""==t.Token?void 0:t.Token,a.user_id=0==t.UserId?void 0:t.UserId,a.promo_click_uuid=t.UserId+Date.now().toString(),a.promo_id=e,a.game_progress=t.level,h.default.logPromo(a),this.promoClickUuid=a.promo_click_uuid}static logPromoResult(e){let t=o.default.getData(l.default),a=new I.LogPromoResultRequestData;a.token=""==t.Token?void 0:t.Token,a.promo_click_uuid=this.promoClickUuid,a.result=e,h.default.logPromoResult(a)}static queryStrategy(e,t){let a=o.default.getData(l.default);if(""==a.Token)return;let i=new v.default;i.token=a.Token,i.user_id=a.UserId,h.default.queryStrategy(i,e,t)}static cancelQueryStrategy(e,t){h.default.cancelQueryStrategy(e,t)}static logEnter(e){let t=o.default.getData(l.default);if(0==t.UserId)return;let a=new b.default;a.token=t.Token,a.user_id=t.UserId,a.channel=s.default.chanel,a.ad_trace_id=s.default.gdt_vid,a.ad_id=s.default.aid,a.scene=null==e?null:e.toString(),a.new=t.New,h.default.logEnter(a)}static logExit(){let e=o.default.getData(l.default);if(0==e.UserId)return;let t=new b.LogExitRequestData;t.token=e.Token,t.user_id=e.UserId,h.default.logExit(t)}static logPay(e,t,a){let i=o.default.getData(l.default);if(0==i.UserId)return;let n=new x.default;n.user_id=i.UserId,n.pay_id=e,n.action=t,n.share_page_id=a,n.ad_time=0,h.default.logPay(n)}}a.default=M,M._isLogLoadStepPfLoginOk=!1,M._isLogLoadStepSvrLoginOk=!1,M._adErrCode=-3,M.promoClickUuid=""},{"../../base/base/Debug":8,"../../base/module/Module":18,"../../base/olympus/OlympusEvent":27,"../../base/olympus/OlympusSDK":28,"../../base/olympus/data/InviteRewardData":34,"../../base/olympus/data/LogAdLoad":35,"../../base/olympus/data/LogEnterExitData":36,"../../base/olympus/data/LogEvent":37,"../../base/olympus/data/LogGameProgress":38,"../../base/olympus/data/LogLoad":39,"../../base/olympus/data/LogOnlineTick":40,"../../base/olympus/data/LogPay":41,"../../base/olympus/data/LoginData":42,"../../base/olympus/data/OrderData":43,"../../base/olympus/data/PromoData":44,"../../util/Wechat":324,"../GameCenter":52,"../data/GameDataModule":77,"../data/network/NetWorkData":85,"../data/user/UserData":86,"./NetwordEvent":165}],167:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../util/Wechat"),n=e("../game/GameModule"),s=e("../GameCenter");a.default=class{onStateEnter(){i.default.init(),s.default.instance.add(n.default),n.default.instance.initialize()}onStateLeave(){}onStateOverride(){}onStateResume(){}update(){}}},{"../../util/Wechat":324,"../GameCenter":52,"../game/GameModule":88}],168:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./StateModule"),n=e("./LoginState"),s=e("../common/ui/UIModule"),o=e("../common/ui/UIEvent"),l=e("./StateEvent"),r=e("../ui/loading/LoadingUI"),d=e("../../config/ResConfig"),u=e("../../util/Wechat"),h=e("../../config/ResGameConfig"),c=e("../../util/ResDownload"),m=e("../../util/ResDownloadEvent"),p=e("../../Version");class f{constructor(){this._fontLoadedCount=0,this._fontNum=0}onStateEnter(){s.default.instance.on(o.default.OPEN,this,this.onUIOpen),s.default.instance.openUI(r.default)}onStateLeave(){c.default.instance.off(m.default.LOADED,this,this.onResDownloaded),c.default.instance.off(m.default.LOAD_FAIL,this,this.onResDownloadFail),c.default.instance.off(m.default.CLEAR_OLD_END,this,this.onClearOldEnd),c.default.instance.off(m.default.DOWNLOAD_PROGRESS,this,this.onDownloadProgress),s.default.instance.off(o.default.OPEN,this,this.onUIOpen),Laya.loader.off(Laya.Event.ERROR,this,this.onLoadAssetError)}onStateOverride(){}onStateResume(){}update(){}onUIOpen(e){Laya.timer.callLater(this,this.doUIOpen,[e])}doUIOpen(e){e instanceof r.default&&(Laya.Browser.onMiniGame?(Laya.MiniAdpter.autoCacheFile=!1,c.default.instance.once(m.default.LOADED,this,this.onResDownloaded),c.default.instance.once(m.default.LOAD_FAIL,this,this.onResDownloadFail),c.default.instance.once(m.default.CLEAR_OLD_END,this,this.onClearOldEnd),c.default.instance.on(m.default.DOWNLOAD_PROGRESS,this,this.onDownloadProgress),c.default.instance.loadZipRes(f.cdn,p.default.asset),Laya.loader.on(Laya.Event.ERROR,this,this.onLoadAssetError)):this.loadAsset())}onResDownloaded(){Laya.URL.basePath=c.default.instance.wxPath,this.loadAsset()}onResDownloadFail(){Laya.URL.basePath=f.cdn+p.default.asset+"/",this.loadAsset()}onClearOldEnd(){let e=s.default.instance.getUI(r.default);null!=e&&(e.process=.1)}onDownloadProgress(e){let t=s.default.instance.getUI(r.default);null!=t&&(t.process=.1+.2*e/100)}onLoadAssetError(){Laya.loader.clearUnLoaded(),c.default.instance.reloadZipRes(f.cdn,p.default.asset)}loadAsset(){d.default.UIUrls.length>0?Laya.loader.load(d.default.UIUrls,Laya.Handler.create(this,this.onUILoaded),Laya.Handler.create(this,this.onUIProgress,null,!1)):this.onUILoaded(!0)}onUIProgress(e){let t=s.default.instance.getUI(r.default);null!=t&&(t.process=.3+.2*e)}onUILoaded(e){e?d.default.ConfigUrls.length>0?Laya.loader.load(d.default.ConfigUrls,Laya.Handler.create(this,this.onConfigLoaded),Laya.Handler.create(this,this.onConfigProgress,null,!1)):this.onConfigLoaded(!0):(u.default.logEvent("加载配置资源失败"),i.default.instance.event(l.default.LOAD_ERROR))}onConfigLoaded(e){e?(h.default.initData(),d.default.SceneUrls.length>0?Laya.loader.create(d.default.SceneUrls,Laya.Handler.create(this,this.onSceneLoaded),Laya.Handler.create(this,this.onSceneProgress,null,!1)):this.onSceneLoaded(!0)):(u.default.logEvent("加载配置档资源失败"),i.default.instance.event(l.default.LOAD_ERROR))}onConfigProgress(e){let t=s.default.instance.getUI(r.default);null!=t&&(t.process=.4+.2*e)}onSceneLoaded(e){e?d.default.Prefabs.length>0?Laya.loader.create(d.default.Prefabs,Laya.Handler.create(this,this.onPrefabLoaded),Laya.Handler.create(this,this.onPrefabProgress,null,!1),Laya.Loader.PREFAB):this.onPrefabLoaded(!0):(u.default.logEvent("加载场景资源失败"),i.default.instance.event(l.default.LOAD_ERROR))}onSceneProgress(e){let t=s.default.instance.getUI(r.default);null!=t&&(t.process=.6+.4*e)}onPrefabLoaded(e){e?d.default.FontNames.length>0?d.default.FontNames.forEach(e=>{this.loadFont(e)}):this.checkLoaded():(u.default.logEvent("加载预制件失败"),i.default.instance.event(l.default.LOAD_ERROR))}onPrefabProgress(e){let t=s.default.instance.getUI(r.default);null!=t&&(t.process=.8+.1*e)}loadFont(e){this._fontNum++;let t=new Laya.BitmapFont;t.loadFont("font/"+e+".fnt",Laya.Handler.create(this,this.onFontLoaded,[e,t]))}onFontLoaded(e,t){Laya.Text.registerBitmapFont(e,t),this._fontLoadedCount++;let a=s.default.instance.getUI(r.default);null!=a&&(a.process=.9+this._fontLoadedCount/this._fontNum*.1),this.checkLoaded()}checkLoaded(){this._fontLoadedCount>=this._fontNum&&i.default.instance.changeState(n.default)}}a.default=f,f.cdn=d.default.CDN+"asset/",f.cdnPic=d.default.CDN+"weapon/",f.cdnRadar=d.default.CDN+"weapon_radar/"},{"../../Version":3,"../../config/ResConfig":48,"../../config/ResGameConfig":50,"../../util/ResDownload":320,"../../util/ResDownloadEvent":321,"../../util/Wechat":324,"../common/ui/UIEvent":69,"../common/ui/UIModule":70,"../ui/loading/LoadingUI":252,"./LoginState":169,"./StateEvent":170,"./StateModule":171}],169:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../network/NetworkModule"),n=e("../../base/olympus/data/LogLoad"),s=e("../../base/olympus/data/LoginData"),o=e("../../base/olympus/OlympusSDK"),l=e("../../util/Wechat"),r=e("../data/user/UserData"),d=e("./StateModule"),u=e("./GameState"),h=e("../../base/base/Debug"),c=e("../data/GameDataModule"),m=e("../../base/olympus/data/SetPackData"),p=e("../../config/ResGameConfig");a.default=class{constructor(){this._try=2,this._isOver=!1}onStateEnter(){Laya.Browser.onMiniGame?(wx.showLoading({title:"登录中",mask:!1}),this.wechatLogin(),Laya.timer.once(6e3,this,this.onTimeOut)):(c.default.instance.getPackData(null),d.default.instance.changeState(u.default))}onStateLeave(){Laya.timer.clear(this,this.onTimeOut),this._isOver=!0,Laya.Browser.onMiniGame&&wx.hideLoading()}onStateOverride(){}onStateResume(){}update(){}onTimeOut(){console.log("登录超时"),l.default.logEvent("登录超时"),this.loginFail()}wechatLogin(){if(this._try--,this._try<0&&Laya.Browser.onMiniGame){let e=this;Laya.timer.loop(1e4,e,e.tryLogin)}if(Laya.Browser.onMiniGame&&this._try>=0){let e=this;Laya.Browser.window.wx.login({timeout:3e3,success:t=>{if(null!=e&&!e._isOver)if(t.code){console.log("微信登陆成功"+Date.now()),i.default.logLoadEvent(n.LoadStep.LoadStepPfLoginOk);let a=new s.default;a.device=Laya.Browser.onIOS?1:2,a.code=t.code,a.channel=l.default.chanel,a.scene=null==l.default.scene?null:l.default.scene.toString(),a.share_uuid=l.default.share_uuid,a.ad_trace_id=l.default.gdt_vid,a.ad_id=l.default.aid,a.new_client=r.default.IsNewClient?1:0,o.default.login(a,e,e.onLoginRsp)}else console.log("微信登陆失败 "+t.code),e.wechatLogin()},fail:()=>{console.log("微信登陆失败"+Date.now()),e.wechatLogin()},complete:()=>{}})}else this.loginFail()}loginFail(){c.default.getData(r.default).sharePageInfos=p.default.shareDatas,c.default.instance.getPackData(null),d.default.instance.changeState(u.default),i.default.instance.doTryLogin()}onLoginRsp(e){if(null!=this&&!this._isOver)if(0==e.code){h.default.log("登陆服务器成功");let t=c.default.getData(r.default),a=e.data;t.New=a.new?1:0,t.Account=a.account,t.UserId=a.user_id,t.Token=a.token,t.Audit=a.audit,t.CheatClick=a.cheat_click,t.ShareUuid=a.default_share_uuid,t.payInfos=a.pay,t.paySeqInfos=a.pay_seq,t.sharePageInfos=a.share_page,i.default.logLoadEvent(n.LoadStep.LoadStepSvrLoginOk),t.New?(c.default.instance.getPackData(null),d.default.instance.changeState(u.default)):this.getPackData(c.default.instance.version),i.default.logEnter(l.default.scene),i.default.getPromo()}else console.log("登陆服务器失败:"+e.message),this.wechatLogin()}getPackData(e){let t=c.default.getData(r.default),a=new m.GetPackDataRequestData;a.token=t.Token,a.user_id=t.UserId,a.version=e,o.default.getPackData(a,this,this.getPackDataRsp)}getPackDataRsp(e){if(0==e.code){let t=e.data;h.default.log("从服务器加载数据成功 svrVersion "+t.version),c.default.instance.getPackData(t)}else h.default.log("从服务器加载数据失败 "+e.code+e.message),c.default.instance.getPackData(null);d.default.instance.changeState(u.default)}tryLogin(){let e=this;Laya.Browser.window.wx.login({success:t=>{if(t.code){i.default.logLoadEvent(n.LoadStep.LoadStepPfLoginOk);let a=new s.default;a.device=Laya.Browser.onIOS?1:2,a.code=t.code,a.channel=l.default.chanel,a.scene=null==l.default.scene?null:l.default.scene.toString(),a.share_uuid=l.default.share_uuid,a.ad_trace_id=l.default.gdt_vid,a.ad_id=l.default.aid,a.new_client=r.default.IsNewClient?1:0,o.default.login(a,e,e.onTryLoginRsp),Laya.timer.clear(e,e.tryLogin),h.default.log("tryLogin:微信登陆成功")}}})}onTryLoginRsp(e){if(0==e.code){let t=c.default.getData(r.default),a=e.data;t.New=a.new?1:0,t.Account=a.account,t.UserId=a.user_id,t.Token=a.token,t.Audit=a.audit,t.CheatClick=a.cheat_click,t.ShareUuid=a.default_share_uuid,t.payInfos=a.pay,t.paySeqInfos=a.pay_seq,t.sharePageInfos=a.share_page,i.default.logLoadEvent(n.LoadStep.LoadStepSvrLoginOk),c.default.instance.markSync(),i.default.logEnter(l.default.scene),i.default.getPromo(),h.default.log("onTryLoginRsp:登陆服务器成功")}else h.default.log("onTryLoginRsp:登陆服务器失败"),Laya.timer.loop(2e3,this,this.tryLogin)}}},{"../../base/base/Debug":8,"../../base/olympus/OlympusSDK":28,"../../base/olympus/data/LogLoad":39,"../../base/olympus/data/LoginData":42,"../../base/olympus/data/SetPackData":45,"../../config/ResGameConfig":50,"../../util/Wechat":324,"../data/GameDataModule":77,"../data/user/UserData":86,"../network/NetworkModule":166,"./GameState":167,"./StateModule":171}],170:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.LOAD_ERROR="load_error",i.RELOAD="reload"},{}],171:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../base/module/Module"),n=e("../../base/base/Dictionary"),s=e("../../base/state/StateStack"),o=e("../GameCenter");class l extends i.default{constructor(){super(),this._stateDic=null,this._stateStack=null,this._stateDic=new n.default,this._stateStack=new s.default}destroy(){this._stateStack.clearState(),this._stateStack=null,this._stateDic.clear(),this._stateDic=null}static get instance(){return o.default.instance.get(l)}initialize(){}uninitialize(){}update(){this._stateStack.update()}pushState(e){let t=this._stateDic.getValue(e);null==t&&(t=new e,this._stateDic.setValue(e,t)),this._stateStack.pushState(t)}popState(){let e=this._stateStack.popState();return this.removeState(e),e}changeState(e){let t=this._stateDic.getValue(e);null==t&&(t=new e,this._stateDic.setValue(e,t));let a=this._stateStack.changeState(t);return this.removeState(a),a}topState(){return this._stateStack.topState()}clearState(){return this._stateStack.clearState()}get count(){return this._stateStack.count}getState(e){return this._stateDic.getValue(e)}removeState(e){if(null!=e)for(let t=0;t<this._stateDic.values.length;++t){if(this._stateDic.values[t]==e){this._stateDic.remove(this._stateDic.keys[t]);break}}}}a.default=l},{"../../base/base/Dictionary":9,"../../base/module/Module":18,"../../base/state/StateStack":47,"../GameCenter":52}],172:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./AirdropView"),n=e("./AirdropParam"),s=e("../result/data/AwardItemData"),o=e("../../../base/base/Pool"),l=e("../../common/Notice"),r=e("../../game/GameModule"),d=e("../../game/event/GameEvent"),u=e("../../common/ui/UIModule"),h=e("./AirdropUI"),c=e("../../../base/base/Dictionary"),m=e("../../../util/BannerAdUtil"),p=e("../../data/user/UserData"),f=e("../../data/GameDataModule"),g=e("../../common/ui/UIStrategyControl"),_=e("../../network/DataEnum");a.default=class extends g.default{constructor(){super(...arguments),this._aldKey="Airdrop",this._ui=null,this._itemDic=null}initialize(){super.initialize(),this._ui=this.getView(i.default).ui,this._ui.btnPay.clickHandler=Laya.Handler.create(this,this.onClickTakeAll,null,!1),this._ui.tfGiveUp.on(Laya.Event.CLICK,this,this.onClickClose),this.setAwardMsg(),m.default.show()}uninitialize(){if(m.default.hide(),this.clearHandler(),this._ui=null,null!=this._itemDic.values){for(let e=0;e<this._itemDic.values.length;e++)this._itemDic.values[e].clearData();this._itemDic=null}super.uninitialize()}clearHandler(){this._ui.tfGiveUp.off(Laya.Event.CLICK,this,this.onClickClose),this._ui.btnPay.clickHandler&&(this._ui.btnPay.clickHandler.recover(),this._ui.btnPay.clickHandler=null)}get payId(){return _.EnumPayID.Airdrop}onRefreshStrategy(e){null==this._ui&&(this._ui=this.getView(i.default).ui),this._ui.clipPay.index=e?1:0,f.default.instance.getData(p.default)}onPaySuccess(e){if(this.clearHandler(),null!=this.getData(n.default).awardArray){let e=new Array,t=this._itemDic.values;for(let a=0;a<t.length;a++){let i=o.default.get(s.default.poolName,s.default),n=t[a];i.copyTo(n.awardItemData);let l=o.default.getPoint();l.x=0,l.y=0,l=n.localToGlobal(l,!1),i.stagePos=l,e.push(i)}r.default.instance.event(d.default.AIRDROP_AWARD_GET,[e])}this.getSuccess()}onPayFail(e){e?l.default.show("Sharing failed, please re-share"):l.default.show("The video quit midway, please watch again")}onClickTakeAll(){this.pay(this._aldKey)}onClickClose(){r.default.instance.event(d.default.AIRDROP_CLOSE,[!1]),u.default.instance.closeUI(h.default)}getSuccess(){r.default.instance.event(d.default.AIRDROP_CLOSE,[!0]),u.default.instance.closeUI(h.default)}setAwardMsg(){let e=this.getData(n.default);if(null!=e.awardArray){this._itemDic=new c.default,this._ui.listAward.array=e.awardArray;let t=Laya.Handler.create(this,this.listRender,null,!1);this._ui.listAward.renderHandler=t,this.setUI(e.awardArray.length)}}setUI(e){4==e?(this._ui.imgMainBg.height=548,this._ui.imgListBg.height=250,this._ui.btnPay.y=579,this._ui.tfGiveUp.y=733,this._ui.listAward.y=240):(this._ui.imgMainBg.height=670,this._ui.imgListBg.height=360,this._ui.btnPay.y=695,this._ui.tfGiveUp.y=863,this._ui.listAward.y=205)}listRender(e,t){if(null!=e){let a=e.dataSource;e.setData(a),this._itemDic.setValue(t,e)}}}},{"../../../base/base/Dictionary":9,"../../../base/base/Pool":12,"../../../util/BannerAdUtil":316,"../../common/Notice":57,"../../common/ui/UIModule":70,"../../common/ui/UIStrategyControl":71,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../../network/DataEnum":164,"../result/data/AwardItemData":268,"./AirdropParam":173,"./AirdropUI":174,"./AirdropView":175}],173:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCData");a.default=class extends i.default{constructor(){super(...arguments),this.awardArray=null}}},{"../../../base/mvc/MVCData":22}],174:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./AirdropParam"),o=e("./AirdropView"),l=e("./AirdropControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(s.default),this.addView(o.default),this.addControl(l.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./AirdropControl":172,"./AirdropParam":173,"./AirdropView":175}],175:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../../ui/layaMaxUI"),s=e("../../common/TweenTool");a.default=class extends i.default{constructor(){super(n.ui.game.AirdropUI)}initialize(){super.initialize(),this._ui.zOrder=950,Laya.timer.callLater(this,this.showTween),this.ui.animFlash.play(0,!0)}uninitialize(){this.ui.animFlash.stop(),Laya.Tween.clearAll(this.ui.imgTitle),Laya.Tween.clearAll(this.ui.boxMain),super.uninitialize()}showTween(){let e=this.ui.boxMain;s.default.ScaleUpOut(e);let t=this.ui.imgTitle;s.default.ScaleUpOut(t)}}},{"../../../ui/layaMaxUI":315,"../../common/TweenTool":59,"../../common/ui/UIView":74}],176:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./AppendMyProgramView"),s=e("../../../util/Wechat"),o=e("../../common/ui/UIModule"),l=e("./AppendMyProgramUI"),r=e("../../common/Notice"),d=e("../reward/RewardUI"),u=e("../../../config/ResGameConfig"),h=e("../../data/GameDataModule"),c=e("../../data/user/UserData"),m=e("../../../util/WechatEvent");a.default=class extends i.default{initialize(){let e=this.getView(n.default).ui;e.btnGet.clickHandler=Laya.Handler.create(this,this.onGet,null,!1),e.btnClose.clickHandler=Laya.Handler.create(this,this.onClose),s.default.instance.on(m.default.ON_SHOW,this,this.onShow),this.onShow(null)}uninitialize(){s.default.instance.off(m.default.ON_SHOW,this,this.onShow);let e=this.getView(n.default).ui;null!=e.btnGet.clickHandler&&(e.btnGet.clickHandler.recover(),e.btnGet.clickHandler=null)}onGet(){s.default.isMyProgramScene?(h.default.getData(c.default).appendMyProgram=!0,o.default.instance.closeUI(l.default),d.default.show(u.default.AppendMyProgramDiamonds)):r.default.show("Please follow the prompts to receive rewards!")}onClose(){o.default.instance.closeUI(l.default)}onShow(e){s.default.isMyProgramScene&&this.doReward()}doReward(){h.default.getData(c.default).appendMyProgram=!0,o.default.instance.closeUI(l.default),d.default.show(u.default.AppendMyProgramDiamonds)}}},{"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../../util/Wechat":324,"../../../util/WechatEvent":325,"../../common/Notice":57,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../reward/RewardUI":280,"./AppendMyProgramUI":177,"./AppendMyProgramView":178}],177:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./AppendMyProgramView"),o=e("./AppendMyProgramControl");a.default=class extends i.default{constructor(){super(n.EUIType.DIALOG),this.addView(s.default),this.addControl(o.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./AppendMyProgramControl":176,"./AppendMyProgramView":178}],178:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIDialogView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.index.AppendMyProgramDialogUI)}initialize(){super.initialize()}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIDialogView":68}],179:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./BonusResultView"),n=e("../../common/ui/UIModule"),s=e("./BonusResultUI"),o=e("./BonusResultOpenParam"),l=e("../../data/GameDataModule"),r=e("../../data/user/UserData"),d=e("../../game/GameModule"),u=e("../../game/state/NormalState"),h=e("../../../util/BannerAdUtil"),c=e("../../common/ui/UIStrategyControl"),m=e("../../network/DataEnum"),p=e("../../../base/base/MathUtil");a.default=class extends c.default{initialize(){super.initialize();let e=this.getView(i.default).ui,t=this.getData(o.default);e.tfCoin.text=p.default.formatNumber(t.coin),e.tfDiamond.text=p.default.formatNumber(t.diamond),e.btnPay.clickHandler=Laya.Handler.create(this,this.onPay,null,!1),e.tfGet.on(Laya.Event.CLICK,this,this.onGet),e.aniShow.play(0,!1),h.default.show()}uninitialize(){h.default.hide();let e=this.getView(i.default).ui;e.btnPay.clickHandler.recover(),e.btnPay.clickHandler=null,e.tfGet.off(Laya.Event.CLICK,this,this.onGet),super.uninitialize()}get payId(){return m.EnumPayID.BonusResult}onRefreshStrategy(e){this.getView(i.default).ui.clipShareVideo.index=e?1:0}onPaySuccess(e){let t=this.getData(o.default);l.default.getData(r.default).diamond+=5*t.diamond,this.onClose()}onPayFail(e){}onPay(){this.pay("BonusResult")}onGet(){let e=this.getData(o.default),t=l.default.getData(r.default);t.diamond+=e.diamond,t.coin+=e.coin,this.onClose()}onClose(){l.default.instance.markSync(),n.default.instance.closeUI(s.default),d.default.instance.changeState(u.default)}}},{"../../../base/base/MathUtil":11,"../../../util/BannerAdUtil":316,"../../common/ui/UIModule":70,"../../common/ui/UIStrategyControl":71,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../game/GameModule":88,"../../game/state/NormalState":143,"../../network/DataEnum":164,"./BonusResultOpenParam":180,"./BonusResultUI":181,"./BonusResultView":182}],180:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIBaseData");a.default=class extends i.default{constructor(){super(...arguments),this.diamond=0,this.coin=0}}},{"../../common/ui/UIBaseData":66}],181:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./BonusResultView"),o=e("./BonusResultControl"),l=e("./BonusResultOpenParam");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(l.default),this.addView(s.default),this.addControl(o.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./BonusResultControl":179,"./BonusResultOpenParam":180,"./BonusResultView":182}],182:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.result.BonusResultViewUI)}initialize(){super.initialize()}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIView":74}],183:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./BonusRuleView"),s=e("../../common/ui/UIModule"),o=e("./BonusRuleUI"),l=e("../../data/GameDataModule"),r=e("../../data/user/UserData");a.default=class extends i.default{initialize(){let e=this.getView(n.default).ui;e.cbUnshow.selected=!1,e.btnSure.clickHandler=Laya.Handler.create(this,this.onSure)}uninitialize(){}onSure(){let e=l.default.getData(r.default),t=this.getView(n.default).ui;e.bonusRule=!t.cbUnshow.selected,s.default.instance.closeUI(o.default)}}},{"../../../base/mvc/MVCControl":20,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/user/UserData":86,"./BonusRuleUI":184,"./BonusRuleView":185}],184:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./BonusRuleView"),o=e("./BonusRuleControl");class l extends i.default{constructor(){super(n.EUIType.DIALOG),this.addView(s.default),this.addControl(o.default)}}a.default=l,l.ImgIconY=0},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./BonusRuleControl":183,"./BonusRuleView":185}],185:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIDialogView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.game.BonusRuleDialogUI)}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIDialogView":68}],186:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../data/GameDataModule"),n=e("../../data/buff/BuffData"),s=e("./BuffView"),o=e("../../common/ui/UIModule"),l=e("./BuffUI"),r=e("../../../config/ResGameConfig"),d=e("../../../base/base/MathUtil"),u=e("../../game/GameModule"),h=e("../../game/event/GameEvent"),c=e("../../../util/BannerAdUtil"),m=e("../../data/user/UserData"),p=e("./BuffOpenParam"),f=e("../../common/ui/UIStrategyControl"),g=e("../../network/DataEnum");a.default=class extends f.default{initialize(){let e=i.default.getData(n.default),t=i.default.getData(m.default),a=this.getView(s.default).ui;if(a.clipShareVideo.visible=!1,a.tfGiveup.visible=!1,e.buffId=0,t.level<=2)e.buffId=2;else if(3==t.level)e.buffId=1;else if(4==t.level)e.buffId=3;else{super.initialize(),a.clipShareVideo.visible=!0,a.tfGiveup.visible=!0;let t=new Array,i=r.default.buffs,n=3;for(let a=0;a<n;a++){const n=i[a].id;let s=!0;for(let t=0;t<e.buffRecords.length;t++)if(e.buffRecords[t]==n){s=!1;break}s&&t.push(n)}t.length<=0?(e.buffRecords.splice(0,e.buffRecords.length),e.buffId=i[d.default.randomInt(0,n-1)].id):e.buffId=t[d.default.randomInt(0,t.length-1)]}e.buffRecords.push(e.buffId);let o=r.default.getBuff(e.buffId);a.imgIcon.skin="res/buff/"+o.resName+".png",a.imgEffect.skin="game/img_"+o.resName+"_effect.png",a.imgTitle.skin="game/img_"+o.resName+"_title.png",a.tfName.text=o.name,a.tfDesc.text=o.desc,a.btnShareVideo.clickHandler=Laya.Handler.create(this,this.onPay,null,!1),a.tfGiveup.on(Laya.Event.CLICK,this,this.onGiveup),a.aniShow.play(0,!1),c.default.show()}uninitialize(){c.default.hide();let e=this.getView(s.default).ui;Laya.Point.TEMP.setTo(0,0),l.default.ImgIconY=e.imgIcon.localToGlobal(Laya.Point.TEMP).y,e.btnShareVideo.clickHandler.recover(),e.btnShareVideo.clickHandler=null,e.tfGiveup.off(Laya.Event.CLICK,this,this.onGiveup),super.uninitialize()}get payId(){return g.EnumPayID.Buff}onRefreshStrategy(e){this.getData(p.default),this.getView(s.default).ui.clipShareVideo.index=e?1:0,i.default.instance.getData(m.default)}onPaySuccess(e){let t=this.getView(s.default).ui;t.aniHide.once(Laya.Event.COMPLETE,this,this.onClose),t.aniHide.play(0,!1)}onPayFail(e){}onPay(){if(i.default.getData(m.default).level<=4)this.onPaySuccess(!1);else{let e=this.getData(p.default);this.pay(e.source+"Buff")}}onGiveup(){i.default.getData(n.default).buffId=0,this.onClose()}onClose(){o.default.instance.closeUI(l.default),u.default.instance.event(h.default.BUFF_OVER)}}},{"../../../base/base/MathUtil":11,"../../../config/ResGameConfig":50,"../../../util/BannerAdUtil":316,"../../common/ui/UIModule":70,"../../common/ui/UIStrategyControl":71,"../../data/GameDataModule":77,"../../data/buff/BuffData":78,"../../data/user/UserData":86,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../../network/DataEnum":164,"./BuffOpenParam":187,"./BuffUI":188,"./BuffView":189}],187:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIBaseData");a.default=class extends i.default{constructor(){super(...arguments),this.source=""}}},{"../../common/ui/UIBaseData":66}],188:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./BuffView"),o=e("./BuffContorl"),l=e("./BuffOpenParam");class r extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(l.default),this.addView(s.default),this.addControl(o.default)}}a.default=r,r.ImgIconY=0},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./BuffContorl":186,"./BuffOpenParam":187,"./BuffView":189}],189:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.game.BuffViewUI)}initialize(){super.initialize();let e=new Laya.ColorFilter;e.setColor("#b8211b"),this.ui.tfName.filters=[e]}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIView":74}],190:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIUtil"),n=e("../../game/common/SpritePool"),s=e("../../game/zombie/StateScript"),o=e("../../game/zombie/ZombieDefine"),l=e("../../../base/base/Pool");a.default=class extends Laya.Script{constructor(){super(...arguments),this._scene=null,this._camera=null,this._light=null,this._zombie=null}onEnable(){this.showScene(),this.owner.on(Laya.Event.RESIZE,this,this.onResize),this.owner.on(Laya.Event.CHANGE,this,this.onChange)}onDisable(){this.owner.off(Laya.Event.RESIZE,this,this.onResize),this.owner.off(Laya.Event.CHANGE,this,this.onChange),this.hideScene()}onResize(){let e=this.owner,t=l.default.getPoint();t=e.localToGlobal(t),this._camera.viewport.x=t.x,this._camera.viewport.y=t.y,this._camera.viewport.width=e.width*i.default.scale,this._camera.viewport.height=e.height*i.default.scale,l.default.recoverPoint(t)}showScene(){let e=this.owner;this._scene=new Laya.Scene3D,e.addChild(this._scene),this._camera=new Laya.Camera,this._scene.addChild(this._camera);let t=l.default.getPoint();t=e.localToGlobal(t),this._camera.viewport=new Laya.Viewport(t.x,t.y,e.width*i.default.scale,e.height*i.default.scale),l.default.recoverPoint(t),this._camera.transform.translate(new Laya.Vector3(0,2,10),!1),this._camera.fieldOfView=35,this._camera.clearFlag=Laya.Camera.CLEARFLAG_NONE,this._light=new Laya.DirectionLight,this._light.transform.worldMatrix.setForward(new Laya.Vector3(0,-10,-10)),this._scene.addChild(this._light),this._scene.ambientColor=new Laya.Vector3(.5,.5,.5)}onChange(e,t,a){if(this._scene.name=t,null!=this._zombie&&(this._zombie.timer.clearAll(this),n.default.recover(this._zombie)),null==t)return;if(this._zombie=n.default.get(e,t),null==this._zombie)return;this._zombie.transform.rotation.x=0,this._zombie.transform.rotation.y=0,this._zombie.transform.rotation.z=0,this._zombie.transform.rotation.w=0,this._zombie.transform.rotation=this._zombie.transform.rotation,this._zombie.transform.position.setValue(0,0,0),this._zombie.transform.position=this._zombie.transform.position,this._zombie.transform.scale.setValue(a,a,a),this._zombie.transform.scale=this._zombie.transform.scale;let i=this._zombie.getComponent(s.default);null!=i&&(i.state=o.EnumZombieState.EXHIBITION),this._scene.addChild(this._zombie)}hideScene(){null!=this._zombie&&n.default.recover(this._zombie),null!=this._camera&&(this._camera.destroy(),this._camera=null),null!=this._light&&(this._light.destroy(),this._light=null),null!=this._scene&&(this._scene.destroy(),this._scene=null)}}},{"../../../base/base/Pool":12,"../../common/ui/UIUtil":73,"../../game/common/SpritePool":106,"../../game/zombie/StateScript":154,"../../game/zombie/ZombieDefine":156}],191:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/base/Debug");class n{static format(e,t="#7d744f",a=26){let s="",o=e;for(;-1!=o.indexOf(n.FLAG_START);){let e=o.indexOf(n.FLAG_START),l=o.indexOf(n.FLAG_END);if(-1==l)return i.default.error("talk format not end"),o;s+=this.formartLine(o.substr(0,e),t,a);let r=o.substr(e+1,l-e-1);s+=this.setFontColorAndSize(r,"#b8211b",a),o=o.substr(l+1)}return s+=this.formartLine(o,t,a)}static formartLine(e,t="#7d744f",a=26){let i="",n=e.split("&&"),s=n.length;for(let e=0;e<s;e++){const o=n[e];i+=e!=s-1?this.setFontColorAndSize(o,t,a)+"<br/>":this.setFontColorAndSize(o,t,a)}return i}static setFontColorAndSize(e,t="#7d744f",a=26){return"<span style='color:"+t+";font-size:"+a+";font-weight:bold;font-family:Microsoft YaHei'>"+e+"</span>"}}a.default=n,n.FLAG_START="[",n.FLAG_END="]",n.FLAG_LINE="&&"},{"../../../base/base/Debug":8}],192:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../data/GameDataModule"),s=e("../../data/user/UserData"),o=e("../../../config/ResGameConfig"),l=e("../../../base/base/Dictionary");a.default=class extends i.ui.common.LevelViewUI{constructor(){super(),this._subLevel=0,this._itemDic=null,this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemoved)}destroy(){Laya.Tween.clearAll(this.imgArrow),this.off(Laya.Event.ADDED,this,this.onAdded),this.off(Laya.Event.REMOVED,this,this.onRemoved),super.destroy()}allComplete(){let e=n.default.getData(s.default).level-1,t=Math.floor(e/o.default.LevelNumOfChapter);this._subLevel=5,this.listLevel.refresh(),this.clipBoss.index=2;let a=o.default.getChapter(t);this.tfCurLevel.text=t.toString(),this.tfCurLevelName.text=a.name,this.clipCurLevel.skin="index/clip_"+a.icon+".png",t+=1,a=o.default.getChapter(t),this.tfNextLevel.text=t.toString(),this.tfNextLevelName.text=a.name,this.clipNextLevel.skin="index/clip_"+a.icon+".png",this.clipNextLevel.index=1,this.imgArrow.visible=!1}onAdded(e){this._itemDic=new l.default;let t=n.default.getData(s.default).level-1,a=Math.floor(t/o.default.LevelNumOfChapter)+1;this._subLevel=t%o.default.LevelNumOfChapter;let i=o.default.getChapter(a);this.tfCurLevel.text=a.toString(),this.tfCurLevelName.text=i.name,this.clipCurLevel.skin="index/clip_"+i.icon+".png",a+=1,i=o.default.getChapter(a),this.tfNextLevel.text=a.toString(),this.tfNextLevelName.text=i.name,this.clipNextLevel.skin="index/clip_"+i.icon+".png",this.listLevel.renderHandler=Laya.Handler.create(this,this.onRenderItem,null,!1),this.listLevel.array=new Array(o.default.LevelNumOfChapter-1),this.imgArrow.x=115+60*this._subLevel,this.aniArrow.play(0,!0);let r=o.default.LevelNumOfChapter-1;this._subLevel>r?this.clipBoss.index=2:this._subLevel==r?this.clipBoss.index=1:this.clipBoss.index=0}onRemoved(e){null!=this.listLevel.renderHandler&&(this.listLevel.renderHandler.recover(),this.listLevel.renderHandler=null),this.aniArrow.stop()}onRenderItem(e,t){t<this._subLevel?e.index=2:t==this._subLevel?e.index=1:e.index=0,this._itemDic.setValue(t,e)}playLevelUpAnim(e,t){let a=e%o.default.LevelNumOfChapter;this.imgArrow.x=115+60*a;let i=t%o.default.LevelNumOfChapter,n=115+60*i,s=Laya.Ease.circOut;this.setLevelIconByLevel(a);let l=Laya.Handler.create(this,this.setLevelIconByLevel,[i]);Laya.Tween.to(this.imgArrow,{x:n},500,s,l,0,!0,!0)}setLevelIconByLevel(e){if(null!=this._itemDic&&this._itemDic.values.length>0)for(let t=0;t<this._itemDic.keys.length;t++){let a=this._itemDic.keys[t],i=this._itemDic.getValue(a);i.index=a<e?2:a==e?1:0}}}},{"../../../base/base/Dictionary":9,"../../../config/ResGameConfig":50,"../../../ui/layaMaxUI":315,"../../data/GameDataModule":77,"../../data/user/UserData":86}],193:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../../config/ResGameConfig"),s=e("../../../base/base/Debug"),o=e("../../game/common/SpritePool"),l=e("../../data/GameDataModule"),r=e("../../data/illustrated/IllustratedData"),d=e("./HtmlTool"),u=e("../../../config/ResData");a.default=class extends i.ui.illustrated.ZombieInfoItemUI{set illustratedId(e){let t=l.default.getData(r.default),a=t.isUnlock(e);a&&t.read(e);let i=n.default.getIllustrated(e);if(null!=i){let e=i.isBoss&&i.bossType!=u.EnumBoss.NORMAL?o.EnumSprite.BOSS:o.EnumSprite.ZOMBIE;this.imgBoss.visible=i.isBoss>0,this.imgLock.visible=!a,this.viewAvatar.event(Laya.Event.CHANGE,[e,a?i.resName:void 0,i.sizeRate]),this.tfName.text=a?i.name:"???",this.tfDesc.style.leading=10,this.tfDesc.style.width=360,this.tfDesc.style.height=94,this.tfDesc.style.align="center",this.tfDesc.style.valign="middle";let t=a?i.desc:"Undetected";this.tfDesc.innerHTML=d.default.format(t,"#7d744f",20)}else s.default.error("图鉴配置错误",e)}}},{"../../../base/base/Debug":8,"../../../config/ResData":49,"../../../config/ResGameConfig":50,"../../../ui/layaMaxUI":315,"../../data/GameDataModule":77,"../../data/illustrated/IllustratedData":83,"../../game/common/SpritePool":106,"./HtmlTool":191}],194:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./EquipWeaponItemData"),s=e("../../../config/ResGameConfig"),o=e("../../../base/base/Pool"),l=e("../../../base/base/Dictionary"),r=e("./EquipWeaponView"),d=e("../../data/combine/CombineData"),u=e("../../data/GameDataModule"),h=e("./EquipWeaponDefine"),c=e("../../data/user/UserData"),m=e("../../data/user/UserDataEvent");a.default=class extends i.default{constructor(){super(...arguments),this._itemDataArray=null,this._itemDic=null,this._ui=null,this._combineData=null,this._userData=null}initialize(){this._ui=this.getView(r.default).ui,this._ui.btnClose.clickHandler=Laya.Handler.create(this,this.onClickClose,null,!1),this._combineData=u.default.instance.getData(d.default),this._userData=u.default.instance.getData(c.default),this._userData.on(m.default.EQUIP_WEAPON_LEVEL_CHANGE,this,this.onEquipWeaponLevelChange),this.initList()}uninitialize(){if(Laya.timer.clear(this,this.scrollToDefault),this._userData.off(m.default.EQUIP_WEAPON_LEVEL_CHANGE,this,this.onEquipWeaponLevelChange),this._ui.btnClose.clickHandler.recover(),this._ui.btnClose.clickHandler=null,null!=this._itemDataArray){for(let e of this._itemDataArray)o.default.recover(n.default.poolName,e);this._itemDataArray=null}this._combineData=null,this._userData=null}clearItemHandler(){for(let e=0;e<this._itemDic.values.length;e++)this._itemDic.values[e].clearHandler()}onClickClose(){this.clearItemHandler(),this.getView(r.default).hideTween()}onEquipWeaponLevelChange(e){this.updateEquipType()}initList(){this.initShopData(),this._itemDic=new l.default,this._ui.listEquip.array=this._itemDataArray,this._ui.listEquip.repeatX=this._itemDataArray.length;let e=Laya.Handler.create(this,this.listRender,null,!1);this._ui.listEquip.renderHandler=e,this._itemDataArray.length>4&&(this._ui.listEquip.hScrollBarSkin="",Laya.timer.once(10,this,this.scrollToDefault))}listRender(e,t){if(null!=e){let a=e.dataSource;e.setData(a),this.setItemEquipType(e,this._combineData.slotMaxLevel,this._userData.equipWeaponLevel),this._itemDic.setValue(t,e)}}scrollToDefault(){let e=u.default.instance.getData(c.default),t=this._itemDic,a=t.keys[t.keys.length-1],i=t.getValue(0).width;for(let i=0;i<t.keys.length;i++){let n=t.keys[i],s=t.getValue(n);null!=s.itemData&&s.itemData.level==e.equipWeaponLevel&&(a=n)}let n=a-3>=0;n?a-=3:a=0;let s=Laya.Handler.create(this,this.scrollToDefaultOver,[n]);this._ui.listEquip.tweenTo(a,10,s);let o=i-this._ui.listEquip.spaceX;this._ui.listEquip.scrollBar.max=this._ui.listEquip.scrollBar.max-o}scrollToDefaultOver(e){let t=4*this._ui.listEquip.spaceX-10;this._ui.listEquip.scrollBar.value=this._ui.listEquip.scrollBar.value+t,this.updateEquipType()}initShopData(){this._itemDataArray=new Array;let e=u.default.instance.getData(d.default),t=s.default.weapons;for(let a of t){let i=a.level;if(i>t.length||i>e.slotMaxLevel)continue;let l=o.default.get(n.default.poolName,n.default);l.level=i,l.icon=s.default.getWeaponIcon(i),l.weaponName=a.name,this._itemDataArray.push(l)}this._itemDataArray.sort(this.sortFunc),this._itemDataArray.push(null)}updateEquipType(){let e=this._combineData.slotMaxLevel;for(let t=0;t<this._itemDic.values.length;t++){let a=this._itemDic.values[t];this.setItemEquipType(a,e,this._userData.equipWeaponLevel)}}setItemEquipType(e,t,a){if(null!=e.itemData){let i=h.EnumEquip.UNEQUIP;e.itemData.level>t&&(i=h.EnumEquip.LOCK),e.itemData.level==a&&(i=h.EnumEquip.EQUIP),e.setEquipType(i)}}sortFunc(e,t){let a=e.level,i=t.level,n=0;return a<i&&(n=-1),a>i&&(n=1),n}}},{"../../../base/base/Dictionary":9,"../../../base/base/Pool":12,"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/user/UserData":86,"../../data/user/UserDataEvent":87,"./EquipWeaponDefine":195,"./EquipWeaponItemData":197,"./EquipWeaponView":199}],195:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.LOCK=0]="LOCK",e[e.EQUIP=1]="EQUIP",e[e.UNEQUIP=2]="UNEQUIP"}(a.EnumEquip||(a.EnumEquip={}))},{}],196:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("./EquipWeaponDefine"),s=e("../../data/user/UserData"),o=e("../../data/GameDataModule");a.default=class extends i.ui.equipWeapon.EquipWeaponItemUI{constructor(){super(),this._data=null,this.btnEquip.clickHandler=Laya.Handler.create(this,this.clickEquip,null,!1)}clearHandler(){null!=this.btnEquip.clickHandler&&(this.btnEquip.clickHandler.recover(),this.btnEquip.clickHandler=null)}clickEquip(){o.default.instance.getData(s.default).equipWeaponLevel=this._data.level,o.default.instance.markSync()}setData(e){this._data=e,null==e?this.visible=!1:(this.visible=!0,this.tfLevel.text=e.level+"",this.tfName.text=e.weaponName,this.imgWeapon.skin=e.icon)}setEquipType(e){switch(e){case n.EnumEquip.LOCK:this.setLockUI();break;case n.EnumEquip.EQUIP:this.setEquipUI();break;case n.EnumEquip.UNEQUIP:this.setUnEquipUI()}}setLockUI(){this.btnEquip.skin="index/btn_equip.png",this.btnEquip.disabled=!0,this.tfTip.text="Unlocked",this.imgBg.skin="index/img_equipBg.png"}setEquipUI(){this.btnEquip.skin="index/img_equiped.png",this.btnEquip.disabled=!1,this.btnEquip.mouseEnabled=!1,this.tfTip.text="Equipped",this.imgBg.skin="index/img_equip_selectBg.png"}setUnEquipUI(){this.btnEquip.skin="index/btn_equip.png",this.btnEquip.disabled=!1,this.btnEquip.mouseEnabled=!0,this.tfTip.text="Equip",this.imgBg.skin="index/img_equipBg.png"}get itemData(){return this._data}}},{"../../../ui/layaMaxUI":315,"../../data/GameDataModule":77,"../../data/user/UserData":86,"./EquipWeaponDefine":195}],197:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{constructor(){this.level=0,this.weaponName="",this.icon=""}clear(){this.level=0,this.icon="",this.weaponName=""}destroy(){}}a.default=i,i.poolName="equip_weapon_item_data"},{}],198:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./EquipWeaponView"),o=e("./EquipWeaponControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.addView(s.default),this.addControl(o.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./EquipWeaponControl":194,"./EquipWeaponView":199}],199:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../../ui/layaMaxUI"),s=e("../../common/ui/UIModule"),o=e("./EquipWeaponUI");a.default=class extends i.default{constructor(){super(n.ui.equipWeapon.EquipWeaponUI)}initialize(){super.initialize(),this._ui.zOrder=950,Laya.timer.callLater(this,this.showTween),this.ui.animTip.play(0,!0)}uninitialize(){this.ui.animTip.stop(),Laya.Tween.clearAll(this.ui.btnClose),Laya.Tween.clearAll(this.ui.boxMain),super.uninitialize()}showTween(){this.ui.boxMain.bottom=-800;let e=Laya.Ease.circOut;Laya.Tween.to(this.ui.boxMain,{bottom:0},400,e,null,0,!0,!0),this.ui.btnClose.left=-100;let t=Laya.Ease.backOut;Laya.Tween.to(this.ui.btnClose,{left:0},400,t,null,0,!0,!0)}hideTween(){let e=Laya.Ease.circIn;Laya.Tween.to(this.ui.boxMain,{bottom:-800},400,e,null,0,!0,!0),this.ui.btnClose.left=0;let t=Laya.Ease.backOut,a=Laya.Handler.create(this,this.hideOver);Laya.Tween.to(this.ui.btnClose,{left:-100},400,t,a,0,!0,!0)}hideOver(){s.default.instance.closeUI(o.default)}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIModule":70,"../../common/ui/UIView":74,"./EquipWeaponUI":198}],200:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./ExitView"),s=e("../../game/GameModule"),o=e("../../game/state/NormalState"),l=e("../../common/ui/UIModule"),r=e("./ExitUI"),d=e("../../game/state/PauseState"),u=e("../../../util/BannerAdUtil");a.default=class extends i.default{initialize(){let e=this.getView(n.default).ui;e.btnSure.clickHandler=Laya.Handler.create(this,this.onSure),e.btnCancel.clickHandler=Laya.Handler.create(this,this.onCancel),s.default.instance.pushState(d.default),u.default.show()}uninitialize(){u.default.hide()}onSure(){s.default.instance.popState(),s.default.instance.changeState(o.default),l.default.instance.closeUI(r.default)}onCancel(){s.default.instance.popState(),l.default.instance.closeUI(r.default)}}},{"../../../base/mvc/MVCControl":20,"../../../util/BannerAdUtil":316,"../../common/ui/UIModule":70,"../../game/GameModule":88,"../../game/state/NormalState":143,"../../game/state/PauseState":145,"./ExitUI":201,"./ExitView":202}],201:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./ExitView"),o=e("./ExitControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.addView(s.default),this.addControl(o.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./ExitControl":200,"./ExitView":202}],202:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.game.ExitViewUI)}initialize(){super.initialize()}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIView":74}],203:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../game/GameModule"),s=e("../../game/state/NormalState"),o=e("../../common/ui/UIModule"),l=e("./FailView"),r=e("./FailUI"),d=e("./FailParam"),u=e("../../../util/Wechat"),h=e("../buff/BuffUI"),c=e("../../../util/BannerAdUtil"),m=e("../../data/GameDataModule"),p=e("../../data/user/UserData"),f=e("../../../config/ResGameConfig"),g=e("../../data/combine/CombineData");a.default=class extends i.default{constructor(){super(...arguments),this._isShowFailTips=!1}initialize(){let e=this.getView(l.default).ui;e.tfBakcHome.on(Laya.Event.CLICK,this,this.onClickHome),e.btnRePlay.clickHandler=Laya.Handler.create(this,this.onClickReplay,null,!1),this.setMsg(),1==this.getData(d.default).level&&u.default.logEvent("第一关失败界面：展示");let t=m.default.getData(p.default),a=m.default.getData(g.default),i=f.default.getLevel(t.level);null!=i&&i.weaponLevel>a.slotMaxLevel&&(this._isShowFailTips=!0),e.spriteTipsBg.visible=this._isShowFailTips,e.tfTips.visible=this._isShowFailTips,e.imgTips.visible=this._isShowFailTips,e.tfPay.text=this._isShowFailTips?"Return to reinforcement":"Do it again",e.tfBakcHome.visible=!this._isShowFailTips,c.default.show()}uninitialize(){c.default.hide();let e=this.getView(l.default).ui;e.tfBakcHome.off(Laya.Event.CLICK,this,this.onClickHome),null!=e.btnRePlay.clickHandler&&(e.btnRePlay.clickHandler.recover(),e.btnRePlay.clickHandler=null)}onClickReplay(){this._isShowFailTips?this.onClickHome():(1==this.getData(d.default).level&&u.default.logEvent("第一关失败界面：点击再来一局"),this.replay())}onClickHome(){1==this.getData(d.default).level&&u.default.logEvent("第一关失败界面：点击返回主界面"),n.default.instance.changeState(s.default)}replay(){o.default.instance.openUI(h.default),o.default.instance.closeUI(r.default)}setMsg(){let e=this.getData(d.default),t=this.getView(l.default).ui;t.pgProgress.value=e.remainRate,t.tfProgress.text=(e.isBossLevel?"BOSS Remaining HP":"Leftover zombies")+Math.ceil(100*e.remainRate)+"%"}}},{"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../../util/BannerAdUtil":316,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/user/UserData":86,"../../game/GameModule":88,"../../game/state/NormalState":143,"../buff/BuffUI":188,"./FailParam":205,"./FailUI":206,"./FailView":207}],204:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../game/effect/HandEffect"),s=e("../../../base/base/Pool"),o=e("./FailParam"),l=e("./FailView");a.default=class extends i.default{constructor(){super(...arguments),this._handStartPoint=null,this._handEndPoint=null,this._curHandEffect=null}initialize(){this._handEndPoint=s.default.getPoint(),this._handStartPoint=s.default.getPoint(),Laya.timer.callLater(this,this.tryTip)}uninitialize(){s.default.recoverPoint(this._handStartPoint),s.default.recoverPoint(this._handEndPoint),this.clearHand()}clearHand(){null==this._curHandEffect||this._curHandEffect.isRecover||(this._curHandEffect.recover(),this._curHandEffect=null)}tryTip(){if(1==this.getData(o.default).level){let e=this.getView(l.default).ui.btnRePlay;this._handEndPoint.x=e.x,this._handEndPoint.y=e.y-80,this._handStartPoint.x=e.x,this._handStartPoint.y=e.y-180,this.clearHand(),this._curHandEffect=n.default.createHand(n.EnumHandClick.AFTER,e.parent,180,this._handStartPoint,this._handEndPoint,-1,800,null)}}}},{"../../../base/base/Pool":12,"../../../base/mvc/MVCControl":20,"../../game/effect/HandEffect":121,"./FailParam":205,"./FailView":207}],205:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCData");a.default=class extends i.default{constructor(){super(...arguments),this.remainRate=0,this.level=0,this.isBossLevel=!1}}},{"../../../base/mvc/MVCData":22}],206:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./FailView"),o=e("./FailControl"),l=e("./FailParam"),r=e("./FailGuideControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(l.default),this.addView(s.default),this.addControl(o.default),this.addControl(r.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./FailControl":203,"./FailGuideControl":204,"./FailParam":205,"./FailView":207}],207:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../common/TweenTool"),s=e("../../../ui/layaMaxUI"),o=e("../../../util/Wechat"),l=e("../../../util/SoundUrl");a.default=class extends i.default{constructor(){super(s.ui.game.FailViewUI)}initialize(){super.initialize(),this.ui.animFlash.play(0,!0),this.ui.animTip.play(0,!0),Laya.timer.callLater(this,this.showTween),o.default.playSound(l.default.levelFail),this.ui.spriteTipsBg.graphics.fillTexture(Laya.loader.getRes("game/img_fail_tips_bg.png"),0,0,this.ui.width,108,"repeat"),this.ui.spriteTipsBg.x=-this.ui.boxMain.x}uninitialize(){Laya.Tween.clearAll(this.ui.boxProgress),Laya.Tween.clearAll(this.ui.boxMain),this.ui.animFlash.stop(),this.ui.animTip.stop(),super.uninitialize()}showTween(){let e=this.ui.boxProgress;n.default.ScaleUpOut(e);let t=this.ui.boxMain;n.default.ScaleUpOut(t)}}},{"../../../ui/layaMaxUI":315,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/TweenTool":59,"../../common/ui/UIView":74}],208:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./FreeCoinView"),n=e("./FreeCoinParam"),s=e("../../../base/base/MathUtil"),o=e("../../common/ui/UIModule"),l=e("./FreeCoinUI"),r=e("../../data/GameDataModule"),d=e("../../data/user/UserData"),u=e("../index/IndexUI"),h=e("../../../base/base/Pool"),c=e("../../common/AwardEffect"),m=e("../../../util/BannerAdUtil"),p=e("../../common/ui/UIStrategyControl"),f=e("../../network/DataEnum");a.default=class extends p.default{constructor(){super(...arguments),this._aldKey="FreeCoin"}initialize(){super.initialize();let e=this.getView(i.default).ui;e.btnPay.clickHandler=Laya.Handler.create(this,this.pay,[this._aldKey],!1),e.tfClose.on(Laya.Event.CLICK,this,this.onClickClose),this.setMsg(),r.default.getData(d.default).isCanShowBanner&&m.default.show()}uninitialize(){m.default.hide();let e=this.getView(i.default).ui;e.tfClose.off(Laya.Event.CLICK,this,this.onClickClose),null!=e.btnPay.clickHandler&&(e.btnPay.clickHandler.recover(),e.btnPay.clickHandler=null),super.uninitialize()}get payId(){return f.EnumPayID.FreeCoin}onRefreshStrategy(e){this.getView(i.default).ui.clipPay.index=e?1:0,r.default.instance.getData(d.default)}onPaySuccess(e){let t=this.getData(n.default);r.default.instance.getData(d.default).coin+=t.coin,this.playGetAnim(),o.default.instance.closeUI(l.default)}onPayFail(e){}onClickClose(){o.default.instance.closeUI(l.default)}setMsg(){let e=this.getData(n.default);this.getView(i.default).ui.tfCoin.text=s.default.formatNumber(e.coin)}playGetAnim(){if(null!=o.default.instance.getUI(u.default)){let e=u.default.getCoinPos(),t=this.getView(i.default).ui,a=h.default.getPoint();a.x=t.imgCoin.x,a.y=t.imgCoin.y,t.boxMain.localToGlobal(a,!1);let n=Laya.Handler.create(u.default,u.default.playCoinAnimation);c.default.createAwardEffect(a,e,!0,null,!0,n)}}}},{"../../../base/base/MathUtil":11,"../../../base/base/Pool":12,"../../../util/BannerAdUtil":316,"../../common/AwardEffect":53,"../../common/ui/UIModule":70,"../../common/ui/UIStrategyControl":71,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../network/DataEnum":164,"../index/IndexUI":228,"./FreeCoinParam":209,"./FreeCoinUI":211,"./FreeCoinView":212}],209:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCData");a.default=class extends i.default{constructor(){super(...arguments),this.coin=0}}},{"../../../base/mvc/MVCData":22}],210:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../data/GameDataModule"),n=e("../../data/combine/CombineData"),s=e("../../data/combine/CombineDefine"),o=e("../../../config/ResGameConfig"),l=e("../index/tool/CombineTool"),r=e("../../common/ui/UIModule"),d=e("./FreeCoinUI");class u{static tryOpenFreeCoinUI(){return r.default.instance.openUI(d.default).getOpenParam().coin=this.getFreeCoin(),!0}static getFreeCoin(){return this.getTopLevelCost()*this.getFreeCoinRate()}static getTopLevelCost(){let e=i.default.instance.getData(n.default),t=(e.slotMaxLevel,0),a=o.default.weapons;for(let i of a){if(i.level>a.length)continue;if(this.getBuyType(e.slotMaxLevel,i.level)==s.EnumBuy.COIN&&i.level>0){let a=e.getBuyCount(s.EnumBuy.COIN,i.level);t=l.default.getItemCostByCoin(i.level,a)}}return t}static getBuyType(e,t){let a=o.default.getWeapon(e),i=s.EnumBuy.UNBUY;return t<=a.diamondBuyUnlockLevel&&(i=s.EnumBuy.DIAMOND),t<=a.goldUnlockLevel&&(i=s.EnumBuy.COIN),i}static getFreeCoinRate(){return++this._freeCoinCount>=this._freeCoinRates.length?this._freeCoinRates[this._freeCoinRates.length-1]:this._freeCoinRates[this._freeCoinCount]}}a.default=u,u._freeCoinCount=-1,u._freeCoinRates=[3,3,2.5,2,2,1]},{"../../../config/ResGameConfig":50,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/combine/CombineDefine":81,"../index/tool/CombineTool":241,"./FreeCoinUI":211}],211:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./FreeCoinParam"),o=e("./FreeCoinView"),l=e("./FreeCoinControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(s.default),this.addView(o.default),this.addControl(l.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./FreeCoinControl":208,"./FreeCoinParam":209,"./FreeCoinView":212}],212:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../common/TweenTool"),s=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(s.ui.game.FreeCoinUI)}initialize(){super.initialize(),this.ui.zOrder=960,this.ui.animFlash.play(0,!0),Laya.timer.callLater(this,this.showTween)}uninitialize(){Laya.Tween.clearAll(this.ui.boxMain),this.ui.animFlash.stop(),super.uninitialize()}showTween(){let e=this.ui.boxMain;n.default.ScaleUpOut(e)}}},{"../../../ui/layaMaxUI":315,"../../common/TweenTool":59,"../../common/ui/UIView":74}],213:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../game/GameModule"),s=e("../../game/state/BonusState"),o=e("./GameView"),l=e("../../game/event/GameEvent"),r=e("../../game/logic/GameLogic"),d=e("../../../config/ResGameConfig"),u=e("../../game/bonus/BonusLogicScript"),h=e("../../game/scene/Scene"),c=e("../../../base/base/Pool"),m=e("../../../base/base/RewardFly"),p=e("../../../base/base/MathUtil"),f=e("../../data/GameDataModule"),g=e("../../data/combine/CombineData");a.default=class extends i.default{constructor(){super(...arguments),this._ui=null,this._millisecondTime=0,this._camera=null,this._zombiePos=null,this._coinPos=null,this._diamondPos=null,this._diamondUpdate=null,this._coinUpdate=null,this._hitCoins=0,this._totalCoins=0,this._totalDiamonds=0}initialize(){this._ui=this.getView(o.default).ui,n.default.instance.topState()instanceof s.default?(n.default.instance.on(l.default.ZOMBIE_DEAD,this,this.onZombieDead),n.default.instance.on(l.default.ZOMBIE_HIT,this,this.onZombieHit),n.default.instance.on(l.default.BONUS_TIME,this,this.onBonusTime),n.default.instance.on(l.default.PAUSE,this,this.onPause),n.default.instance.on(l.default.RESUME,this,this.onResume),this.onBonusTime(u.default.TIME),Laya.timer.loop(10,this,this.onTimeLoop)):this._ui.boxBonus.visible=!1,this._camera=h.default.instance.view.camera,this._zombiePos=c.default.getVector3(),this._coinPos=c.default.getPoint(),this._coinPos=this._ui.imgBonusCoin.localToGlobal(this._coinPos),this._diamondPos=c.default.getPoint(),this._diamondPos=this._ui.imgBonusDiamond.localToGlobal(this._diamondPos),this._diamondUpdate=Laya.Handler.create(this,this.playDiamond,null,!1),this._coinUpdate=Laya.Handler.create(this,this.playCoin,null,!1);let e=f.default.getData(g.default),t=d.default.getWeapon(e.slotMaxLevel);this._hitCoins=t.outputGoldPerSecond,r.default.instance.gameLogicData.bonusCoins=0,r.default.instance.gameLogicData.bonusDiamonds=0}uninitialize(){r.default.instance.gameLogicData.bonusCoins=this._totalCoins,r.default.instance.gameLogicData.bonusDiamonds=this._totalDiamonds,n.default.instance.off(l.default.ZOMBIE_DEAD,this,this.onZombieDead),n.default.instance.off(l.default.ZOMBIE_HIT,this,this.onZombieHit),n.default.instance.off(l.default.BONUS_TIME,this,this.onBonusTime),n.default.instance.off(l.default.PAUSE,this,this.onPause),n.default.instance.off(l.default.RESUME,this,this.onResume),Laya.timer.clear(this,this.onTimeLoop),this._camera=null,this._ui=null,c.default.recoverVector3(this._zombiePos),c.default.recoverPoint(this._coinPos),c.default.recoverPoint(this._diamondPos),this._diamondUpdate=null,this._coinUpdate=null}onZombieDead(e,t){if(null==t)return;null==this._camera&&(this._camera=h.default.instance.view.camera);let a=-1!=t.name.indexOf("Gold");this._camera.worldToViewportPoint(t.transform.position,this._zombiePos);let i=c.default.getPoint();i.x=this._zombiePos.x,i.y=this._zombiePos.y;let n=c.default.getPoint();n.setTo(this._diamondPos.x,this._diamondPos.y);let s=a?d.default.BonusGoldDiamonds:d.default.BonusNormalDiamonds;m.default.fly(i,n,m.EnumRewardFly.DIAMOND,s,1,this._diamondUpdate),this._totalDiamonds+=s,this._ui.tfBonusDiamond.text=p.default.formatNumber(this._totalDiamonds)}onZombieHit(e){if(null==e)return;null==this._camera&&(this._camera=h.default.instance.view.camera),this._camera.worldToViewportPoint(e.transform.position,this._zombiePos);let t=c.default.getPoint();t.x=this._zombiePos.x,t.y=this._zombiePos.y;let a=c.default.getPoint();a.setTo(this._coinPos.x,this._coinPos.y),m.default.fly(t,a,m.EnumRewardFly.COIN,p.default.randomInt(4,6),1,this._coinUpdate),this._totalCoins+=Math.floor(this._hitCoins*p.default.random(.5,.6)),this._ui.tfBonusCoin.text=p.default.formatNumber(this._totalCoins)}onBonusTime(e){let t=Math.floor(e/1e3)-1;t=Math.max(0,t),this._ui.tfBonusTime.text="T-minus: "+(t<10?"0":"")+t+":",this._millisecondTime=99}onPause(){Laya.timer.clear(this,this.onTimeLoop)}onResume(){Laya.timer.loop(10,this,this.onTimeLoop)}onTimeLoop(){if(this._millisecondTime-=1,this._millisecondTime<0)return;let e=(this._millisecondTime<10?"0":"")+this._millisecondTime;this._ui.tfBonusSecondTime.text=e}playDiamond(){this._ui&&this._ui.aniBonusDiamond.play(0,!1)}playCoin(){this._ui&&this._ui.aniBonusCoin.play(0,!1)}}},{"../../../base/base/MathUtil":11,"../../../base/base/Pool":12,"../../../base/base/RewardFly":13,"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../game/GameModule":88,"../../game/bonus/BonusLogicScript":97,"../../game/event/GameEvent":122,"../../game/logic/GameLogic":126,"../../game/scene/Scene":136,"../../game/state/BonusState":141,"./GameView":223}],214:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../data/GameDataModule"),s=e("../../data/buff/BuffData"),o=e("../../../config/ResGameConfig"),l=e("./GameView"),r=e("../buff/BuffUI"),d=e("../../../base/base/Pool"),u=e("./GameBuffItemData"),h=e("../../game/GameModule"),c=e("../../game/event/GameEvent");a.default=class extends i.default{constructor(){super(...arguments),this._buffIcon=null,this._timeLine=null}initialize(){let e=n.default.getData(s.default),t=o.default.getBuff(e.buffId),a=this.getView(l.default).ui;if(a.listBuff.renderHandler=Laya.Handler.create(this,this.onRenderItem,null,!1),a.listBuff.array=new Array,null!=t){this._buffIcon=new Laya.Image,this._buffIcon.anchorX=.5,this._buffIcon.anchorY=.5,this._buffIcon.skin="res/buff/"+t.resName+".png",a.addChild(this._buffIcon),this._buffIcon.x=a.width/2,this._buffIcon.y=r.default.ImgIconY;let e=a.listBuff.x+2,i=a.listBuff.y+2;this._timeLine=Laya.TimeLine.to(this._buffIcon,{x:this._buffIcon.x+20,y:this._buffIcon.y-20,scaleX:1.08,scaleY:1.08},50,Laya.Ease.strongOut),this._timeLine.to(this._buffIcon,{x:e,y:i,scaleX:.38,scaleY:.38},300,Laya.Ease.strongOut),this._timeLine.play(0,!1),this._timeLine.once(Laya.Event.COMPLETE,this,this.onComplete,[t.id])}h.default.instance.on(c.default.BUFF_START,this,this.addBuff),h.default.instance.on(c.default.BUFF_END,this,this.removeBuff)}uninitialize(){h.default.instance.off(c.default.BUFF_START,this,this.addBuff),h.default.instance.off(c.default.BUFF_END,this,this.removeBuff);let e=this.getView(l.default).ui;null!=e.listBuff.renderHandler&&(e.listBuff.renderHandler.recover(),e.listBuff.renderHandler=null),null!=this._buffIcon&&(this._buffIcon.destroy(),this._buffIcon=null),null!=this._timeLine&&(this._timeLine.off(Laya.Event.COMPLETE,this,this.onComplete),this._timeLine.destroy(),this._timeLine=null)}addBuff(e){let t=o.default.getBuff(e);if(null==t)return;let a=this.getView(l.default).ui,i=d.default.get("GameBuffItemData",u.default);i.buffID=t.id,i.buffName=t.name,i.buffIcon="game/"+t.resName+".png",i.buffTime=t.time,a.listBuff.addItem(i)}removeBuff(e){let t=this.getView(l.default).ui,a=t.listBuff.array.length;for(let i=0;i<a;i++)if(t.listBuff.array[i].buffID==e){t.listBuff.deleteItem(i);break}}onRenderItem(e,t){e.refreshData()}onComplete(e){this.addBuff(e),this.getView(l.default).ui,this._buffIcon.destroy(),this._buffIcon=null}}},{"../../../base/base/Pool":12,"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/buff/BuffData":78,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../buff/BuffUI":188,"./GameBuffItemData":216,"./GameView":223}],215:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../../config/ResGameConfig");a.default=class extends i.ui.game.BuffItemUI{constructor(){super(),this._remindTime=0,this._totalTime=0,this.on(Laya.Event.ADDED,this,this.onAdded),this.on(Laya.Event.REMOVED,this,this.onRemoved)}destroy(){this.off(Laya.Event.ADDED,this,this.onAdded),this.off(Laya.Event.REMOVED,this,this.onRemoved),super.destroy()}refreshData(){let e=this.dataSource;null!=e&&(this.tfName.text=e.buffName,this.imgIcon.skin=e.buffIcon,this.imgInfinite.visible=-1==e.buffTime,this.pgTime.visible=e.buffTime>0,this._remindTime=e.buffTime,this._totalTime=e.buffTime,e.buffTime>0&&(this.pgTime.value=1,Laya.timer.frameLoop(1,this,this.onFrameLoop)))}onAdded(e){}onRemoved(e){Laya.timer.clear(this,this.onFrameLoop)}onFrameLoop(){this._remindTime-=n.default.PER_FRAME_TIME,this._remindTime<=0&&(this._remindTime=0,Laya.timer.clear(this,this.onFrameLoop)),this.pgTime.value=this._remindTime/this._totalTime}}},{"../../../config/ResGameConfig":50,"../../../ui/layaMaxUI":315}],216:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=class{constructor(){this.buffID=0,this.buffName="",this.buffIcon="",this.buffTime=0}destroy(){this.clear()}clear(){this.buffID=0,this.buffName="",this.buffIcon="",this.buffTime=0}}},{}],217:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../game/GameModule"),s=e("../../game/event/GameEvent"),o=e("./GameView"),l=e("../../../util/Wechat"),r=e("../../../util/SoundUrl"),d=e("../../game/state/BonusState"),u=e("../../common/ui/UIUtil"),h=e("../../../base/base/MathUtil");class c extends i.default{constructor(){super(...arguments),this._isFirst=!0,this._lastTime=0,this._comboCount=0}initialize(){n.default.instance.topState()instanceof d.default||n.default.instance.on(s.default.ZOMBIE_DEAD,this,this.onZombieDead)}uninitialize(){n.default.instance.off(s.default.ZOMBIE_DEAD,this,this.onZombieDead)}onZombieDead(e,t){let a=!0;null!=t&&t.transform.position.x<0&&(a=!1);let i=this.getView(o.default).ui;i.boxCombo.x=a?u.default.getStageWidth()-i.boxCombo.width-h.default.randomInt(0,i.boxCombo.width/2):h.default.randomInt(0,i.boxCombo.width/2);let n=Date.now();if(this._isFirst)this._isFirst=!1,i.clipCombo.index=0,i.aniCombo.play(0,!1),l.default.playSound(r.default.Combo),this._comboCount=1,this._lastTime=n;else if(n-this._lastTime<=c.COMBO_TIME){if(this._comboCount>0){let e=Math.min(4,this._comboCount);i.clipCombo.index=e,i.aniCombo.play(0,!1)}this._comboCount++}else this._comboCount=1;this._lastTime=n}}a.default=c,c.COMBO_TIME=1e3},{"../../../base/base/MathUtil":11,"../../../base/mvc/MVCControl":20,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/ui/UIUtil":73,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../../game/state/BonusState":141,"./GameView":223}],218:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./GameView"),s=e("../../game/GameModule"),o=e("../../game/event/GameEvent"),l=e("./GameUI"),r=e("../../data/GameDataModule"),d=e("../../data/user/UserData"),u=e("../../common/ui/UIModule"),h=e("../exit/ExitUI"),c=e("../../../util/Wechat"),m=e("../../../util/SoundUrl"),p=e("../../../base/base/ShakeScreen"),f=e("../../game/state/PauseState");a.default=class extends i.default{constructor(){super(...arguments),this._isPause=!1}initialize(){let e=this.getView(n.default).ui;e.btnPause.clickHandler=Laya.Handler.create(this,this.onPause,null,!1),e.btnReload.clickHandler=Laya.Handler.create(this,this.onReload,null,!1),s.default.instance.on(o.default.UPDATE_BULLET,this,this.onUpdateBullet),s.default.instance.on(o.default.HEAD_SHOT,this,this.onHeadShot),s.default.instance.on(o.default.LAST_WAVE,this,this.onLastWave),s.default.instance.on(o.default.BOSS_APPEAR,this,this.onBossAppear),s.default.instance.on(o.default.SHOW_OPERATE_GUIDE,this,this.showGuide),e.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onStageMouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onStageMouseUp),Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onStageMouseUp),this._isPause=!1,this.showGuide(!0)}uninitialize(){let e=this.getView(n.default).ui;e.btnPause.clickHandler.recover(),e.btnPause.clickHandler=null,e.btnReload.clickHandler.recover(),e.btnReload.clickHandler=null,s.default.instance.off(o.default.UPDATE_BULLET,this,this.onUpdateBullet),s.default.instance.off(o.default.HEAD_SHOT,this,this.onHeadShot),s.default.instance.off(o.default.LAST_WAVE,this,this.onLastWave),s.default.instance.off(o.default.BOSS_APPEAR,this,this.onBossAppear),s.default.instance.off(o.default.SHOW_OPERATE_GUIDE,this,this.showGuide),e.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onStageMouseDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onStageMouseUp),Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onStageMouseUp),l.default.isMouseDown=!1,Laya.timer.clear(this,this.showGuide)}onPause(){1==Laya.timer.scale&&u.default.instance.openUI(h.default)}onReload(){s.default.instance.event(o.default.RELOAD)}onUpdateBullet(e,t){let a=this.getView(n.default).ui,i=e>=0?e.toString():"∞";a.tfCurBullet.text=i,a.tfMaxBullet.text="/"+t}onHeadShot(){this.getView(n.default).ui.aniHeadShot.play(0,!1),p.default.shakeScreen(Laya.stage)}onLastWave(){c.default.playSound(m.default.lastWaveOfZombie),this.getView(n.default).ui.aniWarning.play(0,!1)}onBossAppear(){c.default.playSound(m.default.lastWaveOfZombie);let e=this.getView(n.default).ui;e.imgWarning.skin="game/img_boss_warning_tips.png",e.aniWarning.play(0,!1)}onMouseDown(e){l.default.isMouseDown=!0}onStageMouseDown(e){this.showGuide(!1),Laya.timer.clear(this,this.showGuide),this._isPause&&(this._isPause=!1,s.default.instance.popState(),s.default.instance.event(o.default.WEAPON_MOUSE_DOWN,e))}onStageMouseUp(e){l.default.isMouseDown=!1,Laya.timer.once(2e3,this,this.showGuide,[!0])}showGuide(e){let t=this.getView(n.default).ui;t.boxGuide.visible=e;let a=r.default.instance.getData(d.default);a.isGameNew?(a.isGameNew=!1,t.boxGuide.bottom=void 0,t.boxGuide.centerY=0,t.tfGuide.scale(1,1),this._isPause=!0,s.default.instance.pushState(f.default)):(t.boxGuide.bottom=60,t.boxGuide.centerY=void 0,t.tfGuide.scale(.6,.6)),e?t.aniGuide.play(0,!0):t.aniGuide.stop()}}},{"../../../base/base/ShakeScreen":14,"../../../base/mvc/MVCControl":20,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../../game/state/PauseState":145,"../exit/ExitUI":201,"./GameUI":222,"./GameView":223}],219:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./GameView"),s=e("../../game/GameModule"),o=e("../../game/event/GameEvent"),l=e("../../game/tool/GameTool"),r=e("../../game/state/BattleState");a.default=class extends i.default{constructor(){super(...arguments),this._curRate=0,this._ui=null}initialize(){this._ui=this.getView(n.default).ui,s.default.instance.topState()instanceof r.default?l.default.isBossLevel()?(this._ui.pgProgress.skin="game/progress_boss.png",s.default.instance.on(o.default.BOSS_HP,this,this.onBossHp),this.onBossHp(1,1)):s.default.instance.on(o.default.LEVEL_HP,this,this.onLevelHp):(this._ui.pgProgress.visible=!1,this._ui.imgProgress.visible=!1,this._ui.tfLevelProgress.visible=!1)}uninitialize(){Laya.Tween.clearAll(this._ui.pgProgress),s.default.instance.off(o.default.BOSS_HP,this,this.onBossHp),s.default.instance.off(o.default.LEVEL_HP,this,this.onLevelHp),this._ui=null}onLevelHp(e,t){let a=e/t;this._ui.tfLevelProgress.text="Zombie Surplus "+Math.ceil(100*a)+"%",this.hpAnim(a)}onBossHp(e,t){let a=e/t;this._ui.tfLevelProgress.text="BOSS HP "+Math.ceil(100*a)+"%",this.hpAnim(a)}hpAnim(e){let t={value:e};Laya.Tween.to(this._ui.pgProgress,t,500,null,null,0,!0,!0)}}},{"../../../base/mvc/MVCControl":20,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../../game/state/BattleState":139,"../../game/tool/GameTool":148,"./GameView":223}],220:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./GameView"),s=e("../../../config/ResGameConfig"),o=e("../../game/GameModule"),l=e("../../game/event/GameEvent"),r=e("../../../util/Wechat"),d=e("../../../util/SoundUrl"),u=e("../../../base/base/MathUtil"),h=e("../../../base/base/ColorFilterUtil");a.default=class extends i.default{constructor(){super(...arguments),this._curLife=0}initialize(){this.getView(n.default).ui.tfLife.text=s.default.MaxLife.toString(),this._curLife=s.default.MaxLife,o.default.instance.on(l.default.LIFE_CHANGE,this,this.onLifeChange)}uninitialize(){o.default.instance.off(l.default.LIFE_CHANGE,this,this.onLifeChange)}onLifeChange(e){e<0&&(e=0),r.default.playSound(d.default.zombieDamage,!1);let t=this.getView(n.default).ui,a=e-this._curLife;this._curLife=e,t.tfLifeOffset.text=a.toString(),t.aniLifeChange.play(0,!1),a<0&&(t.imgDamage.centerX=u.default.randomInt(-100,100),t.aniDamage.play(0,!1)),t.tfLife.text=e.toString(),t.tfLife.filters=e<20?[h.default.getColorFilter(h.EColorFilter.DRAK_RED)]:null}}},{"../../../base/base/ColorFilterUtil":7,"../../../base/base/MathUtil":11,"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../game/GameModule":88,"../../game/event/GameEvent":122,"./GameView":223}],221:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../game/GameModule"),s=e("../../game/event/GameEvent"),o=e("./GameView"),l=e("../../common/ui/UIModule"),r=e("../zombieInfo/ZombieInfoUI");a.default=class extends i.default{constructor(){super(...arguments),this._illustratedId=0}initialize(){n.default.instance.on(s.default.NEW_ZOMBIE,this,this.onNewZombie),this.getView(o.default).ui.boxNewZombie.on(Laya.Event.CLICK,this,this.onClick)}uninitialize(){n.default.instance.off(s.default.NEW_ZOMBIE,this,this.onNewZombie),this.getView(o.default).ui.boxNewZombie.off(Laya.Event.CLICK,this,this.onClick)}onNewZombie(e){if(e>0){this._illustratedId=e;let t=this.getView(o.default).ui;t.boxNewZombie.visible=!0,t.aniNewZombie.play(0,!0)}}onClick(){let e=this.getView(o.default).ui;e.boxNewZombie.visible=!1,e.aniNewZombie.stop(),l.default.instance.openUI(r.default).getOpenParam().illustratedId=this._illustratedId}}},{"../../../base/mvc/MVCControl":20,"../../common/ui/UIModule":70,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../zombieInfo/ZombieInfoUI":313,"./GameView":223}],222:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./GameView"),o=e("./GameControl"),l=e("./GameLifeControl"),r=e("./GameBuffControl"),d=e("./GameLevelControl"),u=e("./GameBonusControl"),h=e("../../common/ui/UIModule"),c=e("./GameComboControl"),m=e("./GameNewZombieControl");class p extends i.default{constructor(){super(n.EUIType.VIEW),this.addView(s.default),this.addControl(d.default),this.addControl(o.default),this.addControl(l.default),this.addControl(r.default),this.addControl(u.default),this.addControl(c.default),this.addControl(m.default)}static getBuffPos(){let e=new Laya.Point,t=h.default.instance.getUI(p);if(null!=t){let a=t.getView(s.default).ui.listBuff;e.x=2;let i=a.array.length;e.y=i>0?59*i+(i-1)*a.spaceY+2:2,e=a.localToGlobal(e)}return e}static playAddLifeAnimation(){let e=h.default.instance.getUI(p);null!=e&&e.getView(s.default).ui.aniAddLife.play(0,!1)}}a.default=p,p.isMouseDown=!1},{"../../common/ui/UIModule":70,"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./GameBonusControl":213,"./GameBuffControl":214,"./GameComboControl":217,"./GameControl":218,"./GameLevelControl":219,"./GameLifeControl":220,"./GameNewZombieControl":221,"./GameView":223}],223:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../common/ui/UIView");a.default=class extends n.default{constructor(){super(i.ui.game.GameViewUI)}initialize(){super.initialize()}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIView":74}],224:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../../util/BannerAdUtil"),s=e("./IllustratedView"),o=e("../../common/ui/UIModule"),l=e("./IllustratedUI"),r=e("../../../config/ResGameConfig"),d=e("../../game/GameModule"),u=e("../../game/state/PauseState"),h=e("../../data/GameDataModule"),c=e("../../data/illustrated/IllustratedData");a.default=class extends i.default{constructor(){super(...arguments),this._index=0,this._illustrateds=null}initialize(){let e=this.getView(s.default).ui;e.btnClose.clickHandler=Laya.Handler.create(this,this.onClose),e.btnPre.clickHandler=Laya.Handler.create(this,this.onPre,null,!1),e.btnNext.clickHandler=Laya.Handler.create(this,this.onNext,null,!1),this._illustrateds=r.default.illustrateds;let t=h.default.getData(c.default);if(t.unReads.length>0)for(let e=0;e<this._illustrateds.length;e++)if(this._illustrateds[e].id==t.unReads[0]){this._index=e;break}this.refreshIllutrated(),n.default.show(),d.default.instance.pushState(u.default)}uninitialize(){let e=this.getView(s.default).ui;null!=e.btnPre.clickHandler&&(e.btnPre.clickHandler.recover(),e.btnPre.clickHandler=null),null!=e.btnNext.clickHandler&&(e.btnNext.clickHandler.recover(),e.btnNext.clickHandler=null),n.default.hide(),d.default.instance.popState()}onClose(){o.default.instance.closeUI(l.default)}onPre(){this._index<=0?this._index=this._illustrateds.length-1:this._index--,this.refreshIllutrated()}onNext(){this._index>=this._illustrateds.length-1?this._index=0:this._index++,this.refreshIllutrated()}refreshIllutrated(){this.getView(s.default).ui.viewInfo.illustratedId=this._illustrateds[this._index].id}}},{"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../../util/BannerAdUtil":316,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/illustrated/IllustratedData":83,"../../game/GameModule":88,"../../game/state/PauseState":145,"./IllustratedUI":225,"./IllustratedView":226}],225:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./IllustratedView"),o=e("./IllustratedControl");a.default=class extends i.default{constructor(){super(n.EUIType.DIALOG),this.addView(s.default),this.addControl(o.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./IllustratedControl":224,"./IllustratedView":226}],226:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIDialogView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.illustrated.IllustratedDialogUI),this._showEffect=!1}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIDialogView":68}],227:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIBaseData");a.default=class extends i.default{constructor(){super(...arguments),this.isNewChapter=!1}}},{"../../common/ui/UIBaseData":66}],228:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./view/IndexView"),o=e("./control/IndexControl"),l=e("./control/IndexDragControl"),r=e("./control/IndexCombineControl"),d=e("../../common/ui/UIModule"),u=e("./control/IndexAirdropControl"),h=e("./control/IndexTipControl"),c=e("./control/IndexGuideControl"),m=e("./control/IndexBonusControl"),p=e("./IndexOpenParam"),f=e("./control/IndexADControl");class g extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(p.default),this.addView(s.default),this.addControl(o.default),this.addControl(r.default),this.addControl(l.default),this.addControl(u.default),this.addControl(h.default),this.addControl(c.default),this.addControl(m.default),this.addControl(f.default)}static getBonusPos(){let e=new Laya.Point,t=d.default.instance.getUI(g);if(null!=t){e=t.getView(s.default).ui.btnBonus.localToGlobal(e)}return e}static getCoinPos(){let e=new Laya.Point,t=d.default.instance.getUI(g);if(null!=t){let a=t.getView(s.default).ui.imgCoin;e.setTo(a.x,a.y),e=a.localToGlobal(e)}return e}static playCoinAnimation(){let e=d.default.instance.getUI(g);null!=e&&e.getView(s.default).ui.aniCoin.play(0,!1)}static playDiamondAnimation(){let e=d.default.instance.getUI(g);null!=e&&e.getView(s.default).ui.animDiamond.play(0,!1)}}a.default=g},{"../../common/ui/UIModule":70,"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./IndexOpenParam":227,"./control/IndexADControl":229,"./control/IndexAirdropControl":230,"./control/IndexBonusControl":231,"./control/IndexCombineControl":232,"./control/IndexControl":233,"./control/IndexDragControl":234,"./control/IndexGuideControl":235,"./control/IndexTipControl":236,"./view/IndexView":243}],229:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/mvc/MVCControl"),n=e("../view/IndexView"),s=e("../../../common/ui/UIUtil"),o=e("../../../../util/Wechat"),l=e("../../../common/ui/UIModule"),r=e("../../appendMyProgram/AppendMyProgramUI"),d=e("../../../data/user/UserData"),u=e("../../../data/GameDataModule"),h=e("../../../data/user/UserDataEvent");a.default=class extends i.default{constructor(){super(...arguments),this._ui=null}initialize(){this._ui=this.getView(n.default).ui;let e=u.default.getData(d.default);e.appendMyProgram||(this._ui.aniAppendMyProgram.play(0,!0),this.setAttentionPos(),e.on(h.default.APPEND_MY_PROGRAM,this,this.onAppendMyProgram))}uninitialize(){u.default.getData(d.default).off(h.default.APPEND_MY_PROGRAM,this,this.onAppendMyProgram),this._ui=null}setAttentionPos(){if(null!=o.default.getMenuButtonBoundingClientRect()){let e=Laya.Browser.window.wx.getSystemInfoSync();o.default.needVersion("2.1.2")&&(e.windowWidth,s.default.getStageWidth(),e.windowHeight,s.default.getStageHeight())}}onClickBoxAppendMyProgram(){l.default.instance.openUI(r.default)}onAppendMyProgram(e){e?this._ui.aniAppendMyProgram.stop():this._ui.aniAppendMyProgram.play(0,!0)}}},{"../../../../base/mvc/MVCControl":20,"../../../../util/Wechat":324,"../../../common/ui/UIModule":70,"../../../common/ui/UIUtil":73,"../../../data/GameDataModule":77,"../../../data/user/UserData":86,"../../../data/user/UserDataEvent":87,"../../appendMyProgram/AppendMyProgramUI":177,"../view/IndexView":243}],230:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/mvc/MVCControl"),n=e("../view/IndexView"),s=e("../../../data/GameDataModule"),o=e("../../../data/combine/CombineData"),l=e("../tool/CombineDefine"),r=e("../../../game/GameModule"),d=e("../../../game/event/GameEvent"),u=e("../../result/AwardTool"),h=e("../../../common/ui/UIModule"),c=e("../../airdrop/AirdropUI"),m=e("../../../data/user/UserData"),p=e("../../../game/logic/GameLogic");a.default=class extends i.default{constructor(){super(...arguments),this._ui=null,this._getDura=1e4,this._noneGetDura=2e4,this._airdropDura=0,this._combineItems=null}initialize(){let e=this.getView(n.default);this._ui=e.ui,this._combineItems=e.combineItems,this._airdropDura=this._getDura;for(let e=0;e<this._combineItems.length;e++){const t=this._combineItems[e];t.on(Laya.Event.DRAG_START,this,this.onDragStart,[t])}r.default.instance.on(d.default.AIRDROP_CLOSE,this,this.onAirdropClose),this.tryAirDrop()}uninitialize(){r.default.instance.off(d.default.AIRDROP_CLOSE,this,this.onAirdropClose);for(let e=0;e<this._combineItems.length;e++)this._combineItems[e].off(Laya.Event.DRAG_START,this,this.onDragStart);Laya.timer.clear(this,this.doAirDrop),this._combineItems=null,this._ui=null}onAirdropClose(e){this._airdropDura=e?this._getDura:this._noneGetDura,this.tryAirDrop()}onDragStart(e){if(e.level==l.EAirdrop.NORMAL||e.level==l.EAirdrop.SUPER){let t=e.level;e.clearData(),s.default.getData(o.default).setSlot(e.index,e.level);let a=h.default.instance.openUI(c.default).getOpenParam();s.default.instance.getData(m.default),a.awardArray=u.default.getAirdropAwardDatas(t)}}tryAirDrop(){let e=s.default.getData(m.default);s.default.getData(o.default).checkIsAirDrop()||e.isCombineNew||Laya.timer.once(this._airdropDura,this,this.doAirDrop)}doAirDrop(){let e=s.default.getData(o.default);if(e.airDropLock)this.tryAirDrop();else{let t=e.getEmptySlot();if(-1==t)this.tryAirDrop();else{let a=p.default.instance.gameLogicData.getAirdropType();this._combineItems[t].setData(a,""),e.setSlot(t,a)}}}}},{"../../../../base/mvc/MVCControl":20,"../../../common/ui/UIModule":70,"../../../data/GameDataModule":77,"../../../data/combine/CombineData":80,"../../../data/user/UserData":86,"../../../game/GameModule":88,"../../../game/event/GameEvent":122,"../../../game/logic/GameLogic":126,"../../airdrop/AirdropUI":174,"../../result/AwardTool":264,"../tool/CombineDefine":240,"../view/IndexView":243}],231:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../view/IndexView"),n=e("../../../data/GameDataModule"),s=e("../../../data/user/UserData"),o=e("../../../../config/ResGameConfig"),l=e("../../../common/Notice"),r=e("../../../game/GameModule"),d=e("../../../game/event/GameEvent"),u=e("../../../data/user/UserDataEvent"),h=e("../../../game/common/StartType"),c=e("../../../common/ui/UIStrategyControl"),m=e("../../../network/DataEnum"),p=e("../../../game/effect/HandEffect");a.default=class extends c.default{constructor(){super(...arguments),this._handEffect=null}initialize(){let e=n.default.getData(s.default),t=this.getView(i.default).ui;if(0==e.bonusTimes||e.bonusTimes>=o.default.BonusTimes?t.clipShareVideo.visible=!1:(t.clipShareVideo.visible=!0,super.initialize()),e.level<o.default.BonusUnlockLevel){t.tfBonus.visible=!1,t.imgBonus.visible=!1,t.btnBonus.gray=!0,t.tfBonusLock.visible=!0,t.imgBonusLock.visible=!0;let e=o.default.getChapterByLevel(o.default.BonusUnlockLevel);t.tfBonusLock.text="Arrival"+e.name}else e.on(u.default.BONUS_TIMES,this,this.onBonusTimesChange),this.onBonusTimesChange(e.bonusTimes),e.bonusTimes<o.default.BonusTimes&&this.playTips();t.btnBonus.clickHandler=Laya.Handler.create(this,this.onBonus,null,!1),t.clipShareVideo.index=1,e.bonusGuide&&Laya.timer.callLater(this,this.showHandEffect)}uninitialize(){Laya.timer.clear(this,this.playTips),n.default.getData(s.default).off(u.default.BONUS_TIMES,this,this.onBonusTimesChange);let e=this.getView(i.default).ui;e.btnBonus.clickHandler&&(e.btnBonus.clickHandler.recover(),e.btnBonus.clickHandler=null),Laya.timer.clear(this,this.showHandEffect),this.hideHandEffect(),super.uninitialize()}get payId(){return m.EnumPayID.Bonus}onRefreshStrategy(e){this.getView(i.default).ui.clipShareVideo.index=e?1:0}onPaySuccess(e){n.default.getData(s.default).bonusTimes++,n.default.instance.markSync(),r.default.instance.event(d.default.START_GAME,h.EnumStartType.BONUS)}onPayFail(e){}onBonus(){let e=n.default.getData(s.default);if(e.bonusGuide=!1,e.level<o.default.BonusUnlockLevel){let e=o.default.getChapterByLevel(o.default.BonusUnlockLevel);l.default.show("Arrival "+e.name+" Unlock")}else e.bonusTimes>=o.default.BonusTimes?l.default.show("Rewards run out, come tomorrow"):0==e.bonusTimes?this.onPaySuccess(!1):this.pay("Bonus");this.hideHandEffect()}onBonusTimesChange(e){let t=this.getView(i.default).ui,a=o.default.BonusTimes-e;(a=Math.max(a,0))>0?(t.tfBonus.visible=!0,t.imgBonus.visible=!0,t.tfBonus.text=a+"/"+o.default.BonusTimes,t.tfBonusLock.visible=!1,t.imgBonusLock.visible=!1,t.aniBonus.play(0,!0)):(t.tfBonus.visible=!1,t.imgBonus.visible=!1,t.tfBonusLock.visible=!0,t.imgBonusLock.visible=!0,t.tfBonusLock.text="Continue tomorrow")}playTips(){this.getView(i.default).ui.aniBonusTips.play(0,!1),Laya.timer.once(7e3,this,this.playTips)}showHandEffect(){let e=this.getView(i.default).ui,t=e.btnBonus;this._handEffect=p.default.createClickHand(e,t.x+t.width/3,e.btnBonus.y+t.height/2)}hideHandEffect(){null!=this._handEffect&&(this._handEffect.recover(),this._handEffect=null)}}},{"../../../../config/ResGameConfig":50,"../../../common/Notice":57,"../../../common/ui/UIStrategyControl":71,"../../../data/GameDataModule":77,"../../../data/user/UserData":86,"../../../data/user/UserDataEvent":87,"../../../game/GameModule":88,"../../../game/common/StartType":107,"../../../game/effect/HandEffect":121,"../../../game/event/GameEvent":122,"../../../network/DataEnum":164,"../view/IndexView":243}],232:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/mvc/MVCControl"),n=e("./../view/IndexView"),s=e("../../../data/GameDataModule"),o=e("../../../data/combine/CombineData"),l=e("../../../../config/ResGameConfig"),r=e("../../../common/Notice"),d=e("../tool/CombineTool"),u=e("../../../data/combine/CombineDefine"),h=e("../../../data/user/UserData"),c=e("../../../../base/base/MathUtil"),m=e("../../../game/GameModule"),p=e("../../../game/event/GameEvent"),f=e("../../../../base/base/WeaponFly"),g=e("../../freeCoin/FreeCoinTool"),_=e("../../../../util/Wechat"),y=e("../../../../util/SoundUrl");a.default=class extends i.default{constructor(){super(...arguments),this._ui=null,this._combineItems=null,this._curBuyLevel=1}initialize(){let e=this.getView(n.default);this._ui=e.ui,this._combineItems=e.combineItems,m.default.instance.on(p.default.SHOP_BUY_SUCCESS,this,this.onShopBuySuccess),m.default.instance.on(p.default.UNLOCK_GET_SUCCESS,this,this.onUnlockGetSuccess),m.default.instance.on(p.default.UNLOCK_GET_FAIL,this,this.onUnlockGetFail);let t=s.default.getData(o.default);for(let e=0;e<o.default.SLOT_NUM;e++){let a=t.slots[e],i=this._combineItems[e],n=null;a>0&&(n=l.default.getWeaponIcon(a)),i.setData(a,n)}this._ui.btnBuy.clickHandler=Laya.Handler.create(this,this.onBuy,null,!1),this.updateBuyButton()}uninitialize(){m.default.instance.off(p.default.SHOP_BUY_SUCCESS,this,this.onShopBuySuccess),m.default.instance.off(p.default.UNLOCK_GET_SUCCESS,this,this.onUnlockGetSuccess),m.default.instance.off(p.default.UNLOCK_GET_FAIL,this,this.onUnlockGetFail),null!=this._ui.btnBuy.clickHandler&&(this._ui.btnBuy.clickHandler.recover(),this._ui.btnBuy.clickHandler=null),this._ui=null,this._combineItems=null}onBuy(){_.default.playSound(y.default.buyWeapon);let e=s.default.getData(o.default),t=s.default.getData(h.default),a=e.getEmptySlot();if(-1==a){r.default.show("The area is full, synthesize or sell guns");let e=this._combineItems.length;for(let t=0;t<e;t++)this._combineItems[t].playFullEffect()}else{let i=e.getBuyCount(u.EnumBuy.COIN,this._curBuyLevel),n=d.default.getItemCostByCoin(this._curBuyLevel,i);if(t.coin<n)g.default.tryOpenFreeCoinUI()||r.default.show("Gold coins are in short supply, go fight zombies to make money");else{t.coin-=n;let i=l.default.getWeaponIcon(this._curBuyLevel),s=this._combineItems[a];s.setData(this._curBuyLevel,i),e.setSlot(a,this._curBuyLevel),s.playBuyEffect(),e.addBuyCount(u.EnumBuy.COIN,this._curBuyLevel),this.updateBuyButton()}}}onShopBuySuccess(e,t){let a=s.default.getData(o.default),i=a.getEmptySlot();if(-1!=i){let n=this._combineItems[i];n.setData(e,t),a.setSlot(i,e),n.playBuyEffect()}this.updateBuyButton()}onUnlockGetSuccess(e,t,a,i){let s=this.getView(n.default);s.ui.mouseEnabled=!1;let o=s.getCurWeaponPos(),l=s.ui.imgCurWeapon.rotation,r=Laya.Handler.create(this,this.unlockWeaponFlyOver,[a],!1);f.default.fly(t,e,o,i,l,r)}onUnlockGetFail(e){s.default.getData(h.default).equipWeaponLevel=e}updateBuyButton(){this._curBuyLevel=d.default.getOptimalBuyByCoinLevel();let e=l.default.getWeaponIcon(this._curBuyLevel);this._ui.imgBuyIcon.skin=e;let t=s.default.getData(o.default).getBuyCount(u.EnumBuy.COIN,this._curBuyLevel),a=d.default.getItemCostByCoin(this._curBuyLevel,t);this._ui.tfBuyCoin.text=c.default.formatNumber(a);let i=this._ui.tfBuyCoin.text.length-3;if(i>0){let e=2.5;switch(i){case 4:e=5.5;break;case 3:e=4.5;break;case 2:e=3}this._ui.imgBuyCoin1.x=44-i*e,this._ui.imgBuyCoin2.x=53-i*e,this._ui.tfBuyCoin.x=98-i*e}}unlockWeaponFlyOver(e){s.default.getData(h.default).equipWeaponLevel=e,this.getView(n.default).ui.mouseEnabled=!0}}},{"../../../../base/base/MathUtil":11,"../../../../base/base/WeaponFly":15,"../../../../base/mvc/MVCControl":20,"../../../../config/ResGameConfig":50,"../../../../util/SoundUrl":323,"../../../../util/Wechat":324,"../../../common/Notice":57,"../../../data/GameDataModule":77,"../../../data/combine/CombineData":80,"../../../data/combine/CombineDefine":81,"../../../data/user/UserData":86,"../../../game/GameModule":88,"../../../game/event/GameEvent":122,"../../freeCoin/FreeCoinTool":210,"../tool/CombineTool":241,"./../view/IndexView":243}],233:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/mvc/MVCControl"),n=e("./../view/IndexView"),s=e("../../../game/GameModule"),o=e("../../../data/GameDataModule"),l=e("../../../data/user/UserData"),r=e("../../../data/user/UserDataEvent"),d=e("../../../common/ui/UIModule"),u=e("../../shop/ShopUI"),h=e("../../../../base/base/MathUtil"),c=e("../../../../config/ResGameConfig"),m=e("../../../data/combine/CombineData"),p=e("../../../data/combine/CombineEvent"),f=e("../../../game/event/GameEvent"),g=e("../../result/data/AwardType"),_=e("../../../game/scene/Scene"),y=e("../../equipWeapon/EquipWeaponUI"),w=e("../../../../util/Wechat"),v=e("../../../../util/SoundUrl"),b=e("../IndexOpenParam"),I=e("../../../game/common/StartType"),x=e("../../menu/MenuUI"),M=e("../../../common/ui/UIEvent"),L=e("../../inviteReward/InviteRewardUI"),C=e("../../../data/network/NetWorkData"),D=e("../../../network/NetworkModule");a.default=class extends i.default{constructor(){super(...arguments),this._ui=null,this._diamondChangeCount=0}initialize(){this._diamondChangeCount=0,this._ui=this.getView(n.default).ui,this._ui.btnStart.clickHandler=Laya.Handler.create(this,this.onStart,null,!1),this._ui.btnShop.clickHandler=Laya.Handler.create(this,this.onShop,null,!1),this._ui.imgCurWeapon.on(Laya.Event.CLICK,this,this.onClickEquip),this._ui.btnMenu.on(Laya.Event.CLICK,this,this.onClickMenu),this._ui.boxPromo.on(Laya.Event.CLICK,this,this.onClickPromo);let e=o.default.getData(l.default);e.on(r.default.COIN_CHANGE,this,this.onCoinChange),e.on(r.default.DIAMOND_CHANGE,this,this.onDiamondChange),e.on(r.default.EQUIP_WEAPON_LEVEL_CHANGE,this,this.onEquipWeaponLevelChange),o.default.getData(m.default).on(p.default.OUTPUT_CHANGE,this,this.onOutputChange),s.default.instance.on(f.default.AWARD_FLY_OVER,this,this.onAwardFlyOver),d.default.instance.on(M.default.CLOSE,this,this.onUIClose),_.default.instance.view.isInited?this.onSceneInited():s.default.instance.on(f.default.SCENE_INITED,this,this.onSceneInited),this.initData(),o.default.getData(C.default).on(Laya.Event.CHANGED,this,this.onInviteChange),this.onInviteChange(),this.updateRecommendWeapon(),this.setPormoInfo(),Laya.timer.loop(1e4,this,this.setPormoInfo)}uninitialize(){Laya.timer.clear(this,this.setPormoInfo),o.default.getData(C.default).off(Laya.Event.CHANGED,this,this.onInviteChange),Laya.timer.clear(this,this.checkIsNew),this._ui.imgCurWeapon.off(Laya.Event.CLICK,this,this.onClickEquip),this._ui.btnMenu.off(Laya.Event.CLICK,this,this.onClickMenu),this._ui.boxPromo.off(Laya.Event.CLICK,this,this.onClickPromo),this._ui.btnStart.clickHandler&&(this._ui.btnStart.clickHandler.recover(),this._ui.btnStart.clickHandler=null),this._ui.btnShop.clickHandler&&(this._ui.btnShop.clickHandler.recover(),this._ui.btnShop.clickHandler=null);let e=o.default.getData(l.default);e.off(r.default.COIN_CHANGE,this,this.onCoinChange),e.off(r.default.DIAMOND_CHANGE,this,this.onDiamondChange),e.off(r.default.EQUIP_WEAPON_LEVEL_CHANGE,this,this.onEquipWeaponLevelChange),o.default.getData(m.default).off(p.default.OUTPUT_CHANGE,this,this.onOutputChange),s.default.instance.off(f.default.AWARD_FLY_OVER,this,this.onAwardFlyOver),s.default.instance.off(f.default.SCENE_INITED,this,this.onSceneInited),d.default.instance.off(M.default.CLOSE,this,this.onUIClose),this._ui=null}initData(){let e=o.default.getData(l.default),t=o.default.getData(m.default);if(this.onCoinChange(e.coin),this.onDiamondChange(e.diamond),this.onEquipWeaponLevelChange(e.equipWeaponLevel),this.onOutputChange(t.coinOutput),this._ui.imgBg.visible=!e.isGameNew,this._ui.btnStart.visible=!e.isGameNew,this._ui.boxCoin.visible=!e.isGameNew,this._ui.boxDiamond.visible=!e.isGameNew,this._ui.boxCombine.visible=!e.isGameNew,this.getData(b.default).isNewChapter){let e=o.default.getData(l.default),t=c.default.getChapterByLevel(e.level);this._ui.tfStart.text="Go to "+t.name}}checkIsNew(){o.default.instance.getData(l.default).isCombineNew&&this.onStart()}onUIClose(e){e instanceof x.default&&this.setMenuVisible(!0)}onClickMenu(){d.default.instance.openUI(x.default),this.setMenuVisible(!1)}onClickPromo(){let e=o.default.getData(C.default),t=e.promoDatas;null!=t&&t.length>0&&(D.default.logPromo(t[e.promoIndex].id),w.default.toMiniProgram(t[e.promoIndex].app_id))}onClickEquip(){d.default.instance.openUI(y.default)}onStart(){Laya.timer.scale=1,this.getData(b.default).isNewChapter?s.default.instance.event(f.default.START_GAME,I.EnumStartType.OPERA):s.default.instance.event(f.default.START_GAME,I.EnumStartType.BATTLE)}onShop(){d.default.instance.openUI(u.default)}onCoinChange(e){this._ui.tfCoin.text=h.default.formatNumber(e),this._ui.tfOutPut.x=this._ui.tfCoin.x+this._ui.tfCoin.textField.textWidth/2*this._ui.tfCoin.scaleX}onDiamondChange(e){this._diamondChangeCount++>0&&w.default.playSound(v.default.awardDiamond),this._ui.tfDiamond.text=h.default.formatNumber(e)}onEquipWeaponLevelChange(e){w.default.playSound(v.default.changeWeapon),this._ui.tfCurWeaponLevel.text=e+"";let t=c.default.getWeaponIcon(e);this._ui.imgCurWeapon.skin=t,this.updateRecommendWeapon()}onOutputChange(e){let t=h.default.formatNumber(e);this._ui.tfOutPut.text="+"+t+"/s"}onAwardFlyOver(e){let t=o.default.instance.getData(l.default);switch(e.type){case g.EAwardType.COIN:t.coin+=e.count,this._ui.aniCoin.play(0,!1);break;case g.EAwardType.DIAMOND:t.diamond+=e.count,this._ui.animDiamond.play(0,!1);break;case g.EAwardType.WEAPON:this.getView(n.default).combineItems[e.slotIndex].awardFlyEnd()}}onSceneInited(){o.default.instance.getData(l.default).isGameNew&&Laya.timer.callLater(this,this.checkIsNew)}setMenuVisible(e){this._ui.btnMenu.visible=e,this._ui.imgMenu.visible=e}onInvite(){s.default.instance.event(f.default.REQ_INVITE_DATA),d.default.instance.openUI(L.default)}onInviteChange(){null!=this._ui&&o.default.getData(C.default)}updateRecommendWeapon(){let e=!1,t=o.default.getData(l.default),a=o.default.getData(m.default),i=c.default.getLevel(t.level);null!=i&&i.weaponLevel>a.slotMaxLevel&&(e=!0,this._ui.tfRecommendWeapon.text="Recommended gun level：Lv"+i.weaponLevel),this._ui.imgRecommendWeapon.visible=e}setPormoInfo(){let e=o.default.getData(C.default),t=e.promoDatas;null!=t&&t.length>0?(this._ui.boxPromo.visible=!0,this._ui.aniPromo.play(0,!0),e.promoIndex++,(e.promoIndex<0||e.promoIndex>=t.length)&&(e.promoIndex=0),this._ui.imgPromoIcon.skin=t[e.promoIndex].icon_url,this._ui.tfPromoName.text=t[e.promoIndex].name):this._ui.boxPromo.visible=!1}}},{"../../../../base/base/MathUtil":11,"../../../../base/mvc/MVCControl":20,"../../../../config/ResGameConfig":50,"../../../../util/SoundUrl":323,"../../../../util/Wechat":324,"../../../common/ui/UIEvent":69,"../../../common/ui/UIModule":70,"../../../data/GameDataModule":77,"../../../data/combine/CombineData":80,"../../../data/combine/CombineEvent":82,"../../../data/network/NetWorkData":85,"../../../data/user/UserData":86,"../../../data/user/UserDataEvent":87,"../../../game/GameModule":88,"../../../game/common/StartType":107,"../../../game/event/GameEvent":122,"../../../game/scene/Scene":136,"../../../network/NetworkModule":166,"../../equipWeapon/EquipWeaponUI":198,"../../inviteReward/InviteRewardUI":249,"../../menu/MenuUI":255,"../../result/data/AwardType":269,"../../shop/ShopUI":288,"../IndexOpenParam":227,"./../view/IndexView":243}],234:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/mvc/MVCControl"),n=e("./../view/IndexView"),s=e("../../../common/ui/UIUtil"),o=e("./../view/DragItem"),l=e("../../../data/GameDataModule"),r=e("../../../data/combine/CombineData"),d=e("../../../../config/ResGameConfig"),u=e("../../../common/Notice"),h=e("../../../data/combine/CombineEvent"),c=e("../../../common/ui/UIModule"),m=e("../../unlock/UnlockUI"),p=e("../tool/CombineDefine"),f=e("../../../../util/Wechat"),g=e("../../../../util/SoundUrl"),_=e("../../../common/smoke/SmokeEffect"),y=e("../../../common/CoinEffect"),w=e("../../../../base/base/MathUtil"),v=e("../../../common/Tip");a.default=class extends i.default{constructor(){super(...arguments),this._ui=null,this._combineItems=null,this._dragItem=null,this._startPos=null,this._selectItem=null,this._releaseItem=null,this._dragHideTweening=!1}initialize(){let e=this.getView(n.default);this._ui=e.ui,this._ui.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this._ui.on(Laya.Event.MOUSE_OUT,this,this.onMouseOut),this._ui.imgGarbage.on(Laya.Event.MOUSE_UP,this,this.onGarbageMouseUp),this._combineItems=e.combineItems,this._dragItem=new o.default,this._dragItem.zOrder=901,this._ui.boxCombine;let t=this._combineItems.length;for(let e=0;e<t;e++){const t=this._combineItems[e];t.on(Laya.Event.DRAG_START,this,this.onDragStart,[t]),t.on(Laya.Event.DRAG_END,this,this.onDragEnd,[t]),t.on(Laya.Event.MOUSE_OVER,this,this.onDragOver,[t]),t.on(Laya.Event.MOUSE_OUT,this,this.onDragOut,[t])}this._startPos=new Laya.Point,l.default.getData(r.default).on(h.default.SLOT_MAX_LEVEL,this,this.onSlotMaxLevel)}uninitialize(){l.default.getData(r.default).off(h.default.SLOT_MAX_LEVEL,this,this.onSlotMaxLevel),this._ui.off(Laya.Event.MOUSE_UP,this,this.onMouseUp),this._ui.off(Laya.Event.MOUSE_OUT,this,this.onMouseOut),this._ui.imgGarbage.off(Laya.Event.MOUSE_UP,this,this.onGarbageMouseUp);let e=this._combineItems.length;for(let t=0;t<e;t++){const e=this._combineItems[t];e.off(Laya.Event.DRAG_START,this,this.onDragStart),e.off(Laya.Event.DRAG_END,this,this.onDragEnd),e.off(Laya.Event.MOUSE_OVER,this,this.onDragOver),e.off(Laya.Event.MOUSE_OUT,this,this.onDragOut)}this._combineItems=null,Laya.Tween.clearAll(this._dragItem),this._dragItem.destroy(),this._dragItem=null,this._ui=null,this._startPos=null}onDragStart(e){e.level!=p.EAirdrop.NORMAL&&e.level!=p.EAirdrop.SUPER&&(this._selectItem=e,this._startPos.setTo(e.width/2,e.height/2),this._startPos=e.localToGlobal(this._startPos),this._dragItem.x=this._startPos.x,this._dragItem.y=this._startPos.y,this._dragItem.alpha=.5,this._dragItem.imgIcon.skin=e.imgIcon.skin,Laya.Tween.to(this._dragItem,{x:Laya.stage.mouseX,y:Laya.stage.mouseY,alpha:1},50,Laya.Ease.strongOut,Laya.Handler.create(this,this.onDragStartTweenOver),0,!0),s.default.addToStage(this._dragItem),this._ui.aniGarbageShow.play(0,!1),this.playDragStartEffect())}onDragEnd(e){if(this.onDragOut(e),e.level==p.EAirdrop.NORMAL||e.level==p.EAirdrop.SUPER)return this.stopDragStartEffect(),this._selectItem=null,this._releaseItem=null,void this.doDragOver();null!=this._selectItem&&(this._releaseItem=e)}onDragOver(e){if(null==this._selectItem)return;e&&e.showPopupLight();let t=this._combineItems.length;for(let a=0;a<t;a++){const t=this._combineItems[a];t!=e&&t.hidePopupLight()}}onDragOut(e){e&&e.hidePopupLight()}onDragStartTweenOver(){this._dragItem.x=Laya.stage.mouseX,this._dragItem.y=Laya.stage.mouseY,this._dragItem.startDrag()}onDragEndTweenOver(){this._dragHideTweening=!1,this._dragItem.removeSelf()}onMouseUp(e){this.stopDragStartEffect(),null!=this._selectItem&&(this._selectItem==this._releaseItem||null==this._releaseItem?(this._dragHideTweening=!0,Laya.Tween.to(this._dragItem,{x:this._startPos.x,y:this._startPos.y,alpha:0},50,Laya.Ease.strongOut,Laya.Handler.create(this,this.onDragEndTweenOver),0,!0)):this._selectItem.level!=this._releaseItem.level?this.exchangeAction(this._selectItem,this._releaseItem):this.combineAction(this._selectItem,this._releaseItem),this._selectItem=null,this._releaseItem=null),this.doDragOver()}onMouseOut(){this.stopDragStartEffect(),this._selectItem=null,this.doDragOver()}onGarbageMouseUp(e){if(null!=this._selectItem){f.default.playSound(g.default.sellWeapon);let e=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY);_.default.createEffect(e),y.default.createCoinParabola(e);let t=this._selectItem.level,a=d.default.getWeapon(t),i="+"+w.default.formatNumber(a.sellGold);v.default.show(i,e),this.stopDragStartEffect(),this.deleteAction(this._selectItem)}}playDragStartEffect(){if(null!=this._selectItem){this._selectItem.setGray(!0);for(let e=0;e<r.default.SLOT_NUM;e++){const t=this._combineItems[e];this._selectItem!=t&&(this._selectItem.level==t.level?t.playShake():t.isAirDrop||t.setGray(!0))}}}stopDragStartEffect(){if(null!=this._selectItem){this._selectItem.setGray(!1);for(let e=0;e<r.default.SLOT_NUM;e++){const t=this._combineItems[e];this._selectItem!=t&&(this._selectItem.level==t.level?t.stopShake():t.setGray(!1))}this._ui.aniGarbageHide.play(0,!1)}}doDragOver(){null!=this._dragItem&&(this._dragItem.stopDrag(),this._dragHideTweening||(Laya.Tween.clearAll(this._dragItem),this._dragItem.removeSelf()))}deleteAction(e){e.level!=p.EAirdrop.NORMAL&&e.level!=p.EAirdrop.SUPER&&null!=e&&(e.clearData(),l.default.getData(r.default).setSlot(e.index,e.level))}exchangeAction(e,t){let a=l.default.getData(r.default),i=e.imgIcon.skin,n=e.level;e.setData(t.level,t.imgIcon.skin),t.setData(n,i),a.setSlot(e.index,e.level),a.setSlot(t.index,t.level),f.default.playSound(g.default.weapoinChangeSlot)}combineAction(e,t){if(e.level>=d.default.getMaxWeaponLevel())return void u.default.show("Highest level, cannot be combined");let a=l.default.getData(r.default);e.clearData();let i=t.level+1,n=d.default.getWeaponIcon(i);t.setData(i,n),i<=a.slotMaxLevel&&t.playCombine(),a.setSlot(e.index,e.level),a.setSlot(t.index,t.level),f.default.playSound(g.default.combine),this.doDragOver()}onSlotMaxLevel(e){let t=c.default.instance.openUI(m.default).getOpenParam();t.newWeaponIcon=d.default.getBigWeaponIcon(e),t.oldWeaponIcon=d.default.getBigWeaponIcon(e-1),t.radarIcon=d.default.getRadarIconByLevel(e),t.weaponLevel=e;let a=d.default.getWeapon(e);t.weaponName=a.name,t.awardDiamond=a.unlockAwardDiamond,t.isPay=e>=d.default.WeaponLevelUpPay}}},{"../../../../base/base/MathUtil":11,"../../../../base/mvc/MVCControl":20,"../../../../config/ResGameConfig":50,"../../../../util/SoundUrl":323,"../../../../util/Wechat":324,"../../../common/CoinEffect":55,"../../../common/Notice":57,"../../../common/Tip":58,"../../../common/smoke/SmokeEffect":65,"../../../common/ui/UIModule":70,"../../../common/ui/UIUtil":73,"../../../data/GameDataModule":77,"../../../data/combine/CombineData":80,"../../../data/combine/CombineEvent":82,"../../unlock/UnlockUI":309,"../tool/CombineDefine":240,"./../view/DragItem":242,"./../view/IndexView":243}],235:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/mvc/MVCControl"),n=e("../../../game/effect/HandEffect"),s=e("../../../../base/base/Pool"),o=e("../../../data/GameDataModule"),l=e("../../../data/user/UserData"),r=e("../view/IndexView"),d=e("../../../data/combine/CombineData"),u=e("../tool/CombineDefine"),h=e("../../../data/combine/CombineEvent"),c=e("../../../../config/ResGameConfig"),m=e("../../../../util/Wechat"),p=e("../../../common/ui/UIModule"),f=e("../../talk/TalkUI"),g=e("../../../common/ui/UIEvent");class _ extends i.default{constructor(){super(...arguments),this._handStartPoint=null,this._handEndPoint=null,this._curHandEffect=null}initialize(){this._handEndPoint=s.default.getPoint(),this._handStartPoint=s.default.getPoint(),this.getView(r.default).ui.btnBuy.on(Laya.Event.CLICK,this,this.onClickBuy),o.default.instance.getData(d.default).on(h.default.SLOT_MAX_LEVEL,this,this.onSlotMaxLevel),this.tryGuide()}uninitialize(){p.default.instance.off(g.default.CLOSE,this,this.onUIClose),o.default.instance.getData(d.default).off(h.default.SLOT_MAX_LEVEL,this,this.onSlotMaxLevel),this.getView(r.default).ui.btnBuy.off(Laya.Event.CLICK,this,this.onClickBuy),s.default.recoverPoint(this._handStartPoint),s.default.recoverPoint(this._handEndPoint),this.clearHand()}clearHand(){null==this._curHandEffect||this._curHandEffect.isRecover||(this._curHandEffect.recover(),this._curHandEffect=null)}onSlotMaxLevel(){o.default.instance.getData(l.default).isCombineNew&&this.removeGuide()}onClickBuy(){let e=o.default.instance.getData(l.default),t=o.default.instance.getData(d.default);if(e.isCombineNew)if(t.slotMaxLevel!=c.default.InitLevel)this.removeGuide();else{m.default.logEvent("第一次点击快捷购买"),this.tryGuideCombine(),p.default.instance.on(g.default.CLOSE,this,this.onUIClose),p.default.instance.openUI(f.default).getOpenParam().id=_.CombineTalkID}}tryGuide(){o.default.instance.getData(l.default).isCombineNew&&this.tryGuideBuy()}tryGuideBuy(){let e=this.getView(r.default).ui;e.imgGuide.visible=!0,e.boxCombine.zOrder=e.imgGuide.zOrder+1,e.imgBoxGuide.visible=!0;let t=e.btnBuy;t.zOrder=e.imgBoxGuide.zOrder+1,this._handEndPoint.x=t.x,this._handEndPoint.y=t.y-80,this._handStartPoint.x=t.x,this._handStartPoint.y=t.y-180,this.clearHand(),this._curHandEffect=n.default.createHand(n.EnumHandClick.AFTER,t.parent,180,this._handStartPoint,this._handEndPoint,-1,800,null),this._curHandEffect.zOrder=e.imgBoxGuide.zOrder+10}tryGuideCombine(){let e=this.getView(r.default).ui;e.boxCombine.zOrder=e.imgGuide.zOrder+1,e.imgGuide.visible=!0,e.imgBoxGuide.visible=!0,e.btnBuy.zOrder=0;let t=this.getCombieIndexs(),a=this.getView(r.default).combineItems,i=a[t[0]],s=a[t[1]];i.zOrder=e.imgBoxGuide.zOrder+1,s.zOrder=e.imgBoxGuide.zOrder+1;let o=.5*s.height+71;this._handEndPoint.x=i.x+.5*i.width,this._handEndPoint.y=i.y+o,this._handStartPoint.x=s.x+.5*s.width,this._handStartPoint.y=s.y+o,this.clearHand(),this._curHandEffect=n.default.createHand(n.EnumHandClick.BEFORE,i.parent,0,this._handStartPoint,this._handEndPoint,-1,800,null),this._curHandEffect.zOrder=e.imgBoxGuide.zOrder+10}getCombieIndexs(){let e=o.default.instance.getData(d.default).slots,t="",a=0,i=0;for(let n=0;n<e.length;n++){let s=e[n],o="-"+s+"-";if(s<=0||s==u.EAirdrop.NORMAL||s==u.EAirdrop.SUPER)t+=o;else{if(-1!=(a=t.indexOf(o))){i=n;break}t+=o}}return-1==a?[0,1]:[a,i]}removeGuide(){let e=o.default.instance.getData(l.default);this.clearHand(),e.isCombineNew=!1,o.default.instance.markSync();let t=this.getView(r.default).ui;t.imgGuide.visible=!1,t.imgBoxGuide.visible=!1,t.boxCombine.zOrder=0;let a=this.getView(r.default).combineItems;for(let e of a)e.zOrder=0}onUIClose(e){e instanceof f.default&&p.default.instance.off(g.default.CLOSE,this,this.onUIClose)}}a.default=_,_.CombineTalkID=99999},{"../../../../base/base/Pool":12,"../../../../base/mvc/MVCControl":20,"../../../../config/ResGameConfig":50,"../../../../util/Wechat":324,"../../../common/ui/UIEvent":69,"../../../common/ui/UIModule":70,"../../../data/GameDataModule":77,"../../../data/combine/CombineData":80,"../../../data/combine/CombineEvent":82,"../../../data/user/UserData":86,"../../../game/effect/HandEffect":121,"../../talk/TalkUI":292,"../tool/CombineDefine":240,"../view/IndexView":243}],236:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/mvc/MVCControl"),n=e("../view/IndexView"),s=e("../../../../base/base/Pool"),o=e("../../../data/GameDataModule"),l=e("../../../data/combine/CombineData"),r=e("../tool/CombineDefine"),d=e("../../../game/effect/HandEffect"),u=e("../../../game/logic/GameLogic"),h=e("../../../data/user/UserData"),c=e("../../../data/combine/CombineEvent"),m=e("../../../common/ui/UIModule"),p=e("../../offLineCoin/OffLineCoinUI"),f=e("../../turn/TurnUI"),g=e("../../../common/ui/UIEvent");a.default=class extends i.default{constructor(){super(...arguments),this._handStartPoint=null,this._handEndPoint=null,this._tipDura=1e4,this._curHandEffect=null,this._count=3}initialize(){let e=this.getView(n.default).ui;e.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),e.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),Laya.timer.once(this._tipDura,this,this.tryTip),this._handEndPoint=s.default.getPoint(),this._handStartPoint=s.default.getPoint(),Laya.timer.once(10,this,this.playPassAnim),o.default.getData(l.default).on(c.default.SLOT_CHANGE,this,this.onSlotChange),m.default.instance.on(g.default.CLOSE,this,this.onUIClose),Laya.timer.callLater(this,this.tryTipTurn)}uninitialize(){Laya.timer.clear(this,this.playPassAnim),Laya.timer.clear(this,this.tryTip);let e=this.getView(n.default).ui;e.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),e.off(Laya.Event.MOUSE_UP,this,this.onMouseUp),s.default.recoverPoint(this._handStartPoint),s.default.recoverPoint(this._handEndPoint),this.clearHand(),o.default.getData(l.default).off(c.default.SLOT_CHANGE,this,this.onSlotChange),m.default.instance.off(g.default.CLOSE,this,this.onUIClose)}clearHand(){null==this._curHandEffect||this._curHandEffect.isRecover||(this._curHandEffect.recover(),this._curHandEffect=null)}onUIClose(e){e instanceof p.default&&this.tryTipTurn(!0)}onMouseUp(){Laya.timer.once(this._tipDura,this,this.tryTip)}onMouseDown(){Laya.timer.clear(this,this.tryTip),this.clearHand()}tryTip(){if(-1==o.default.instance.getData(l.default).getEmptySlot()){let e=this.getCombieIndexs();null!=e?this.tryTipCombine(e):this.tryTipDelete()}else this.tryTipBuy()}getCombieIndexs(){let e=o.default.instance.getData(l.default).slots,t=0,a=0,i=new Array;for(let n=0;n<e.length;n++){let s=e[n];if(s<=0||s==r.EAirdrop.NORMAL||s==r.EAirdrop.SUPER)i.push(s);else{if(-1!=(t=i.indexOf(s))){a=n;break}i.push(s)}}return-1==t?null:[t,a]}getMinLevelIndex(){let e=o.default.instance.getData(l.default),t=e.slots,a=e.slotMaxLevel,i=0;for(let e=0;e<t.length;e++){let n=t[e];n<=0||n==r.EAirdrop.NORMAL||n==r.EAirdrop.SUPER||n<a&&(a=n,i=e)}return i}tryTipDelete(){let e=this.getMinLevelIndex(),t=this.getView(n.default).combineItems[e],a=this.getView(n.default).ui.imgGarbage;this._handEndPoint.x=a.x+.5*a.width,this._handEndPoint.y=a.y+.5*a.height;let i=.5*t.height+71;this._handStartPoint.x=t.x+.5*t.width,this._handStartPoint.y=t.y+i,this.clearHand();let s=Laya.Handler.create(this,this.onMouseUp);this._curHandEffect=d.default.createHand(d.EnumHandClick.BEFORE,t.parent,0,this._handStartPoint,this._handEndPoint,this._count,1e3,s)}tryTipCombine(e){let t=this.getView(n.default).combineItems,a=t[e[0]],i=t[e[1]],s=.5*i.height+71;this._handEndPoint.x=a.x+.5*a.width,this._handEndPoint.y=a.y+s,this._handStartPoint.x=i.x+.5*i.width,this._handStartPoint.y=i.y+s,this.clearHand();let o=Laya.Handler.create(this,this.onMouseUp);this._curHandEffect=d.default.createHand(d.EnumHandClick.BEFORE,a.parent,0,this._handStartPoint,this._handEndPoint,this._count,500,o)}tryTipBuy(){let e=this.getView(n.default).ui.btnBuy;this._handEndPoint.x=e.x,this._handEndPoint.y=e.y-80,this._handStartPoint.x=e.x,this._handStartPoint.y=e.y-180,this.clearHand();let t=Laya.Handler.create(this,this.onMouseUp);this._curHandEffect=d.default.createHand(d.EnumHandClick.AFTER,e.parent,180,this._handStartPoint,this._handEndPoint,this._count,500,t)}playPassAnim(){let e=u.default.instance.gameLogicData.getIsPassLevel(),t=o.default.getData(h.default);if(e||t.isNewChapter){let e=this.getView(n.default).ui.viewLevel;t.isNewChapter?e.allComplete():e.playLevelUpAnim(t.level-2,t.level-1)}}onSlotChange(e){-1==o.default.getData(l.default).getEmptySlot()?(Laya.timer.clear(this,this.tryTip),this.tryTip()):Laya.timer.once(this._tipDura,this,this.tryTip)}tryTipTurn(e=!1){let t=o.default.instance.getData(h.default),a=m.default.instance.getUI(p.default);e&&(a=null),u.default.instance.gameLogicData.getIsTipTurn()||t.getIsTurn()&&!a&&t.level>=4&&m.default.instance.openUI(f.default)}}},{"../../../../base/base/Pool":12,"../../../../base/mvc/MVCControl":20,"../../../common/ui/UIEvent":69,"../../../common/ui/UIModule":70,"../../../data/GameDataModule":77,"../../../data/combine/CombineData":80,"../../../data/combine/CombineEvent":82,"../../../data/user/UserData":86,"../../../game/effect/HandEffect":121,"../../../game/logic/GameLogic":126,"../../offLineCoin/OffLineCoinUI":259,"../../turn/TurnUI":300,"../tool/CombineDefine":240,"../view/IndexView":243}],237:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../ui/layaMaxUI"),n=e("../../../../config/ResGameConfig"),s=e("../../../../base/base/MathUtil"),o=e("../../../../util/Wechat"),l=e("../tool/CombineDefine"),r=e("../../../../util/SoundUrl"),d=e("./ItemAnimControl"),u=e("../../../../base/base/Pool");a.default=class extends i.ui.index.CombineItemUI{constructor(){super(),this._normalUrl="index/img_airdrop.png",this._superUrl="index/img_airdrop.png",this.index=0,this._level=0,this._isAriDrop=!1,this._animControl=null,this._isPopupLightShow=!1,this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),this.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.animEarn.on(Laya.Event.COMPLETE,this,this.stopAnimEarn),this.animLight.on(Laya.Event.COMPLETE,this,this.lightOver),this._animControl=new d.default(this)}destroy(){this.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),this.off(Laya.Event.MOUSE_UP,this,this.onMouseUp),this.animEarn.off(Laya.Event.COMPLETE,this,this.stopAnimEarn),this.animLight.off(Laya.Event.COMPLETE,this,this.lightOver),this._animControl.destroy(),this._animControl=null,super.destroy()}setData(e,t){Laya.timer.clear(this,this.playAnimEarn),this.stopAnimEarn(),this._level=e,this._isAriDrop=e==l.EAirdrop.SUPER||e==l.EAirdrop.NORMAL,this._isAriDrop?this.setAirdrop():(e>0&&(this.imgIcon.skin=t,this.tfLevel.text=e.toString()),this.imgIcon.x=70,this.imgIcon.y=51,this.imgIcon.rotation=0,this.imgIcon.visible=e>0,this.imgLevel.visible=e>0,this.tfLevel.visible=e>0,this.setEarnAnim()),this.setGray(!1)}get level(){return this._level}clearData(){this.imgIcon.skin="",this.imgLevel.visible=!1,this.tfLevel.visible=!1,this._level=0,this._isAriDrop=!1,Laya.timer.clear(this,this.tryTipAridrop),Laya.timer.clear(this,this.playAnimEarn),this.stopAnimEarn()}playShake(){this._isAriDrop||this.aniShake.play(0,!0)}stopShake(){this.aniShake.gotoAndStop(0)}playCombine(){this._animControl.showCombineAnim()}combineOver(){o.default.vibrateShort(),this.playLight()}showPopupLight(){this._isPopupLightShow||(this._isPopupLightShow=!0,this.aniPopupShow.play(0,!1))}hidePopupLight(){this._isPopupLightShow&&(this._isPopupLightShow=!1,this.aniPopupHide.play(0,!1))}playFullEffect(){this.aniPopupShow.once(Laya.Event.COMPLETE,this,this.onAniPopupShowOver),this.aniPopupShow.play(0,!1)}setGray(e){this.imgIcon.alpha=e?.5:1,this.imgLevel.alpha=e?.5:1}awardFlyStar(){Laya.timer.clear(this,this.playAnimEarn),this.stopAnimEarn(),this.imgIcon.visible=!1,this.tfLevel.visible=!1,this.imgLevel.visible=!1}awardFlyEnd(){this.setEarnAnim(),this.imgIcon.visible=!0,this.tfLevel.visible=!0,this.imgLevel.visible=!0}get isAirDrop(){return this._isAriDrop}get curIconSkin(){return this.imgIcon.skin}get imgIconGlobalPoint(){let e=u.default.getPoint();return e.x=this.imgIcon.x,e.y=this.imgIcon.y,this.localToGlobal(e,!1),e}playBuyEffect(){this.aniBuy.play(0,!1)}setAirdrop(){let e=this._normalUrl;this._level==l.EAirdrop.SUPER&&(e=this._superUrl),this.imgIcon.skin=e,this.imgIcon.x=64,this.imgIcon.y=52,this.imgIcon.rotation=0,this.imgIcon.visible=!0,this.imgLevel.visible=!1,this.tfLevel.visible=!1,this.aniAirdropShow.play(0,!1),Laya.timer.once(4e3,this,this.tryTipAridrop)}tryTipAridrop(){this.playAirdropAnim();let e=s.default.randomInt(7e3,1e4);Laya.timer.once(e,this,this.tryTipAridrop)}setEarnAnim(){let e=n.default.getWeapon(this._level);if(null!=e){this.tfEarn.text="+"+s.default.formatNumber(e.outputGold);let t=e.outputInterval;Laya.timer.loop(t,this,this.playAnimEarn)}}playLight(){this.imgLight.visible=!0,this.animLight.play(0,!1)}lightOver(){this.imgLight.visible=!1,this.animLight.stop()}onMouseDown(e){this._level>0&&this.event(Laya.Event.DRAG_START,[this])}onMouseUp(e){this.event(Laya.Event.DRAG_END,[this])}playAirdropAnim(){this.animTipAirdrop.play(0,!1)}playAnimEarn(){o.default.playSound(r.default.earnCoin),this.tfEarn.visible=!0,this.animEarn.play(0,!1)}stopAnimEarn(){this.animEarn.gotoAndStop(0),this.tfEarn.visible=!1}onAniPopupShowOver(){this.aniPopupHide.play(0,!1)}}},{"../../../../base/base/MathUtil":11,"../../../../base/base/Pool":12,"../../../../config/ResGameConfig":50,"../../../../ui/layaMaxUI":315,"../../../../util/SoundUrl":323,"../../../../util/Wechat":324,"../tool/CombineDefine":240,"./ItemAnimControl":238}],238:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../common/selfAnim/SelfAnimManager"),n=e("./anim/AnimCombine");a.default=class{constructor(e){this._manager=null,this._item=null,this._combineID=1,this._item=e,this._manager=new i.default;let t=new n.default(this);this._manager.registerAnim(t,this._combineID)}destroy(){this._item=null,this._manager.destroy()}showCombineAnim(){this.resetUI(),this._manager.changeAnim(this._combineID)}stopAnim(){this._manager.changeAnim(-1),this.resetUI()}resetUI(){this._item.imgIcon.x=70,this._item.imgIcon.y=51,this._item.imgIcon.alpha=1,this._item.imgIcon.visible=!0}get curItem(){return this._item}}},{"../../../common/selfAnim/SelfAnimManager":62,"./anim/AnimCombine":239}],239:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../../base/base/Pool"),n=e("../../../../../config/ResGameConfig");a.default=class{constructor(e){this._animID=0,this._control=null,this._imgCombine=null,this._imgBeCombine=null,this._item=null,this._control=e,this._item=this._control.curItem}onDestroy(){this.recoverImg(),this._item=null}setID(e){this._animID=e}getID(){return this._animID}onPlay(){this._item.zOrder+=1e3,this._item.imgIcon.visible=!1;let e=n.default.getWeaponIcon(this._item.level-1);this.setImg(e),this.playMoveOutAnim()}onStop(){Laya.timer.clear(this,this.moveOver),Laya.timer.clear(this,this.playMoveInAnim),this._item.zOrder-=1e3,this.removeImg()}onUpdate(){}playMoveOutAnim(){let e=-1;this._imgCombine.x>this._imgCombine.x&&(e=1);let t=this._imgCombine.x+70*e,a=this._imgBeCombine.x-70*e,i=1.2*this._item.imgIcon.scaleX,n={x:t,scaleX:i,scaleY:i},s={x:a,scaleX:i,scaleY:i},o=Laya.Ease.circOut;Laya.Tween.to(this._imgCombine,n,100,o,null,0,!0,!0),Laya.Tween.to(this._imgBeCombine,s,100,o,null,0,!0,!0),Laya.timer.once(100,this,this.playMoveInAnim)}playMoveInAnim(){let e=this._item.imgIcon.x,t=this._item.imgIcon.y,a=this._item.imgIcon.scaleX,i={x:e,y:t,scaleX:a,scaleY:a},n=Laya.Ease.circIn;Laya.Tween.to(this._imgCombine,i,100,n,null,50,!0,!0),Laya.Tween.to(this._imgBeCombine,i,100,n,null,50,!0,!0),Laya.timer.once(150,this,this.moveOver)}moveOver(){this._item.imgIcon.visible=!0,this._control.stopAnim(),this._item.combineOver()}setImg(e){null==this._imgCombine&&(this._imgCombine=i.default.getImg(),this._imgCombine.anchorX=.5,this._imgCombine.anchorY=.5),null==this._imgBeCombine&&(this._imgBeCombine=i.default.getImg(),this._imgBeCombine.anchorX=.5,this._imgBeCombine.anchorY=.5),this._imgCombine.skin=e,this._imgBeCombine.skin=e,this._imgCombine.x=this._item.imgIcon.x,this._imgCombine.y=this._item.imgIcon.y,this._item.addChild(this._imgCombine),this._imgBeCombine.x=this._item.imgIcon.x,this._imgBeCombine.y=this._item.imgIcon.y,this._item.addChild(this._imgBeCombine)}removeImg(){null!=this._imgCombine&&(Laya.Tween.clearAll(this._imgCombine),this._imgCombine.removeSelf()),null!=this._imgBeCombine&&(Laya.Tween.clearAll(this._imgBeCombine),this._imgBeCombine.removeSelf())}recoverImg(){this.removeImg(),null!=this._imgCombine&&i.default.recoverImg(this._imgCombine),null!=this._imgBeCombine&&i.default.recoverImg(this._imgBeCombine)}}},{"../../../../../base/base/Pool":12,"../../../../../config/ResGameConfig":50}],240:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.LOCK=0]="LOCK",e[e.COIN=1]="COIN",e[e.DIAMOND=2]="DIAMOND"}(a.EnumBuyShow||(a.EnumBuyShow={})),function(e){e[e.NORMAL=1.5]="NORMAL",e[e.SUPER=2.5]="SUPER"}(a.EAirdrop||(a.EAirdrop={}))},{}],241:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../config/ResGameConfig"),n=e("../../../data/GameDataModule"),s=e("../../../data/combine/CombineData"),o=e("./CombineDefine"),l=e("../../../data/combine/CombineDefine");a.default=class{static getItemCostByCoin(e,t){let a=0,n=i.default.getWeapon(e),s=Math.pow(n.perAddGoldRate,t);return a=Math.floor(n.buyGold*s)}static getItemCostByDiamond(e,t){let a=i.default.getWeapon(e),n=a.perAddDiamondRate*t;return a.buyDiamond+n}static getOptimalBuyByCoinLevel(){let e=n.default.getData(s.default),t=e.slotMaxLevel,a=Math.max(i.default.InitLevel,e.slotMaxLevel-7),r=a,d=Number.MAX_VALUE;for(let n=a;n<=t;n++){let a=i.default.getWeapon(n),s=this.getBuyType(n,t);if(o.EnumBuyShow.COIN==s){let t=e.getBuyCount(l.EnumBuy.COIN,n),i=this.getItemCostByCoin(n,t)/a.outputGoldPerSecond;d>i&&(d=i,r=n)}}return r}static getBuyType(e,t){let a=i.default.getWeapon(t),n=o.EnumBuyShow.LOCK;return e<=a.goldUnlockLevel?n=o.EnumBuyShow.COIN:e<=a.diamondBuyUnlockLevel&&(n=o.EnumBuyShow.DIAMOND),n}}},{"../../../../config/ResGameConfig":50,"../../../data/GameDataModule":77,"../../../data/combine/CombineData":80,"../../../data/combine/CombineDefine":81,"./CombineDefine":240}],242:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../ui/layaMaxUI");a.default=class extends i.ui.index.DragItemUI{constructor(){super()}destroy(){super.destroy()}setIcon(e){this.imgIcon.skin=e}}},{"../../../../ui/layaMaxUI":315}],243:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../ui/layaMaxUI"),n=e("../../../common/ui/UIView"),s=e("../../../data/combine/CombineData"),o=e("../../../../util/RewardedVideoAdUtil"),l=e("../../../../util/Wechat"),r=e("../../../data/GameDataModule"),d=e("../../../../config/ResGameConfig"),u=e("../../../data/user/UserData"),h=e("../../../../base/base/ColorFilterUtil");a.default=class extends n.default{constructor(){super(i.ui.index.IndexViewUI),this.combineItems=null}initialize(){super.initialize(),this.combineItems=new Array;for(let e=0;e<s.default.SLOT_NUM;e++){let t=this.ui.boxCombine.getChildByName("combineItem"+e);t.index=e,this.combineItems.push(t)}if(this.ui.tfOutPut.filters=[h.default.getOutPutFilter()],Laya.Browser.onMiniGame){this.loopCheckAD();let e=3e4;Laya.timer.loop(e,this,this.loopCheckAD)}else this.ui.imgShopFree.visible=!1;Laya.timer.callLater(this,this.setUI)}uninitialize(){Laya.timer.clear(this,this.loopCheckAD),this.ui.animShopFree.stop(),this.combineItems.splice(0,this.combineItems.length),this.combineItems=null,super.uninitialize()}setUI(){if(l.default.isOnIPhoneX()){let e=32;this.ui.btnStart.bottom+=e,this.ui.imgBg.bottom+=e,this.ui.btnBonus.bottom+=e,this.ui.boxCoin.bottom+=e,this.ui.boxDiamond.bottom+=e,this.ui.boxCombine.bottom+=e,this.ui.boxBonusTips.bottom+=e,this.ui.imgRecommendWeapon.bottom+=e,this.ui.boxPromo.bottom+=e}}getCurWeaponPos(){let e=new Laya.Point(.5*this.ui.imgCurWeapon.width,.5*this.ui.imgCurWeapon.height);return this.ui.imgCurWeapon.localToGlobal(e,!1),e}getDiamondPos(){let e=new Laya.Point;return this.ui.imgDiamond.localToGlobal(e,!1),e}getCoinPos(){let e=new Laya.Point;return e.x=.5*-this.ui.imgCoin.width,e.y=.5*-this.ui.imgCoin.height,this.ui.imgCoin.localToGlobal(e,!1),e}loopCheckAD(){let e=r.default.instance.getData(u.default),t=r.default.instance.getData(s.default),a=d.default.getWeapon(t.slotMaxLevel),i=o.default.isVaild;""!=e.Account&&a.goldUnlockLevel>=2&&i?(this.ui.animShopFree.isPlaying||this.ui.animShopFree.play(0,!0),this.ui.imgShopFree.visible=!0):(this.ui.imgShopFree.visible=!1,this.ui.animShopFree.stop())}}},{"../../../../base/base/ColorFilterUtil":7,"../../../../config/ResGameConfig":50,"../../../../ui/layaMaxUI":315,"../../../../util/RewardedVideoAdUtil":322,"../../../../util/Wechat":324,"../../../common/ui/UIView":74,"../../../data/GameDataModule":77,"../../../data/combine/CombineData":80,"../../../data/user/UserData":86}],244:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../../util/Wechat"),s=e("./InviteFriendView"),o=e("../../common/ui/UIModule"),l=e("./InviteFriendUI");a.default=class extends i.default{initialize(){n.default.postMessage("showInviteFriend");let e=this.getView(s.default).ui;e.btnClose.clickHandler=Laya.Handler.create(this,this.onClose),e.imgInvite0.on(Laya.Event.CLICK,this,this.onInvite,[0]),e.imgInvite1.on(Laya.Event.CLICK,this,this.onInvite,[1]),e.imgInvite2.on(Laya.Event.CLICK,this,this.onInvite,[2]),e.imgInvite3.on(Laya.Event.CLICK,this,this.onInvite,[3]),e.imgInvite4.on(Laya.Event.CLICK,this,this.onInvite,[4])}uninitialize(){let e=this.getView(s.default).ui;null!=e.btnClose.clickHandler&&(e.btnClose.clickHandler.recover(),e.btnClose.clickHandler=null),e.imgInvite0.off(Laya.Event.CLICK,this,this.onInvite),e.imgInvite1.off(Laya.Event.CLICK,this,this.onInvite),e.imgInvite2.off(Laya.Event.CLICK,this,this.onInvite),e.imgInvite3.off(Laya.Event.CLICK,this,this.onInvite),e.imgInvite4.off(Laya.Event.CLICK,this,this.onInvite)}onClose(){o.default.instance.closeUI(l.default)}onInvite(e){n.default.postMessage("inviteFriend",e.toString())}}},{"../../../base/mvc/MVCControl":20,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"./InviteFriendUI":245,"./InviteFriendView":246}],245:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./InviteFriendView"),o=e("./InviteFriendControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.addView(s.default),this.addControl(o.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./InviteFriendControl":244,"./InviteFriendView":246}],246:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../common/ui/UIDialogView");a.default=class extends n.default{constructor(){super(i.ui.social.InviteFriendDialogUI)}uninitialize(){this.ui.wxOpenData.graphics.clear(),super.uninitialize()}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIDialogView":68}],247:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./InviteRewardView"),s=e("../../common/ui/UIModule"),o=e("./InviteRewardUI"),l=e("../../../util/Wechat"),r=e("../../data/GameDataModule"),d=e("../../data/user/UserData"),u=e("../../data/network/NetWorkData");a.default=class extends i.default{constructor(){super(...arguments),this._inviteUserCount=0,this._takenRewardCount=0}initialize(){let e=this.getView(n.default).ui;e.btnClose.clickHandler=Laya.Handler.create(this,this.onClose),e.btnShare.clickHandler=Laya.Handler.create(this,this.onInvite,null,!1);let t=r.default.getData(u.default);t.on(Laya.Event.CHANGED,this,this.onInviteChange),this._inviteUserCount=t.inviteUserCount,this._takenRewardCount=t.takenRewardCount,e.listReward.renderHandler=Laya.Handler.create(this,this.onRenderItem,null,!1),e.listReward.vScrollBarSkin="",e.listReward.array=new Array(20)}uninitialize(){r.default.getData(u.default).off(Laya.Event.CHANGED,this,this.onInviteChange);let e=this.getView(n.default).ui;null!=e.btnShare.clickHandler&&(e.btnShare.clickHandler.recover(),e.btnShare.clickHandler=null),null!=e.listReward.renderHandler&&(e.listReward.renderHandler.recover(),e.listReward.renderHandler=null)}onRenderItem(e,t){null!=e&&e.setData(t+1,this._inviteUserCount,this._takenRewardCount)}onClose(){s.default.instance.closeUI(o.default)}onInvite(){l.default.share(null,null,"inviteReward",r.default.getData(d.default).ShareUuid,0,null)}onInviteChange(){let e=r.default.getData(u.default);this._inviteUserCount=e.inviteUserCount,this._takenRewardCount=e.takenRewardCount,this.getView(n.default).ui.listReward.refresh()}}},{"../../../base/mvc/MVCControl":20,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/network/NetWorkData":85,"../../data/user/UserData":86,"./InviteRewardUI":249,"./InviteRewardView":250}],248:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../../config/ResGameConfig"),s=e("../../game/GameModule"),o=e("../../game/event/GameEvent");a.default=class extends i.ui.social.InviteRewardItemUI{constructor(){super()}destroy(){null!=this.btnGet.clickHandler&&(this.btnGet.clickHandler.recover(),this.btnGet.clickHandler=null),super.destroy()}setData(e,t,a){this.tfDesc.text="邀请"+e+"位好友";let i=t>e?e:t;this.tfProgress.text=i+"/"+e,this.pgProgress.value=i/e,this.imgGot.visible=a>=e,this.btnGet.visible=a<e,this.btnGet.disabled=t<e,this.tfDiamond.text=n.default.InviteDiamonds.toString(),a<e&&(this.btnGet.clickHandler=Laya.Handler.create(this,this.onGet,null,!1))}onGet(){s.default.instance.event(o.default.TAKE_INVITE_REWARD)}}},{"../../../config/ResGameConfig":50,"../../../ui/layaMaxUI":315,"../../game/GameModule":88,"../../game/event/GameEvent":122}],249:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./InviteRewardView"),o=e("./InviteRewardControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.addView(s.default),this.addControl(o.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./InviteRewardControl":247,"./InviteRewardView":250}],250:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../common/ui/UIDialogView");a.default=class extends n.default{constructor(){super(i.ui.social.InviteRewardDialogUI)}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIDialogView":68}],251:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./LoadingView"),s=e("../../../Version"),o=e("../../../base/base/MathUtil");a.default=class extends i.default{constructor(){super(...arguments),this._process=0,this._tips=["Contacting headquarters...","Searching canned food...","Check magazine...","Polish the gun...","Investigate unknown areas...","Sneak a nap..."],this._curTips=null}initialize(){if(Laya.Browser.onMiniGame){let e=Laya.Browser.window.firstRenderButton;e&&(e.destroy(),Laya.Browser.window.firstRenderButton=null),wx.hideLoading()}this.getView(n.default).ui.tfVersion.text="version"+s.default.client,Laya.timer.loop(2e3,this,this.onChangeTips),this.onChangeTips()}uninitialize(){Laya.timer.clear(this,this.onChangeTips)}set process(e){e>this._process&&(this._process=e,this._process>1&&(this._process=1),this.updateUI())}onChangeTips(){this.getView(n.default).ui.tfTip.text=this._tips[o.default.randomInt(0,this._tips.length-1)]}updateUI(){let e=this.getView(n.default).ui;e.tfProgress.text=Math.ceil(100*this._process)+"%",e.pgProgress.value=this._process,e.imgProgress.repaint()}}},{"../../../Version":3,"../../../base/base/MathUtil":11,"../../../base/mvc/MVCControl":20,"./LoadingView":253}],252:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./LoadingView"),o=e("./LoadingControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.addAtlas("loading"),this.addView(s.default),this.addControl(o.default)}destroy(){Laya.loader.clearRes("res/atlas/loading.atlas"),super.destroy()}set process(e){this.getControl(o.default).process=e}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./LoadingControl":251,"./LoadingView":253}],253:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../common/ui/UIView");a.default=class extends n.default{constructor(){super(i.ui.LoadingViewUI)}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIView":74}],254:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./MenuView"),s=e("../../data/GameDataModule"),o=e("../../data/user/UserData"),l=e("../../data/user/UserDataEvent"),r=e("../../../util/Wechat"),d=e("../../../util/SoundUrl"),u=e("../../../GameConfig"),h=e("../../common/Notice"),c=e("../../common/ui/UIUtil"),m=e("../../common/ui/UIModule"),p=e("../rank/RankUI"),f=e("../turn/TurnUI"),g=e("../illustrated/IllustratedUI"),_=e("../../data/illustrated/IllustratedData");a.default=class extends i.default{constructor(){super(...arguments),this._ui=null,this._btnFeedBack=null}initialize(){this._ui=this.getView(n.default).ui,this._ui.btnMenu.on(Laya.Event.CLICK,this,this.onClickHide),this._ui.imgMask.on(Laya.Event.CLICK,this,this.onClickHide),this._ui.clipSound.on(Laya.Event.CLICK,this,this.onClickSound),this._ui.btnIllustrated.on(Laya.Event.CLICK,this,this.onClickIllustrated),this._ui.btnTurn.on(Laya.Event.CLICK,this,this.onClickTurn);let e=s.default.getData(o.default);e.on(l.default.SOUND_ON_CHANGE,this,this.onSoundOnChange),this.onSoundOnChange(e.isSoundOn),s.default.getData(_.default).on(Laya.Event.CHANGE,this,this.onIllustratedChange),this.onIllustratedChange()}uninitialize(){s.default.getData(o.default).off(l.default.SOUND_ON_CHANGE,this,this.onSoundOnChange),s.default.getData(_.default).off(Laya.Event.CHANGE,this,this.onIllustratedChange),null!=this._btnFeedBack&&(this._btnFeedBack.destroy(),this._btnFeedBack=null),this._ui.btnMenu.off(Laya.Event.CLICK,this,this.onClickHide),this._ui.imgMask.off(Laya.Event.CLICK,this,this.onClickHide),this._ui.clipSound.off(Laya.Event.CLICK,this,this.onClickSound),this._ui.btnIllustrated.off(Laya.Event.CLICK,this,this.onClickIllustrated),this._ui.btnTurn.off(Laya.Event.CLICK,this,this.onClickTurn),this._ui=null}onClickTurn(){m.default.instance.openUI(f.default),this.onClickHide()}onClickService(){r.default.openServiceConversation()}onClickFeedBack(){Laya.Browser.onMiniGame&&null==this._btnFeedBack&&h.default.show("当前微信版本过低，请升级微信后重试")}onClickHide(){this.getView(n.default).hideTween()}onSoundOnChange(e){this._ui.clipSound.index=e?0:1}onIllustratedChange(){let e=s.default.getData(_.default);this._ui.imgIllustratedRedPoint.visible=e.unReads.length>0}onClickSound(){let e=s.default.instance.getData(o.default);0==this._ui.clipSound.index?(e.isSoundOn=0,r.default.stopMusic(),r.default.stopAllSound()):(e.isSoundOn=1,r.default.playMusic(d.default.indexBgm,!0))}onClickRank(){m.default.instance.openUI(p.default),this.onClickHide()}onClickIllustrated(){m.default.instance.openUI(g.default),this.onClickHide()}showFeedbackButton(){if(Laya.Browser.onMiniGame&&Laya.Browser.window.wx.createFeedbackButton){let e=Laya.Browser.window.wx.getSystemInfoSync();if(!r.default.needVersion("2.1.2"))return;e.windowWidth,u.default.width,e.windowHeight,c.default.getStageHeight(),this._btnFeedBack=Laya.Browser.window.wx.createFeedbackButton({type:"image",image:"",style:{top:top}})}}}},{"../../../GameConfig":1,"../../../base/mvc/MVCControl":20,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/Notice":57,"../../common/ui/UIModule":70,"../../common/ui/UIUtil":73,"../../data/GameDataModule":77,"../../data/illustrated/IllustratedData":83,"../../data/user/UserData":86,"../../data/user/UserDataEvent":87,"../illustrated/IllustratedUI":225,"../rank/RankUI":262,"../turn/TurnUI":300,"./MenuView":256}],255:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./MenuView"),o=e("./MenuControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.addView(s.default),this.addControl(o.default)}destroy(){super.destroy()}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./MenuControl":254,"./MenuView":256}],256:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../../ui/layaMaxUI"),s=e("../../common/ui/UIModule"),o=e("./MenuUI"),l=e("../../data/GameDataModule"),r=e("../../data/user/UserData");a.default=class extends i.default{constructor(){super(n.ui.index.MenuViewUI)}initialize(){super.initialize(),this._ui.zOrder=990,Laya.timer.callLater(this,this.showTween),this.ui.animAttention.interval=1e3/45,this.ui.animAttention.play(0,!0),this.ui.animDemo.interval=1e3/45,this.ui.animDemo.play(0,!0);let e=l.default.instance.getData(r.default);this.ui.imgTurnTip.visible=e.getIsTurn()}uninitialize(){Laya.Tween.clearAll(this.ui.boxMain),Laya.Tween.clearAll(this.ui.btnMenu),Laya.Tween.clearAll(this.ui.imgMenu),this.ui.animAttention.stop(),this.ui.animDemo.stop(),super.uninitialize()}showTween(){let e=this.ui.boxMain.width,t=Laya.Ease.linearNone,a={left:this.ui.boxMain.left+e};Laya.Tween.to(this.ui.boxMain,a,300,t,null,0,!0,!0);let i={left:this.ui.btnMenu.left+e-2};Laya.Tween.to(this.ui.btnMenu,i,300,t,null,0,!0,!0);let n={left:this.ui.imgMenu.left+e-2};Laya.Tween.to(this.ui.imgMenu,n,300,t,null,0,!0,!0)}hideTween(e=!0){this.ui.boxMain.width;let t=Laya.Ease.linearNone,a={left:-113},i=Laya.Handler.create(this,this.hideOver,[e]);Laya.Tween.to(this.ui.boxMain,a,300,t,i,0,!0,!0);let n={left:0};Laya.Tween.to(this.ui.btnMenu,n,300,t,null,0,!0,!0);let s={left:53};Laya.Tween.to(this.ui.imgMenu,s,300,t,null,0,!0,!0)}hideOver(e=!0){e&&s.default.instance.closeUI(o.default)}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIModule":70,"../../common/ui/UIView":74,"../../data/GameDataModule":77,"../../data/user/UserData":86,"./MenuUI":255}],257:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIModule"),n=e("./OffLineCoinView"),s=e("../../data/GameDataModule"),o=e("../../data/user/UserData"),l=e("./OffLineCoinParam"),r=e("./OffLineCoinUI"),d=e("../../../base/base/MathUtil"),u=e("../../common/Notice"),h=e("../index/IndexUI"),c=e("../../../base/base/Pool"),m=e("../../common/AwardEffect"),p=e("../../../util/BannerAdUtil"),f=e("../../common/ui/UIStrategyControl"),g=e("../../network/DataEnum");a.default=class extends f.default{constructor(){super(...arguments),this._offLineCoin=0,this._ui=null,this._aldKey="OffLineCoin"}initialize(){super.initialize(),this._ui=this.getView(n.default).ui,this._ui.btnPay.clickHandler=Laya.Handler.create(this,this.onClickGet,null,!1),this._ui.tfGet.on(Laya.Event.CLICK,this,this.onClickGetNoPay),this.setShowMsg(),this._ui.animFlash.interval=1e3/30,this._ui.tfPay.text="Triple reward",this._ui.clipPay.index=1,this._ui.clipPay.visible=!0,this._ui.tfGet.visible=!0,Laya.timer.callLater(this,this.playBtnAnim),p.default.show()}uninitialize(){p.default.hide(),this._ui.tfGet.off(Laya.Event.CLICK,this,this.onClickGet),this._ui.tfGet.off(Laya.Event.CLICK,this,this.onClickGetNoPay),this._ui.btnPay.clickHandler&&(this._ui.btnPay.clickHandler.recover(),this._ui.btnPay.clickHandler=null),this._ui.animFlash.isPlaying&&this._ui.animFlash.stop(),super.uninitialize()}get payId(){return g.EnumPayID.OffLineCoin}onRefreshStrategy(e){this.getView(n.default).ui.clipPay.index=e?1:0}onPaySuccess(e){u.default.show("Received successfully!"),s.default.instance.getData(o.default).coin+=3*this._offLineCoin,this.playGetAnim(),this.onClose()}onPayFail(e){}playBtnAnim(){this._ui.btnPay.visible&&this._ui.animFlash.play(0,!0)}setShowMsg(){let e=this.getData(l.default);this._offLineCoin=e.offLineCoin,this._ui.tfOffCoin.text=d.default.formatNumber(e.offLineCoin)}onClickGet(){this.pay(this._aldKey)}onClickGetNoPay(){s.default.instance.getData(o.default).coin+=this._offLineCoin,this.playGetAnim(),this.onClose()}playGetAnim(){if(null!=i.default.instance.getUI(h.default)){let e=h.default.getCoinPos(),t=this.getView(n.default).ui,a=c.default.getPoint();a.x=t.imgCoin.x,a.y=t.imgCoin.y,t.boxMain.localToGlobal(a,!1);let i=Laya.Handler.create(h.default,h.default.playCoinAnimation);m.default.createAwardEffect(a,e,!0,null,!0,i)}}onClose(){i.default.instance.closeUI(r.default)}}},{"../../../base/base/MathUtil":11,"../../../base/base/Pool":12,"../../../util/BannerAdUtil":316,"../../common/AwardEffect":53,"../../common/Notice":57,"../../common/ui/UIModule":70,"../../common/ui/UIStrategyControl":71,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../network/DataEnum":164,"../index/IndexUI":228,"./OffLineCoinParam":258,"./OffLineCoinUI":259,"./OffLineCoinView":260}],258:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCData");a.default=class extends i.default{constructor(){super(...arguments),this.offLineTime=0,this.offLineCoin=0}}},{"../../../base/mvc/MVCData":22}],259:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./OffLineCoinParam"),o=e("./OffLineCoinView"),l=e("./OffLineCoinControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(s.default),this.addView(o.default),this.addControl(l.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./OffLineCoinControl":257,"./OffLineCoinParam":258,"./OffLineCoinView":260}],260:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../common/ui/UIView"),s=e("../../common/TweenTool");a.default=class extends n.default{constructor(){super(i.ui.game.OffLineCoinUI)}initialize(){super.initialize(),this._ui.zOrder=950,Laya.timer.callLater(this,this.showTween)}uninitialize(){Laya.Tween.clearAll(this.ui.boxMain),super.uninitialize()}showTween(){let e=this.ui.boxMain;s.default.ScaleUpOut(e)}}},{"../../../ui/layaMaxUI":315,"../../common/TweenTool":59,"../../common/ui/UIView":74}],261:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../util/Wechat"),n=e("../../../base/mvc/MVCControl"),s=e("./RankView"),o=e("../../common/ui/UIModule"),l=e("./RankUI"),r=e("../../data/GameDataModule"),d=e("../../data/user/UserData");a.default=class extends n.default{initialize(){i.default.postMessage("showRankList","rank");let e=this.getView(s.default).ui;e.btnClose.clickHandler=Laya.Handler.create(this,this.onClose),e.btnPre.clickHandler=Laya.Handler.create(this,this.onChangePage,["Left"],!1),e.btnNext.clickHandler=Laya.Handler.create(this,this.onChangePage,["Right"],!1),e.btnShare.clickHandler=Laya.Handler.create(this,this.onShare,null,!1)}uninitialize(){let e=this.getView(s.default).ui;null!=e.btnPre.clickHandler&&(e.btnPre.clickHandler.recover(),e.btnPre.clickHandler=null),null!=e.btnNext.clickHandler&&(e.btnNext.clickHandler.recover(),e.btnNext.clickHandler=null),null!=e.btnShare.clickHandler&&(e.btnShare.clickHandler.recover(),e.btnShare.clickHandler=null)}onClose(){o.default.instance.closeUI(l.default)}onChangePage(e){i.default.postMessage("changePage",e)}onShare(){let e=r.default.getData(d.default),t=e.getRandomShareInfo(),a=e.UserId+"00"+t.id;i.default.share(null,null,"rank",a,0,t)}}},{"../../../base/mvc/MVCControl":20,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/user/UserData":86,"./RankUI":262,"./RankView":263}],262:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./RankView"),o=e("./RankControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.addView(s.default),this.addControl(o.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./RankControl":261,"./RankView":263}],263:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../common/ui/UIDialogView");a.default=class extends n.default{constructor(){super(i.ui.social.RankDialogUI)}uninitialize(){this.ui.wxOpenData.graphics.clear(),super.uninitialize()}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIDialogView":68}],264:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./data/AwardItemData"),n=e("../../data/GameDataModule"),s=e("../../data/combine/CombineData"),o=e("../../../config/ResGameConfig"),l=e("../../../base/base/Pool"),r=e("./data/AwardType"),d=e("../../../base/base/MathUtil"),u=e("../index/tool/CombineDefine"),h=e("../freeCoin/FreeCoinTool"),c=e("../../../base/base/Dictionary");class m{static getResultAwardDatas(e,t,a){let u=n.default.instance.getData(s.default),h=o.default.getWeapon(u.slotMaxLevel),c=l.default.get(i.default.poolName,i.default),m=h.unlockAwardDiamond*d.default.random(.05,.1);c.count=Math.ceil(.35*h.unlockAwardDiamond-m),c.icon=this._diamondSkin,c.type=r.EAwardType.DIAMOND;let p=a-t,f=o.default.getLevel(e),g=h.outputGoldPerSecond*f.levelFactor*(2*t+p),_=this.getAwardCoins(g),y=this.getAwardWeapon(4),w=_.concat(y);w.push(c);for(let e=0;e<10;e++){let e=d.default.randomInt(0,w.length-1),t=0;t=e>=2?d.default.randomInt(0,e-1):d.default.randomInt(e+1,w.length-1);let a=w[e];w[e]=w[t],w[t]=a}let v=this.getCoinSkinDic(w);if(v.values.length>=2)for(let e of w)if(e.type==r.EAwardType.COIN){let t=v.getValue(e);null!=t&&(e.icon=t)}return w}static getAwardCoins(e){let t=Array();for(let a=0;a<this._coinRates.length;a++){let n=l.default.get(i.default.poolName,i.default);n.icon=this._coinSkins[a],n.count=Math.ceil(e*this._coinRates[a]),n.type=r.EAwardType.COIN,t.push(n)}return t}static getAwardWeapon(e){let t=Array(),a=n.default.instance.getData(s.default),u=a.slotMaxLevel,h=u+this._weaponRange[0],c=u+this._weaponRange[1];c<=0&&(c=1),h<=0&&(h=1);let m=c-h,p=0;for(let a=0;a<e;a++){m<=4?++p>c&&(p=h):p=d.default.randomInt(h,c);let e=o.default.getWeapon(p),a=l.default.get(i.default.poolName,i.default);a.icon=o.default.getWeaponIcon(p),a.count=e.sellGold,a.type=r.EAwardType.WEAPON,a.weaponLevel=p,a.weaponName=e.name,a.slotIndex=-1,t.push(a)}let f=a.slots;if(-1!=a.getEmptySlot()){let e=0;for(let a=0;a<f.length;a++){f[a]<=0&&e<t.length&&(t[e++].slotIndex=a)}}for(let e=0;e<t.length;e++){let a=t[e];-1==a.slotIndex&&(a.icon=this._coinSkin,a.type=r.EAwardType.COIN)}return t}static getAirdropAwardDatas(e){let t=n.default.instance.getData(s.default),a=o.default.getWeapon(t.slotMaxLevel),c=l.default.get(i.default.poolName,i.default),m=a.unlockAwardDiamond*d.default.random(.05,.1);c.count=Math.ceil(.35*a.unlockAwardDiamond-m),c.icon=this._diamondSkin,c.type=r.EAwardType.DIAMOND;let p=h.default.getFreeCoin(),f=2;e==u.EAirdrop.SUPER&&(f=4);let g=this.getAwardCoins(p),_=this.getAwardWeapon(f),y=null;if(e==u.EAirdrop.SUPER)y=g.concat(_);else{let e=g[d.default.randomInt(0,g.length-1)];(y=Array()).push(e),y.push(_[0]),y.push(_[1])}y.push(c);for(let e=0;e<10;e++){let e=d.default.randomInt(0,y.length-1),t=0;t=e>=2?d.default.randomInt(0,e-1):d.default.randomInt(e+1,y.length-1);let a=y[e];y[e]=y[t],y[t]=a}let w=this.getCoinSkinDic(y);if(w.values.length>=2)for(let e of y)if(e.type==r.EAwardType.COIN){let t=w.getValue(e);null!=t&&(e.icon=t)}return y}static getCoinSkinDic(e){let t=new Array;for(let a of e)a.type==r.EAwardType.COIN&&t.push(a);t.sort(this.sortByCoin);let a=new c.default;if(t.length<=this._coinSkins.length){let e=0;for(let i of t)a.setValue(i,this._coinSkins[e++])}else{let e=0,i=0;for(let n=0;n<t.length-1;n++){let s=t[n],o=this._coinSkins[e];if(i>=this._coinSkins.length-1)for(let t=0;t<a.keys.length;t++){let i=a.keys[t],n=a.getValue(i);if(this._coinSkins.indexOf(n)>e){a.setValue(s,o);for(let e=a.keys.length-1;e>t;e--){let t=a.keys[e],i=a.keys[e-1],n=a.getValue(i);a.setValue(t,n)}a.setValue(i,o);break}if(t==a.keys.length-1){a.setValue(s,o);break}}else a.setValue(s,o);i++,++e>=this._coinSkins.length-1&&(e=0)}let n=t[t.length-1],s=this._coinSkins[this._coinSkins.length-1];a.setValue(n,s)}return a}static sortByCoin(e,t){let a=e.count,i=t.count,n=0;return a<i&&(n=-1),a>i&&(n=1),n}}a.default=m,m._coinRates=[.2,.3,.4],m._coinSkins=["index/img_coins_03.png","index/img_coins_02.png","index/img_coins.png","index/img_coins_01.png"],m._coinSkin="index/img_coins_01.png",m._diamondSkin="index/img_diamonds.png",m._weaponRange=[-10,-5]},{"../../../base/base/Dictionary":9,"../../../base/base/MathUtil":11,"../../../base/base/Pool":12,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../freeCoin/FreeCoinTool":210,"../index/tool/CombineDefine":240,"./data/AwardItemData":268,"./data/AwardType":269}],265:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./view/ResultView"),o=e("./data/ResultParam"),l=e("./control/ResultControl"),r=e("./control/ResultGuideControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(o.default),this.addView(s.default),this.addControl(l.default),this.addControl(r.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./control/ResultControl":266,"./control/ResultGuideControl":267,"./data/ResultParam":270,"./view/ResultView":272}],266:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../view/ResultView"),n=e("../data/ResultParam"),s=e("../data/AwardItemData"),o=e("../../../../base/base/Pool"),l=e("../../../game/GameModule"),r=e("../../../game/event/GameEvent"),d=e("../../../../base/base/MathUtil"),u=e("../../../game/state/NormalState"),h=e("../data/AwardType"),c=e("../../../../util/BannerAdUtil"),m=e("../../../data/GameDataModule"),p=e("../../../data/user/UserData"),f=e("../../../common/ui/UIStrategyControl"),g=e("../../../network/DataEnum"),_=e("../../../../util/MiniGameSDK");a.default=class extends f.default{constructor(){super(...arguments),this._aldKey="Result",this._coin=0,this._ui=null,this._curSelectIndex=0,this._awardCount=8}initialize(){_.default.showInterstitialAd(),this._ui=this.getView(i.default).ui;let e=this.getData(n.default);1==e.level?(this._ui.clipPay.visible=!1,this._ui.tfGet.visible=e.level>1):super.initialize(),this._ui.btnPay.clickHandler=Laya.Handler.create(this,this.onClickTakeAll,null,!1),this._ui.tfGet.on(Laya.Event.CLICK,this,this.onClickTakeOne),this.setAwardMsg(),Laya.timer.once(1e3,this,this.playBtnFlash),this._ui.imgItemFg.visible=!1,c.default.show()}uninitialize(){c.default.hide(),Laya.Tween.clearAll(this);let e=this.getView(i.default).awardItems;for(let t=0;t<e.length;t++){let a=e[t];Laya.Tween.clearAll(a)}Laya.timer.clear(this,this.selecAnimOver),this._ui.animFlash.stop(),Laya.timer.clear(this,this.playBtnFlash),this.clearHandler(),super.uninitialize()}clearHandler(){this._ui.tfGet.off(Laya.Event.CLICK,this,this.onClickTakeOne),this._ui.btnPay.clickHandler&&(this._ui.btnPay.clickHandler.recover(),this._ui.btnPay.clickHandler=null)}get payId(){return g.EnumPayID.Result}onRefreshStrategy(e){null==this._ui&&(this._ui=this.getView(i.default).ui),this._ui.clipPay.index=e?1:0,m.default.instance.getData(p.default)}onPaySuccess(e){if(this.clearHandler(),null!=this.getData(n.default).awardArray){let e=this.getView(i.default).awardItems,t=new Array;for(let a=0;a<e.length;a++){let i=o.default.get(s.default.poolName,s.default),n=e[a];i.copyTo(n.awardItemData);let l=o.default.getPoint();l.x=.5*n.width,l.y=.5*n.height,n.localToGlobal(l,!1),i.stagePos=l,t.push(i)}l.default.instance.event(r.default.RESULT_AWARD_GET,[t])}this.settleOver()}onPayFail(e){}onClickTakeAll(){1==this.getData(n.default).level?this.onPaySuccess(!0):this.pay(this._aldKey)}onClickTakeOne(){if(this.clearHandler(),null!=this.getData(n.default).awardArray){let e=this.getView(i.default).awardItems,t=d.default.randomInt(0,e.length-1);for(let a=0;a<e.length;a++)e[a].awardItemData.type==h.EAwardType.DIAMOND&&(t=a);e[t].awardItemData.type==h.EAwardType.DIAMOND&&++t>=e.length&&(t=0),this.loopShow(t)}}selectOver(e){null!=e&&e.recover();let t=this.getView(i.default).awardItems,a=Math.floor(this._curSelectIndex%this._awardCount),n=t[a],d=o.default.get(s.default.poolName,s.default);d.copyTo(n.awardItemData);let u=o.default.getPoint();u.x=.5*n.width,u.y=.5*n.height,n.localToGlobal(u,!1),d.stagePos=u;let h=new Array;h.push(d),l.default.instance.event(r.default.RESULT_AWARD_GET,[h]),this.getView(i.default).hideBoxMain(),Laya.timer.once(1e3,this,this.selecAnimOver,[a])}selecAnimOver(e){this.settleOver()}loopShow(e){this.getView(i.default).awardItems,this._curSelectIndex=0;let t=e+2*this._awardCount,a=Laya.Ease.quadInOut,n=new Laya.Handler(this,this.showSpecial,null,!1),s={_curSelectIndex:t,update:n},o=Laya.Handler.create(this,this.selectOver,[n]);Laya.Tween.to(this,s,1e3,a,o,0,!0,!0)}showSpecial(){let e=Math.floor(this._curSelectIndex%this._awardCount),t=this.getView(i.default).awardItems;for(let a=0;a<t.length;a++){let i=1,n=t[a];a==e?(i=2,n.zOrder=1e3,n.playSelectAnim()):(n.zOrder=0,n.stopSelectAnim())}}settleOver(){l.default.instance.popState(),l.default.instance.changeState(u.default)}setAwardMsg(){let e=this.getData(n.default);if(null!=e.awardArray){let t=this.getView(i.default).awardItems,a=t.length;for(let i=0;i<e.awardArray.length&&!(i>=a);i++){let a=e.awardArray[i];t[i].setData(a)}}}playBtnFlash(){this._ui.animFlash.play(0,!0)}}},{"../../../../base/base/MathUtil":11,"../../../../base/base/Pool":12,"../../../../util/BannerAdUtil":316,"../../../../util/MiniGameSDK":319,"../../../common/ui/UIStrategyControl":71,"../../../data/GameDataModule":77,"../../../data/user/UserData":86,"../../../game/GameModule":88,"../../../game/event/GameEvent":122,"../../../game/state/NormalState":143,"../../../network/DataEnum":164,"../data/AwardItemData":268,"../data/AwardType":269,"../data/ResultParam":270,"../view/ResultView":272}],267:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/mvc/MVCControl"),n=e("../data/ResultParam"),s=e("../view/ResultView"),o=e("../../../game/effect/HandEffect"),l=e("../../../../base/base/Pool");a.default=class extends i.default{constructor(){super(...arguments),this._handStartPoint=null,this._handEndPoint=null,this._curHandEffect=null}initialize(){this._handEndPoint=l.default.getPoint(),this._handStartPoint=l.default.getPoint(),Laya.timer.callLater(this,this.tryTip)}uninitialize(){l.default.recoverPoint(this._handStartPoint),l.default.recoverPoint(this._handEndPoint),this.clearHand()}clearHand(){null==this._curHandEffect||this._curHandEffect.isRecover||(this._curHandEffect.recover(),this._curHandEffect=null)}tryTip(){if(1==this.getData(n.default).level){let e=this.getView(s.default).ui.btnPay;this._handEndPoint.x=e.x,this._handEndPoint.y=e.y-80,this._handStartPoint.x=e.x,this._handStartPoint.y=e.y-180,this.clearHand(),this._curHandEffect=o.default.createHand(o.EnumHandClick.AFTER,e.parent,180,this._handStartPoint,this._handEndPoint,-1,500,null)}}}},{"../../../../base/base/Pool":12,"../../../../base/mvc/MVCControl":20,"../../../game/effect/HandEffect":121,"../data/ResultParam":270,"../view/ResultView":272}],268:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/mvc/MVCData"),n=e("./AwardType"),s=e("../../../../base/base/Pool");class o extends i.default{constructor(){super(...arguments),this.icon="",this.count=0,this.type=n.EAwardType.NONE,this.slotIndex=-1,this.stagePos=null,this.weaponLevel=0,this.weaponName=""}clear(){super.clear(),this.icon="",this.count=0,this.type=n.EAwardType.NONE,this.slotIndex=-1,this.weaponLevel=0,this.weaponName="",s.default.recoverPoint(this.stagePos),this.stagePos=null}copyTo(e){this.icon=e.icon,this.count=e.count,this.type=e.type,this.slotIndex=e.slotIndex,this.weaponLevel=e.weaponLevel,this.weaponName=e.weaponName,this.stagePos=e.stagePos}}a.default=o,o.poolName="awardItemData"},{"../../../../base/base/Pool":12,"../../../../base/mvc/MVCData":22,"./AwardType":269}],269:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e){e[e.NONE=0]="NONE",e[e.WEAPON=1]="WEAPON",e[e.COIN=2]="COIN",e[e.DIAMOND=3]="DIAMOND"}(a.EAwardType||(a.EAwardType={}))},{}],270:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../base/mvc/MVCData");a.default=class extends i.default{constructor(){super(...arguments),this.awardArray=null,this.level=0}}},{"../../../../base/mvc/MVCData":22}],271:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../../ui/layaMaxUI"),n=e("../data/AwardItemData"),s=e("../../../../base/base/MathUtil"),o=e("../data/AwardType"),l=e("../../../../base/base/Pool");class r extends i.ui.result.AwardItemUI{constructor(){super(),this._awardItemData=null,this._sortIndex=0}destroy(){super.destroy()}clear(){}setData(e){let t=e.type==o.EAwardType.NONE;this.imgIcon.visible=!t,this.tfLevel.visible=e.type==o.EAwardType.WEAPON,t||(this._awardItemData=e,this.imgIcon.skin=e.icon),e.type==o.EAwardType.WEAPON?(this.imgIcon.rotation=0,this.tfLevel.text=e.weaponLevel+"",this.tfWeaponName.text=e.weaponName,this.tfWeaponName.scale(.3,.3),this.tfWeaponName.wordWrap=!0,this.tfWeaponName.align="center"):(this.imgIcon.rotation=0,this.tfWeaponName.text=s.default.formatNumber(e.count)),e.type==o.EAwardType.COIN?this.imgIcon.scale(.3,.3):this.imgIcon.scale(1,1),this.imgLevelBg.visible=!1,this.tfLevel.visible=!1,this._awardItemData=e}clearData(){this.imgIcon.skin="",this.tfLevel.text="",this.tfWeaponName.text="",l.default.recover(n.default.poolName,this._awardItemData),this._awardItemData=null}playSelectAnim(){this.imgSelect.visible=!0,this.imgSelect.alpha=1}stopSelectAnim(){this.imgSelect.visible=!1,this.imgSelect.alpha=0}get sortIndex(){return this._sortIndex}set sortIndex(e){this._sortIndex=e}get awardItemData(){return this._awardItemData}}a.default=r,r.poolName="awardItem"},{"../../../../base/base/MathUtil":11,"../../../../base/base/Pool":12,"../../../../ui/layaMaxUI":315,"../data/AwardItemData":268,"../data/AwardType":269}],272:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../common/ui/UIView"),n=e("../../../../ui/layaMaxUI"),s=e("../../../common/TweenTool"),o=e("../../../../util/SoundUrl"),l=e("../../../../util/Wechat"),r=e("../../../common/ribbon/WinRibbon");a.default=class extends i.default{constructor(){super(n.ui.result.ResultViewUI),this.awardItems=null}initialize(){super.initialize(),this.awardItems=new Array;for(let e=0;e<8;e++){let t=this.ui.boxAward.getChildByName("awardItem"+e);t.sortIndex=e,this.awardItems.push(t)}l.default.playSound(o.default.levelWin),Laya.timer.callLater(this,this.playCheer),this.ui.boxAward.visible=!0,this.showTween()}uninitialize(){Laya.Tween.clearAll(this.ui.imgMask),Laya.Tween.clearAll(this.ui.imgTitle),Laya.timer.clear(this,this.createFlower),Laya.timer.clear(this,this.showTween),Laya.timer.clear(this,this.playCheer);for(let e of this.awardItems)e.clearData();this.awardItems.splice(0,this.awardItems.length),this.awardItems=null,Laya.Tween.clearAll(this.ui.boxAward),super.uninitialize()}playCheer(){r.default.playRibbon(120,this.ui);for(let e=0;e<3;e++)Laya.timer.once(100*e,this,this.createFlower,[e])}createFlower(e){r.default.playRibbon(120,this.ui)}showTween(){this.ui.imgMask.alpha=0,this.ui.imgTitle.scaleY=0,this.ui.boxAward.scaleX=0,this.ui.boxAward.scaleY=0,this.ui.boxAward.alpha=1;let e=Laya.Ease.elasticOut;Laya.Tween.to(this.ui.imgTitle,{scaleY:1,alpha:1},500,e,null,700,!0,!0),Laya.Tween.to(this.ui.imgMask,{alpha:.8},500,null,null,1500,!0,!0);let t=this.ui.boxAward;s.default.ScaleUpOut(t,null,400,2e3)}hideBoxMain(){Laya.Tween.to(this.ui.boxAward,{alpha:0},500,null,null,0,!0,!0)}}},{"../../../../ui/layaMaxUI":315,"../../../../util/SoundUrl":323,"../../../../util/Wechat":324,"../../../common/TweenTool":59,"../../../common/ribbon/WinRibbon":61,"../../../common/ui/UIView":74}],273:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIModule"),n=e("./ReviveUI"),s=e("./ReviveView"),o=e("../../game/GameModule"),l=e("../../game/event/GameEvent"),r=e("./ReviveOpenParam"),d=e("../../../util/Wechat"),u=e("../../data/user/UserData"),h=e("../../data/GameDataModule"),c=e("../../../base/base/MathUtil"),m=e("../../game/state/FailState"),p=e("../../../util/BannerAdUtil"),f=e("../../../config/ResConfig"),g=e("../../common/ui/UIStrategyControl"),_=e("../../network/DataEnum");class y extends g.default{constructor(){super(...arguments),this.CountDownTime=3,this._countDown=0}initialize(){let e=this.getView(s.default).ui;1==this.getData(r.default).level?e.clipShareVideo.visible=!1:super.initialize(),d.default.postMessage("showForwordFriend","rank"),e.btnShareVideo.clickHandler=Laya.Handler.create(this,this.onPay,null,!1);let t=this.getData(r.default);e.pgProgress.value=t.levelProgress,e.tfLevelProgress.text=(t.isBossLevel?"BOSS Remaining HP":"Leftover zombies")+Math.ceil(100*t.levelProgress)+"%",e.aniShow.once(Laya.Event.COMPLETE,this,this.onAniShowOver),e.aniShow.play(0,!1);let a=c.default.randomInt(0,y.Talk.length-1);e.tfTalk.text=y.Talk[a],p.default.show(),e.imgFriendHead.skin=f.default.CDN+"head/head"+c.default.randomInt(0,2)+".jpg"}uninitialize(){p.default.hide();let e=this.getView(s.default).ui;null!=e.btnShareVideo.clickHandler&&(e.btnShareVideo.clickHandler.recover(),e.btnShareVideo.clickHandler=null),e.aniShow.off(Laya.Event.COMPLETE,this,this.onAniShowOver),Laya.timer.clear(this,this.onCountDown),super.uninitialize()}get payId(){return _.EnumPayID.Revive}onRefreshStrategy(e){this.getView(s.default).ui.clipShareVideo.index=e?1:0}onPaySuccess(e){let t=h.default.instance.getData(u.default).level;d.default.logEvent("Level"+t+"Revive"),o.default.instance.event(l.default.REVIVE),o.default.instance.popState(),this.onClose()}onPayFail(e){this.startCountDown()}onPay(){Laya.timer.clear(this,this.onCountDown),1==this.getData(r.default).level?this.onPaySuccess(!0):this.pay("Revive")}onGiveup(){o.default.instance.popState(),o.default.instance.changeState(m.default),this.onClose()}onClose(){i.default.instance.closeUI(n.default)}onAniShowOver(){this.getView(s.default).ui.aniShareVideo.play(0,!0),this.startCountDown()}startCountDown(){let e=this.getView(s.default).ui;this._countDown=this.CountDownTime,e.tfCountDown.text="Countdown "+this.CountDownTime+"s",Laya.timer.loop(1e3,this,this.onCountDown)}onCountDown(){if(this._countDown--,this._countDown<0)Laya.timer.clear(this,this.onCountDown),this.onGiveup();else{this.getView(s.default).ui.tfCountDown.text="T-minus"+this._countDown+"s"}}}a.default=y,y.Talk=["Brother! I'm waiting for you in front! Hold on!","Press' resurrect 'quickly! You can surpass me!","Get up and fight again! Let's fight this level together!"]},{"../../../base/base/MathUtil":11,"../../../config/ResConfig":48,"../../../util/BannerAdUtil":316,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../common/ui/UIStrategyControl":71,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../../game/state/FailState":142,"../../network/DataEnum":164,"./ReviveOpenParam":275,"./ReviveUI":276,"./ReviveView":277}],274:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../game/effect/HandEffect"),s=e("../../../base/base/Pool"),o=e("./ReviveView"),l=e("./ReviveOpenParam");a.default=class extends i.default{constructor(){super(...arguments),this._handStartPoint=null,this._handEndPoint=null,this._curHandEffect=null}initialize(){this._handEndPoint=s.default.getPoint(),this._handStartPoint=s.default.getPoint(),Laya.timer.callLater(this,this.tryTip)}uninitialize(){s.default.recoverPoint(this._handStartPoint),s.default.recoverPoint(this._handEndPoint),this.clearHand()}clearHand(){null==this._curHandEffect||this._curHandEffect.isRecover||(this._curHandEffect.recover(),this._curHandEffect=null)}tryTip(){let e=this.getData(l.default);if(this.getView(o.default).ui,1==e.level){let e=this.getView(o.default).ui.btnShareVideo;this._handEndPoint.x=e.x,this._handEndPoint.y=e.y-80,this._handStartPoint.x=e.x,this._handStartPoint.y=e.y-180,this.clearHand(),this._curHandEffect=n.default.createHand(n.EnumHandClick.AFTER,e.parent,180,this._handStartPoint,this._handEndPoint,-1,800,null)}}}},{"../../../base/base/Pool":12,"../../../base/mvc/MVCControl":20,"../../game/effect/HandEffect":121,"./ReviveOpenParam":275,"./ReviveView":277}],275:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIBaseData");a.default=class extends i.default{constructor(){super(...arguments),this.levelProgress=0,this.level=0,this.isBossLevel=!1}}},{"../../common/ui/UIBaseData":66}],276:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./ReviveControl"),o=e("./ReviveView"),l=e("./ReviveOpenParam"),r=e("./ReviveGuideControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(l.default),this.addView(o.default),this.addControl(s.default),this.addControl(r.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./ReviveControl":273,"./ReviveGuideControl":274,"./ReviveOpenParam":275,"./ReviveView":277}],277:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.game.ReviveViewUI)}uninitialize(){this.ui.wxOpenData.graphics.clear(),super.uninitialize()}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIView":74}],278:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./RewardView"),s=e("./RewardOpenParam"),o=e("../../data/GameDataModule"),l=e("../../data/user/UserData"),r=e("../../common/ui/UIModule"),d=e("./RewardUI");a.default=class extends i.default{initialize(){let e=this.getView(n.default).ui;e.btnGet.clickHandler=Laya.Handler.create(this,this.onGet);let t=this.getData(s.default);o.default.getData(l.default).diamond+=t.diamond,e.tfDiamond.text=t.diamond.toString()}uninitialize(){}onGet(){r.default.instance.closeUI(d.default)}}},{"../../../base/mvc/MVCControl":20,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/user/UserData":86,"./RewardOpenParam":279,"./RewardUI":280,"./RewardView":281}],279:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIBaseData");a.default=class extends i.default{constructor(){super(...arguments),this.diamond=0}}},{"../../common/ui/UIBaseData":66}],280:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./RewardOpenParam"),o=e("./RewardView"),l=e("./RewardControl"),r=e("../../common/ui/UIModule");class d extends i.default{constructor(){super(n.EUIType.DIALOG),this.setOpenParam(s.default),this.addView(o.default),this.addControl(l.default)}static show(e){r.default.instance.openUI(d).getOpenParam().diamond=e}}a.default=d},{"../../common/ui/UIModule":70,"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./RewardControl":278,"./RewardOpenParam":279,"./RewardView":281}],281:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIDialogView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.common.RewardDialogUI)}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIDialogView":68}],282:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/Notice"),n=e("./ShopData"),s=e("../../game/GameModule"),o=e("../../game/event/GameEvent"),l=e("../../data/combine/CombineDefine"),r=e("../../data/GameDataModule"),d=e("../../data/combine/CombineData"),u=e("../../data/user/UserData"),h=e("../index/tool/CombineTool"),c=e("../freeCoin/FreeCoinTool"),m=e("../../common/ui/UIStrategyControl"),p=e("../../network/DataEnum");a.default=class extends m.default{constructor(){super(...arguments),this._aldKey="ShopBuy",this._shopData=null,this._shopItemData=null}initialize(){super.initialize(),this._shopData=this.getData(n.default),s.default.instance.on(o.default.SHOP_BUY,this,this.onClickBuy)}uninitialize(){s.default.instance.off(o.default.SHOP_BUY,this,this.onClickBuy),super.uninitialize()}get payId(){return p.EnumPayID.Shop}onRefreshStrategy(e){null==this._shopData&&(this._shopData=this.getData(n.default));let t=this._shopData.itemDic.values;for(let a=0;a<t.length;a++){let i=t[a];if(i.itemData.isStrategy){i.refreshStrategy(e),i.itemData.isAd=e;break}}}onPaySuccess(e){r.default.getData(d.default).airDropLock=!1,i.default.show("Successful purchase!"),s.default.instance.event(o.default.SHOP_BUY_SUCCESS,[this._shopItemData.level,this._shopItemData.icon])}onPayFail(e){r.default.getData(d.default).airDropLock=!1}onClickBuy(e,t){let a=r.default.getData(d.default);r.default.getData(u.default),-1==a.getEmptySlot()?i.default.show("The area is full, synthesize or sell guns"):e==l.EnumBuy.VIDEO?(this._shopItemData=t,a.airDropLock=!0,this.pay(this._aldKey)):e==l.EnumBuy.COIN?this.coinBuy(t):this.diamondBuy(t)}coinBuy(e){let t=r.default.getData(u.default),a=r.default.getData(d.default);if(t.coin<e.buyGold)c.default.tryOpenFreeCoinUI()||i.default.show("Gold coins are in short supply, go fight zombies to make money");else{t.coin-=e.buyGold;let i=e.icon;a.addBuyCount(l.EnumBuy.COIN,e.level),s.default.instance.event(o.default.SHOP_BUY_SUCCESS,[e.level,i]),this.refreshPrice()}}diamondBuy(e){let t=r.default.getData(u.default),a=r.default.getData(d.default);if(t.diamond<e.buyDiamond)i.default.show("Diamond Shortage");else{t.diamond-=e.buyDiamond;let i=e.icon;a.addBuyCount(l.EnumBuy.DIAMOND,e.level),s.default.instance.event(o.default.SHOP_BUY_SUCCESS,[e.level,i]),this.refreshPrice()}}refreshPrice(){let e=this._shopData.itemDic.values,t=r.default.instance.getData(d.default);for(let a of e){let e=a.itemData.level,i=t.getBuyCount(l.EnumBuy.COIN,e);a.itemData.buyGold=h.default.getItemCostByCoin(e,i);let n=t.getBuyCount(l.EnumBuy.DIAMOND,e);a.itemData.buyDiamond=h.default.getItemCostByDiamond(e,n),a.refreshPrice()}}}},{"../../common/Notice":57,"../../common/ui/UIStrategyControl":71,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/combine/CombineDefine":81,"../../data/user/UserData":86,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../../network/DataEnum":164,"../freeCoin/FreeCoinTool":210,"../index/tool/CombineTool":241,"./ShopData":284}],283:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./ShopView"),s=e("../../data/GameDataModule"),o=e("../../data/user/UserData"),l=e("../../data/user/UserDataEvent"),r=e("../../common/ui/UIModule"),d=e("./ShopUI"),u=e("../../../base/base/Dictionary"),h=e("./ShopItemData"),c=e("../../../base/base/Pool"),m=e("../../data/combine/CombineData"),p=e("../../data/combine/CombineDefine"),f=e("../../../base/base/MathUtil"),g=e("../../data/combine/CombineEvent"),_=e("./ShopData"),y=e("../../../util/Wechat"),w=e("../../../util/SoundUrl"),v=e("../../../util/BannerAdUtil"),b=e("./ShopTool");a.default=class extends i.default{constructor(){super(...arguments),this._ui=null,this._itemDataArray=null,this._shopData=null,this._diamondChangeCount=0}initialize(){this._diamondChangeCount=0,this._shopData=this.getData(_.default),this._ui=this.getView(n.default).ui,this._ui.btnClose.clickHandler=Laya.Handler.create(this,this.onClose);let e=s.default.getData(o.default);e.on(l.default.COIN_CHANGE,this,this.onCoinChange),e.on(l.default.DIAMOND_CHANGE,this,this.onDiamondChange);let t=s.default.getData(m.default);t.on(g.default.OUTPUT_CHANGE,this,this.onOutputChange),this.onCoinChange(e.coin),this.onDiamondChange(e.diamond),this.onOutputChange(t.coinOutput),this.initList(),v.default.show()}uninitialize(){v.default.hide(),Laya.timer.clear(this,this.scrollToDefault);let e=s.default.getData(o.default);if(e.off(l.default.COIN_CHANGE,this,this.onCoinChange),e.off(l.default.DIAMOND_CHANGE,this,this.onDiamondChange),s.default.getData(m.default).off(g.default.OUTPUT_CHANGE,this,this.onOutputChange),this._ui=null,null!=this._shopData.itemDic){for(let e=0;e<this._shopData.itemDic.values.length;e++)this._shopData.itemDic.values[e].clear();this._shopData.itemDic=null}if(null!=this._itemDataArray){for(let e of this._itemDataArray)c.default.recover(h.default.poolName,e);this._itemDataArray=null}}onClose(){r.default.instance.closeUI(d.default)}onCoinChange(e){this._ui.tfCoin.text=f.default.formatNumber(e),this._ui.tfOutPut.x=this._ui.tfCoin.x+this._ui.tfCoin.textField.textWidth*this._ui.tfCoin.scaleX}onDiamondChange(e){this._diamondChangeCount++>0&&y.default.playSound(w.default.awardDiamond),this._ui.tfDiamond.text=f.default.formatNumber(e)}onOutputChange(e){let t=f.default.formatNumber(e);this._ui.tfOutPut.text="+"+t+"/s"}initList(){this.initShopData(),this._shopData.itemDic=new u.default,this._ui.listShop.vScrollBarSkin="",this._ui.listShop.array=this._itemDataArray,this._ui.listShop.repeatY=this._itemDataArray.length;let e=Laya.Handler.create(this,this.listRender,null,!1);this._ui.listShop.renderHandler=e,Laya.timer.once(10,this,this.scrollToDefault)}listRender(e,t){if(null!=e){let a=e.dataSource;e.setData(a),this._shopData.itemDic.setValue(t,e)}}scrollToDefault(){let e=s.default.instance.getData(m.default),t=this._shopData.itemDic,a=t.keys[t.keys.length-1],i=e.slotMaxLevel+1;for(let e=0;e<t.keys.length;e++){let n=t.keys[e],s=t.getValue(n),o=s.itemData.level;s.itemData.buyType==p.EnumBuy.UNBUY&&o<i&&(a=n)}a-5>=0?a-=5:a=0;let n=Laya.Handler.create(this,this.setStrategyBuy);this._ui.listShop.tweenTo(a,10,n)}initShopData(){this._itemDataArray=b.default.getShopItemDatas(),this.setStrategyBuy()}setStrategyBuy(){let e=0;for(let t of this._itemDataArray)t.buyType==p.EnumBuy.COIN&&t.level>e&&(e=t.level);let t=e-1;if(!(t<0))for(let e of this._itemDataArray)if(e.level==t){e.isStrategy=!0;break}}}},{"../../../base/base/Dictionary":9,"../../../base/base/MathUtil":11,"../../../base/base/Pool":12,"../../../base/mvc/MVCControl":20,"../../../util/BannerAdUtil":316,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/ui/UIModule":70,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/combine/CombineDefine":81,"../../data/combine/CombineEvent":82,"../../data/user/UserData":86,"../../data/user/UserDataEvent":87,"./ShopData":284,"./ShopItemData":286,"./ShopTool":287,"./ShopUI":288,"./ShopView":289}],284:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCData");a.default=class extends i.default{constructor(){super(...arguments),this.itemDic=null}}},{"../../../base/mvc/MVCData":22}],285:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../../base/base/MathUtil"),s=e("../../data/combine/CombineDefine"),o=e("../../../base/base/ColorFilterUtil"),l=e("../../game/GameModule"),r=e("../../game/event/GameEvent"),d=e("../../../util/Wechat"),u=e("../../../util/SoundUrl");a.default=class extends i.ui.shop.ShopItemUI{constructor(){super(),this._itemData=null,this._btnArray=null,this._btnArray=new Array,this.btnBuyCoin.clickHandler=Laya.Handler.create(this,this.onClickBuy,[s.EnumBuy.COIN],!1),this.btnBuyDiamond.clickHandler=Laya.Handler.create(this,this.onClickBuy,[s.EnumBuy.DIAMOND],!1),this.btnVideo.clickHandler=Laya.Handler.create(this,this.onClickBuy,[s.EnumBuy.VIDEO],!1),this._btnArray.push(this.btnBuyCoin),this._btnArray.push(this.btnBuyDiamond),this._btnArray.push(this.btnVideo)}clear(){for(let e of this._btnArray)e.clickHandler&&(e.clickHandler.recover(),e.clickHandler=null)}onClickBuy(e){d.default.playSound(u.default.buyWeapon),l.default.instance.event(r.default.SHOP_BUY,[e,this._itemData])}setData(e){this._itemData=e,this.tfLevel.text=""+e.level,this.tfName.text=e.name,this.imgWeapon.skin=e.icon,this.tfCoin.text=n.default.formatNumber(e.buyGold),this.tfDiamond.text=n.default.formatNumber(e.buyDiamond),this.setBuyType(),this.updateCoinBtnPos(),this.updateDiamondBtnPos(),this._itemData.isStrategy&&this.refreshStrategy(this._itemData.isAd)}refreshPrice(){this.tfCoin.text=n.default.formatNumber(this.itemData.buyGold),this.tfDiamond.text=n.default.formatNumber(this.itemData.buyDiamond),this.updateCoinBtnPos(),this.updateDiamondBtnPos()}refreshStrategy(e){this._itemData.isStrategy&&(this.boxStrategy.visible=!0,this.boxNoStrategy.visible=!1,this.btnVideo.visible=!0,this.clipShareVideo.index=e?1:0)}setBuyType(){this.boxStrategy.visible=!1,this.boxNoStrategy.visible=!0,this.btnBuyCoin.visible=this.itemData.buyType==s.EnumBuy.COIN,this.btnBuyDiamond.visible=this.itemData.buyType==s.EnumBuy.DIAMOND,this.btnUnBuy.visible=this.itemData.buyType==s.EnumBuy.UNBUY,this.imgLock.visible=this.itemData.buyType==s.EnumBuy.UNBUY,this.btnUnBuy.visible?this.imgWeapon.filters=[o.default.getColorFilter(o.EColorFilter.BLACK)]:this.imgWeapon.filters=null}updateCoinBtnPos(){if(this.itemData.buyType==s.EnumBuy.COIN){let e=5-this.tfCoin.text.length;e<0&&(e=0);let t=5*e;0!=this.imgCoin.anchorX&&(this.imgCoin.anchorX=0),0!=this.imgCoin1.anchorX&&(this.imgCoin1.anchorX=0),0!=this.tfCoin.anchorX&&(this.tfCoin.anchorX=0),this.imgCoin1.x=28+t,this.imgCoin.x=36+t,this.tfCoin.x=86+t}}updateDiamondBtnPos(){if(this.itemData.buyType==s.EnumBuy.DIAMOND){let e=5-this.tfDiamond.text.length;e<0&&(e=0),0!=this.imgDiamond.anchorX&&(this.imgDiamond.anchorX=0),0!=this.tfDiamond.anchorX&&(this.tfDiamond.anchorX=0);let t=8*e;this.imgDiamond.x=33+t,this.tfDiamond.x=86+t}}get itemData(){return this._itemData}}},{"../../../base/base/ColorFilterUtil":7,"../../../base/base/MathUtil":11,"../../../ui/layaMaxUI":315,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../data/combine/CombineDefine":81,"../../game/GameModule":88,"../../game/event/GameEvent":122}],286:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../data/combine/CombineDefine");class n{constructor(){this.level=0,this.name="",this.icon="",this.buyGold=0,this.buyDiamond=0,this.buyType=i.EnumBuy.COIN,this.isStrategy=!1,this.isAd=!0}clear(){this.level=0,this.name="",this.icon="",this.buyGold=0,this.buyDiamond=0,this.buyType=i.EnumBuy.COIN,this.isStrategy=!1}destroy(){}}a.default=n,n.poolName="shop_item_data"},{"../../data/combine/CombineDefine":81}],287:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./ShopItemData"),n=e("../../../config/ResGameConfig"),s=e("../../data/GameDataModule"),o=e("../../data/combine/CombineData"),l=e("../index/tool/CombineTool"),r=e("../../data/combine/CombineDefine"),d=e("../../../base/base/Pool");a.default=class{static getShopItemDatas(){let e=new Array,t=n.default.weapons,a=s.default.instance.getData(o.default);for(let s of t){if(s.level>t.length)continue;let o=d.default.get(i.default.poolName,i.default);o.level=s.level,o.name=s.name,o.icon=n.default.getWeaponIcon(s.level);let u=a.getBuyCount(r.EnumBuy.COIN,s.level);o.buyGold=l.default.getItemCostByCoin(s.level,u);let h=a.getBuyCount(r.EnumBuy.DIAMOND,s.level);o.buyDiamond=l.default.getItemCostByDiamond(s.level,h),o.buyType=this.getBuyType(a.slotMaxLevel,o),o.isStrategy=!1,e.push(o)}return e.sort(this.sortFunc),e}static getBuyType(e,t){let a=n.default.getWeapon(e),i=r.EnumBuy.UNBUY;return t.level<=a.diamondBuyUnlockLevel&&(i=r.EnumBuy.DIAMOND),t.level<=a.goldUnlockLevel&&(i=r.EnumBuy.COIN),i}static sortFunc(e,t){let a=e.level,i=t.level,n=0;return a<i&&(n=-1),a>i&&(n=1),n}}},{"../../../base/base/Pool":12,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/combine/CombineDefine":81,"../index/tool/CombineTool":241,"./ShopItemData":286}],288:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./ShopView"),o=e("./ShopControl"),l=e("./ShopBuyControl"),r=e("./ShopData");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.addData(r.default),this.addView(s.default),this.addControl(o.default),this.addControl(l.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./ShopBuyControl":282,"./ShopControl":283,"./ShopData":284,"./ShopView":289}],289:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../../ui/layaMaxUI"),s=e("../../common/TweenTool"),o=e("../../../base/base/ColorFilterUtil");a.default=class extends i.default{constructor(){super(n.ui.shop.ShopViewUI)}initialize(){super.initialize(),this.ui.zOrder=950,this.ui.tfOutPut.filters=[o.default.getOutPutFilter()],Laya.timer.callLater(this,this.showTween)}uninitialize(){Laya.Tween.clearAll(this.ui.boxMain),Laya.Tween.clearAll(this.ui.btnClose),super.uninitialize()}showTween(){let e=this.ui.boxMain;s.default.ScaleUpOut(e);let t=this._ui.btnClose;t.left=-100;let a=Laya.Ease.backOut;Laya.Tween.to(t,{left:0},400,a,null,0,!0,!0)}}},{"../../../base/base/ColorFilterUtil":7,"../../../ui/layaMaxUI":315,"../../common/TweenTool":59,"../../common/ui/UIView":74}],290:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("../../../config/ResGameConfig"),s=e("../../common/ui/UIModule"),o=e("./TalkUI"),l=e("./TalkView"),r=e("./TalkOpenParam"),d=e("../common/HtmlTool");a.default=class extends i.default{constructor(){super(...arguments),this._index=0,this._talkConfig=null}initialize(){let e=this.getData(r.default);this._talkConfig=n.default.getTalk(e.id),this._index=0,Laya.timer.once(3e3,this,this.onClick),Laya.stage.on(Laya.Event.CLICK,this,this.onClick);let t=this.getView(l.default).ui;t.tfMsg.style.width=370,t.tfMsg.style.height=120,t.tfMsg.style.leading=10,t.tfMsg.style.align="left",t.tfMsg.style.valign="middle",this.showMsg()}uninitialize(){Laya.timer.clear(this,this.onClick),Laya.stage.off(Laya.Event.CLICK,this,this.onClick)}onClick(){this._index++,Laya.timer.once(3e3,this,this.onClick),this.showMsg()}showMsg(){if(null==this._talkConfig||this._index>=this._talkConfig.talk.length)s.default.instance.closeUI(o.default);else{let e=this.getView(l.default).ui,t=this._talkConfig.talk[this._index];e.imgAvatar.skin="index/"+t.avatar+".png",e.tfMsg.innerHTML=d.default.format(t.msg),e.tfMsg.y=702+(120-e.tfMsg.contextHeight)/2}}}},{"../../../base/mvc/MVCControl":20,"../../../config/ResGameConfig":50,"../../common/ui/UIModule":70,"../common/HtmlTool":191,"./TalkOpenParam":291,"./TalkUI":292,"./TalkView":293}],291:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIBaseData");a.default=class extends i.default{constructor(){super(...arguments),this.id=0}}},{"../../common/ui/UIBaseData":66}],292:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIType"),n=e("../../common/ui/UIable"),s=e("./TalkOpenParam"),o=e("./TalkView"),l=e("./TalkControl");a.default=class extends n.default{constructor(){super(i.EUIType.DIALOG),this.setOpenParam(s.default),this.addView(o.default),this.addControl(l.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./TalkControl":290,"./TalkOpenParam":291,"./TalkView":293}],293:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIDialogView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.common.TalkDialogUI)}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIDialogView":68}],294:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./TurnView"),s=e("./TurnData");a.default=class extends i.default{constructor(){super(...arguments),this._ui=null,this._data=null,this._turnItems=null}initialize(){this._data=this.getData(s.default);let e=this.getView(n.default);this._turnItems=e.turnItems,this._ui=e.ui,this._ui.boxTips.on(Laya.Event.CLICK,this,this.onClickTip),this._ui.cbTip.selected=!1,Laya.timer.once(400,this,this.onClickTip)}uninitialize(){Laya.timer.clear(this,this.onClickTip),this._ui.boxTips.off(Laya.Event.CLICK,this,this.onClickTip),this._data=null,this._turnItems=null,this._ui=null}onClickTip(){if(this._ui.cbTip.selected=!this._ui.cbTip.selected,this.getView(n.default).setBtnText(),this._ui.animTip1.play(0,!1),this._ui.imgTip2.visible=this._ui.cbTip.selected,this._ui.imgTip3.visible=this._ui.cbTip.selected,this._ui.imgTipShdow2.visible=this._ui.cbTip.selected,this._ui.imgTipShdow3.visible=this._ui.cbTip.selected,this._ui.cbTip.selected){this._ui.animTip2.play(0,!1),this._ui.animTip3.play(0,!1);let e=this._data.getSelectIndexs(this._turnItems.length,this._ui.cbTip.selected);for(let t of e)this._turnItems[t].playTipItemAnim()}else this._ui.animTip2.gotoAndStop(0),this._ui.animTip3.gotoAndStop(0),this._turnItems[this._data.tagetIndex].playTipItemAnim()}}},{"../../../base/mvc/MVCControl":20,"./TurnData":296,"./TurnView":301}],295:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIStrategyControl"),n=e("../../network/DataEnum"),s=e("./TurnView"),o=e("../result/data/AwardType"),l=e("../../../base/base/MathUtil"),r=e("../../../config/ResGameConfig"),d=e("./TurnItemData"),u=e("./TurnTool"),h=e("../../../base/base/Pool"),c=e("../../common/ui/UIModule"),m=e("./TurnUI"),p=e("../../common/Notice"),f=e("../../../util/Wechat"),g=e("../result/data/AwardItemData"),_=e("../../data/GameDataModule"),y=e("../../data/combine/CombineData"),w=e("../../game/GameModule"),v=e("../../game/event/GameEvent"),b=e("../../../base/math/WeightRandom"),I=e("../../data/combine/CombineDefine"),x=e("../index/tool/CombineTool"),M=e("../../data/user/UserData"),L=e("./TurnData"),C=e("../../../util/SoundUrl"),D=e("../../../util/BannerAdUtil");a.default=class extends i.default{constructor(){super(...arguments),this._ui=null,this._turnItemDatas=null,this._aldKey="Turn",this._weightRandom=null,this._turnItems=null,this._data=null}initialize(){super.initialize(),this._data=this.getData(L.default),this._weightRandom=new b.default;let e=this.getView(s.default);this._turnItems=e.turnItems,this._ui=e.ui,this._ui.btnGet.on(Laya.Event.CLICK,this,this.onClickTurn),this._ui.btnClose.on(Laya.Event.CLICK,this,this.onClickClose),this.setItemMsg(),_.default.getData(y.default).airDropLock=!0;let t=_.default.instance.getData(M.default);e.setBtnDisabled(!t.getIsTurn()),Laya.timer.once(2e3,this,this.onShowTalkLeft),D.default.instance.on(Laya.Event.RESIZE,this,this.onBannerResize),this.onBannerResize(),D.default.show()}uninitialize(){if(D.default.hide(),D.default.instance.off(Laya.Event.RESIZE,this,this.onBannerResize),Laya.timer.clear(this,this.onShowTalkLeft),_.default.getData(y.default).airDropLock=!1,Laya.timer.clear(this,this.getAward),this._ui.btnGet.off(Laya.Event.CLICK,this,this.onClickTurn),this._ui.btnClose.off(Laya.Event.CLICK,this,this.onClickClose),null!=this._turnItemDatas){for(let e of this._turnItemDatas)h.default.recover(d.default.poolName,e);this._turnItemDatas.splice(0,this._turnItemDatas.length),this._turnItemDatas=null}this._turnItems=null,this._weightRandom=null,this._ui=null,super.uninitialize()}get payId(){return n.EnumPayID.Turn}onRefreshStrategy(e){}onPaySuccess(e){this.startTurn()}onPayFail(e){}onClickClose(){c.default.instance.closeUI(m.default)}onClickTurn(){this._ui.cbTip.selected?this.pay(this._aldKey):this.startTurn()}setItemMsg(){this._turnItemDatas=u.default.getTurnAward(),r.default.turns;for(let e=0;e<this._turnItems.length;e++)this._turnItems[e].setData(this._turnItemDatas[e])}setWeight(){let e=new Array,t=new Array;for(let a=0;a<this._turnItemDatas.length;a++)e.push(a),this._ui.cbTip.selected?t.push(this._turnItemDatas[a].weightVideo):t.push(this._turnItemDatas[a].weight);this._weightRandom.setData(e,t)}startTurn(){let e=this.getView(s.default);e.turnLight(),_.default.instance.getData(M.default).turnCount++,_.default.instance.markSync(),this.stopSelectAnim(),e.setBtnDisabled(!0),e.ui.btnClose.disabled=!0,this.setWeight(),this.turnTweenStart(),f.default.playSound(C.default.Turn,!1),this._ui.aniTalkRight.play(0,!1)}turnTweenStart(){let e=this.getView(s.default);this._ui.imgTrunBg.rotation=this._ui.imgTrunBg.rotation%360,this._data.tagetIndex=this._weightRandom.random();let t=360-this._turnItems[this._data.tagetIndex].rotation+360*l.default.randomInt(3,4);t<0&&(t+=360);let a=t,i=Laya.Ease.quadInOut,n={rotation:a},o=Laya.Handler.create(this,this.turnEnd),r=e.ui.imgTrunBg;Laya.Tween.to(r,n,4e3,i,o,0,!0,!0)}turnEnd(){this.playSelectAnim(),Laya.timer.once(1e3,this,this.getAward)}getAward(){this.getView(s.default);let e=_.default.instance.getData(y.default),t=e.getAllSlots(),a=this.getAwardDataArray(),i=0,n=!1;for(let s of a)if(s.type==o.EAwardType.WEAPON)if(i<t.length)s.slotIndex=t[i++];else{s.type=o.EAwardType.COIN,s.icon=this.getWeaponReplaceIcon();let t=e.getBuyCount(I.EnumBuy.COIN,s.weaponLevel);s.count=x.default.getItemCostByCoin(s.weaponLevel,t),n=!0}n&&p.default.show("When the grid is full, the gun is converted into gold coins"),w.default.instance.event(v.default.TURN_AWARD_GET,[a]),this.onClickClose()}getWeaponReplaceIcon(){let e="";for(let t of this._turnItems)t.turnItemData.type==o.EAwardType.WEAPON&&(e=t.turnItemData.replaceIcon);return e}getAwardDataArray(){let e=new Array,t=this._data.getSelectIndexs(this._turnItems.length,this._ui.cbTip.selected);for(let a of t){let t=this.getAwardData(this._turnItems[a]);e.push(t)}return e}getAwardData(e){let t=h.default.get(g.default.poolName,g.default);t.icon=e.turnItemData.icon,t.count=e.turnItemData.count,t.type=e.turnItemData.type,t.weaponLevel=e.turnItemData.weaponLevel,e.turnItemData.type==o.EAwardType.WEAPON&&(t.weaponName=r.default.getWeapon(e.turnItemData.weaponLevel).name,t.slotIndex=-1);let a=h.default.getPoint();return a.x=.5*e.imgIcon.width,a.y=.5*e.imgIcon.height,a=e.imgIcon.localToGlobal(a,!1),t.stagePos=a,t}playSelectAnim(){let e=this._data.getSelectIndexs(this._turnItems.length,this._ui.cbTip.selected);for(let t of e)this._turnItems[t].playSelect()}stopSelectAnim(){for(let e=0;e<this._turnItems.length;e++)this._turnItems[e].stopSelect()}onShowTalkLeft(){null!=this._ui&&this._ui.aniTalkLeft.play(0,!1)}onBannerResize(){if(null!=this._ui&&D.default.bannerAdY>0){let e=2*this._ui.boxTips.height;f.default.isOnIPhoneX()&&(e+=80),this._ui.boxTips.y=D.default.bannerAdY-e,this._ui.btnGet.y=this._ui.boxTips.y-90,this._ui.boxMain.y=this._ui.btnGet.y-475}}}},{"../../../base/base/MathUtil":11,"../../../base/base/Pool":12,"../../../base/math/WeightRandom":17,"../../../config/ResGameConfig":50,"../../../util/BannerAdUtil":316,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/Notice":57,"../../common/ui/UIModule":70,"../../common/ui/UIStrategyControl":71,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/combine/CombineDefine":81,"../../data/user/UserData":86,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../../network/DataEnum":164,"../index/tool/CombineTool":241,"../result/data/AwardItemData":268,"../result/data/AwardType":269,"./TurnData":296,"./TurnItemData":298,"./TurnTool":299,"./TurnUI":300,"./TurnView":301}],296:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCData");a.default=class extends i.default{constructor(){super(...arguments),this.tagetIndex=0,this._selects=null,this.turnItems=null}initialize(){this._selects=new Array,this.turnItems=new Array}uninitialize(){this.turnItems.splice(0,this.turnItems.length),this.turnItems=null,this._selects.splice(0,this._selects.length),this._selects=null}getSelectIndexs(e,t){if(this._selects.splice(0,this._selects.length),this._selects.push(this.tagetIndex),t){let t=this.tagetIndex-1,a=this.tagetIndex+1;t<0&&(t+=e),a>=e&&(a-=e),this._selects.push(t),this._selects.push(a)}return this._selects}}},{"../../../base/mvc/MVCData":22}],297:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../result/data/AwardType"),s=e("../../../base/base/MathUtil");a.default=class extends i.ui.turn.TrunItemUI{constructor(){super(...arguments),this._turnItemData=null}setData(e){switch(this._turnItemData=e,this.imgLightGet.visible=!1,e.type){case n.EAwardType.WEAPON:this.tfLevel.text="Lv."+e.weaponLevel,this.imgIcon.scale(.8,.8);break;case n.EAwardType.COIN:this.tfLevel.text=s.default.formatNumber(e.count)+"Gold",this.imgIcon.scale(e.scaleValue,e.scaleValue);break;case n.EAwardType.DIAMOND:this.tfLevel.text=s.default.formatNumber(e.count)+"Diamond",this.imgIcon.scale(e.scaleValue,e.scaleValue)}this.imgIcon.skin=e.icon}playSelect(){this.imgLightGet.visible=!0,this.animSelect.play(0,!0)}stopSelect(){this.animSelect.gotoAndStop(0),this.imgLightGet.visible=!1}playTipItemAnim(){this.imgLightGet.visible=!0,this.animSelect.play(0,!1)}get turnItemData(){return this._turnItemData}}},{"../../../base/base/MathUtil":11,"../../../ui/layaMaxUI":315,"../result/data/AwardType":269}],298:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCData"),n=e("../result/data/AwardType");class s extends i.default{constructor(){super(...arguments),this.icon="",this.count=0,this.replaceIcon="",this.type=n.EAwardType.NONE,this.posIndex=-1,this.weaponLevel=0,this.weight=0}clear(){super.clear(),this.icon="",this.count=0,this.type=n.EAwardType.NONE,this.posIndex=-1,this.weaponLevel=0,this.weight=0,this.replaceIcon="",this.scaleValue=0,this.weightVideo=0}}a.default=s,s.poolName="turn_item_data"},{"../../../base/mvc/MVCData":22,"../result/data/AwardType":269}],299:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../config/ResGameConfig"),n=e("../../../base/base/Pool"),s=e("../../data/GameDataModule"),o=e("../../data/combine/CombineData"),l=e("../result/data/AwardType"),r=e("./TurnItemData"),d=e("../../data/combine/CombineDefine"),u=e("../index/tool/CombineTool"),h=e("../shop/ShopTool");a.default=class{static getTurnAward(){let e=new Array,t=new Array,a=i.default.turns,n=this.getShopMaxCoinBuyWeaponPrice();for(let i of a)switch(i.type){case l.EAwardType.WEAPON:t.push(this.getWeaponAward(i));break;case l.EAwardType.COIN:e.push(this.getCoinAward(n,i));break;case l.EAwardType.DIAMOND:e.push(this.getDiamondAward(i))}let r=s.default.instance.getData(o.default),h=r.slots,c=0;for(let e=0;e<h.length;e++)h[e]<=0&&c++;let m=t.length-c;for(let e=0;e<t.length;e++)if(e<m){let a=t[e];a.type=l.EAwardType.COIN,a.icon=a.replaceIcon;let i=r.getBuyCount(d.EnumBuy.COIN,a.weaponLevel);i<1&&(i=0),a.count=Math.floor(u.default.getItemCostByCoin(a.weaponLevel,i))}let p=e.concat(t);return p.sort(this.sortByPos),p}static getShopMaxCoinBuyWeaponPrice(){let e=h.default.getShopItemDatas(),t=0,a=0;for(let i of e)i.buyType==d.EnumBuy.COIN&&i.level>t&&(t=i.level,a=i.buyGold);return a}static getWeaponAward(e){let t=s.default.instance.getData(o.default).slotMaxLevel,a=n.default.get(r.default.poolName,r.default),d=t-e.factor;return d<=0&&(d=1),a.icon=i.default.getWeaponIcon(d),a.weaponLevel=d,a.type=l.EAwardType.WEAPON,a.posIndex=e.posIndex,a.weight=e.weight,a.replaceIcon="index/"+e.skin+".png",a.scaleValue=e.scaleValue,a.weightVideo=e.weightVideo,a}static getCoinAward(e,t){let a=n.default.get(r.default.poolName,r.default);return a.count=Math.floor(e*t.factor),a.icon="index/"+t.skin+".png",a.type=l.EAwardType.COIN,a.weight=t.weight,a.scaleValue=t.scaleValue,a.weightVideo=t.weightVideo,a.posIndex=t.posIndex,a}static getDiamondAward(e){let t=s.default.instance.getData(o.default),a=t.slotMaxLevel,i=n.default.get(r.default.poolName,r.default),h=t.getBuyCount(d.EnumBuy.DIAMOND,a);return i.count=Math.floor(u.default.getItemCostByDiamond(a,h)*e.factor),i.count<10&&(i.count=10),i.icon="index/"+e.skin+".png",i.type=l.EAwardType.DIAMOND,i.weight=e.weight,i.scaleValue=e.scaleValue,i.weightVideo=e.weightVideo,i.posIndex=e.posIndex,i}static sortByPos(e,t){let a=0;return e.posIndex<t.posIndex&&(a=-1),e.posIndex>t.posIndex&&(a=1),a}}},{"../../../base/base/Pool":12,"../../../config/ResGameConfig":50,"../../data/GameDataModule":77,"../../data/combine/CombineData":80,"../../data/combine/CombineDefine":81,"../index/tool/CombineTool":241,"../result/data/AwardType":269,"../shop/ShopTool":287,"./TurnItemData":298}],300:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./TurnView"),o=e("./TurnControl"),l=e("./TurnAnimControl"),r=e("./TurnData");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.addData(r.default),this.addView(s.default),this.addControl(o.default),this.addControl(l.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./TurnAnimControl":294,"./TurnControl":295,"./TurnData":296,"./TurnView":301}],301:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../../ui/layaMaxUI"),s=e("../../common/TweenTool");a.default=class extends i.default{constructor(){super(n.ui.turn.TurnUI),this.turnItems=null,this.perItemAngle=9,this.lights=null,this._isLightOn=!0}initialize(){super.initialize(),this.ui.zOrder=999,this.turnItems=new Array,this.lights=new Array,this.perItemAngle=45;for(let e=0;e<8;e++){let t="turnItem"+e,a=this.ui.imgTrunBg.getChildByName(t);a&&(a.rotation=e*this.perItemAngle,this.turnItems.push(a))}for(let e=0;e<8;e++){let t="imgLight"+e,a=this.ui.boxMain.getChildByName(t);a&&this.lights.push(a)}Laya.timer.callLater(this,this.showTween)}uninitialize(){Laya.timer.clear(this,this.loopLight),Laya.timer.clearAll(this.ui.boxMain),Laya.timer.clearAll(this.ui.btnClose),Laya.timer.clearAll(this.ui.boxTips),Laya.timer.clearAll(this.ui.btnGet),this.turnItems.splice(0,this.turnItems.length),this.turnItems=null,this.lights.splice(0,this.lights.length),this.lights=null,super.uninitialize()}showTween(){s.default.ScaleUpOut(this.ui.boxMain),s.default.ScaleUpOut(this.ui.btnClose),s.default.ScaleUpOut(this.ui.boxTips),s.default.ScaleUpOut(this.ui.btnGet),this.normalLight()}turnLight(){Laya.timer.clear(this,this.loopLight),this.loopLight(),Laya.timer.loop(100,this,this.loopLight)}normalLight(){Laya.timer.clear(this,this.loopLight),this.loopLight(),Laya.timer.loop(500,this,this.loopLight)}loopLight(){for(let e=0;e<this.lights.length;e++){let t=this.lights[e];e%2==0?this.setLight(this._isLightOn,t):this.setLight(!this._isLightOn,t)}this._isLightOn=!this._isLightOn}setLight(e,t){t.skin=e?"activity/img_light_on.png":"activity/img_light_off.png"}setBtnText(){this._ui.cbTip.selected?this._ui.tfGet.text="Draw 3 at a time":this._ui.tfGet.text="Only draw 1 time",this._ui.imgTip2.visible=this._ui.cbTip.selected,this._ui.imgTip3.visible=this._ui.cbTip.selected}setBtnDisabled(e){this._ui.btnGet.disabled=e,this._ui.boxTips.disabled=e}}},{"../../../ui/layaMaxUI":315,"../../common/TweenTool":59,"../../common/ui/UIView":74}],302:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./UnlockFuncView"),s=e("../../common/ui/UIUtil"),o=e("../index/IndexUI"),l=e("../../common/ui/UIModule"),r=e("./UnlockFuncUI");a.default=class extends i.default{initialize(){this.getView(n.default).ui.btnSure.clickHandler=Laya.Handler.create(this,this.onClose)}uninitialize(){}onClose(){let e=this.getView(n.default).ui,t=new Laya.Image;t.skin=e.imgIcon.skin,t.zOrder=1e3;let a=new Laya.Point;a=e.imgIcon.localToGlobal(a),t.x=a.x,t.y=a.y;let i=o.default.getBonusPos();s.default.addToStage(t),Laya.Tween.to(t,{x:i.x,y:i.y},200,null,Laya.Handler.create(null,()=>{t.destroy(),t=null}),100),l.default.instance.closeUI(r.default)}}},{"../../../base/mvc/MVCControl":20,"../../common/ui/UIModule":70,"../../common/ui/UIUtil":73,"../index/IndexUI":228,"./UnlockFuncUI":304,"./UnlockFuncView":305}],303:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIBaseData");var n;!function(e){e[e.BONUS=0]="BONUS"}(n=a.EnumFunc||(a.EnumFunc={}));a.default=class extends i.default{constructor(){super(...arguments),this.type=n.BONUS}}},{"../../common/ui/UIBaseData":66}],304:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./UnlockFuncOpenParam"),o=e("./UnlockFuncView"),l=e("./UnlockFuncControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(s.default),this.addView(o.default),this.addControl(l.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./UnlockFuncControl":302,"./UnlockFuncOpenParam":303,"./UnlockFuncView":305}],305:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.index.UnlockFuncViewUI)}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIView":74}],306:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../util/Wechat"),n=e("./UnlockParam"),s=e("./UnlockView"),o=e("../../data/GameDataModule"),l=e("../../data/user/UserData"),r=e("../../common/ui/UIModule"),d=e("../../game/GameModule"),u=e("../../game/event/GameEvent"),h=e("../../../base/base/Pool"),c=e("../index/IndexUI"),m=e("../../common/AwardEffect"),p=e("../index/view/IndexView"),f=e("../../common/ui/UIStrategyControl"),g=e("../../network/DataEnum");a.default=class extends f.default{constructor(){super(...arguments),this._aldKey="Unlock"}initialize(){let e=this.getData(n.default),t=this.getView(s.default).ui;e.isPay?super.initialize():t.clipPay.visible=!1,t.btnPay.clickHandler=Laya.Handler.create(this,this.onClickGet,null,!1),t.tfGiveUp.on(Laya.Event.CLICK,this,this.onClickClose),Laya.timer.callLater(this,this.showGiveUp),Laya.timer.callLater(this,this.setNewWeaponMsg)}uninitialize(){Laya.timer.clear(this,this.setGiveUpVisible),this.clearHandler(),super.uninitialize()}clearHandler(){let e=this.getView(s.default).ui;e.tfGiveUp.off(Laya.Event.CLICK,this,this.onClickClose),null!=e.btnPay.clickHandler&&(e.btnPay.clickHandler.recover(),e.btnPay.clickHandler=null)}get payId(){return g.EnumPayID.Unlock}onRefreshStrategy(e){let t=this.getView(s.default).ui;t.clipPay.index=e?1:0,o.default.instance.getData(l.default).isUnlockNew?(t.clipPay.visible=!1,t.tfGiveUp.visible=!1):t.tfGiveUp.visible=!1}onPaySuccess(e){this.getAward()}onPayFail(e){}onClickGet(){let e=this.getData(n.default);2==e.weaponLevel&&i.default.logEvent(" 解锁2级枪支：点击领取奖励"),e.isPay?this.pay(this._aldKey):this.getAward()}onClickClose(){let e=this.getData(n.default);d.default.instance.event(u.default.UNLOCK_GET_FAIL,[e.weaponLevel]),this.clearHandler(),this.getView(s.default).hideTween()}getAward(){this.playGetAnim();let e=this.getData(n.default);o.default.instance.getData(l.default).diamond+=e.awardDiamond;let t=this.getView(s.default).ui,a=t.imgWeapon,i=new Laya.Point(.5*a.width,.5*a.height);t.imgWeapon.localToGlobal(i,!1);let r=t.imgWeapon.rotation;d.default.instance.event(u.default.UNLOCK_GET_SUCCESS,[i,e.newWeaponIcon,e.weaponLevel,r]),this.clearHandler(),this.getView(s.default).hideTween()}playGetAnim(){let e=r.default.instance.getUI(c.default);if(null!=e){let t=e.getView(p.default).getDiamondPos();t.y=t.y+20;let a=this.getView(s.default).ui,i=h.default.getPoint();i.x=a.btnPay.x,i.y=a.btnPay.y,a.boxMain.localToGlobal(i,!1);let n=Laya.Handler.create(c.default,c.default.playDiamondAnimation);m.default.createAwardEffect(i,t,!0,null,!1,n)}}setNewWeaponMsg(){let e=this.getData(n.default),t=this.getView(s.default).ui;t.imgWeapon.skin="",t.imgRadar.skin="",t.imgLeft.skin="",t.imgRight.skin="",t.tfMsg.text="Lv."+e.weaponLevel+"  "+e.weaponName,t.tfDiamond.text=e.awardDiamond+"",Laya.loader.load(e.newWeaponIcon,Laya.Handler.create(this,this.weaponIconLoaded)),Laya.loader.load(e.radarIcon,Laya.Handler.create(this,this.radarIconLoaded)),Laya.loader.load(e.oldWeaponIcon,Laya.Handler.create(this,this.oldWeaponIconLoaded))}oldWeaponIconLoaded(e){let t=this.getView(s.default);if(null!=t){let e=this.getData(n.default);t.ui.imgLeft.skin=e.oldWeaponIcon,t.ui.imgRight.skin=e.oldWeaponIcon}}weaponIconLoaded(e){let t=this.getView(s.default);if(null!=t){let e=this.getData(n.default);t.ui.imgWeapon.skin=e.newWeaponIcon}}radarIconLoaded(e){let t=this.getView(s.default);if(null!=t){let e=this.getData(n.default);t.ui.imgRadar.skin=e.radarIcon}}showGiveUp(){let e=this.getData(n.default);this.setGiveUpVisible(!1),e.isPay&&Laya.timer.once(3e3,this,this.setGiveUpVisible,[!0])}setGiveUpVisible(e){this.getView(s.default).ui.tfGiveUp.visible=e}}},{"../../../base/base/Pool":12,"../../../util/Wechat":324,"../../common/AwardEffect":53,"../../common/ui/UIModule":70,"../../common/ui/UIStrategyControl":71,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../game/GameModule":88,"../../game/event/GameEvent":122,"../../network/DataEnum":164,"../index/IndexUI":228,"../index/view/IndexView":243,"./UnlockParam":308,"./UnlockView":310}],307:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../game/effect/HandEffect"),n=e("../../../base/base/Pool"),s=e("../../../base/mvc/MVCControl"),o=e("../../data/GameDataModule"),l=e("../../data/user/UserData"),r=e("./UnlockView");a.default=class extends s.default{constructor(){super(...arguments),this._handStartPoint=null,this._handEndPoint=null,this._curHandEffect=null}initialize(){this._handEndPoint=n.default.getPoint(),this._handStartPoint=n.default.getPoint(),Laya.timer.once(1e3,this,this.tryGuide)}uninitialize(){Laya.timer.clear(this,this.tryGuide),n.default.recoverPoint(this._handStartPoint),n.default.recoverPoint(this._handEndPoint),this.clearHand()}clearHand(){null==this._curHandEffect||this._curHandEffect.isRecover||(this._curHandEffect.recover(),this._curHandEffect=null)}tryGuide(){let e=o.default.instance.getData(l.default);if(e.isUnlockNew){e.isUnlockNew=!1;let t=this.getView(r.default).ui.btnPay;this._handEndPoint.x=t.x,this._handEndPoint.y=t.y-80,this._handStartPoint.x=t.x,this._handStartPoint.y=t.y-180,this.clearHand(),this._curHandEffect=i.default.createHand(i.EnumHandClick.AFTER,t.parent,180,this._handStartPoint,this._handEndPoint,-1,500,null)}}}},{"../../../base/base/Pool":12,"../../../base/mvc/MVCControl":20,"../../data/GameDataModule":77,"../../data/user/UserData":86,"../../game/effect/HandEffect":121,"./UnlockView":310}],308:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCData");a.default=class extends i.default{constructor(){super(...arguments),this.newWeaponIcon="",this.weaponName="",this.weaponLevel=0,this.awardDiamond=0,this.radarIcon="",this.isPay=!1,this.oldWeaponIcon=""}}},{"../../../base/mvc/MVCData":22}],309:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./UnlockParam"),o=e("./UnlockView"),l=e("./UnlockControl"),r=e("./UnlockGuideControl");a.default=class extends i.default{constructor(){super(n.EUIType.VIEW),this.setOpenParam(s.default),this.addView(o.default),this.addControl(l.default),this.addControl(r.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./UnlockControl":306,"./UnlockGuideControl":307,"./UnlockParam":308,"./UnlockView":310}],310:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../ui/layaMaxUI"),n=e("../../common/ui/UIView"),s=e("../../common/TweenTool"),o=e("../../common/ui/UIModule"),l=e("./UnlockUI"),r=e("../../../util/Wechat"),d=e("../../../util/SoundUrl"),u=e("../../common/LightEffect");a.default=class extends n.default{constructor(){super(i.ui.game.UnlockUI),this._light=null}initialize(){super.initialize(),r.default.playSound(d.default.weaponLevelUp),this._ui.zOrder=950,Laya.timer.callLater(this,this.showTween),this.createLight(),this._light.alpha=0}uninitialize(){Laya.timer.clear(this,this.showWeaponName),Laya.Tween.clearAll(this.ui.boxRadar),Laya.timer.clear(this,this.showBtn),Laya.Tween.clearAll(this.ui.btnPay),Laya.Tween.clearAll(this._light),Laya.timer.clear(this,this.showCombine),Laya.Tween.clearAll(this.ui.imgLeft),Laya.Tween.clearAll(this.ui.imgRight),Laya.Tween.clearAll(this.ui.imgWeapon),Laya.Tween.clearAll(this.ui.imgWeapon),Laya.Tween.clearAll(this.ui.imgBg),Laya.Tween.clearAll(this.ui.imgTitle),Laya.Tween.clearAll(this.ui.boxMain),this.removeLight(),super.uninitialize()}createLight(){null==this._light&&(this._light=new u.default,this._light.anchorX=.5,this._light.anchorY=.5,this.ui.boxMain.addChild(this._light),this._light.x=this.ui.imgWeapon.x,this._light.y=this.ui.imgWeapon.y,this._light.initImg(),this._light.playAnim(),this.ui.imgWeapon.zOrder=this._light.zOrder+1)}removeLight(){null!=this._light&&(this._light.removeSelf(),this._light.destroy(),this._light=null)}showTween(){this.ui.imgNameBg.visible=!1,this.ui.tfMsg.visible=!1,this.fadeInBg(0),this.pressDownTitle(0),this.showBoxMain(0),this.ui.btnPay.visible=!1,Laya.timer.once(1e3,this,this.showBtn)}showBtn(){let e=this.ui.btnPay;e.visible=!0,s.default.PosMoveUpOut(e)}fadeInBg(e){let t=this.ui.imgBg;t.alpha=0;let a=Laya.Ease.circOut;Laya.Tween.to(t,{alpha:.8},200,a,null,e,!0,!0)}pressDownTitle(e){let t=this.ui.imgTitle;t.scale(2,2),t.alpha=0;let a=Laya.Ease.linearNone;Laya.Tween.to(t,{alpha:1,scaleX:1,scaleY:1},150,a,null,e,!0,!0);let i=Laya.Ease.linearNone;Laya.Tween.to(t,{scaleX:1.1,scaleY:1.1},80,i,null,e+150,!1,!0),Laya.Tween.to(t,{scaleX:1,scaleY:1},80,i,null,e+150+80,!1,!0)}showBoxMain(e){let t=this.ui.boxMain;t.alpha=1,s.default.ScaleUpOut(t,null,200,e),this.ui.imgLeft.visible=!1,this.ui.imgRight.visible=!1,this.ui.imgWeapon.alpha=0,this.ui.boxRadar.alpha=0,Laya.timer.once(e+100,this,this.showCombine)}showCombine(){let e=this.ui.imgWeapon;this.ui.imgLeft.visible=!0,this.ui.imgRight.visible=!0,this.ui.imgLeft.x=74,this.ui.imgRight.x=496;let t={x:e.x,y:e.y},a=Laya.Ease.backIn,i=Laya.Handler.create(this,this.combineOver);Laya.Tween.to(this.ui.imgLeft,t,500,a,null,200,!0,!0),Laya.Tween.to(this.ui.imgRight,t,500,a,i,200,!0,!0),this.showWeapon(700)}combineOver(){this.ui.imgLeft.visible=!1,this.ui.imgRight.visible=!1}showWeapon(e){let t=this.ui.imgWeapon;t.scale(1,1);let a=Laya.Ease.linearNone;Laya.Tween.to(t,{scaleX:1.5,scaleY:1.5,alpha:1},150,a,null,e,!1,!0),Laya.Tween.to(t,{scaleX:1,scaleY:1},150,a,null,e+150,!1,!0);let i={scaleX:1,scaleY:1,alpha:1};Laya.Tween.to(this._light,i,150,a,null,e,!1,!0),Laya.Tween.to(this._light,{scaleX:0,scaleY:0,alpha:0},150,a,null,e+300+300,!1,!0);let n=Laya.Handler.create(this,this.showWeaponOver);Laya.Tween.to(this.ui.boxRadar,i,150,a,n,e,!1,!0)}showWeaponOver(){Laya.timer.once(300,this,this.showWeaponName)}showWeaponName(){this.ui.imgNameBg.visible=!0,this.ui.tfMsg.visible=!0}hideTween(){let e=this.ui.imgBg;e.alpha=.8;let t={alpha:0},a=this.ui.imgTitle;a.alpha=1;let i=this.ui.boxMain;i.alpha=1;let n=Laya.Handler.create(this,this.hideTweenOver);Laya.Tween.to(e,t,300,null,null,0,!0,!0),Laya.Tween.to(a,t,300,null,null,0,!0,!0),Laya.Tween.to(i,t,300,null,n,0,!0,!0)}hideTweenOver(){o.default.instance.closeUI(l.default)}}},{"../../../ui/layaMaxUI":315,"../../../util/SoundUrl":323,"../../../util/Wechat":324,"../../common/LightEffect":56,"../../common/TweenTool":59,"../../common/ui/UIModule":70,"../../common/ui/UIView":74,"./UnlockUI":309}],311:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../../base/mvc/MVCControl"),n=e("./ZombieInfoOpenParam"),s=e("./ZombieInfoView"),o=e("../../common/ui/UIModule"),l=e("./ZombieInfoUI"),r=e("../../game/GameModule"),d=e("../../game/state/PauseState");a.default=class extends i.default{initialize(){r.default.instance.pushState(d.default);let e=this.getView(s.default).ui;e.btnSure.clickHandler=Laya.Handler.create(this,this.onSure);let t=this.getData(n.default);e.viewInfo.illustratedId=t.illustratedId}uninitialize(){r.default.instance.popState()}onSure(){o.default.instance.closeUI(l.default)}}},{"../../../base/mvc/MVCControl":20,"../../common/ui/UIModule":70,"../../game/GameModule":88,"../../game/state/PauseState":145,"./ZombieInfoOpenParam":312,"./ZombieInfoUI":313,"./ZombieInfoView":314}],312:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIBaseData");a.default=class extends i.default{constructor(){super(...arguments),this.illustratedId=0}}},{"../../common/ui/UIBaseData":66}],313:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIable"),n=e("../../common/ui/UIType"),s=e("./ZombieInfoView"),o=e("./ZombieInfoOpenParam"),l=e("./ZombieInfoControl");a.default=class extends i.default{constructor(){super(n.EUIType.DIALOG),this.setOpenParam(o.default),this.addView(s.default),this.addControl(l.default)}}},{"../../common/ui/UIType":72,"../../common/ui/UIable":75,"./ZombieInfoControl":311,"./ZombieInfoOpenParam":312,"./ZombieInfoView":314}],314:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../common/ui/UIDialogView"),n=e("../../../ui/layaMaxUI");a.default=class extends i.default{constructor(){super(n.ui.illustrated.ZombieInfoDialogUI),this._showEffect=!1}}},{"../../../ui/layaMaxUI":315,"../../common/ui/UIDialogView":68}],315:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=Laya.ClassUtils.regClass;!function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:503,height:160},compId:2,child:[{type:"Clip",props:{y:16,x:0,var:"clipCurLevel",skin:"index/clip_city.png",index:1,clipX:2},compId:4},{type:"Clip",props:{y:16,x:410,var:"clipNextLevel",skin:"index/clip_city.png",index:0,clipX:2},compId:8},{type:"Image",props:{y:3.5999999999999996,x:115,var:"imgArrow",skin:"index/img_level_arrow.png"},compId:14},{type:"List",props:{y:58,x:113,width:220,var:"listLevel",spaceX:22,repeatY:1,height:46},compId:7,child:[{type:"Clip",props:{skin:"index/clip_level.png",renderType:"render",index:0,clipY:3},compId:6}]},{type:"Label",props:{y:140,x:19,width:110,var:"tfCurLevel",text:"1",scaleY:.5,scaleX:.5,font:"yazi",align:"center"},compId:10},{type:"Label",props:{y:140,x:429,width:110,var:"tfNextLevel",text:"2",scaleY:.5,scaleX:.5,font:"yazi",align:"center"},compId:11},{type:"Label",props:{y:28,x:0,width:190,var:"tfCurLevelName",text:"Center",scaleY:.5,scaleX:.5,font:"yazi",align:"center"},compId:12},{type:"Label",props:{y:28,x:409,width:190,var:"tfNextLevelName",text:"Center",scaleY:.5,scaleX:.5,font:"yazi",align:"center"},compId:13},{type:"Clip",props:{y:38,x:344,var:"clipBoss",skin:"index/clip_boss.png",clipY:3},compId:15}],animations:[{nodes:[{target:14,keyframes:{y:[{value:0,tweenMethod:"quadIn",tween:!0,target:14,key:"y",index:0},{value:10,tweenMethod:"quadOut",tween:!0,target:14,key:"y",index:10},{value:0,tweenMethod:"linearNone",tween:!0,target:14,key:"y",index:20}]}}],name:"aniArrow",id:1,frameRate:24,action:0}],loadList:["index/clip_city.png","index/img_level_arrow.png","index/clip_level.png","index/clip_boss.png"],loadList3D:[]},e.LevelViewUI=t,i("ui.common.LevelViewUI",t);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:600,height:54},compId:2,child:[{type:"Image",props:{width:600,var:"imgBG",skin:"index/img_tips_bg_gird.png",height:54,sizeGrid:"20,40,20,40"},compId:3},{type:"Label",props:{y:12,x:0,width:600,var:"tfNotice",text:"Hint",fontSize:30,font:"Microsoft YaHei",color:"#ffffff",centerX:0,cacheAs:"normal",bold:!0,align:"center"},compId:4}],loadList:["index/img_tips_bg_gird.png"],loadList3D:[]},e.NoticeUI=a,i("ui.common.NoticeUI",a);class n extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"Dialog",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{y:308,x:95,width:560,skin:"index/img_view_frame.png",sizeGrid:"80,10,10,535",height:750},compId:4},{type:"Image",props:{y:264,x:226,skin:"index/img_reward_title.png"},compId:5},{type:"Image",props:{y:623,x:374,skin:"index/img_light.png",rotation:360,anchorY:.5,anchorX:.5},compId:9},{type:"Image",props:{y:632,x:375,skin:"index/img_diamonds_big.png",anchorY:.5,anchorX:.5},compId:8},{type:"Image",props:{y:777,x:319,width:137,skin:"index/img_coin_bg.png",sizeGrid:"10,40,10,40",height:49},compId:15},{type:"Image",props:{y:803,x:318,skin:"index/img_dimond.png",anchorY:.5,anchorX:.5},compId:16},{type:"Button",props:{y:924,x:375,var:"btnGet",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelSize:50,labelFont:"Arial",labelAlign:"center",anchorY:.5,anchorX:.5},compId:10,child:[{type:"Label",props:{y:28,x:111,var:"tfGet",text:"Receive",fontSize:50,font:"btnFont"},compId:11},{type:"Panel",props:{y:6,x:4,width:291,height:87},compId:12,child:[{type:"Image",props:{y:-7,x:400,skin:"index/img_Flash.png"},compId:13}]}]},{type:"Label",props:{y:801,x:391,width:144,var:"tfDiamond",text:"100",scaleY:.7,scaleX:.7,height:46,font:"btnFont",anchorY:.5,anchorX:.5,align:"center"},compId:17}],animations:[{nodes:[{target:9,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"rotation",index:0},{value:180,tweenMethod:"linearNone",tween:!0,target:9,key:"rotation",index:60},{value:360,tweenMethod:"linearNone",tween:!0,target:9,key:"rotation",index:120}]}}],name:"aniLight",id:1,frameRate:24,action:2},{nodes:[{target:13,keyframes:{x:[{value:-100,tweenMethod:"linearNone",tween:!0,target:13,key:"x",index:0},{value:400,tweenMethod:"linearNone",tween:!0,target:13,key:"x",index:40},{value:400,tweenMethod:"linearNone",tween:!0,target:13,key:"x",index:115}]}}],name:"aniFlash",id:2,frameRate:24,action:2}],loadList:["index/img_view_frame.png","index/img_reward_title.png","index/img_light.png","index/img_diamonds_big.png","index/img_coin_bg.png","index/img_dimond.png","index/btn_start.png","index/img_Flash.png"],loadList3D:[]},e.RewardDialogUI=n,i("ui.common.RewardDialogUI",n);class s extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"Dialog",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{y:695,x:53.5,skin:"index/img_talk_dialog.png"},compId:6},{type:"Image",props:{y:833,x:652,skin:"index/img_talk_continue.png"},compId:8},{type:"Image",props:{y:638,x:53,var:"imgAvatar",skin:"index/male.png"},compId:10},{type:"Label",props:{y:836,x:551,text:"Click",scaleY:.55,scaleX:.55,font:"btnFont"},compId:9},{type:"HTMLDivElement",props:{y:702,x:312,width:370,var:"tfMsg",innerHTML:"Content",height:120,runtime:"laya.html.dom.HTMLDivElement"},compId:12}],loadList:["index/img_talk_dialog.png","index/img_talk_continue.png","index/male.png"],loadList3D:[]},e.TalkDialogUI=s,i("ui.common.TalkDialogUI",s)}(e.common||(e.common={}))}(a.ui||(a.ui={})),function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:32,height:32,anchorY:0,anchorX:0},compId:2,child:[{type:"Image",props:{width:64,var:"imgCoin",skin:"anim/img_coin2.png",height:64,centerY:0,centerX:0,anchorY:.5,anchorX:.5},compId:4},{type:"Image",props:{var:"imgDiamond",skin:"anim/img_diamond1.png",centerY:0,centerX:0,anchorY:.5,anchorX:.5},compId:6}],animations:[{nodes:[{target:4,keyframes:{width:[{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"width",index:0},{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"width",index:5},{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"width",index:10},{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"width",index:15},{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"width",index:20},{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"width",index:25},{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"width",index:30},{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"width",index:35}],skin:[{value:"anim/img_coin1.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:0},{value:"anim/img_coin2.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:5},{value:"anim/img_coin3.png",tweenMethod:"linearNone",tween:!1,target:4,label:null,key:"skin",index:10},{value:"anim/img_coin4.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:15},{value:"anim/img_coin5.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:20},{value:"anim/img_coin6.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:25},{value:"anim/img_coin7.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:30},{value:"anim/img_coin1.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:35}],right:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"right",index:35}],height:[{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"height",index:0},{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"height",index:35}]}}],name:"animCoin",id:1,frameRate:24,action:0},{nodes:[],name:"ani2",id:2,frameRate:24,action:0},{nodes:[{target:6,keyframes:{skin:[{value:"anim/img_diamond1.png",tweenMethod:"linearNone",tween:!1,target:6,key:"skin",index:0},{value:"anim/img_diamond2.png",tweenMethod:"linearNone",tween:!1,target:6,key:"skin",index:5},{value:"anim/img_diamond3.png",tweenMethod:"linearNone",tween:!1,target:6,key:"skin",index:10},{value:"anim/img_diamond4.png",tweenMethod:"linearNone",tween:!1,target:6,key:"skin",index:15},{value:"anim/img_diamond5.png",tweenMethod:"linearNone",tween:!1,target:6,key:"skin",index:20},{value:"anim/img_diamond6.png",tweenMethod:"linearNone",tween:!1,target:6,key:"skin",index:25},{value:"anim/img_diamond7.png",tweenMethod:"linearNone",tween:!1,target:6,key:"skin",index:30},{value:"anim/img_diamond8.png",tweenMethod:"linearNone",tween:!1,target:6,key:"skin",index:35},{value:"anim/img_diamond9.png",tweenMethod:"linearNone",tween:!1,target:6,key:"skin",index:40}]}}],name:"animDiamond",id:3,frameRate:24,action:0}],loadList:["anim/img_coin2.png","anim/img_diamond1.png","anim/img_coin1.png","anim/img_coin3.png","anim/img_coin4.png","anim/img_coin5.png","anim/img_coin6.png","anim/img_coin7.png","anim/img_diamond2.png","anim/img_diamond3.png","anim/img_diamond4.png","anim/img_diamond5.png","anim/img_diamond6.png","anim/img_diamond7.png","anim/img_diamond8.png","anim/img_diamond9.png"],loadList3D:[]},e.AwardEeffectUI=t,i("ui.effect.AwardEeffectUI",t);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{y:49,x:49,width:98,height:98,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Image",props:{y:49,x:49,skin:"index/img_bubble.png",anchorY:.5,anchorX:.5,alpha:1},compId:3}],animations:[{nodes:[{target:3,keyframes:{scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:2},{value:1.2,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:4},{value:1.5,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:6}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:2},{value:1.2,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:4},{value:1.5,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:6}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:2},{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:6}]}}],name:"animBubble",id:1,frameRate:24,action:0}],loadList:["index/img_bubble.png"],loadList3D:[]},e.BubbleUI=a,i("ui.effect.BubbleUI",a);class n extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:32,height:32,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Image",props:{y:32,x:32,width:32,var:"imgCoin",skin:"anim/img_coin1.png",height:32,anchorY:.5,anchorX:.5},compId:4}],animations:[{nodes:[{target:4,keyframes:{skin:[{value:"anim/img_coin1.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:0},{value:"anim/img_coin2.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:5},{value:"anim/img_coin3.png",tweenMethod:"linearNone",tween:!1,target:4,label:null,key:"skin",index:10},{value:"anim/img_coin4.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:15},{value:"anim/img_coin5.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:20},{value:"anim/img_coin6.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:25},{value:"anim/img_coin7.png",tweenMethod:"linearNone",tween:!1,target:4,key:"skin",index:30}]}}],name:"animCoin",id:1,frameRate:24,action:0},{nodes:[],name:"ani2",id:2,frameRate:24,action:0}],loadList:["anim/img_coin1.png","anim/img_coin2.png","anim/img_coin3.png","anim/img_coin4.png","anim/img_coin5.png","anim/img_coin6.png","anim/img_coin7.png"],loadList3D:[]},e.CoinEffectUI=n,i("ui.effect.CoinEffectUI",n);class s extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"View",props:{y:23,x:100,width:200,scaleY:1,scaleX:1,height:50,anchorY:.5,anchorX:.5},compId:2,child:[{type:"FontClip",props:{y:25,x:100,width:200,var:"fcDamage",value:"0123456789",spaceX:-14,skin:"game/fontClip_white.png",sheet:"0123456789",anchorY:.5,anchorX:.5,align:"center"},compId:4}],animations:[{nodes:[{target:4,keyframes:{y:[{value:23,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:0},{value:-73,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:2},{value:-123,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:10},{value:-73,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:15}],x:[{value:100,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:0},{value:100,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:2},{value:100,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:10},{value:60,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:15}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:10},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:15}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:10},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:15}]}}],name:"aniLeft",id:1,frameRate:24,action:0},{nodes:[{target:4,keyframes:{y:[{value:23,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:0},{value:-73,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:2},{value:-123,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:10},{value:-73,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:15}],x:[{value:100,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:0},{value:100,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:2},{value:140,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:15}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:10},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:15}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:10},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:15}]}}],name:"aniRight",id:2,frameRate:24,action:0}],loadList:["game/fontClip_white.png"],loadList3D:[]},e.DamageUI=s,i("ui.effect.DamageUI",s);class o extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(o.uiView)}}o.uiView={type:"View",props:{y:15,x:15,width:30,height:30,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Image",props:{y:15,x:15,var:"imgFlower",skin:"game/img_Flower1.png",anchorY:.5,anchorX:.5},compId:3}],loadList:["game/img_Flower1.png"],loadList3D:[]},e.FlowerUI=o,i("ui.effect.FlowerUI",o);class l extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(l.uiView)}}l.uiView={type:"View",props:{y:71,x:59,width:118,height:142,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Image",props:{y:23,x:38,visible:!1,skin:"index/img_bubble.png",anchorY:.5,anchorX:.5,alpha:1},compId:4},{type:"Image",props:{y:71,x:59,var:"imgHand",skin:"game/img_finger.png",anchorY:.5,anchorX:.5},compId:3}],animations:[{nodes:[{target:4,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:4,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:4,key:"visible",index:6}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:2},{value:1.2,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:4},{value:1.5,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:6}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:2},{value:1.2,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:4},{value:1.5,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:6}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:2},{value:.4,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:4},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:6}]}},{target:3,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:.9,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:4}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:.9,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:4}]}}],name:"aniClick",id:1,frameRate:24,action:0}],loadList:["index/img_bubble.png","game/img_finger.png"],loadList3D:[]},e.HandUI=l,i("ui.effect.HandUI",l);class r extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(r.uiView)}}r.uiView={type:"View",props:{y:100,x:100,width:200,height:200,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Box",props:{y:100,x:100,width:200,var:"boxBg",height:200,anchorY:.5,anchorX:.5},compId:3},{type:"Box",props:{y:100,x:100,width:200,var:"boxFg",height:200,anchorY:.5,anchorX:.5},compId:4}],loadList:[],loadList3D:[]},e.LightEffectUI=r,i("ui.effect.LightEffectUI",r);class d extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(d.uiView)}}d.uiView={type:"View",props:{width:100,height:50,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Image",props:{y:25,x:50,width:120,var:"imgBG",skin:"index/img_tips_bg_gird.png",sizeGrid:"10,24,10,27",height:54,anchorY:.5,anchorX:.5},compId:7},{type:"Label",props:{zOrder:5,y:25,x:50,width:230,var:"tfTip",valign:"middle",text:"1234567",scaleY:.5,scaleX:.5,height:50,fontSize:30,font:"yazi",anchorY:.5,anchorX:.5,align:"center"},compId:5}],loadList:["index/img_tips_bg_gird.png"],loadList3D:[]},e.TipUI=d,i("ui.effect.TipUI",d);class u extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(u.uiView)}}u.uiView={type:"View",props:{y:160,x:160,width:320,height:320,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Image",props:{y:160,x:160,var:"imgWeapon",anchorY:.5,anchorX:.5},compId:5}],loadList:[],loadList3D:[]},e.WeaponFlyUI=u,i("ui.effect.WeaponFlyUI",u)}(e.effect||(e.effect={}))}(a.ui||(a.ui={})),function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{y:0,x:0,top:0,skin:"index/img_mask.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:.8},compId:3},{type:"Button",props:{var:"btnClose",skin:"index/btn_close.png",runtime:"base/base/Button.ts",left:0,bottom:580,anchorY:.5,anchorX:.5,label:" ",stateNum:1},compId:4},{type:"Box",props:{width:750,var:"boxMain",height:520,centerX:0,bottom:0,anchorY:.5,anchorX:.5},compId:5,child:[{type:"Image",props:{width:750,skin:"index/img_view_frame.png",sizeGrid:"80,10,10,535",height:520},compId:6},{type:"Image",props:{y:-22,x:53,skin:"index/img_equipWeapon.png"},compId:7},{type:"Image",props:{y:83,x:0,width:750,skin:"index/img_shop_bg1.png",sizeGrid:"2,2,2,2",height:355},compId:8},{type:"List",props:{y:114,x:0,width:750,var:"listEquip",spaceX:25,repeatY:1,height:310},compId:9,child:[{type:"EquipWeaponItem",props:{runtime:"game/ui/equipWeapon/EquipWeaponItem.ts",renderType:"render"},compId:13}]},{type:"Label",props:{y:40,x:610,wordWrap:!0,width:469,valign:"middle",text:"Click to change the gun, swipe to turn pages",scaleY:.6,scaleX:.6,height:161,font:"brownFont",anchorY:.5,anchorX:.5,align:"left"},compId:12}]}],animations:[{nodes:[{target:12,keyframes:{scaleY:[{value:.6,tweenMethod:"linearNone",tween:!0,target:12,key:"scaleY",index:0},{value:.61,tweenMethod:"linearNone",tween:!0,target:12,key:"scaleY",index:30},{value:.6,tweenMethod:"linearNone",tween:!0,target:12,key:"scaleY",index:60}],scaleX:[{value:.6,tweenMethod:"linearNone",tween:!0,target:12,key:"scaleX",index:0},{value:.61,tweenMethod:"linearNone",tween:!0,target:12,key:"scaleX",index:30},{value:.6,tweenMethod:"linearNone",tween:!0,target:12,key:"scaleX",index:60}]}}],name:"animTip",id:1,frameRate:24,action:0}],loadList:["index/img_mask.png","index/btn_close.png","index/img_view_frame.png","index/img_equipWeapon.png","index/img_shop_bg1.png"],loadList3D:[]},e.EquipWeaponUI=t,i("ui.equipWeapon.EquipWeaponUI",t);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:180,height:310},compId:2,child:[{type:"Image",props:{y:1,x:1,var:"imgBg",skin:"index/img_equipBg.png"},compId:3},{type:"Image",props:{y:106,x:103,skin:"index/img_item_level_bg.png"},compId:6},{type:"Button",props:{y:233,x:90,var:"btnEquip",stateNum:1,skin:"index/img_equiped.png",runtime:"base/base/Button.ts",labelSize:50,anchorY:.5,anchorX:.5},compId:9},{type:"Image",props:{y:81,x:93,var:"imgWeapon",anchorY:.5,anchorX:.5},compId:5},{type:"Label",props:{y:123.5,x:130.5,var:"tfLevel",text:"29",scaleY:.5,scaleX:.5,font:"btnFont",anchorY:.5,anchorX:.5},compId:7},{type:"Label",props:{y:174.5,x:90,var:"tfName",text:"M4-A1 Refit",scaleY:.6,scaleX:.6,font:"brownFont",anchorY:.5,anchorX:.5},compId:8},{type:"Label",props:{y:226,x:90,width:136,var:"tfTip",text:"Equipped",scaleY:.7,scaleX:.7,mouseEnabled:!1,height:46,font:"btnFont",anchorY:.5,anchorX:.5,align:"center"},compId:10}],loadList:["index/img_equipBg.png","index/img_item_level_bg.png","index/img_equiped.png"],loadList3D:[]},e.EquipWeaponItemUI=a,i("ui.equipWeapon.EquipWeaponItemUI",a)}(e.equipWeapon||(e.equipWeapon={}))}(a.ui||(a.ui={})),function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:0,skin:"index/img_mask.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:.8},compId:23},{type:"Image",props:{width:530,var:"imgTitle",skin:"index/img_gift.png",height:143,centerY:-420,centerX:0,anchorY:.5,anchorX:.5},compId:3},{type:"Box",props:{width:643,var:"boxMain",height:759,centerY:-70,centerX:0,anchorY:.5,anchorX:.5},compId:4,child:[{type:"Image",props:{y:143,x:13,width:620,var:"imgMainBg",skin:"index/img_view_frame.png",sizeGrid:"80,10,10,535",height:670},compId:6},{type:"Image",props:{y:148,x:230,width:182,skin:"index/img_unlock_name_bg.png",height:52},compId:24},{type:"Image",props:{y:230,x:25,width:596,var:"imgListBg",skin:"index/img_shop_bg1.png",sizeGrid:"2,2,2,2",height:359},compId:25},{type:"Image",props:{y:183,x:85,skin:"index/img_airdrop.png",scaleY:1.4,scaleX:1.4,anchorY:.5,anchorX:.5},compId:27},{type:"Label",props:{y:174,x:322,width:207,valign:"middle",text:"Rewards",height:51,fontSize:30,font:"yazi",color:"#ffffff",anchorY:.5,anchorX:.5,align:"center"},compId:7},{type:"List",props:{y:225,x:36,width:573,var:"listAward",spaceY:20,spaceX:20,repeatY:2,repeatX:4,height:380},compId:21,child:[{type:"Box",props:{y:96,x:64,width:128,runtime:"game/ui/result/view/AwardItem.ts",name:"render",height:160,anchorY:.5,anchorX:.5},compId:22}]},{type:"Button",props:{y:695,x:322,var:"btnPay",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelSize:50,labelPadding:"0,0,8,0",labelFont:"btnFont",label:"Take all",anchorY:.5,anchorX:.5},compId:16,child:[{type:"Panel",props:{y:6,x:4,width:291,height:87},compId:17,child:[{type:"Image",props:{y:-7,x:-100,skin:"index/img_Flash.png"},compId:18}]},{type:"Clip",props:{y:-35,x:282,var:"clipPay",skin:"index/clip_share_video.png",index:1,clipY:2},compId:19}]},{type:"Button",props:{y:863,x:321,var:"tfGiveUp",skin:"index/btn_giveup.png",runtime:"base/base/Button.ts",stateNum:1,label:" ",anchorX:.5,anchorY:.5},compId:31}]}],animations:[{nodes:[{target:18,keyframes:{x:[{value:-100,tweenMethod:"linearNone",tween:!0,target:18,key:"x",index:0},{value:400,tweenMethod:"linearNone",tween:!0,target:18,key:"x",index:40},{value:400,tweenMethod:"linearNone",tween:!0,target:18,key:"x",index:119},{value:-100,tweenMethod:"linearNone",tween:!0,target:18,key:"x",index:120}]}}],name:"animFlash",id:1,frameRate:24,action:0}],loadList:["index/img_mask.png","index/img_gift.png","index/img_view_frame.png","index/img_unlock_name_bg.png","index/img_shop_bg1.png","index/img_airdrop.png","index/btn_start.png","index/img_Flash.png","index/clip_share_video.png","index/btn_giveup.png"],loadList3D:[]},e.AirdropUI=t,i("ui.game.AirdropUI",t);class a extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"Dialog",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{y:144,x:30,skin:"activity/img_bonus_rule.png"},compId:3},{type:"CheckBox",props:{y:1084,x:229,var:"cbUnshow",skin:"activity/checkbox.png"},compId:6},{type:"Button",props:{y:999,x:375,var:"btnSure",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelFont:"btnFont",label:"OK",anchorY:.5,anchorX:.5},compId:5},{type:"Label",props:{y:1084,x:279,width:405,text:"Don’t  show this again",scaleY:.7,scaleX:.7,height:45,font:"yazi",alpha:1,align:"center"},compId:7}],loadList:["activity/img_bonus_rule.png","activity/checkbox.png","index/btn_start.png"],loadList3D:[]},e.BonusRuleDialogUI=a,i("ui.game.BonusRuleDialogUI",a);class n extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:148,height:59},compId:2,child:[{type:"Image",props:{skin:"game/img_buff_bg.png"},compId:3},{type:"Image",props:{y:2,x:2,var:"imgIcon",skin:"game/AddHp.png"},compId:7},{type:"Image",props:{y:42,x:2,var:"imgInfinite",skin:"game/img_buff_infinite.png"},compId:8},{type:"ProgressBar",props:{y:42,x:3,var:"pgTime",skin:"game/progress_buff.png"},compId:5},{type:"Label",props:{y:8,x:60,width:200,var:"tfName",text:"Increase ATK",scaleY:.4,scaleX:.3,rotation:0,height:48,font:"yazi",align:"center"},compId:6}],loadList:["game/img_buff_bg.png","game/AddHp.png","game/img_buff_infinite.png","game/progress_buff.png"],loadList3D:[]},e.BuffItemUI=n,i("ui.game.BuffItemUI",n);class s extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:-1,skin:"index/img_mask.png",right:0,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:17},{type:"Box",props:{width:560,height:796,centerY:-80,centerX:0,anchorY:.5,anchorX:.5},compId:16,child:[{type:"Image",props:{y:47,x:0,width:560,skin:"index/img_view_frame.png",height:704,alpha:1,sizeGrid:"80,10,10,535"},compId:7},{type:"Button",props:{y:642,x:279,width:320,var:"btnShareVideo",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelAlign:"center",height:108,anchorY:.5,anchorX:.5,alpha:1},compId:10,child:[{type:"Clip",props:{y:-30,x:276,var:"clipShareVideo",skin:"index/clip_share_video.png",clipY:2},compId:14},{type:"Label",props:{y:26,x:0,width:313,var:"tfShareVideo",text:"Free reward",scaleY:1,scaleX:1,height:46,font:"btnFont",align:"center"},compId:19}]},{type:"Image",props:{x:123,skin:"game/img_buff_title.png",alpha:1},compId:4},{type:"Image",props:{y:312,x:279,var:"imgIcon",anchorY:.5,anchorX:.5,alpha:1},compId:6},{type:"Label",props:{y:475,x:123,width:300,var:"tfName",text:"Picked up adrenaline",font:"yazi",alpha:1,align:"center"},compId:8},{type:"Label",props:{y:526,x:0,width:800,var:"tfDesc",text:"Adrenaline",scaleY:.7,scaleX:.7,font:"brownFont",alpha:1,align:"center"},compId:9},{type:"Button",props:{y:783,x:280,var:"tfGiveup",skin:"index/btn_giveup.png",runtime:"base/base/Button.ts",stateNum:1,label:" ",anchorX:.5,anchorY:.5},compId:25}]},{type:"Image",props:{visible:!1,var:"imgEffect",skin:"game/img_Attack_effect.png",scaleY:1,left:0,bottom:0,anchorY:1,alpha:1},compId:21},{type:"Image",props:{visible:!1,var:"imgTitle",skin:"game/img_Attack_title.png",scaleY:2.2,scaleX:2.2,centerY:-420,centerX:0,anchorY:.5,anchorX:.5},compId:22}],animations:[{nodes:[{target:16,keyframes:{scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:16,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:16,key:"scaleY",index:5}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:16,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:16,key:"scaleX",index:5}]}}],name:"aniShow",id:1,frameRate:24,action:0},{nodes:[{target:22,keyframes:{visible:[{value:!1,tweenMethod:"linearNone",tween:!1,target:22,key:"visible",index:0},{value:!0,tweenMethod:"linearNone",tween:!1,target:22,key:"visible",index:6}],scaleY:[{value:2.2,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleY",index:0},{value:2.2,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleY",index:6},{value:1,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleY",index:9},{value:.98,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleY",index:11},{value:1,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleY",index:12}],scaleX:[{value:2.2,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleX",index:0},{value:2.2,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleX",index:6},{value:1,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleX",index:9},{value:.98,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleX",index:11},{value:1,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleX",index:12}]}},{target:21,keyframes:{visible:[{value:!1,tweenMethod:"linearNone",tween:!1,target:21,key:"visible",index:0},{value:!0,tweenMethod:"linearNone",tween:!1,target:21,key:"visible",index:6},{value:!1,tweenMethod:"linearNone",tween:!1,target:21,key:"visible",index:25}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:21,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:21,key:"scaleY",index:6},{value:6,tweenMethod:"linearNone",tween:!0,target:21,key:"scaleY",index:9}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:21,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:21,key:"alpha",index:6},{value:0,tweenMethod:"linearNone",tween:!0,target:21,key:"alpha",index:16}]}},{target:7,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:7,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"alpha",index:6}]}},{target:10,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:10,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:10,key:"alpha",index:6}]}},{target:4,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:6}]}},{target:8,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:8,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:8,key:"alpha",index:6}]}},{target:9,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:9,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"alpha",index:6}]}},{target:25,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:25,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:25,key:"alpha",index:6}]}}],name:"aniHide",id:2,frameRate:24,action:0}],loadList:["index/img_mask.png","index/img_view_frame.png","index/btn_start.png","index/clip_share_video.png","game/img_buff_title.png","index/btn_giveup.png","game/img_Attack_effect.png","game/img_Attack_title.png"],loadList3D:[]},e.BuffViewUI=s,i("ui.game.BuffViewUI",s);class o extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(o.uiView)}}o.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:0,skin:"index/img_mask.png",right:0,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:3},{type:"Box",props:{width:560,height:577,centerY:-100,centerX:9},compId:4,child:[{type:"Image",props:{y:27,x:0,width:560,skin:"index/img_view_frame.png",height:550,sizeGrid:"80,10,10,535"},compId:5},{type:"Image",props:{y:0,x:189,skin:"index/img_tips_title.png"},compId:8},{type:"Label",props:{y:188.5,x:78.5,wordWrap:!0,width:583,var:"tfDesc",text:"Defeating zombies requires your superb shooting skills",scaleY:.7,scaleX:.7,leading:10,layoutEnabled:!1,height:100,font:"brownFont",align:"center"},compId:19},{type:"Label",props:{y:277,x:26,wordWrap:!0,width:583,text:"Leave the fight",scaleY:.85,scaleX:.85,leading:10,layoutEnabled:!1,height:50,font:"brownFont",align:"center"},compId:22},{type:"Button",props:{y:509,x:133,var:"btnSure",stateNum:1,skin:"index/btn_green.png",runtime:"base/base/Button.ts",labelAlign:"center",anchorY:.5,anchorX:.5},compId:17,child:[{type:"Label",props:{y:26,x:0,width:299,var:"tfSure",text:"Return",scaleY:.7,scaleX:.7,layoutEnabled:!1,height:46,font:"btnFont",align:"center"},compId:16}]},{type:"Button",props:{y:509,x:426,var:"btnCancel",stateNum:1,skin:"index/btn_small.png",runtime:"base/base/Button.ts",labelFont:"btnFont",labelAlign:"center",anchorY:.5,anchorX:.5},compId:6,child:[{type:"Label",props:{y:26,x:-1,width:301,var:"tfCancel",text:"Continue",scaleY:.7,scaleX:.7,layoutEnabled:!1,height:46,font:"btnFont",align:"center"},compId:18}]}]}],loadList:["index/img_mask.png","index/img_view_frame.png","index/img_tips_title.png","index/btn_green.png","index/btn_small.png"],loadList3D:[]},e.ExitViewUI=o,i("ui.game.ExitViewUI",o);class l extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(l.uiView)}}l.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:-1,skin:"index/img_mask.png",right:0,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:7},{type:"Box",props:{y:188,x:371,width:460,var:"boxProgress",top:138,height:100,centerX:-4,anchorY:.5,anchorX:.5},compId:82,child:[{type:"Image",props:{y:15,x:30,skin:"game/img_progress_level.png"},compId:84},{type:"ProgressBar",props:{y:25,x:50,var:"pgProgress",value:1,skin:"game/progress_level.png"},compId:81},{type:"Label",props:{y:110,x:230,var:"tfProgress",text:"Zombie Surplus  80%",scaleY:.7,scaleX:.7,font:"yazi",anchorY:.5,anchorX:.5},compId:83}]},{type:"Box",props:{width:750,var:"boxMain",height:580,centerY:120,centerX:0,anchorY:.5,anchorX:.5},compId:18,child:[{type:"Image",props:{y:56.540625000000006,x:375,var:"imgTip",skin:"index/img_fail_tip.png",scaleY:1.01875,scaleX:1.01875,anchorY:.5,anchorX:.5},compId:76},{type:"Button",props:{y:483,x:375,width:424,var:"btnRePlay",stateNum:1,skin:"index/btn_start.png",scaleX:.8,runtime:"base/base/Button.ts",labelSize:57,labelFont:"yazi",height:110,anchorY:.5,anchorX:.5},compId:72,child:[{type:"Label",props:{y:35,x:35,width:460,var:"tfPay",text:"Return to reinforcement",scaleX:.8,height:40,font:"btnFont",align:"center"},compId:85},{type:"Panel",props:{y:0,x:0,width:420,height:104},compId:73,child:[{type:"Image",props:{y:-7,x:-100,skin:"index/img_Flash.png"},compId:74}]}]},{type:"Sprite",props:{y:200,x:0,width:750,var:"spriteTipsBg",height:108},compId:96},{type:"Image",props:{y:162.54062499999998,x:30,var:"imgTips",skin:"game/img_fail_head.png"},compId:88},{type:"Label",props:{y:254,x:479,wordWrap:!0,width:1088,var:"tfTips",text:"Merging 2 guns into a higher level gun helps beat the game easier.",scaleY:.9,scaleX:.5,height:84,font:"yazi",anchorY:.5,anchorX:.5,align:"center"},compId:92},{type:"Label",props:{y:566.540625,x:375,var:"tfBakcHome",text:"Main Menu",scaleY:.7,scaleX:.7,font:"yazi",anchorY:.5,anchorX:.5},compId:71}]}],animations:[{nodes:[{target:74,keyframes:{x:[{value:-100,tweenMethod:"linearNone",tween:!0,target:74,key:"x",index:0},{value:400,tweenMethod:"linearNone",tween:!0,target:74,key:"x",index:40},{value:400,tweenMethod:"linearNone",tween:!0,target:74,key:"x",index:119},{value:-100,tweenMethod:"linearNone",tween:!0,target:74,key:"x",index:120}]}}],name:"animFlash",id:1,frameRate:24,action:0},{nodes:[{target:76,keyframes:{y:[{value:92,tweenMethod:"linearNone",tween:!0,target:76,key:"y",index:0},{value:52,tweenMethod:"linearNone",tween:!0,target:76,key:"y",index:140},{value:92,tweenMethod:"linearNone",tween:!0,target:76,key:"y",index:200}],x:[{value:306,tweenMethod:"linearNone",tween:!0,target:76,key:"x",index:0},{value:270,tweenMethod:"linearNone",tween:!0,target:76,key:"x",index:40},{value:500,tweenMethod:"linearNone",tween:!0,target:76,key:"x",index:140},{value:336,tweenMethod:"linearNone",tween:!0,target:76,key:"x",index:200},{value:306,tweenMethod:"linearNone",tween:!0,target:76,key:"x",index:240}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleY",index:0},{value:1.05,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleY",index:40},{value:1.1,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleY",index:100},{value:1,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleY",index:140},{value:1.05,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleY",index:200},{value:1,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleY",index:240}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleX",index:0},{value:1.05,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleX",index:40},{value:1.1,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleX",index:100},{value:1,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleX",index:140},{value:1.05,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleX",index:200},{value:1,tweenMethod:"linearNone",tween:!0,target:76,key:"scaleX",index:240}]}}],name:"animTip",id:2,frameRate:24,action:0}],loadList:["index/img_mask.png","game/img_progress_level.png","game/progress_level.png","index/img_fail_tip.png","index/btn_start.png","index/img_Flash.png","game/img_fail_head.png"],loadList3D:[]},e.FailViewUI=l,i("ui.game.FailViewUI",l);class r extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(r.uiView)}}r.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{y:10,x:10,top:0,skin:"index/img_mask.png",right:0,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:3},{type:"Box",props:{y:667,x:375,width:666,var:"boxMain",height:864,centerY:0,centerX:0,anchorY:.5,anchorX:.5},compId:6,child:[{type:"Image",props:{y:74,x:53,width:560,skin:"index/img_view_frame.png",sizeGrid:"80,10,10,535",height:738},compId:18},{type:"Image",props:{y:27,x:177,skin:"index/img_free_coin.png"},compId:5},{type:"Image",props:{y:336,x:333,var:"imgCoin",skin:"index/img_coins.png",anchorY:.5,anchorX:.5},compId:7},{type:"Image",props:{y:544,x:219,skin:"index/img_coin_bg.png",sizeGrid:"20,39,19,51"},compId:8},{type:"Image",props:{y:567,x:207,skin:"index/img_coin.png",scaleY:.9,scaleX:.9,anchorY:.5,anchorX:.5},compId:10},{type:"Image",props:{y:540.5,x:192,skin:"index/img_coin.png"},compId:9},{type:"Label",props:{y:566,x:348,width:295,var:"tfCoin",valign:"middle",text:"475.6K",scaleY:.7,scaleX:.7,font:"yazi",anchorY:.5,anchorX:.5,align:"center"},compId:11},{type:"Button",props:{y:687,x:333,var:"btnPay",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelSize:50,labelPadding:"0,0,6,0",labelFont:"btnFont",label:"Claim Now",anchorY:.5,anchorX:.5},compId:12,child:[{type:"Panel",props:{y:6,x:4,width:291,height:87},compId:14,child:[{type:"Image",props:{y:-7,x:-100,skin:"index/img_Flash.png"},compId:15}]},{type:"Clip",props:{y:-24,x:274,var:"clipPay",skin:"index/clip_share_video.png",index:1,clipY:2},compId:16}]},{type:"Button",props:{y:852,x:333,var:"tfClose",skin:"index/btn_giveup.png",runtime:"base/base/Button.ts",stateNum:1,label:" ",anchorX:.5,anchorY:.5},compId:21}]}],animations:[{nodes:[{target:15,keyframes:{y:[{value:-7,tweenMethod:"linearNone",tween:!0,target:15,key:"y",index:0},{value:-7,tweenMethod:"linearNone",tween:!0,target:15,key:"y",index:40},{value:-7,tweenMethod:"linearNone",tween:!0,target:15,key:"y",index:119}],x:[{value:-100,tweenMethod:"linearNone",tween:!0,target:15,key:"x",index:0},{value:400,tweenMethod:"linearNone",tween:!0,target:15,key:"x",index:40},{value:401,tweenMethod:"linearNone",tween:!0,target:15,key:"x",index:119},{value:-100,tweenMethod:"linearNone",tween:!0,target:15,key:"x",index:120}]}}],name:"animFlash",id:1,frameRate:24,action:0}],loadList:["index/img_mask.png","index/img_view_frame.png","index/img_free_coin.png","index/img_coins.png","index/img_coin_bg.png","index/img_coin.png","index/btn_start.png","index/img_Flash.png","index/clip_share_video.png","index/btn_giveup.png"],loadList3D:[]},e.FreeCoinUI=r,i("ui.game.FreeCoinUI",r);class d extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(d.uiView)}}d.uiView={type:"View",props:{width:750,top:0,right:0,mouseThrough:!0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Box",props:{width:202,visible:!1,var:"boxHeadShot",height:202,centerY:-300,centerX:0,alpha:1},compId:38,child:[{type:"Image",props:{y:101,x:101,skin:"game/img_head_shot_tip.png",anchorY:.5,anchorX:.5},compId:34}]},{type:"Box",props:{x:419,width:331,visible:!1,var:"boxCombo",height:309,centerY:-200},compId:127,child:[{type:"Image",props:{y:154,x:165,skin:"game/img_combo_bg.png",anchorY:.5,anchorX:.5},compId:126},{type:"Clip",props:{y:159,x:165,var:"clipCombo",skin:"game/clip_combo.png",clipY:5,anchorY:.5,anchorX:.5},compId:125}]},{type:"Button",props:{var:"btnPause",top:60,stateNum:1,skin:"game/btn_pause.png",runtime:"base/base/Button.ts",left:0,anchorY:.5,anchorX:.5},compId:21},{type:"Button",props:{var:"btnReload",stateNum:1,skin:"game/btn_reload.png",runtime:"base/base/Button.ts",right:13,bottom:53,anchorY:.5,anchorX:.5},compId:23},{type:"Image",props:{var:"imgProgress",top:129,skin:"game/img_progress_level.png",centerX:-6},compId:73},{type:"ProgressBar",props:{var:"pgProgress",value:1,top:138,skin:"game/progress_level.png",centerX:-4},compId:79},{type:"Image",props:{visible:!1,var:"imgDamage",skin:"game/img_zombie_eat.png",centerY:300,centerX:0,anchorY:.5,anchorX:.5},compId:109},{type:"Image",props:{y:1222,x:60,skin:"game/img_life_bg.png",left:60,bottom:48,sizeGrid:"10,20,10,20"},compId:113,child:[{type:"Image",props:{y:34,x:0,var:"imgLife",skin:"game/img_life.png",anchorY:.5,anchorX:.5},compId:114},{type:"Image",props:{y:-2,x:-38,visible:!1,skin:"game/img_life.png"},compId:116,child:[{type:"Label",props:{y:7,x:74,var:"tfLifeOffset",text:"-1",scaleY:1.2,scaleX:1.2,font:"yazi",align:"left"},compId:118}]}]},{type:"List",props:{y:154,x:21,width:148,var:"listBuff",top:154,spaceY:5,repeatX:1,left:21,height:251},compId:139,child:[{type:"BuffItem",props:{runtime:"game/ui/game/GameBuffItem.ts",renderType:"render"},compId:138}]},{type:"Box",props:{width:566,var:"boxBonus",top:90,height:126,centerX:0},compId:129,child:[{type:"Image",props:{x:0,var:"imgBonusProgress",skin:"game/img_bonus_progress_bg.png"},compId:89},{type:"Image",props:{y:73,x:148,var:"imgBonusCoin",skin:"index/img_coin.png",anchorY:.5,anchorX:.5},compId:132},{type:"Image",props:{y:74,x:371,var:"imgBonusDiamond",skin:"index/img_dimond.png",anchorY:.5,anchorX:.5},compId:133},{type:"Image",props:{y:114,x:163,width:295,skin:"index/img_mask.png",sizeGrid:"2,2,2,2",height:50,alpha:.6},compId:136},{type:"Label",props:{y:118,x:173,width:220,var:"tfBonusTime",text:"倒计时：60:",height:46,font:"yazi",align:"right"},compId:106},{type:"Label",props:{y:118,x:396,width:59,var:"tfBonusSecondTime",text:"00",height:46,font:"yazi",align:"left"},compId:108},{type:"Text",props:{y:58,x:180,width:180,var:"tfBonusCoin",text:"0",scaleY:.7,scaleX:.7,height:40,font:"btnFont",runtime:"laya.display.Text"},compId:134},{type:"Text",props:{y:58,x:404,width:180,var:"tfBonusDiamond",text:"0",scaleY:.7,scaleX:.7,height:40,font:"btnFont",runtime:"laya.display.Text"},compId:135}]},{type:"Box",props:{width:384,var:"boxWarning",top:401,height:88,centerX:0},compId:51,child:[{type:"Image",props:{y:44,x:192,visible:!1,var:"imgWarning",skin:"game/img_warning_tips.png",anchorY:.5,anchorX:.5},compId:50}]},{type:"Box",props:{y:632,x:0,width:173,visible:!1,var:"boxNewZombie",height:76},compId:142,child:[{type:"Image",props:{y:38,x:86,var:"imgNewZombie",skin:"game/img_new_zombie.png",anchorY:.5,anchorX:.5},compId:140}]},{type:"Label",props:{width:93,var:"tfLife",text:"100",scaleY:1.2,scaleX:1.2,left:108,height:40,font:"yazi",bottom:58,align:"left"},compId:115},{type:"Label",props:{width:56,var:"tfCurBullet",text:"99",right:85,font:"yazi",bottom:215,align:"right"},compId:25},{type:"Label",props:{width:70,var:"tfMaxBullet",text:"/99",scaleY:.7,scaleX:.7,right:38,font:"yazi",bottom:216,align:"left"},compId:26},{type:"Label",props:{width:400,var:"tfLevelProgress",top:204,text:"Leftover zombies 100%",scaleY:.6,scaleX:.6,font:"yazi",centerX:0,align:"center"},compId:49},{type:"Image",props:{y:0,x:0,visible:!1,top:0,skin:"game/img_damage.png",sizeGrid:"120,120,120,120",right:0,mouseEnabled:!1,left:0,bottom:0},compId:53},{type:"Box",props:{width:400,var:"boxGuide",height:220,centerX:0,bottom:60},compId:84,child:[{type:"Image",props:{skin:"game/img_eight.png"},compId:81},{type:"Image",props:{y:60,x:-14,skin:"game/img_finger.png"},compId:82},{type:"Label",props:{y:249,x:200,wordWrap:!0,width:760,var:"tfGuide",text:"Tap and hold the screen to aim and shoot",scaleY:.6,scaleX:.6,height:86,font:"yazi",anchorY:.5,anchorX:.5,align:"center"},compId:83}]}],animations:[{nodes:[{target:34,keyframes:{scaleY:[{value:2,tweenMethod:"linearNone",tween:!0,target:34,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:34,key:"scaleY",index:3}],scaleX:[{value:2,tweenMethod:"linearNone",tween:!0,target:34,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:34,key:"scaleX",index:3}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:34,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:34,key:"alpha",index:3},{value:1,tweenMethod:"linearNone",tween:!0,target:34,key:"alpha",index:25},{value:0,tweenMethod:"linearNone",tween:!0,target:34,key:"alpha",index:30}]}},{target:38,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:38,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:38,key:"visible",index:30}]}}],name:"aniHeadShot",id:1,frameRate:24,action:0},{nodes:[{target:50,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:50,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:50,key:"visible",index:50}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:10},{value:1.1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:20},{value:1.1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:25},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:30},{value:1.1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:40},{value:1.1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:45},{value:0,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleY",index:50}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:10},{value:1.1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:20},{value:1.1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:25},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:30},{value:1.1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:40},{value:1.1,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:45},{value:0,tweenMethod:"linearNone",tween:!0,target:50,key:"scaleX",index:50}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:50,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"alpha",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"alpha",index:30},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"alpha",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"alpha",index:40},{value:1,tweenMethod:"linearNone",tween:!0,target:50,key:"alpha",index:45},{value:0,tweenMethod:"linearNone",tween:!0,target:50,key:"alpha",index:50}]}}],name:"aniWarning",id:2,frameRate:24,action:0},{nodes:[{target:53,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:53,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:53,key:"visible",index:40}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:53,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:53,key:"alpha",index:40}]}},{target:109,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:109,key:"visible",index:0}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:109,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:109,key:"alpha",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:109,key:"alpha",index:25},{value:0,tweenMethod:"linearNone",tween:!0,target:109,key:"alpha",index:40}]}}],name:"aniDamage",id:3,frameRate:24,action:0},{nodes:[{target:82,keyframes:{y:[{value:61,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:0},{value:56,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:1},{value:54,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:2},{value:50,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:3},{value:46,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:4},{value:42,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:5},{value:36,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:6},{value:32,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:7},{value:28,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:8},{value:24,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:9},{value:20,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:10},{value:16,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:11},{value:15,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:12},{value:14,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:13},{value:13,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:14},{value:12,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:16},{value:14,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:17},{value:16,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:18},{value:20,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:19},{value:24,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:20},{value:28,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:21},{value:30,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:22},{value:34,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:23},{value:40,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:24},{value:50,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:25},{value:60,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:26},{value:70,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:27},{value:80,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:28},{value:90,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:29},{value:100,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:30},{value:110,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:31},{value:108,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:32},{value:110,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:33},{value:106,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:39},{value:102,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:41},{value:98,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:42},{value:94,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:43},{value:90,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:44},{value:86,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:45},{value:82,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:46},{value:78,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:47},{value:74,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:48},{value:60,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:49},{value:40,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:50},{value:30,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:51},{value:20,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:52},{value:18,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:53},{value:16,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:54},{value:12,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:55},{value:8,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:56},{value:6,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:57},{value:4,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:58},{value:2,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:59},{value:0,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:60},{value:2,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:61},{value:4,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:62},{value:6,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:63},{value:12,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:64},{value:20,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:65},{value:30,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:66},{value:40,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:67},{value:50,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:68},{value:60,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:69},{value:70,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:70},{value:80,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:71},{value:90,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:72},{value:100,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:73},{value:102,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:74},{value:108,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:75},{value:112,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:76},{value:110,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:78},{value:106,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:80},{value:102,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:82},{value:98,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:83},{value:96,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:84},{value:90,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:85},{value:86,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:86},{value:80,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:87},{value:76,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:88},{value:61,tweenMethod:"linearNone",tween:!0,target:82,key:"y",index:89}],x:[{value:150,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:0},{value:160,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:1},{value:170,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:2},{value:180,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:3},{value:190,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:4},{value:200,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:5},{value:210,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:6},{value:220,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:7},{value:230,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:8},{value:240,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:9},{value:250,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:10},{value:260,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:11},{value:270,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:12},{value:280,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:13},{value:290,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:14},{value:300,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:15},{value:310,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:16},{value:320,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:17},{value:330,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:18},{value:340,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:19},{value:350,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:20},{value:350,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:21},{value:352,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:22},{value:354,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:23},{value:356,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:24},{value:358,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:25},{value:360,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:26},{value:358,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:29},{value:346,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:31},{value:340,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:32},{value:330,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:33},{value:320,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:34},{value:310,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:35},{value:300,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:36},{value:290,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:37},{value:280,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:38},{value:270,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:39},{value:260,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:40},{value:250,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:41},{value:240,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:42},{value:230,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:43},{value:220,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:44},{value:210,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:45},{value:200,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:46},{value:190,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:47},{value:180,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:48},{value:170,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:49},{value:150,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:50},{value:140,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:51},{value:130,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:52},{value:120,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:53},{value:110,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:54},{value:100,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:55},{value:90,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:56},{value:80,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:57},{value:70,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:58},{value:60,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:59},{value:50,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:60},{value:40,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:61},{value:30,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:62},{value:20,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:63},{value:10,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:64},{value:2,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:65},{value:0,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:66},{value:-8,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:67},{value:-10,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:68},{value:-14,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:69},{value:-12,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:71},{value:-10,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:72},{value:-6,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:73},{value:0,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:74},{value:10,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:75},{value:20,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:76},{value:30,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:77},{value:40,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:78},{value:50,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:79},{value:60,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:80},{value:70,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:81},{value:80,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:82},{value:90,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:83},{value:100,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:84},{value:110,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:85},{value:120,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:86},{value:130,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:87},{value:140,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:88},{value:150,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:89}]}}],name:"aniGuide",id:4,frameRate:30,action:0},{nodes:[{target:114,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:114,key:"scaleY",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:114,key:"scaleY",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:114,key:"scaleY",index:4}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:114,key:"scaleX",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:114,key:"scaleX",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:114,key:"scaleX",index:4}]}}],name:"aniAddLife",id:6,frameRate:24,action:0},{nodes:[{target:127,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:127,key:"visible",index:0}]}},{target:126,keyframes:{scaleY:[{value:.21,tweenMethod:"linearNone",tween:!0,target:126,key:"scaleY",index:0},{value:1.05,tweenMethod:"linearNone",tween:!0,target:126,key:"scaleY",index:3},{value:1,tweenMethod:"linearNone",tween:!0,target:126,key:"scaleY",index:6}],scaleX:[{value:.21,tweenMethod:"linearNone",tween:!0,target:126,key:"scaleX",index:0},{value:1.05,tweenMethod:"linearNone",tween:!0,target:126,key:"scaleX",index:3},{value:1,tweenMethod:"linearNone",tween:!0,target:126,key:"scaleX",index:6}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:126,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:126,key:"alpha",index:8},{value:0,tweenMethod:"linearNone",tween:!0,target:126,key:"alpha",index:25}]}},{target:125,keyframes:{scaleY:[{value:2.04,tweenMethod:"linearNone",tween:!0,target:125,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:125,key:"scaleY",index:2},{value:.9,tweenMethod:"linearNone",tween:!0,target:125,key:"scaleY",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:125,key:"scaleY",index:6}],scaleX:[{value:2.04,tweenMethod:"linearNone",tween:!0,target:125,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:125,key:"scaleX",index:2},{value:.9,tweenMethod:"linearNone",tween:!0,target:125,key:"scaleX",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:125,key:"scaleX",index:6}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:125,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:125,key:"alpha",index:8},{value:0,tweenMethod:"linearNone",tween:!0,target:125,key:"alpha",index:25}]}}],name:"aniCombo",id:8,frameRate:24,action:0},{nodes:[{target:132,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:132,key:"scaleY",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:132,key:"scaleY",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:132,key:"scaleY",index:4}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:132,key:"scaleX",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:132,key:"scaleX",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:132,key:"scaleX",index:4}]}}],name:"aniBonusCoin",id:9,frameRate:24,action:0},{nodes:[{target:133,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:133,key:"scaleY",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:133,key:"scaleY",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:133,key:"scaleY",index:4}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:133,key:"scaleX",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:133,key:"scaleX",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:133,key:"scaleX",index:4}]}}],name:"aniBonusDiamond",id:10,frameRate:24,action:0},{nodes:[{target:116,keyframes:{y:[{value:-2,tweenMethod:"linearNone",tween:!0,target:116,key:"y",index:0},{value:-80,tweenMethod:"linearNone",tween:!0,target:116,key:"y",index:5},{value:-140,tweenMethod:"linearNone",tween:!0,target:116,key:"y",index:15},{value:-220,tweenMethod:"linearNone",tween:!0,target:116,key:"y",index:20}],visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:116,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:116,key:"visible",index:20}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:116,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:116,key:"alpha",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:116,key:"alpha",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:116,key:"alpha",index:20}]}}],name:"aniLifeChange",id:11,frameRate:24,action:0},{nodes:[{target:140,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:140,key:"scaleY",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:140,key:"scaleY",index:12},{value:1,tweenMethod:"linearNone",tween:!0,target:140,key:"scaleY",index:24}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:140,key:"scaleX",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:140,key:"scaleX",index:12},{value:1,tweenMethod:"linearNone",tween:!0,target:140,key:"scaleX",index:24}]}}],name:"aniNewZombie",id:12,frameRate:24,action:0}],loadList:["game/img_head_shot_tip.png","game/img_combo_bg.png","game/clip_combo.png","game/btn_pause.png","game/btn_reload.png","game/img_progress_level.png","game/progress_level.png","game/img_zombie_eat.png","game/img_life_bg.png","game/img_life.png","game/img_bonus_progress_bg.png","index/img_coin.png","index/img_dimond.png","index/img_mask.png","game/img_warning_tips.png","game/img_new_zombie.png","game/img_damage.png","game/img_eight.png","game/img_finger.png"],loadList3D:[]},e.GameViewUI=d,i("ui.game.GameViewUI",d);class u extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(u.uiView)}}u.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:0,skin:"index/img_mask.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:.8},compId:3},{type:"Box",props:{x:375,width:560,var:"boxMain",height:690,centerY:-60,centerX:0,anchorY:.5,anchorX:.5},compId:5,child:[{type:"Image",props:{y:0,x:0,width:560,skin:"index/img_view_frame.png",height:726,sizeGrid:"80,10,10,535"},compId:30},{type:"Button",props:{y:603,x:280,width:320,var:"btnPay",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelSize:50,labelFont:"Arial",labelAlign:"center",height:108,anchorY:.5,anchorX:.5},compId:25,child:[{type:"Label",props:{y:27,x:0,width:314,var:"tfPay",text:"Receive",height:46,fontSize:50,font:"btnFont",align:"center"},compId:26},{type:"Panel",props:{y:6,x:4,width:302,height:83},compId:27,child:[{type:"Image",props:{y:-7,x:-100,skin:"index/img_Flash.png"},compId:28}]},{type:"Clip",props:{y:-21,x:273,var:"clipPay",skin:"index/clip_share_video.png",index:1,clipY:2},compId:32}]},{type:"Image",props:{y:474,x:159.5,skin:"index/img_coin_bg.png"},compId:10},{type:"Image",props:{y:248,x:288,var:"imgCoin",skin:"index/img_coins_01.png",anchorY:.5,anchorX:.5},compId:11},{type:"Label",props:{y:474,x:178,width:240,var:"tfOffCoin",valign:"middle",text:"1000.1Aa",fontSize:30,font:"btnFont",color:"#ffffff",align:"center"},compId:9},{type:"Image",props:{y:-47,x:131,skin:"index/img_offLine_title.png"},compId:12},{type:"Label",props:{y:787,x:280,var:"tfGet",underlineColor:"#ffffff",underline:!0,text:"give up",scaleY:.8,scaleX:.8,height:60,font:"yazi",color:"#ffffff",anchorY:.5,anchorX:.5},compId:15},{type:"Image",props:{y:472,x:128,skin:"index/img_coin.png",scaleY:.9,scaleX:.9},compId:16},{type:"Image",props:{y:469,x:138,skin:"index/img_coin.png"},compId:17},{type:"Label",props:{y:446,x:288,text:"Earn up to 2 hours of gold coins offline",scaleY:.5,scaleX:.5,font:"brownFont",anchorY:.5,anchorX:.5},compId:34}]}],animations:[{nodes:[{target:28,keyframes:{x:[{value:-100,tweenMethod:"linearNone",tween:!0,target:28,key:"x",index:0},{value:400,tweenMethod:"linearNone",tween:!0,target:28,key:"x",index:40},{value:401,tweenMethod:"linearNone",tween:!0,target:28,key:"x",index:114},{value:-100,tweenMethod:"linearNone",tween:!0,target:28,key:"x",index:115}]}}],name:"animFlash",id:1,frameRate:24,action:0}],loadList:["index/img_mask.png","index/img_view_frame.png","index/btn_start.png","index/img_Flash.png","index/clip_share_video.png","index/img_coin_bg.png","index/img_coins_01.png","index/img_offLine_title.png","index/img_coin.png"],loadList3D:[]},e.OffLineCoinUI=u,i("ui.game.OffLineCoinUI",u);class h extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(h.uiView)}}h.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:0,skin:"index/img_mask.png",right:0,mouseThrough:!1,mouseEnabled:!0,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:16},{type:"Button",props:{var:"btnShareVideo",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelFont:"yazi",labelAlign:"center",centerY:292,centerX:0,anchorY:.5,anchorX:.5,alpha:1},compId:8,child:[{type:"Clip",props:{y:-30,x:276,var:"clipShareVideo",skin:"index/clip_share_video.png",clipY:2},compId:9},{type:"Label",props:{y:29,x:78,var:"tfShareVideo",text:"Respawn",font:"btnFont"},compId:17}]},{type:"Image",props:{skin:"game/img_master_avatar.png",centerY:-41,centerX:0,alpha:1},compId:4},{type:"ProgressBar",props:{y:138,x:191,var:"pgProgress",value:1,top:138,skin:"game/progress_level.png",centerX:-4,alpha:1},compId:10},{type:"Image",props:{skin:"game/img_talk.png",centerY:-310,centerX:31},compId:22,child:[{type:"Image",props:{y:15,x:8,width:80,var:"imgFriendHead",skin:"index/img_master_head.png",height:80},compId:26},{type:"WXOpenDataViewer",props:{y:15,x:8,width:80,var:"wxOpenData",iconSign:"wx",height:80,runtime:"laya.ui.WXOpenDataViewer"},compId:24}]},{type:"Label",props:{wordWrap:!0,width:250,var:"tfTalk",valign:"middle",text:"I'm waiting for you bro, hold on",leading:10,height:72,fontSize:24,font:"Microsoft YaHei",color:"#7d744f",centerY:-322,centerX:77,bold:!0,align:"left"},compId:25},{type:"Label",props:{y:10,x:10,width:400,var:"tfLevelProgress",top:204,text:"Leftover zombies 100%",scaleY:.6,scaleX:.6,font:"yazi",centerX:0,cacheAs:"bitmap",alpha:1,align:"center"},compId:11},{type:"Label",props:{width:228,var:"tfCountDown",text:"T-minus 5s",scaleX:.8,height:44,font:"yazi",centerY:202,centerX:-4,cacheAs:"bitmap",anchorY:.5,anchorX:.5,alpha:1,align:"center"},compId:14}],animations:[{nodes:[{target:16,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:16,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:16,key:"alpha",index:20},{value:.8,tweenMethod:"linearNone",tween:!0,target:16,key:"alpha",index:35}]}},{target:10,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:10,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:10,key:"alpha",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:10,key:"alpha",index:40}]}},{target:11,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:11,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:11,key:"alpha",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:11,key:"alpha",index:40}]}},{target:4,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:36},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:41}]}},{target:8,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:8,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:8,key:"alpha",index:37},{value:1,tweenMethod:"linearNone",tween:!0,target:8,key:"alpha",index:42}]}},{target:14,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:14,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:14,key:"alpha",index:37},{value:1,tweenMethod:"linearNone",tween:!0,target:14,key:"alpha",index:42}]}},{target:22,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:22,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:22,key:"alpha",index:39},{value:1,tweenMethod:"linearNone",tween:!0,target:22,key:"alpha",index:42}]}},{target:25,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:25,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:25,key:"alpha",index:39},{value:1,tweenMethod:"linearNone",tween:!0,target:25,key:"alpha",index:42}]}}],name:"aniShow",id:1,frameRate:24,action:0},{nodes:[{target:8,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:8,key:"scaleY",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:8,key:"scaleY",index:6},{value:1,tweenMethod:"linearNone",tween:!0,target:8,key:"scaleY",index:12}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:8,key:"scaleX",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:8,key:"scaleX",index:6},{value:1,tweenMethod:"linearNone",tween:!0,target:8,key:"scaleX",index:12}]}}],name:"aniShareVideo",id:2,frameRate:24,action:0}],loadList:["index/img_mask.png","index/btn_start.png","index/clip_share_video.png","game/img_master_avatar.png","game/progress_level.png","game/img_talk.png","index/img_master_head.png"],loadList3D:[]},e.ReviveViewUI=h,i("ui.game.ReviveViewUI",h);class c extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(c.uiView)}}c.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{var:"imgBg",top:0,skin:"index/img_mask.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:.8},compId:3},{type:"Image",props:{var:"imgTitle",skin:"index/img_unlockTitle.png",centerY:-469,centerX:0,anchorY:.5,anchorX:.5},compId:49},{type:"Box",props:{width:560,var:"boxMain",height:1045,centerY:0,centerX:0,anchorY:.5,anchorX:.5},compId:5,child:[{type:"Box",props:{y:139,x:-89,width:737,var:"boxRadar",height:636},compId:72,child:[{type:"Image",props:{y:315,x:375,var:"imgRadar",anchorY:.5,anchorX:.5},compId:53},{type:"Label",props:{y:30,x:376,wordWrap:!0,width:113,text:"Hurt",scaleY:1,scaleX:1,height:44,fontSize:20,font:"yazi",color:"#000000",anchorY:.5,anchorX:.5,align:"center"},compId:68},{type:"Label",props:{y:270,x:62,wordWrap:!0,width:129,text:"Gold",scaleY:.6,scaleX:.6,height:110,fontSize:20,font:"yazi",color:"#000000",anchorY:.5,anchorX:.5,align:"center"},compId:67},{type:"Label",props:{y:270,x:681,wordWrap:!0,width:150,text:"Magazine capacity",scaleY:.6,scaleX:.6,height:83,fontSize:20,font:"yazi",color:"#000000",anchorY:.5,anchorX:.5,align:"center"},compId:66},{type:"Label",props:{y:595,x:556,width:83,text:"Accuracy",scaleY:1,scaleX:.8,height:48,fontSize:20,font:"yazi",color:"#000000",anchorY:.5,anchorX:.5,align:"center"},compId:65},{type:"Label",props:{y:592,x:176,width:83,text:"Fire Rate",scaleY:1,scaleX:.8,height:48,fontSize:20,font:"yazi",color:"#000000",anchorY:.5,anchorX:.5,align:"center"},compId:64}]},{type:"Image",props:{y:459,x:282,var:"imgWeapon",anchorY:.5,anchorX:.5},compId:36},{type:"Image",props:{y:459,x:74,var:"imgLeft",anchorY:.5,anchorX:.5},compId:70},{type:"Image",props:{y:459,x:496,var:"imgRight",anchorY:.5,anchorX:.5},compId:71},{type:"Image",props:{y:586,x:121,width:339,var:"imgNameBg",skin:"index/img_unlock_name_bg.png",height:52},compId:52},{type:"Label",props:{y:614,x:286,width:517,var:"tfMsg",text:"Lv.99  SMG",scaleY:.6,scaleX:.6,height:48,fontSize:20,font:"yazi",color:"#000000",anchorY:.5,anchorX:.5,align:"center"},compId:38},{type:"Button",props:{y:992,x:289,var:"tfGiveUp",skin:"index/btn_giveup.png",runtime:"base/base/Button.ts",stateNum:1,label:" ",anchorX:.5,anchorY:.5},compId:74},{type:"Button",props:{y:856.5,x:288,var:"btnPay",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelSize:50,labelFont:"yazi",labelAlign:"center",anchorY:.5,anchorX:.5},compId:33,child:[{type:"Label",props:{y:49,x:87,var:"tfPay",valign:"middle",text:"Receive",scaleY:.9,scaleX:.6,height:49,fontSize:20,font:"btnFont",color:"#000000",anchorY:.5,anchorX:.5,align:"center"},compId:59},{type:"Image",props:{y:21,x:135,skin:"index/img_dimond.png"},compId:57},{type:"Label",props:{y:48,x:231,width:92,var:"tfDiamond",valign:"middle",text:"50",scaleY:.9,scaleX:.9,height:49,fontSize:20,font:"btnFont",color:"#000000",anchorY:.5,anchorX:.5,align:"left"},compId:58},{type:"Clip",props:{y:-32,x:274.5,var:"clipPay",skin:"index/clip_share_video.png",clipY:2},compId:62}]}]}],animations:[{nodes:[{target:36,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:36,key:"scaleY",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:36,key:"scaleY",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:36,key:"scaleY",index:10}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:36,key:"scaleX",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:36,key:"scaleX",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:36,key:"scaleX",index:10}]}}],name:"animWeapon",id:1,frameRate:24,action:0},{nodes:[{target:70,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:70,key:"rotation",index:0},{value:-20,tweenMethod:"linearNone",tween:!0,target:70,key:"rotation",index:2},{value:0,tweenMethod:"linearNone",tween:!0,target:70,key:"rotation",index:4},{value:20,tweenMethod:"linearNone",tween:!0,target:70,key:"rotation",index:6},{value:0,tweenMethod:"linearNone",tween:!0,target:70,key:"rotation",index:8}]}},{target:71,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:71,key:"rotation",index:0},{value:-20,tweenMethod:"linearNone",tween:!0,target:71,key:"rotation",index:2},{value:0,tweenMethod:"linearNone",tween:!0,target:71,key:"rotation",index:4},{value:20,tweenMethod:"linearNone",tween:!0,target:71,key:"rotation",index:6},{value:0,tweenMethod:"linearNone",tween:!0,target:71,key:"rotation",index:8}]}}],name:"animShake",id:2,frameRate:24,action:0}],loadList:["index/img_mask.png","index/img_unlockTitle.png","index/img_unlock_name_bg.png","index/btn_giveup.png","index/btn_start.png","index/img_dimond.png","index/clip_share_video.png"],loadList3D:[]},e.UnlockUI=c,i("ui.game.UnlockUI",c)}(e.game||(e.game={}))}(a.ui||(a.ui={})),function(e){!function(e){class t extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"Dialog",props:{width:750,height:1334},compId:2,child:[{type:"ZombieInfoItem",props:{y:310,x:152,var:"viewInfo",runtime:"game/ui/common/ZombieInfoItem.ts"},compId:13},{type:"Button",props:{y:667,x:675,var:"btnNext",stateNum:1,skin:"index/btn_rank_page.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:9},{type:"Button",props:{y:667,x:75,var:"btnPre",stateNum:1,skin:"index/btn_rank_page.png",scaleX:-1,runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:10},{type:"Button",props:{y:120,x:33,var:"btnClose",skin:"index/btn_close.png",runtime:"base/base/Button.ts",label:" ",stateNum:1,anchorX:.5,anchorY:.5},compId:14}],loadList:["index/btn_rank_page.png","index/btn_close.png"],loadList3D:[]},e.IllustratedDialogUI=t,i("ui.illustrated.IllustratedDialogUI",t);class a extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"Dialog",props:{width:750,height:1334},compId:2,child:[{type:"ZombieInfoItem",props:{y:247,x:152.5,var:"viewInfo",runtime:"game/ui/common/ZombieInfoItem.ts"},compId:238},{type:"Button",props:{y:1033,x:375,var:"btnSure",stateNum:1,skin:"index/btn_green.png",runtime:"base/base/Button.ts",labelFont:"btnFont",labelAlign:"center",anchorY:.5,anchorX:.5},compId:7,child:[{type:"Label",props:{y:26,x:-1,width:301,var:"tfSure",text:"Ok",scaleY:.7,scaleX:.7,layoutEnabled:!1,height:46,font:"btnFont",align:"center"},compId:8}]}],loadList:["index/btn_green.png"],loadList3D:[]},e.ZombieInfoDialogUI=a,i("ui.illustrated.ZombieInfoDialogUI",a);class n extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:445,height:713},compId:2,child:[{type:"Image",props:{y:0,x:0,skin:"activity/img_illustrated_bg.png"},compId:3},{type:"Image",props:{y:80,x:302,var:"imgBoss",skin:"activity/img_boss.png"},compId:8},{type:"Image",props:{y:225,x:162,var:"imgLock",skin:"activity/img_illustrated_lock.png"},compId:9},{type:"View",props:{y:103,x:73,var:"viewAvatar",presetID:1,width:300,isPresetRoot:!0,height:400},compId:4,child:[{type:"Script",props:{y:0,x:0,presetID:2,runtime:"game/ui/common/ExhibitionComponent.ts"},compId:7}]},{type:"Label",props:{y:528,x:73,width:300,var:"tfName",valign:"middle",text:"???",rotation:-4,fontSize:36,font:"Microsoft YaHei",color:"#7d744f",bold:!0,align:"center"},compId:5},{type:"HTMLDivElement",props:{y:598,x:83,width:419,var:"tfDesc",scaleX:.7,innerHTML:"Content",height:12,runtime:"laya.html.dom.HTMLDivElement"},compId:10}],loadList:["activity/img_illustrated_bg.png","activity/img_boss.png","activity/img_illustrated_lock.png","prefab/exhibition.prefab"],loadList3D:[]},e.ZombieInfoItemUI=n,i("ui.illustrated.ZombieInfoItemUI",n)}(e.illustrated||(e.illustrated={}))}(a.ui||(a.ui={})),function(e){!function(e){class t extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"Dialog",props:{width:750,height:1334},compId:2,child:[{type:"Button",props:{y:117,x:35,var:"btnClose",skin:"index/btn_close.png",label:" ",stateNum:1,anchorX:.5,anchorY:.5},compId:4},{type:"Image",props:{y:193,x:92,width:560,skin:"index/img_view_frame.png",sizeGrid:"80,10,10,535",height:884},compId:6},{type:"Image",props:{y:151,x:223,skin:"index/img_append_my_program_title.png"},compId:7},{type:"Image",props:{y:265,x:104,skin:"activity/img_append_my_program_banner.png"},compId:8},{type:"Image",props:{y:392,x:104,skin:"activity/img_append_my_program.png"},compId:11},{type:"Button",props:{y:327,x:546,width:164,var:"btnGet",skin:"index/btn_small.png",runtime:"base/base/Button.ts",pivotY:36.5,pivotX:82,height:73,stateNum:1,anchorX:.5,anchorY:.5},compId:9,child:[{type:"Label",props:{y:14,x:3,width:301,var:"tfGet",text:"Free collection",scaleY:.7,scaleX:.5,height:49,font:"btnFont",align:"center"},compId:10}]}],loadList:["index/btn_close.png","index/img_view_frame.png","index/img_append_my_program_title.png","activity/img_append_my_program_banner.png","activity/img_append_my_program.png","index/btn_small.png"],loadList3D:[]},e.AppendMyProgramDialogUI=t,i("ui.index.AppendMyProgramDialogUI",t);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:128,runtime:"game/ui/index/item/CombineItem.ts",height:128},compId:2,child:[{type:"Image",props:{y:42,width:128,skin:"index/img_item_bg.png",sizeGrid:"40,40,40,40"},compId:3},{type:"Image",props:{y:51,x:64,var:"imgIcon",skin:"weapon/w1003g.png",scaleY:1,scaleX:1,anchorY:.5,anchorX:.5},compId:4},{type:"Image",props:{y:128,x:63,visible:!1,var:"imgPopupLight",skin:"index/img_popup_light.png",anchorY:1,anchorX:.5},compId:13},{type:"Image",props:{y:92,x:71,var:"imgLevel",skin:"index/img_item_level_bg.png"},compId:5},{type:"Label",props:{y:97,x:79,width:64,var:"tfLevel",text:"6",scaleY:.6,scaleX:.6,height:43,font:"btnFont",align:"center"},compId:6},{type:"Label",props:{y:-30.76923076923077,x:0,width:184,visible:!1,var:"tfEarn",scaleY:.7,scaleX:.7,height:43,font:"yazi",alpha:1,align:"center"},compId:7},{type:"Image",props:{y:49,x:64,visible:!1,var:"imgLight",scaleY:2,scaleX:2,anchorY:.5,anchorX:.5},compId:12}],animations:[{nodes:[{target:4,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"rotation",index:0},{value:-10,tweenMethod:"linearNone",tween:!0,target:4,key:"rotation",index:5},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"rotation",index:10}]}}],name:"aniShake",id:1,frameRate:24,action:0},{nodes:[{target:7,keyframes:{y:[{value:51,tweenMethod:"linearNone",tween:!0,target:7,key:"y",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"y",index:4},{value:-50,tweenMethod:"linearNone",tween:!0,target:7,key:"y",index:17}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:7,key:"alpha",index:4},{value:1,tweenMethod:"linearNone",tween:!0,target:7,key:"alpha",index:12},{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"alpha",index:17}]}},{target:4,keyframes:{y:[{value:51,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:0},{value:31,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:4},{value:51,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:8}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:0},{value:1.3,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:4},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:8}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:0},{value:1.3,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:4},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:8}]}}],name:"animEarn",id:3,frameRate:24,action:0},{nodes:[{target:12,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:12,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:12,key:"visible",index:11}],skin:[{value:"anim/hecheng2.png",tweenMethod:"linearNone",tween:!1,target:12,key:"skin",index:1},{value:"anim/hecheng3.png",tweenMethod:"linearNone",tween:!1,target:12,key:"skin",index:2},{value:"anim/hecheng4.png",tweenMethod:"linearNone",tween:!1,target:12,key:"skin",index:3},{value:"anim/hecheng5.png",tweenMethod:"linearNone",tween:!1,target:12,key:"skin",index:4},{value:"anim/hecheng6.png",tweenMethod:"linearNone",tween:!1,target:12,key:"skin",index:5},{value:"anim/hecheng7.png",tweenMethod:"linearNone",tween:!1,target:12,key:"skin",index:6},{value:"anim/hecheng8.png",tweenMethod:"linearNone",tween:!1,target:12,key:"skin",index:7},{value:"anim/hecheng1.png",tweenMethod:"linearNone",tween:!1,target:12,key:"skin",index:8},{value:"anim/hecheng10.png",tweenMethod:"linearNone",tween:!1,target:12,key:"skin",index:9},{value:"anim/hecheng11.png",tweenMethod:"linearNone",tween:!1,target:12,key:"skin",index:10}]}}],name:"animLight",id:4,frameRate:48,action:0},{nodes:[{target:4,keyframes:{x:[{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:0},{value:54,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:3},{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:6},{value:74,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:9},{value:64,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:12}]}}],name:"animTipAirdrop",id:5,frameRate:24,action:0},{nodes:[{target:4,keyframes:{scaleY:[{value:2,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:5}],scaleX:[{value:2,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:5}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:5}]}}],name:"aniAirdropShow",id:6,frameRate:24,action:0},{nodes:[{target:13,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:13,key:"visible",index:0}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:13,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:13,key:"scaleY",index:5}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:13,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:13,key:"alpha",index:5}]}}],name:"aniPopupShow",id:7,frameRate:24,action:0},{nodes:[{target:13,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:13,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:13,key:"visible",index:5}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:13,key:"scaleY",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:13,key:"scaleY",index:5}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:13,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:13,key:"alpha",index:5}]}}],name:"aniPopupHide",id:8,frameRate:24,action:0},{nodes:[{target:4,keyframes:{scaleY:[{value:2,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:4},{value:1.1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:6}],scaleX:[{value:2,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:4},{value:1.1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:6}],alpha:[{value:.5,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:4}]}}],name:"aniBuy",id:9,frameRate:24,action:0}],loadList:["index/img_item_bg.png","weapon/w1003g.png","index/img_popup_light.png","index/img_item_level_bg.png","anim/hecheng2.png","anim/hecheng3.png","anim/hecheng4.png","anim/hecheng5.png","anim/hecheng6.png","anim/hecheng7.png","anim/hecheng8.png","anim/hecheng1.png","anim/hecheng10.png","anim/hecheng11.png"],loadList3D:[]},e.CombineItemUI=a,i("ui.index.CombineItemUI",a);class n extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"Dialog",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{y:265,x:91,width:560,skin:"index/img_view_frame.png",sizeGrid:"80,10,10,535",height:750},compId:4},{type:"Image",props:{y:222,x:94,skin:"index/img_customer_service_title.png"},compId:5},{type:"Button",props:{y:117,x:35,var:"btnClose",skin:"index/btn_close.png",label:" ",stateNum:1,anchorX:.5,anchorY:.5},compId:6},{type:"Image",props:{y:334,x:108,skin:"activity/img_customer_service.png"},compId:7},{type:"Button",props:{y:425,x:485,width:173,var:"btnOpen",skin:"index/btn_small.png",runtime:"base/base/Button.ts",pivotY:33.5,pivotX:86.5,height:67,stateNum:1,anchorX:.5,anchorY:.5},compId:9,child:[{type:"Label",props:{y:11,x:22,width:248,var:"tfOpen",text:"Claim diamonds",scaleY:.7,scaleX:.5,height:52,font:"btnFont",align:"center"},compId:10}]}],loadList:["index/img_view_frame.png","index/img_customer_service_title.png","index/btn_close.png","activity/img_customer_service.png","index/btn_small.png"],loadList3D:[]},e.CustomerServiceDialogUI=n,i("ui.index.CustomerServiceDialogUI",n);class s extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"View",props:{y:64,x:64,width:128,runtime:"game/ui/index/view/DragItem.ts",height:128,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Image",props:{y:64,x:64,var:"imgIcon",scaleY:1.1,scaleX:1.1,anchorY:.5,anchorX:.5},compId:3}],loadList:[],loadList3D:[]},e.DragItemUI=s,i("ui.index.DragItemUI",s);class o extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(o.uiView)}}o.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{y:0,x:0,var:"imgBG",top:0,skin:"index/img_mask.png",right:0,mouseThrough:!1,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:29},{type:"Image",props:{width:543,var:"imgMap",skin:"game/img_map.png",height:498,centerY:-166,centerX:0,alpha:1},compId:20,child:[{type:"Image",props:{y:226,x:98,var:"imgHead",skin:"game/img_master.png",anchorY:.5,anchorX:.5},compId:21},{type:"Image",props:{y:320,x:394,var:"imgDestination",skin:"game/img_destination.png",anchorY:.5,anchorX:.5,alpha:0},compId:22}]},{type:"Button",props:{width:670,var:"btnStart",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelFont:"yazi",height:100,centerY:400,centerX:0,anchorY:.5,anchorX:.5,alpha:1},compId:23,child:[{type:"Label",props:{y:49,x:326,wordWrap:!1,width:615,var:"tfStart",text:"Go to ",mouseEnabled:!1,height:51,font:"btnFont",anchorY:.5,anchorX:.5,align:"center"},compId:24}]},{type:"Label",props:{wordWrap:!0,width:600,var:"tfDesc",valign:"middle",text:"Received an order to go to the nuclear power plant to investigate",strokeColor:"#000000",stroke:4,leading:22,height:200,fontSize:32,font:"Microsoft YaHei",color:"#ffffff",centerY:200,centerX:0,bold:!0,alpha:1,align:"center"},compId:18}],animations:[{nodes:[{target:22,keyframes:{scaleY:[{value:2,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleY",index:5},{value:1.1,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleY",index:6},{value:1,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleY",index:7}],scaleX:[{value:2,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleX",index:5},{value:1.1,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleX",index:6},{value:1,tweenMethod:"linearNone",tween:!0,target:22,key:"scaleX",index:7}],rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:22,key:"rotation",index:0},{value:160,tweenMethod:"linearNone",tween:!0,target:22,key:"rotation",index:5}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:22,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:22,key:"alpha",index:5}]}},{target:18,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:18,key:"alpha",index:0}]}},{target:23,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:23,key:"alpha",index:0}]}}],name:"aniShowDestination",id:1,frameRate:24,action:0},{nodes:[{target:18,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:18,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:18,key:"alpha",index:5}]}},{target:20,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:20,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:20,key:"alpha",index:5}]}},{target:23,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:23,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:23,key:"alpha",index:5}]}},{target:29,keyframes:{alpha:[{value:.8,tweenMethod:"linearNone",tween:!0,target:29,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:29,key:"alpha",index:5}]}}],name:"aniHide",id:2,frameRate:24,action:0},{nodes:[{target:18,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:18,key:"alpha",index:0}]}},{target:23,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:23,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:23,key:"alpha",index:40}]}},{target:20,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:20,key:"alpha",index:0}]}},{target:29,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:29,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:29,key:"alpha",index:40}]}}],name:"aniStartRun",id:3,frameRate:24,action:0},{nodes:[{target:18,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:18,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:18,key:"alpha",index:10}]}},{target:23,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:23,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:23,key:"alpha",index:8},{value:1,tweenMethod:"linearNone",tween:!0,target:23,key:"alpha",index:12}]}}],name:"aniShow",id:4,frameRate:24,action:0}],loadList:["index/img_mask.png","game/img_map.png","game/img_master.png","game/img_destination.png","index/btn_start.png"],loadList3D:[]},e.EnterViewUI=o,i("ui.index.EnterViewUI",o);class l extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(l.uiView)}}l.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:0,skin:"index/img_mask.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:.3},compId:56},{type:"Image",props:{var:"imgBg",skin:"index/img_combine_area_bg.png",sizeGrid:"318,151,286,229",right:0,left:0,height:710,bottom:-33,anchorY:0},compId:10,child:[{type:"Image",props:{y:149,x:20,skin:"index/img_weapon_tip.png"},compId:49},{type:"Image",props:{y:107,x:103,skin:"index/img_item_level_bg.png"},compId:50},{type:"Image",props:{y:70,x:90,var:"imgCurWeapon",scaleY:1.1,scaleX:1.1,anchorY:.5,anchorX:.5},compId:52},{type:"Label",props:{y:112,x:109,width:84,var:"tfCurWeaponLevel",text:"29",scaleY:.5,scaleX:.5,height:46,font:"btnFont",align:"center"},compId:54},{type:"Image",props:{y:9,x:29,skin:"index/img_weapon_change.png"},compId:62}]},{type:"Image",props:{var:"imgRecommendWeapon",skin:"index/img_recommend_weapon.png",centerX:-3,bottom:649},compId:91,child:[{type:"Label",props:{var:"tfRecommendWeapon",text:"Recommended Gun Level：Lv11",scaleY:.6,scaleX:.4,right:18,font:"yazi",bottom:8,anchorY:.5,anchorX:.5,align:"left"},compId:92}]},{type:"Button",props:{var:"btnStart",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelFont:"yazi",centerX:0,bottom:530,anchorY:.5,anchorX:.5},compId:6,child:[{type:"Label",props:{y:54,x:151,width:300,var:"tfStart",text:"Start ",mouseEnabled:!1,height:46,font:"btnFont",anchorY:.5,anchorX:.5,align:"center"},compId:58}]},{type:"Button",props:{x:662,width:100,var:"btnBonus",stateNum:1,skin:"index/btn_bonus.png",runtime:"base/base/Button.ts",right:18,height:122,bottom:544,anchorY:.5,anchorX:.3},compId:63,child:[{type:"Clip",props:{y:-6,x:63,var:"clipShareVideo",skin:"index/clip_share_video.png",clipY:2},compId:75},{type:"Image",props:{y:126,x:47,skin:"index/img_bonus_name.png",anchorY:.5,anchorX:.5},compId:72},{type:"Image",props:{y:79,x:45,width:55,var:"imgBonus",skin:"index/img_mask.png",height:30,alpha:.5,sizeGrid:"2,2,2,2"},compId:73},{type:"Image",props:{y:38,x:0,var:"imgBonusLock",skin:"index/img_bonus_lock.png"},compId:76},{type:"Label",props:{y:57,x:50,var:"tfBonusLock",text:"Get downtown",scaleY:.5,scaleX:.3,font:"yazi",anchorY:.5,anchorX:.5,align:"center"},compId:77},{type:"Label",props:{y:96,x:73,var:"tfBonus",text:"2/2",scaleY:.5,scaleX:.5,font:"yazi",anchorY:.5,anchorX:.5,align:"left"},compId:74}]},{type:"Box",props:{width:150,visible:!1,var:"boxBonusTips",right:40,height:64,bottom:654},compId:95,child:[{type:"Image",props:{y:64,x:75,width:150,var:"imgBonusTips",skin:"index/img_bonus_tips.png",pivotY:64,pivotX:75,height:64},compId:93}]},{type:"Box",props:{width:316,var:"boxCoin",height:50,centerX:0,bottom:453},compId:33,child:[{type:"Image",props:{y:0,x:0,width:321,skin:"index/img_coin_bg.png",sizeGrid:"10,40,10,40",height:49},compId:30},{type:"Image",props:{y:29,x:-4,skin:"index/img_coin.png",scaleY:.9,scaleX:.9,anchorY:.5,anchorX:.5},compId:44},{type:"Image",props:{y:27,x:6,var:"imgCoin",skin:"index/img_coin.png",anchorY:.5,anchorX:.5},compId:31},{type:"Label",props:{y:23,x:95,var:"tfCoin",text:"475.6K",scaleY:.7,scaleX:.7,font:"btnFont",anchorY:.5,anchorX:.5,align:"left"},compId:32},{type:"Label",props:{y:16.5,x:150,var:"tfOutPut",text:"+47/s",scaleY:.5,scaleX:.5,font:"yazi",align:"left"},compId:45}]},{type:"Box",props:{width:160,var:"boxDiamond",height:50,centerX:277,bottom:453},compId:39,child:[{type:"Image",props:{width:160,skin:"index/img_coin_bg.png",sizeGrid:"10,40,10,40"},compId:40},{type:"Image",props:{y:26,x:-1,var:"imgDiamond",skin:"index/img_dimond.png",anchorY:.5,anchorX:.5},compId:41},{type:"Label",props:{y:23,x:86,width:150,var:"tfDiamond",text:"475.6K",scaleY:.7,scaleX:.7,font:"btnFont",anchorY:.5,anchorX:.5,align:"left"},compId:42}]},{type:"Box",props:{var:"boxCombine",right:0,left:0,height:468,bottom:-33},compId:34,child:[{type:"CombineItem",props:{y:0,x:33,width:128,name:"combineItem0",height:128,runtime:"game/ui/index/item/CombineItem.ts"},compId:17},{type:"CombineItem",props:{y:0,x:170,width:128,name:"combineItem1",height:128,runtime:"game/ui/index/item/CombineItem.ts"},compId:19},{type:"CombineItem",props:{y:0,x:310,width:128,name:"combineItem2",height:128,runtime:"game/ui/index/item/CombineItem.ts"},compId:20},{type:"CombineItem",props:{y:0,x:451,width:128,name:"combineItem3",height:128,runtime:"game/ui/index/item/CombineItem.ts"},compId:28},{type:"CombineItem",props:{y:0,x:590,width:128,name:"combineItem4",height:128,runtime:"game/ui/index/item/CombineItem.ts"},compId:21},{type:"CombineItem",props:{y:151,x:33,width:128,name:"combineItem5",height:128,runtime:"game/ui/index/item/CombineItem.ts"},compId:23},{type:"CombineItem",props:{y:151,x:170,width:128,name:"combineItem6",height:128,runtime:"game/ui/index/item/CombineItem.ts"},compId:24},{type:"CombineItem",props:{y:151,x:310,width:128,name:"combineItem7",height:128,runtime:"game/ui/index/item/CombineItem.ts"},compId:25},{type:"CombineItem",props:{y:151,x:451,width:128,name:"combineItem8",height:128,runtime:"game/ui/index/item/CombineItem.ts"},compId:26},{type:"CombineItem",props:{y:151,x:590,width:128,name:"combineItem9",height:128,runtime:"game/ui/index/item/CombineItem.ts"},compId:29},{type:"Image",props:{y:370,x:66,var:"imgGarbage",skin:"index/img_garbage.png",anchorY:.5,anchorX:.5},compId:90},{type:"Button",props:{y:370,x:408,var:"btnBuy",stateNum:1,skin:"index/btn_buy.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:14,child:[{type:"Image",props:{y:26,x:117,var:"imgBuyIcon",scaleY:.8,scaleX:.8,rotation:30,anchorY:.5,anchorX:.5},compId:15},{type:"Image",props:{y:56,x:44,var:"imgBuyCoin1",skin:"index/img_coin.png",scaleY:.65,scaleX:.65},compId:48},{type:"Image",props:{y:55,x:53,var:"imgBuyCoin2",skin:"index/img_coin.png",scaleY:.7,scaleX:.7},compId:27},{type:"Label",props:{y:59,x:109,width:140,var:"tfBuyCoin",text:"500",scaleY:.7,scaleX:.7,font:"btnFont",align:"left"},compId:16}]},{type:"Button",props:{y:380,x:644,var:"btnShop",stateNum:1,skin:"index/btn_shop.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:38,child:[{type:"Image",props:{y:1,x:127,var:"imgShopFree",skin:"index/img_shop_free.png",anchorY:.5,anchorX:.5},compId:68,child:[{type:"Label",props:{y:15,x:26,text:"Free",scaleY:.4,scaleX:.4,font:"yazi",anchorY:.5,anchorX:.5},compId:69}]},{type:"Image",props:{y:-17,x:1,skin:"index/img_shop_logo.png"},compId:46},{type:"Label",props:{y:26,x:68,width:150,text:"Shop",scaleY:.7,scaleX:.7,height:44,font:"btnFont",align:"center"},compId:47}]},{type:"Image",props:{zOrder:90,visible:!1,var:"imgBoxGuide",skin:"index/img_mask.png",sizeGrid:"2,2,2,2",right:0,mouseThrough:!1,mouseEnabled:!0,left:1,height:1920,bottom:0,alpha:.5},compId:60}]},{type:"LevelView",props:{var:"viewLevel",top:120,runtime:"game/ui/common/LevelView.ts",centerX:0},compId:57},{type:"Button",props:{var:"btnMenu",top:353,stateNum:1,skin:"index/btn_menu.png",left:-2},compId:79},{type:"Image",props:{var:"imgMenu",top:347,skin:"index/img_red_point.png",left:53},compId:80},{type:"Image",props:{zOrder:90,y:0,x:0,visible:!1,var:"imgGuide",top:0,skin:"index/img_mask.png",sizeGrid:"2,2,2,2",right:0,mouseThrough:!1,mouseEnabled:!0,left:0,bottom:0,alpha:.5},compId:59},{type:"Box",props:{y:440,x:681,width:122,var:"boxPromo",rotation:0,right:8,height:168,bottom:810,anchorY:.5,anchorX:.5},compId:98,child:[{type:"Image",props:{y:24,skin:"index/img_promo.png"},compId:96},{type:"Image",props:{y:0,x:4,skin:"index/img_guess.png"},compId:100},{type:"Image",props:{y:36,x:9,width:100,var:"imgPromoIcon",height:100},compId:99},{type:"Label",props:{y:146,x:6,width:110,var:"tfPromoName",valign:"middle",text:"Game",strokeColor:"#000000",stroke:3,height:25,fontSize:20,font:"Microsoft YaHei",color:"#f6d426",align:"center"},compId:101}]}],animations:[{nodes:[{target:90,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:90,key:"scaleY",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:90,key:"scaleY",index:5}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:90,key:"scaleX",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:90,key:"scaleX",index:5}]}}],name:"aniGarbageShow",id:1,frameRate:24,action:0},{nodes:[{target:90,keyframes:{scaleY:[{value:1.2,tweenMethod:"linearNone",tween:!0,target:90,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:90,key:"scaleY",index:5}],scaleX:[{value:1.2,tweenMethod:"linearNone",tween:!0,target:90,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:90,key:"scaleX",index:5}]}}],name:"aniGarbageHide",id:2,frameRate:24,action:0},{nodes:[{target:44,keyframes:{scaleY:[{value:.9,tweenMethod:"linearNone",tween:!0,target:44,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:44,key:"scaleY",index:2},{value:.9,tweenMethod:"linearNone",tween:!0,target:44,key:"scaleY",index:4}],scaleX:[{value:.9,tweenMethod:"linearNone",tween:!0,target:44,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:44,key:"scaleX",index:2},{value:.9,tweenMethod:"linearNone",tween:!0,target:44,key:"scaleX",index:4}]}},{target:31,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:31,key:"scaleY",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:31,key:"scaleY",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:31,key:"scaleY",index:4}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:31,key:"scaleX",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:31,key:"scaleX",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:31,key:"scaleX",index:4}]}},{target:32,keyframes:{scaleY:[{value:.7,tweenMethod:"linearNone",tween:!0,target:32,key:"scaleY",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:32,key:"scaleY",index:2},{value:.7,tweenMethod:"linearNone",tween:!0,target:32,key:"scaleY",index:4}],scaleX:[{value:.7,tweenMethod:"linearNone",tween:!0,target:32,key:"scaleX",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:32,key:"scaleX",index:2},{value:.7,tweenMethod:"linearNone",tween:!0,target:32,key:"scaleX",index:4}]}}],name:"aniCoin",id:3,frameRate:24,action:0},{nodes:[{target:41,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:41,key:"scaleY",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:41,key:"scaleY",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:41,key:"scaleY",index:4}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:41,key:"scaleX",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:41,key:"scaleX",index:2},{value:1,tweenMethod:"linearNone",tween:!0,target:41,key:"scaleX",index:4}]}},{target:42,keyframes:{scaleY:[{value:.7,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:2},{value:.7,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:4}],scaleX:[{value:.7,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:2},{value:.7,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:4}]}}],name:"animDiamond",id:4,frameRate:24,action:0},{nodes:[{target:68,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleY",index:0},{value:1.5,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleY",index:10},{value:1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleY",index:14},{value:1.2,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleY",index:18},{value:1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleY",index:22},{value:1.1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleY",index:26},{value:1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleY",index:30},{value:1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleY",index:120},{value:1.01,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleY",index:121}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleX",index:0},{value:1.5,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleX",index:10},{value:1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleX",index:14},{value:1.2,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleX",index:18},{value:1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleX",index:22},{value:1.1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleX",index:26},{value:1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleX",index:30},{value:1,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleX",index:120},{value:1.01,tweenMethod:"linearNone",tween:!0,target:68,key:"scaleX",index:121}]}}],name:"animShopFree",id:5,frameRate:24,action:0},{nodes:[{target:72,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:72,key:"rotation",index:0},{value:10,tweenMethod:"linearNone",tween:!0,target:72,key:"rotation",index:5},{value:0,tweenMethod:"linearNone",tween:!0,target:72,key:"rotation",index:10},{value:-10,tweenMethod:"linearNone",tween:!0,target:72,key:"rotation",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:72,key:"rotation",index:20},{value:0,tweenMethod:"linearNone",tween:!0,target:72,key:"rotation",index:60}]}}],name:"aniBonus",id:6,frameRate:24,action:2},{nodes:[{target:82,keyframes:{x:[{value:0,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:0},{value:-20,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:82,key:"x",index:30}]}}],name:"aniAppendMyProgram",id:7,frameRate:24,action:0},{nodes:[],name:"aniInvite",id:8,frameRate:24,action:2},{nodes:[{target:93,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:93,key:"visible",index:0},{value:!0,tweenMethod:"linearNone",tween:!1,target:93,key:"visible",index:57}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:93,key:"scaleY",index:0},{value:1.05,tweenMethod:"linearNone",tween:!0,target:93,key:"scaleY",index:4},{value:1,tweenMethod:"linearNone",tween:!0,target:93,key:"scaleY",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:93,key:"scaleY",index:53},{value:0,tweenMethod:"linearNone",tween:!0,target:93,key:"scaleY",index:57}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:93,key:"scaleX",index:0},{value:1.05,tweenMethod:"linearNone",tween:!0,target:93,key:"scaleX",index:4},{value:1,tweenMethod:"linearNone",tween:!0,target:93,key:"scaleX",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:93,key:"scaleX",index:53},{value:0,tweenMethod:"linearNone",tween:!0,target:93,key:"scaleX",index:57}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:93,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:93,key:"alpha",index:4},{value:1,tweenMethod:"linearNone",tween:!0,target:93,key:"alpha",index:53},{value:0,tweenMethod:"linearNone",tween:!0,target:93,key:"alpha",index:57}]}},{target:95,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:95,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:95,key:"visible",index:57}]}}],name:"aniBonusTips",id:9,frameRate:24,action:0},{nodes:[{target:98,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:98,key:"rotation",index:0},{value:-10,tweenMethod:"linearNone",tween:!0,target:98,key:"rotation",index:8},{value:0,tweenMethod:"linearNone",tween:!0,target:98,key:"rotation",index:16},{value:10,tweenMethod:"linearNone",tween:!0,target:98,key:"rotation",index:24},{value:0,tweenMethod:"linearNone",tween:!0,target:98,key:"rotation",index:32},{value:0,tweenMethod:"linearNone",tween:!0,target:98,key:"rotation",index:64}]}}],name:"aniPromo",id:10,frameRate:24,action:0}],loadList:["index/img_mask.png","index/img_combine_area_bg.png","index/img_weapon_tip.png","index/img_item_level_bg.png","index/img_weapon_change.png","index/img_recommend_weapon.png","index/btn_start.png","index/btn_bonus.png","index/clip_share_video.png","index/img_bonus_name.png","index/img_bonus_lock.png","index/img_bonus_tips.png","index/img_coin_bg.png","index/img_coin.png","index/img_dimond.png","index/img_garbage.png","index/btn_buy.png","index/btn_shop.png","index/img_shop_free.png","index/img_shop_logo.png","index/btn_menu.png","index/img_red_point.png","index/img_promo.png","index/img_guess.png"],loadList3D:[]},e.IndexViewUI=l,i("ui.index.IndexViewUI",l);class r extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(r.uiView)}}r.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{var:"imgMask",top:-1,skin:"index/img_mask.png",sizeGrid:"2,2,2,2",right:0,mouseThrough:!1,mouseEnabled:!0,left:0,bottom:0,alpha:0},compId:56},{type:"Button",props:{var:"btnMenu",top:353,stateNum:1,skin:"index/btn_menu.png",mouseThrough:!1,left:-2},compId:79},{type:"Image",props:{var:"imgMenu",top:347,skin:"index/img_red_point.png",left:53,anchorY:0,anchorX:0},compId:80},{type:"Box",props:{width:113,var:"boxMain",top:0,left:-113,height:1334,bottom:0},compId:81,child:[{type:"Image",props:{top:0,skin:"index/img_mask.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:.8},compId:82},{type:"Clip",props:{x:57,var:"clipSound",top:-1,skin:"index/img_sound.png",index:0,clipX:2,anchorY:.5,anchorX:.5},compId:86},{type:"Button",props:{x:56.5,var:"btnTurn",top:297,stateNum:1,skin:"activity/img_turn_logo.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:99,child:[{type:"Image",props:{y:18,x:98,var:"imgTurnTip",skin:"index/img_red_point.png"},compId:101}]},{type:"Button",props:{x:56.5,var:"btnIllustrated",top:139,stateNum:1,skin:"index/btn_illustrated.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:102,child:[{type:"Image",props:{y:18,x:98,var:"imgIllustratedRedPoint",skin:"index/img_red_point.png"},compId:103}]}]}],animations:[{nodes:[{target:88,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:88,key:"rotation",index:0},{value:-10,tweenMethod:"linearNone",tween:!0,target:88,key:"rotation",index:3},{value:0,tweenMethod:"linearNone",tween:!0,target:88,key:"rotation",index:6},{value:10,tweenMethod:"linearNone",tween:!0,target:88,key:"rotation",index:9},{value:0,tweenMethod:"linearNone",tween:!0,target:88,key:"rotation",index:12},{value:0,tweenMethod:"linearNone",tween:!0,target:88,key:"rotation",index:89},{value:0,tweenMethod:"linearNone",tween:!0,target:88,key:"rotation",index:90}]}}],name:"animDemo",id:1,frameRate:24,action:0},{nodes:[{target:95,keyframes:{y:[{value:-38.5,tweenMethod:"linearNone",tween:!0,target:95,key:"y",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:95,key:"y",index:15},{value:40,tweenMethod:"linearNone",tween:!0,target:95,key:"y",index:30},{value:41,tweenMethod:"linearNone",tween:!0,target:95,key:"y",index:120}],x:[{value:-50,tweenMethod:"linearNone",tween:!0,target:95,key:"x",index:0},{value:-10,tweenMethod:"linearNone",tween:!0,target:95,key:"x",index:15},{value:30,tweenMethod:"linearNone",tween:!0,target:95,key:"x",index:30},{value:31,tweenMethod:"linearNone",tween:!0,target:95,key:"x",index:120}]}}],name:"animAttention",id:2,frameRate:24,action:0}],loadList:["index/img_mask.png","index/btn_menu.png","index/img_red_point.png","index/img_sound.png","activity/img_turn_logo.png","index/btn_illustrated.png"],loadList3D:[]},e.MenuViewUI=r,i("ui.index.MenuViewUI",r);class d extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(d.uiView)}}d.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{y:10,x:10,top:0,skin:"index/img_mask.png",right:0,mouseThrough:!1,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:3},{type:"Image",props:{y:10,x:10,var:"imgIcon",skin:"index/img_city.png",centerY:-182,centerX:5},compId:4},{type:"Image",props:{y:685,x:116,var:"imgProgress",skin:"index/img_progress_bg.png",centerY:53,centerX:0},compId:5},{type:"ProgressBar",props:{y:10,x:10,var:"pgProgress",skin:"index/progress.png",centerY:55,centerX:3},compId:6},{type:"Label",props:{y:10,x:10,width:600,var:"tfTitle",text:"Go downtown...",font:"yazi",centerY:-37,centerX:0,align:"center"},compId:7}],animations:[{nodes:[{target:6,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:6,key:"alpha",index:0}]}},{target:7,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"alpha",index:0}]}},{target:5,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"alpha",index:0}]}},{target:4,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:0}]}},{target:2,keyframes:{sceneColor:[{value:"#ffffff",tweenMethod:"linearNone",tween:!1,target:2,key:"sceneColor",index:0}]}},{target:3,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:40}]}}],name:"aniHide",id:1,frameRate:24,action:0}],loadList:["index/img_mask.png","index/img_city.png","index/img_progress_bg.png","index/progress.png"],loadList3D:[]},e.MiniLoadingViewUI=d,i("ui.index.MiniLoadingViewUI",d);class u extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(u.uiView)}}u.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{y:0,x:0,top:0,skin:"index/img_mask.png",right:0,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:8},{type:"Image",props:{x:375,skin:"index/img_light.png",centerY:-164,centerX:0,anchorY:.5,anchorX:.5},compId:5},{type:"Image",props:{skin:"index/img_unlock_title.png",centerY:-440,centerX:-2},compId:4},{type:"Image",props:{y:503,x:375,var:"imgIcon",stateNum:1,skin:"index/img_bouns.png",centerY:-164,centerX:0,anchorY:.5,anchorX:.5},compId:7},{type:"Button",props:{var:"btnSure",stateNum:1,skin:"index/btn_green.png",runtime:"base/base/Button.ts",centerY:139,centerX:-3,anchorY:.5,anchorX:.5},compId:10,child:[{type:"Label",props:{y:26,x:0,width:301,var:"tfSure",text:"Ok",scaleY:.7,scaleX:.7,height:40,font:"btnFont",align:"center"},compId:11}]}],animations:[{nodes:[{target:5,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:0},{value:180,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:40},{value:360,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:80}]}}],name:"aniLight",id:1,frameRate:24,action:2}],loadList:["index/img_mask.png","index/img_light.png","index/img_unlock_title.png","index/img_bouns.png","index/btn_green.png"],loadList3D:[]},e.UnlockFuncViewUI=u,i("ui.index.UnlockFuncViewUI",u)}(e.index||(e.index={}))}(a.ui||(a.ui={})),function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:0,skin:"loading/img_bg.png",right:0,mouseThrough:!1,left:0,bottom:0},compId:10},{type:"Image",props:{var:"imgTitle",skin:"loading/img_logo.png",centerY:-238,centerX:2},compId:4},{type:"Image",props:{x:92,var:"imgProgress",skin:"loading/img_progress_level.png",scaleY:1.4,scaleX:1.4,centerY:124,centerX:-6},compId:12},{type:"ProgressBar",props:{var:"pgProgress",value:1,skin:"loading/progress_level.png",scaleY:1.4,scaleX:1.4,centerY:125,centerX:-4},compId:13},{type:"Label",props:{width:600,var:"tfTip",text:"100%",strokeColor:"#000000",stroke:4,fontSize:40,font:"Microsoft YaHei",color:"#ffffff",centerY:34,centerX:0,bold:!0,align:"center"},compId:3},{type:"Label",props:{width:200,var:"tfVersion",text:"verson1",fontSize:30,font:"Microsoft YaHei",color:"#ffffff",centerX:0,bottom:80,bold:!0,align:"center"},compId:6},{type:"Label",props:{width:200,var:"tfProgress",text:"100%",strokeColor:"#000000",stroke:4,fontSize:40,font:"Microsoft YaHei",color:"#ffffff",centerY:123,centerX:0,bold:!0,align:"center"},compId:7},{type:"Label",props:{text:"Powered by LayaAir Engine",fontSize:26,font:"Microsoft YaHei",color:"#939292",centerX:0,bottom:40,bold:!0,align:"center"},compId:14}],loadList:["loading/img_bg.png","loading/img_logo.png","loading/img_progress_level.png","loading/progress_level.png"],loadList3D:[]},e.LoadingViewUI=t,i("ui.LoadingViewUI",t)}(a.ui||(a.ui={})),function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{y:64,x:64,width:128,runtime:"game/ui/result/view/AwardItem.ts",height:160,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Image",props:{y:54,x:0,width:128,var:"imgBg",skin:"index/img_item_bg.png",sizeGrid:"40,40,40,40"},compId:15},{type:"Image",props:{y:144.5,x:0,width:128,var:"imgNameBg",skin:"index/img_unlock_name_bg.png",height:31},compId:16},{type:"Image",props:{y:109,x:80,width:49,var:"imgLevelBg",skin:"index/img_item_level_bg.png",height:31},compId:17},{type:"Image",props:{y:72,x:64,var:"imgIcon",anchorY:.5,anchorX:.5},compId:4},{type:"Label",props:{y:162,x:64,width:258,var:"tfWeaponName",text:"6",scaleY:.5,scaleX:.5,height:43,font:"yazi",anchorY:.5,anchorX:.5,align:"center"},compId:18},{type:"Label",props:{y:125,x:104,width:77,var:"tfLevel",text:"6",scaleY:.6,scaleX:.6,height:43,font:"yazi",anchorY:.5,anchorX:.5,align:"center"},compId:6},{type:"Image",props:{y:-19,x:-3,width:133,var:"imgSelect",skin:"index/img_select_bg.png",height:160,alpha:0},compId:19}],animations:[{nodes:[{target:19,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:19,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:19,key:"alpha",index:10},{value:0,tweenMethod:"linearNone",tween:!0,target:19,key:"alpha",index:20}]}}],name:"animSelect",id:1,frameRate:24,action:0}],loadList:["index/img_item_bg.png","index/img_unlock_name_bg.png","index/img_item_level_bg.png","index/img_select_bg.png"],loadList3D:[]},e.AwardItemUI=t,i("ui.result.AwardItemUI",t);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:0,skin:"index/img_mask.png",right:0,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:3},{type:"Box",props:{width:588,height:816,centerY:-9,centerX:13},compId:23,child:[{type:"Image",props:{y:99,x:293,skin:"index/img_light.png",anchorY:.5,anchorX:.5},compId:24},{type:"Image",props:{y:87,x:294,skin:"game/img_bonus_title.png",anchorY:.5,anchorX:.5},compId:5},{type:"Image",props:{y:373,x:155,skin:"index/img_coin.png",anchorY:.5,anchorX:.5},compId:6},{type:"Image",props:{y:434,x:126,skin:"index/img_dimond.png"},compId:7},{type:"Button",props:{y:657,x:319.5,width:429,var:"btnPay",stateNum:1,skin:"index/btn_start.png",scaleX:.6,runtime:"base/base/Button.ts",labelSize:50,labelFont:"Arial",labelAlign:"center",height:119,anchorY:.5,anchorX:.5},compId:18,child:[{type:"Label",props:{y:32,x:63.5,width:302,var:"tfPay",text:"Quintuple rewards",height:40,fontSize:50,font:"btnFont",align:"center"},compId:19},{type:"Panel",props:{y:7,x:4,width:385,scaleX:.8,height:86},compId:20,child:[{type:"Image",props:{y:-7,x:400,skin:"index/img_Flash.png"},compId:21}]},{type:"Clip",props:{y:-28,x:289,var:"clipShareVideo",skin:"index/clip_share_video.png",index:1,clipY:2},compId:22}]},{type:"Label",props:{y:350,x:189,text:"Obtain Gold：",scaleX:.7,height:46,fontSize:35,font:"yazi",color:"#ffffff",cacheAs:"bitmap"},compId:8},{type:"Label",props:{y:438,x:189,text:"Obtain Diamonds：",scaleX:.75,height:46,fontSize:35,font:"yazi",color:"#ffffff",cacheAs:"bitmap"},compId:9},{type:"Label",props:{y:350,x:448,var:"tfCoin",text:"200",height:46,fontSize:35,font:"yazi",color:"#ffffff",align:"left"},compId:10},{type:"Label",props:{y:438,x:448,var:"tfDiamond",text:"200",height:46,fontSize:35,font:"yazi",color:"#ffffff",align:"left"},compId:11},{type:"Label",props:{y:756,x:306,var:"tfGet",underlineColor:"#ffffff",underline:!0,text:"Gold only",scaleY:.7,scaleX:.7,height:60,fontSize:35,font:"yazi",color:"#ffffff",anchorY:.5,anchorX:.5},compId:12}]}],animations:[{nodes:[{target:21,keyframes:{x:[{value:-100,tweenMethod:"linearNone",tween:!0,target:21,key:"x",index:0},{value:400,tweenMethod:"linearNone",tween:!0,target:21,key:"x",index:40},{value:400,tweenMethod:"linearNone",tween:!0,target:21,key:"x",index:115}]}}],name:"aniFlash",id:1,frameRate:24,action:2},{nodes:[{target:5,keyframes:{scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:5}]}},{target:24,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:24,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:24,key:"alpha",index:5}]}},{target:6,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:6,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:6,key:"alpha",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:6,key:"alpha",index:10}]}},{target:8,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:8,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:8,key:"alpha",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:8,key:"alpha",index:10}]}},{target:10,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:10,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:10,key:"alpha",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:10,key:"alpha",index:10}]}},{target:7,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"alpha",index:10},{value:1,tweenMethod:"linearNone",tween:!0,target:7,key:"alpha",index:15}]}},{target:9,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"alpha",index:10},{value:1,tweenMethod:"linearNone",tween:!0,target:9,key:"alpha",index:15}]}},{target:11,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:11,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:11,key:"alpha",index:10},{value:1,tweenMethod:"linearNone",tween:!0,target:11,key:"alpha",index:15}]}},{target:18,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:18,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:18,key:"alpha",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:18,key:"alpha",index:20}]}},{target:12,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:12,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:12,key:"alpha",index:45},{value:1,tweenMethod:"linearNone",tween:!0,target:12,key:"alpha",index:50}]}}],name:"aniShow",id:2,frameRate:24,action:0},{nodes:[{target:24,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:24,key:"rotation",index:0},{value:180,tweenMethod:"linearNone",tween:!0,target:24,key:"rotation",index:50},{value:360,tweenMethod:"linearNone",tween:!0,target:24,key:"rotation",index:100}]}}],name:"aniLight",id:3,frameRate:24,action:2}],loadList:["index/img_mask.png","index/img_light.png","game/img_bonus_title.png","index/img_coin.png","index/img_dimond.png","index/btn_start.png","index/img_Flash.png","index/clip_share_video.png"],loadList3D:[]},e.BonusResultViewUI=a,i("ui.result.BonusResultViewUI",a);class n extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{y:0,x:0,var:"imgMask",top:0,skin:"index/img_mask.png",right:0,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:7},{type:"Image",props:{var:"imgTitle",skin:"index/img_result_title.png",centerY:-500,centerX:0,anchorY:.5,anchorX:.5},compId:56},{type:"Box",props:{width:612,var:"boxAward",height:898,centerY:-40,centerX:0,anchorY:.5,anchorX:.5},compId:18,child:[{type:"Image",props:{y:173,x:0,width:612,skin:"index/img_view_frame.png",sizeGrid:"80,10,10,535",height:667},compId:55},{type:"Image",props:{y:175,x:198,width:219,skin:"index/img_unlock_name_bg.png",height:56},compId:69},{type:"Image",props:{y:256,x:19,width:577,var:"imgItemBg",skin:"index/img_shop_bg1.png",sizeGrid:"2,2,2,2",height:390},compId:68},{type:"Label",props:{y:207,x:307,width:261,valign:"middle",text:"Task rewards",scaleX:.8,height:50,fontSize:30,font:"yazi",color:"#ffffff",anchorY:.5,anchorX:.5,align:"center"},compId:60},{type:"AwardItem",props:{y:359,x:98,name:"awardItem0",anchorY:.5,anchorX:.5,runtime:"game/ui/result/view/AwardItem.ts"},compId:62},{type:"AwardItem",props:{y:359,x:238,name:"awardItem1",anchorY:.5,anchorX:.5,runtime:"game/ui/result/view/AwardItem.ts"},compId:44},{type:"AwardItem",props:{y:359,x:376,name:"awardItem2",anchorY:.5,anchorX:.5,runtime:"game/ui/result/view/AwardItem.ts"},compId:49},{type:"AwardItem",props:{y:359,x:515,name:"awardItem3",anchorY:.5,anchorX:.5,runtime:"game/ui/result/view/AwardItem.ts"},compId:48},{type:"AwardItem",props:{y:534,x:98,name:"awardItem7",anchorY:.5,anchorX:.5,runtime:"game/ui/result/view/AwardItem.ts"},compId:50},{type:"AwardItem",props:{y:534,x:238,name:"awardItem6",anchorY:.5,anchorX:.5,runtime:"game/ui/result/view/AwardItem.ts"},compId:51},{type:"AwardItem",props:{y:534,x:376,name:"awardItem5",anchorY:.5,anchorX:.5,runtime:"game/ui/result/view/AwardItem.ts"},compId:52},{type:"AwardItem",props:{y:534,x:514,name:"awardItem4",anchorY:.5,anchorX:.5,runtime:"game/ui/result/view/AwardItem.ts"},compId:53},{type:"Image",props:{y:256,x:19,width:577,visible:!1,var:"imgItemFg",skin:"index/img_shop_bg1.png",sizeGrid:"2,2,2,2",height:390,alpha:0},compId:71},{type:"Image",props:{y:70,x:-19,skin:"index/img_result_airdrop.png"},compId:67},{type:"Button",props:{y:735,x:303,var:"btnPay",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelSize:50,labelFont:"yazi",anchorY:.5,anchorX:.5},compId:12,child:[{type:"Label",props:{y:29.5,x:75.5,var:"tfPay",text:"Take all",font:"btnFont"},compId:70},{type:"Panel",props:{y:6,x:4,width:292,height:87},compId:64,child:[{type:"Image",props:{y:-7,x:-100,skin:"index/img_Flash.png"},compId:65}]},{type:"Clip",props:{y:-30,x:289,var:"clipPay",skin:"index/clip_share_video.png",index:1,clipY:2},compId:63}]},{type:"Label",props:{y:892,x:307,var:"tfGet",underline:!0,text:"Random",scaleY:.7,scaleX:.7,height:60,fontSize:35,font:"yazi",color:"#ffffff",anchorY:.5,anchorX:.5},compId:9}]}],animations:[{nodes:[{target:65,keyframes:{x:[{value:-100,tweenMethod:"linearNone",tween:!0,target:65,key:"x",index:0},{value:400,tweenMethod:"linearNone",tween:!0,target:65,key:"x",index:40},{value:401,tweenMethod:"linearNone",tween:!0,target:65,key:"x",index:119},{value:-100,tweenMethod:"linearNone",tween:!0,target:65,key:"x",index:120}]}}],name:"animFlash",id:1,frameRate:24,action:0}],loadList:["index/img_mask.png","index/img_result_title.png","index/img_view_frame.png","index/img_unlock_name_bg.png","index/img_shop_bg1.png","index/img_result_airdrop.png","index/btn_start.png","index/img_Flash.png","index/clip_share_video.png"],loadList3D:[]},e.ResultViewUI=n,i("ui.result.ResultViewUI",n)}(e.result||(e.result={}))}(a.ui||(a.ui={})),function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:540,height:140},compId:2,child:[{type:"Image",props:{y:0,x:0,skin:"index/img_shop_item_bg.png",sizeGrid:"16,25,17,30"},compId:4},{type:"Image",props:{y:64,x:77,var:"imgWeapon",anchorY:.5,anchorX:.5},compId:5},{type:"Image",props:{y:92.5,x:86,skin:"index/img_item_level_bg.png"},compId:18},{type:"Image",props:{y:10,x:13,var:"imgLock",skin:"index/img_lock.png"},compId:26},{type:"Box",props:{y:19,x:301,width:230,var:"boxStrategy",height:100},compId:30,child:[{type:"Button",props:{y:51,x:115,var:"btnVideo",stateNum:1,skin:"index/btn_small.png",runtime:"base/base/Button.ts",labelFont:"yazi",anchorY:.5,anchorX:.5},compId:22,child:[{type:"Clip",props:{y:7,x:202,var:"clipShareVideo",skin:"index/clip_share_video.png",index:1,anchorY:.5,anchorX:.5,clipY:2},compId:40},{type:"Label",props:{y:28.5,x:30,var:"tfVideo",text:"Free reward",scaleY:.7,scaleX:.7,font:"btnFont"},compId:50}]}]},{type:"Box",props:{y:19,x:301,width:230,var:"boxNoStrategy",height:100},compId:25,child:[{type:"Button",props:{y:51,x:115,var:"btnUnBuy",stateNum:1,skin:"index/btn_small.png",gray:!0,anchorY:.5,anchorX:.5},compId:15,child:[{type:"Label",props:{y:41,x:110,width:243,var:"tfGetLevel",valign:"middle",text:"????",scaleY:.7,scaleX:.7,height:60,fontSize:22,font:"btnFont",anchorY:.5,anchorX:.5,align:"center"},compId:21}]},{type:"Button",props:{y:51,x:115,var:"btnBuyDiamond",stateNum:1,skin:"index/btn_small.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:10,child:[{type:"Image",props:{y:42,x:33,var:"imgDiamond",skin:"index/img_dimond.png",scaleY:.9,scaleX:.9,anchorY:.5,anchorX:0},compId:12},{type:"Label",props:{y:41,x:86,width:138,var:"tfDiamond",valign:"middle",text:"1000K",scaleY:.7,scaleX:.7,height:41,fontSize:22,font:"btnFont",anchorY:.5,anchorX:0,align:"left"},compId:20}]},{type:"Button",props:{y:51,x:115,var:"btnBuyCoin",stateNum:1,skin:"index/btn_green.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:9,child:[{type:"Image",props:{y:44,x:28,var:"imgCoin1",skin:"index/img_coin.png",scaleY:.7,scaleX:.7,anchorY:.5,anchorX:0},compId:19},{type:"Image",props:{y:43,x:36,var:"imgCoin",skin:"index/img_coin.png",scaleY:.8,scaleX:.8,anchorY:.5,anchorX:0},compId:11},{type:"Label",props:{y:41,x:86,width:138,var:"tfCoin",valign:"middle",text:"1000K",scaleY:.7,scaleX:.7,height:41,fontSize:22,font:"btnFont",anchorY:.5,anchorX:0,align:"left"},compId:13}]}]},{type:"Label",props:{y:96,x:94,width:66,var:"tfLevel",valign:"middle",text:"29",scaleY:.6,scaleX:.6,height:40,font:"btnFont",align:"center"},compId:7},{type:"Label",props:{y:74,x:223,width:220,var:"tfName",valign:"middle",text:"M4A1",scaleY:.6,scaleX:.6,height:42,font:"brownFont",anchorY:.5,anchorX:.5,align:"center"},compId:8}],loadList:["index/img_shop_item_bg.png","index/img_item_level_bg.png","index/img_lock.png","index/btn_small.png","index/clip_share_video.png","index/img_dimond.png","index/btn_green.png","index/img_coin.png"],loadList3D:[]},e.ShopItemUI=t,i("ui.shop.ShopItemUI",t);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{top:0,skin:"index/img_mask.png",right:0,left:0,bottom:0,alpha:.8,sizeGrid:"2,2,2,2"},compId:11},{type:"Button",props:{var:"btnClose",skin:"index/btn_close.png",runtime:"base/base/Button.ts",left:0,centerY:-570,anchorY:.5,anchorX:.5,label:" ",stateNum:1},compId:15},{type:"Box",props:{y:667,x:375,width:615,var:"boxMain",height:967,centerY:0,centerX:0,anchorY:.5,anchorX:.5},compId:18,child:[{type:"Image",props:{width:612,skin:"index/img_view_frame.png",height:967,sizeGrid:"80,10,10,535"},compId:34},{type:"Image",props:{y:167,x:18,width:573,skin:"index/img_shop_bg1.png",sizeGrid:"3,3,3,3",height:762},compId:22},{type:"Image",props:{y:-38,x:12,skin:"index/img_shop_title.png"},compId:17},{type:"List",props:{y:181,x:33,width:540,var:"listShop",spaceY:18,repeatY:6,height:744},compId:19,child:[{type:"Box",props:{width:540,runtime:"game/ui/shop/ShopItem.ts",name:"render",height:140},compId:20}]},{type:"Box",props:{y:128,x:236,width:316,var:"boxCoin",height:50,anchorY:.5,anchorX:.5},compId:23,child:[{type:"Image",props:{y:0,x:0,width:256,skin:"index/img_coin_bg.png",sizeGrid:"10,40,10,40",height:49},compId:25},{type:"Image",props:{y:3,x:-31,skin:"index/img_coin.png",scaleY:.9,scaleX:.9},compId:26},{type:"Image",props:{y:1,x:-21,skin:"index/img_coin.png"},compId:27},{type:"Label",props:{y:8,x:44,var:"tfCoin",text:"475.6K",scaleY:.7,scaleX:.7,font:"btnFont",align:"left"},compId:28},{type:"Label",props:{y:17,x:154,width:160,var:"tfOutPut",text:"+47/s",scaleY:.5,scaleX:.5,height:46,font:"yazi",align:"left"},compId:29}]},{type:"Box",props:{y:126,x:485,width:160,var:"boxDiamond",height:50,anchorY:.5,anchorX:.5},compId:24,child:[{type:"Image",props:{width:160,skin:"index/img_coin_bg.png",sizeGrid:"10,40,10,40"},compId:30},{type:"Image",props:{y:-2,x:-25,skin:"index/img_dimond.png"},compId:31},{type:"Label",props:{y:8,x:34,width:150,var:"tfDiamond",text:"475.6K",scaleY:.7,scaleX:.7,font:"btnFont",align:"left"},compId:33}]}]}],loadList:["index/img_mask.png","index/btn_close.png","index/img_view_frame.png","index/img_shop_bg1.png","index/img_shop_title.png","index/img_coin_bg.png","index/img_coin.png","index/img_dimond.png"],loadList3D:[]},e.ShopViewUI=a,i("ui.shop.ShopViewUI",a)}(e.shop||(e.shop={}))}(a.ui||(a.ui={})),function(e){!function(e){class t extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"Dialog",props:{width:750,height:1334},compId:2,child:[{type:"Button",props:{y:117,x:35,var:"btnClose",skin:"index/btn_close.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5,label:" ",stateNum:1},compId:5},{type:"Image",props:{y:197,x:95,width:560,skin:"index/img_view_frame.png",height:984,alpha:1,sizeGrid:"80,10,10,535"},compId:3},{type:"Image",props:{y:268,x:108,skin:"index/img_invite_friend_banner.png"},compId:10},{type:"Image",props:{y:153,x:227,skin:"index/img_invite_friend_title.png"},compId:7},{type:"Image",props:{y:399,x:107,width:536,skin:"index/img_mask.png",height:769,alpha:.3,sizeGrid:"2,2,2,2"},compId:9},{type:"WXOpenDataViewer",props:{y:407,x:112,width:525,var:"wxOpenData",iconSign:"wx",height:752,runtime:"laya.ui.WXOpenDataViewer"},compId:4},{type:"Image",props:{y:425,x:411,width:217,var:"imgInvite0",skin:"index/img_mask.png",height:97,alpha:0,sizeGrid:"2,2,2,2"},compId:12},{type:"Image",props:{y:584,x:411,width:217,var:"imgInvite1",skin:"index/img_mask.png",height:97,alpha:0,sizeGrid:"2,2,2,2"},compId:13},{type:"Image",props:{y:743,x:411,width:217,var:"imgInvite2",skin:"index/img_mask.png",height:97,alpha:0,sizeGrid:"2,2,2,2"},compId:14},{type:"Image",props:{y:902,x:410,width:217,var:"imgInvite3",skin:"index/img_mask.png",height:97,alpha:0,sizeGrid:"2,2,2,2"},compId:15},{type:"Image",props:{y:1061,x:410,width:217,var:"imgInvite4",skin:"index/img_mask.png",height:97,alpha:0,sizeGrid:"2,2,2,2"},compId:16}],loadList:["index/btn_close.png","index/img_view_frame.png","index/img_invite_friend_banner.png","index/img_invite_friend_title.png","index/img_mask.png"],loadList3D:[]},e.InviteFriendDialogUI=t,i("ui.social.InviteFriendDialogUI",t);class a extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"Dialog",props:{width:750,height:1334},compId:2,child:[{type:"Button",props:{y:117,x:35,var:"btnClose",skin:"index/btn_close.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5,label:" ",stateNum:1},compId:3},{type:"Image",props:{y:317,x:97,width:560,skin:"index/img_view_frame.png",height:798,alpha:1,sizeGrid:"80,10,10,535"},compId:4},{type:"Image",props:{y:264,x:62,skin:"activity/img_invite_reward_title.png"},compId:5},{type:"Image",props:{y:397,x:110,width:536,skin:"index/img_mask.png",height:598,alpha:.3,sizeGrid:"2,2,2,2"},compId:6},{type:"Button",props:{y:1056,x:372,var:"btnShare",stateNum:1,skin:"activity/btn_invite.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:10},{type:"List",props:{y:404,x:117,width:523,var:"listReward",spaceY:6,repeatX:1,height:571},compId:25,child:[{type:"InviteRewardItem",props:{x:-.5,runtime:"game/ui/inviteReward/InviteRewardItem.ts",renderType:"render"},compId:22}]}],loadList:["index/btn_close.png","index/img_view_frame.png","activity/img_invite_reward_title.png","index/img_mask.png","activity/btn_invite.png"],loadList3D:[]},e.InviteRewardDialogUI=a,i("ui.social.InviteRewardDialogUI",a);class n extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:523,height:141},compId:2,child:[{type:"Image",props:{y:0,x:0,skin:"activity/img_invite_reward_item.png"},compId:3},{type:"ProgressBar",props:{y:70,x:15,var:"pgProgress",skin:"activity/progress_invite.png"},compId:4},{type:"Image",props:{y:15,x:22,skin:"activity/img_invite_reward_icon.png"},compId:5},{type:"Image",props:{y:38,x:346,var:"imgGot",skin:"activity/img_invite_reward_got.png"},compId:6},{type:"Button",props:{y:65,x:410,width:217,var:"btnGet",stateNum:1,skin:"index/btn_small.png",runtime:"base/base/Button.ts",labelSize:50,labelFont:"yazi",labelAlign:"center",height:97,anchorY:.5,anchorX:.5},compId:7,child:[{type:"Label",props:{y:43,x:51,var:"tfPay",valign:"middle",text:"Receive",scaleY:.7,scaleX:.7,height:49,fontSize:20,font:"btnFont",color:"#000000",anchorY:.5,anchorX:.5,align:"center"},compId:9},{type:"Image",props:{y:15,x:83,skin:"index/img_dimond.png"},compId:10},{type:"Label",props:{y:43,x:172,width:92,var:"tfDiamond",valign:"middle",text:"100",scaleY:.7,scaleX:.7,height:49,fontSize:20,font:"btnFont",color:"#000000",anchorY:.5,anchorX:.5,align:"left"},compId:11}]},{type:"Label",props:{y:42,x:159,var:"tfDesc",valign:"middle",text:"邀请1位好友",scaleY:.6,scaleX:.6,height:49,fontSize:20,font:"brownFont",color:"#000000",anchorY:.5,anchorX:.5,align:"center"},compId:8},{type:"Label",props:{y:75,x:16,width:548,var:"tfProgress",text:"1/1",scaleY:.5,scaleX:.5,height:49,fontSize:20,font:"btnFont",color:"#000000",align:"center"},compId:12}],loadList:["activity/img_invite_reward_item.png","activity/progress_invite.png","activity/img_invite_reward_icon.png","activity/img_invite_reward_got.png","index/btn_small.png","index/img_dimond.png"],loadList3D:[]},e.InviteRewardItemUI=n,i("ui.social.InviteRewardItemUI",n);class s extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"Dialog",props:{width:750,height:1334},compId:2,child:[{type:"Button",props:{y:117,x:35,var:"btnClose",skin:"index/btn_close.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5,label:" ",stateNum:1},compId:4},{type:"Image",props:{y:186,x:68,width:612,skin:"index/img_view_frame.png",height:1028,alpha:1,sizeGrid:"80,10,10,535"},compId:5},{type:"Image",props:{y:162,x:193,skin:"index/img_rank_title.png"},compId:6},{type:"Image",props:{y:153,x:65,skin:"index/img_rank_icon.png"},compId:7},{type:"Image",props:{y:273,x:86,width:571,skin:"index/img_mask.png",height:636,alpha:.3,sizeGrid:"2,2,2,2"},compId:9},{type:"Button",props:{y:1158,x:369,var:"btnShare",stateNum:1,skin:"index/btn_rank_share.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:11},{type:"WXOpenDataViewer",props:{y:279,x:95,width:556,var:"wxOpenData",iconSign:"wx",height:824,runtime:"laya.ui.WXOpenDataViewer"},compId:8},{type:"Button",props:{y:947,x:444,var:"btnNext",stateNum:1,skin:"index/btn_rank_page.png",runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:15},{type:"Button",props:{y:947,x:304,var:"btnPre",stateNum:1,skin:"index/btn_rank_page.png",scaleX:-1,runtime:"base/base/Button.ts",anchorY:.5,anchorX:.5},compId:16}],loadList:["index/btn_close.png","index/img_view_frame.png","index/img_rank_title.png","index/img_rank_icon.png","index/img_mask.png","index/btn_rank_share.png","index/btn_rank_page.png"],loadList3D:[]},e.RankDialogUI=s,i("ui.social.RankDialogUI",s)}(e.social||(e.social={}))}(a.ui||(a.ui={})),function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{y:267,x:102,width:205,runtime:"game/ui/turn/TurnItem.ts",height:267,anchorY:1,anchorX:.5},compId:2,child:[{type:"Image",props:{var:"imgIcon",skin:"index/img_diamonds_big.png",scaleY:.3,scaleX:.3,centerY:-37,centerX:0,anchorY:.5,anchorX:.5},compId:4},{type:"Label",props:{y:19,x:44,width:207,var:"tfLevel",valign:"middle",text:"Lv.1",scaleY:.6,scaleX:.6,height:40,font:"btnFont",align:"center"},compId:5},{type:"Image",props:{zOrder:10,y:2,x:1,var:"imgLightGet",skin:"activity/img_light_get.png"},compId:3}],animations:[{nodes:[{target:3,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:10}]}}],name:"animSelect",id:1,frameRate:24,action:0}],loadList:["index/img_diamonds_big.png","activity/img_light_get.png"],loadList3D:[]},e.TrunItemUI=t,i("ui.turn.TrunItemUI",t);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{y:0,x:0,var:"imgBg",top:0,skin:"index/img_mask.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:.8},compId:3},{type:"Box",props:{y:549,x:380,width:657,var:"boxMain",height:785,centerX:5,anchorY:.5,anchorX:.5},compId:5,child:[{type:"Image",props:{skin:"activity/img_turn_bg.png"},compId:6},{type:"Image",props:{y:444,x:323,width:534,var:"imgTrunBg",skin:"activity/img_turn.png",height:534,anchorY:.5,anchorX:.5},compId:7,child:[{type:"TrunItem",props:{y:267,x:266,name:"turnItem0",runtime:"game/ui/turn/TurnItem.ts"},compId:18},{type:"TrunItem",props:{y:267,x:266,name:"turnItem1",runtime:"game/ui/turn/TurnItem.ts"},compId:21},{type:"TrunItem",props:{y:267,x:266,name:"turnItem2",runtime:"game/ui/turn/TurnItem.ts"},compId:22},{type:"TrunItem",props:{y:267,x:266,name:"turnItem3",runtime:"game/ui/turn/TurnItem.ts"},compId:23},{type:"TrunItem",props:{y:267,x:266,name:"turnItem4",runtime:"game/ui/turn/TurnItem.ts"},compId:24},{type:"TrunItem",props:{y:267,x:266,name:"turnItem5",runtime:"game/ui/turn/TurnItem.ts"},compId:25},{type:"TrunItem",props:{y:267,x:266,name:"turnItem6",runtime:"game/ui/turn/TurnItem.ts"},compId:26},{type:"TrunItem",props:{y:267,x:266,name:"turnItem7",runtime:"game/ui/turn/TurnItem.ts"},compId:27}]},{type:"Image",props:{y:444,x:323,skin:"activity/img_turn_point.png",anchorY:.5,anchorX:.5},compId:8},{type:"Image",props:{y:199,x:73,var:"imgTip2",skin:"activity/img_ture_tip.png",rotation:-43,anchorX:.5},compId:9},{type:"Image",props:{y:199,x:73,var:"imgTipShdow2",skin:"activity/img_ture_tip.png",rotation:-43,anchorY:0,anchorX:.5},compId:39},{type:"Image",props:{y:101,x:323,var:"imgTip1",skin:"activity/img_ture_tip.png",anchorX:.5},compId:10},{type:"Image",props:{y:101,x:323,var:"imgTipShdow1",skin:"activity/img_ture_tip.png",anchorY:0,anchorX:.5},compId:40},{type:"Image",props:{y:199,x:560.5,var:"imgTip3",skin:"activity/img_ture_tip.png",rotation:43,anchorX:.5},compId:11},{type:"Image",props:{y:199,x:561,var:"imgTipShdow3",skin:"activity/img_ture_tip.png",rotation:43,anchorY:0,anchorX:.5},compId:41},{type:"Image",props:{y:144,x:188,skin:"activity/img_light_off.png",name:"imgLight0"},compId:31},{type:"Image",props:{y:141,x:421,skin:"activity/img_light_off.png",name:"imgLight1"},compId:32},{type:"Image",props:{y:304,x:580,skin:"activity/img_light_off.png",name:"imgLight2"},compId:33},{type:"Image",props:{y:538,x:579,skin:"activity/img_light_off.png",name:"imgLight3"},compId:34},{type:"Image",props:{y:700,x:419,skin:"activity/img_light_off.png",name:"imgLight4"},compId:35},{type:"Image",props:{y:700,x:183,skin:"activity/img_light_off.png",name:"imgLight5"},compId:36},{type:"Image",props:{y:540,x:26,skin:"activity/img_light_off.png",name:"imgLight6"},compId:37},{type:"Image",props:{y:308,x:27,skin:"activity/img_light_off.png",name:"imgLight7"},compId:38},{type:"Image",props:{y:64,x:192,width:256,visible:!1,var:"imgTalkLeft",skin:"activity/img_talk.png",sizeGrid:"13,96,28,30",scaleX:-1,pivotY:64,pivotX:121,height:76},compId:42,child:[{type:"Label",props:{y:13,x:248,text:"Draw once a day！",scaleY:.7,scaleX:-.7,font:"brownFont"},compId:44}]},{type:"Image",props:{y:64,x:448,width:322,visible:!1,var:"imgTalkRight",skin:"activity/img_talk.png",pivotY:64,pivotX:121,height:76},compId:43,child:[{type:"Label",props:{y:12,x:11,width:450,text:"<(￣oo,￣)/Good luck！",scaleY:.7,scaleX:.7,height:40,font:"brownFont"},compId:45}]}]},{type:"Button",props:{y:1020,var:"btnGet",stateNum:1,skin:"index/btn_start.png",runtime:"base/base/Button.ts",labelFont:"yazi",centerX:0,anchorY:.5,anchorX:.5},compId:12,child:[{type:"Label",props:{y:54,x:151,width:300,var:"tfGet",text:"Draw 3 at a time",scaleX:.9,mouseEnabled:!1,height:46,font:"btnFont",anchorY:.5,anchorX:.5,align:"center"},compId:13}]},{type:"Box",props:{y:1100,width:324,var:"boxTips",height:33,centerX:0,anchorY:.5,anchorX:.5},compId:14,child:[{type:"CheckBox",props:{y:0,x:0,var:"cbTip",skin:"activity/checkbox.png",selected:!0,mouseEnabled:!1},compId:15},{type:"Label",props:{y:4,x:44,wordWrap:!0,width:438,text:"Watch the video and get 3 rewards",scaleY:.7,scaleX:.7,height:79,font:"yazi",alpha:1,align:"center"},compId:16}]},{type:"Button",props:{y:0,x:0,var:"btnClose",skin:"index/btn_close.png",runtime:"base/base/Button.ts",left:0,centerY:-570,anchorY:.5,anchorX:.5,label:" ",stateNum:1},compId:29}],animations:[{nodes:[{target:39,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:39,key:"scaleY",index:0},{value:1.5,tweenMethod:"linearNone",tween:!0,target:39,key:"scaleY",index:10}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:39,key:"scaleX",index:0},{value:1.5,tweenMethod:"linearNone",tween:!0,target:39,key:"scaleX",index:10}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:39,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:39,key:"alpha",index:10}]}}],name:"animTip2",id:1,frameRate:24,action:0},{nodes:[{target:40,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:40,key:"scaleY",index:0},{value:1.5,tweenMethod:"linearNone",tween:!0,target:40,key:"scaleY",index:10}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:40,key:"scaleX",index:0},{value:1.5,tweenMethod:"linearNone",tween:!0,target:40,key:"scaleX",index:10}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:40,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:40,key:"alpha",index:10}]}}],name:"animTip1",id:2,frameRate:24,action:0},{nodes:[{target:41,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:41,key:"scaleY",index:0},{value:1.5,tweenMethod:"linearNone",tween:!0,target:41,key:"scaleY",index:10}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:41,key:"scaleX",index:0},{value:1.5,tweenMethod:"linearNone",tween:!0,target:41,key:"scaleX",index:10}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:41,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:41,key:"alpha",index:10}]}}],name:"animTip3",id:3,frameRate:24,action:0},{nodes:[{target:42,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:42,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:42,key:"visible",index:58}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:53},{value:0,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:58}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:0},{value:-1,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:5},{value:-1,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:53},{value:0,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:58}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:42,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:42,key:"alpha",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:42,key:"alpha",index:53},{value:0,tweenMethod:"linearNone",tween:!0,target:42,key:"alpha",index:58}]}}],name:"aniTalkLeft",id:4,frameRate:24,action:0},{nodes:[{target:43,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:43,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:43,key:"visible",index:58}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:43,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:43,key:"scaleY",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:43,key:"scaleY",index:53},{value:0,tweenMethod:"linearNone",tween:!0,target:43,key:"scaleY",index:58}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:43,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:43,key:"scaleX",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:43,key:"scaleX",index:53},{value:0,tweenMethod:"linearNone",tween:!0,target:43,key:"scaleX",index:58}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:43,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:43,key:"alpha",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:43,key:"alpha",index:53},{value:0,tweenMethod:"linearNone",tween:!0,target:43,key:"alpha",index:58}]}}],name:"aniTalkRight",id:5,frameRate:24,action:0}],loadList:["index/img_mask.png","activity/img_turn_bg.png","activity/img_turn.png","activity/img_turn_point.png","activity/img_ture_tip.png","activity/img_light_off.png","activity/img_talk.png","index/btn_start.png","activity/checkbox.png","index/btn_close.png"],loadList3D:[]},e.TurnUI=a,i("ui.turn.TurnUI",a)}(e.turn||(e.turn={}))}(a.ui||(a.ui={}))},{}],316:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./Wechat"),n=e("./WechatEvent"),s=e("../game/common/ui/UIUtil"),o=e("./MiniGameSDK");class l extends Laya.EventDispatcher{static get instance(){return null==this._intance&&(this._intance=new l),this._intance}static init(){Laya.Browser.onMiniGame?(this._systemInfo=Laya.Browser.window.wx.getSystemInfoSync(),this._mobile=(this._systemInfo.model+"").toLowerCase(),this._system_rate=(this._systemInfo.system+"").toLowerCase(),i.default.needVersion("2.0.4")?(i.default.instance.on(n.default.ON_HIDE,this,this.onWechatHide),this._isVaild=!0,this.creatAd(),this._switchCountdown=l._switchCountdown,this._refreshCountdown=l.refreshCd,Laya.timer.loop(1e3,this,this.onTimeLoop)):this._isVaild=!1):this._isVaild=!1}static show(){o.default.showBannerAd(),this._onShow=!0,this._isVaild&&(null!=this._bannerAd&&this._bannerAd.show(),Laya.timer.clear(this,this.onHideAgain))}static creatAd(){null==this._bannerAd&&(this._bannerAd=Laya.Browser.window.wx.createBannerAd({adUnitId:l.adUnitId,style:{left:0,top:0,width:300,height:80}}),this._bannerAd.onError(this.onError),this._bannerAd.onResize(this.onResize),this._refreshCountdown=l.refreshCd,this._switchCountdown=l.switchCd)}static hide(){o.default.hideBannerAd(),this._onShow=!1,this._isVaild&&(null!=this._bannerAd&&this._bannerAd.hide(),Laya.timer.once(2e3,this,this.onHideAgain))}static refresh(){this.destoryBannerAd(),this.creatAd(),this._onShow&&null!=this._bannerAd&&this._bannerAd.show()}static onTimeLoop(){this._switchCountdown--,this._refreshCountdown--,this._refreshCountdown<0&&(console.log("时间刷新"),this.refresh())}static onHideAgain(){o.default.hideBannerAd(),console.log("onHideAgain"),null!=this._bannerAd&&this._bannerAd.hide()}static destoryBannerAd(){o.default.hideBannerAd(),null!=this._bannerAd&&(this._bannerAd.offError(this.onError),this._bannerAd.hide(),this._bannerAd.destroy(),this._bannerAd=null)}static onError(e){console.log("广告错误事件",e.errCode,e.errMsg)}static onResize(e){if(e&&null!=l._bannerAd){let e=0;-1!=l._system_rate.indexOf("ios")&&-1!=l._mobile.search(/[iI][pP]hone\s*[xX]/)&&(e=l._bottom),l._bannerAd.style.top=l._systemInfo.screenHeight-l._bannerAd.style.realHeight-e,l._bannerAd.style.left=(l._systemInfo.screenWidth-l._bannerAd.style.realWidth)/2,l.bannerAdY=l._bannerAd.style.top/l._systemInfo.screenHeight*s.default.getStageHeight(),l.instance.event(Laya.Event.RESIZE)}}static onWechatHide(){o.default.hideBannerAd(),this._switchCountdown<=0&&(console.log("切后台刷新"),this.refresh())}}a.default=l,l.adUnitId="adunit-d3b3275dd026f4d1",l.switchCd=10,l.refreshCd=9999999,l.bannerAdY=-1,l._bannerAd=null,l._isVaild=!1,l._systemInfo=null,l._mobile="",l._system_rate="",l._bottom=20,l._onShow=!1,l._switchCountdown=0,l._refreshCountdown=0,l._intance=null},{"../game/common/ui/UIUtil":73,"./MiniGameSDK":319,"./Wechat":324,"./WechatEvent":325}],317:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../config/ResConfig");class n{static loadPreset(){let e=Laya.Handler.create(n,n.loadPresetOver);Laya.loader.load(i.default.DynamicConfigUrl+"?"+Math.random(),e,null,Laya.Loader.JSON,1,!1)}static loadPresetOver(e){e&&(this.Config.ShareLimitTime=null==e.ShareLimitTime?this.Config.ShareLimitTime:e.ShareLimitTime,this.Config.InTimeFailRate=null==e.InTimeFailRate?this.Config.InTimeFailRate:e.InTimeFailRate,this.Config.OutTimeFailRate=null==e.OutTimeFailRate?this.Config.OutTimeFailRate:e.OutTimeFailRate)}}a.default=n,n.Config={ShareLimitTime:3e3,InTimeFailRate:.7,OutTimeFailRate:.1}},{"../config/ResConfig":48}],318:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{static writeLogToHttpServer(e={}){console.log("log",JSON.stringify(e)),i.httpPost(i.httpServerUrl,e)}static httpPost(e,t={}){const a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(t))}}a.default=i,i.httpServerUrl="https://www.tlygoodgame.com/zombie/tracklog"},{}],319:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("../game/GameCenter"),n=e("../game/state/StateModule"),s=e("../game/state/LoadingState"),o=e("./RewardedVideoAdUtil"),l=e("./Wechat"),r=e("./LogSDK");a.default=class{static init(){console.log("初始化minigamesdk"),Laya.SoundManager.useAudioMusic=!1,"undefined"!=typeof minigame&&minigame.initializeAsync().then(function(){console.log("初始化成功minigame"),minigame.setLoadingProgress(100),minigame.startGameAsync().then(function(){console.log("启动游戏minigamesdk成功"),i.default.create(),i.default.instance.initialize(),n.default.instance.changeState(s.default),console.log("启动游戏minigamesdk成功")}).catch(function(e){console.log("启动游戏minigamesdk失败"),console.log(e)})})}static showInterstitialAd(){MiniGameAds.isInterstitialReady()?MiniGameAds.showInterstitial().then(()=>{console.info("====> show interstitial success"),r.default.writeLogToHttpServer({event_name:"showInterstitialAd",event_param:""})}).catch(e=>{console.error("====> show interstitial error: "+e.message)}):console.info("====> interstitial not ready")}static showRewardedVideoAd(){MiniGameAds.isRewardvideoReady()?MiniGameAds.showRewardedVideo().then(()=>{console.info("====> show rewarded video success"),o.default.doCallbackByOut(!0,!0),l.default.resumeMusic(),r.default.writeLogToHttpServer({event_name:"showRewardedVideoAd_end",event_param:""})}).catch(e=>{console.error("====> show rewarded video error: "+e.message)}):console.info("====> rewarded video not ready")}static showBannerAd(){MiniGameAds.isBannerReady()?MiniGameAds.showBanner().then(()=>{console.info("====> show banner success"),r.default.writeLogToHttpServer({event_name:"showBannerAd",event_param:""})}).catch(e=>{console.error("====> show banner error: "+e.message)}):console.info("====> banner not ready")}static hideBannerAd(){MiniGameAds.hideBanner(),r.default.writeLogToHttpServer({event_name:"showBannerAd_end",event_param:""})}}},{"../game/GameCenter":52,"../game/state/LoadingState":168,"../game/state/StateModule":171,"./LogSDK":318,"./RewardedVideoAdUtil":322,"./Wechat":324}],320:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./ResDownloadEvent"),n=e("../base/olympus/data/LogLoad"),s=e("../Version"),o=e("../game/network/NetworkModule");class l extends Laya.EventDispatcher{constructor(){super(),this.wxPath="",this._wx=null,this._fs=null,this._downLoadCount=0,this._downloadTask=null,this._resUrl="",this._ver="",Laya.Browser.onMiniGame&&(this._wx=Laya.Browser.window.wx,this._fs=this._wx.getFileSystemManager(),this.wxPath=this._wx.env.USER_DATA_PATH+"/"+s.default.gameName+"/")}static get instance(){return null==this._instance&&(this._instance=new l),this._instance}loadZipRes(e,t){this._resUrl=e+t+"/res.zip",this._ver=t,this._ver!=Laya.LocalStorage.getItem(l.VER_FLAG)?(o.default.logLoadEvent(n.LoadStep.LoadStepStartLoadCDN),this.clearOld()):this.event(i.default.LOADED)}reloadZipRes(e,t){Laya.LocalStorage.setItem(l.VER_FLAG,null),this.loadZipRes(e,t)}clearOld(){this.event(i.default.CLEAR_OLD_START),this._fs.rmdir({dirPath:this._wx.env.USER_DATA_PATH+"/layaairGame",recursive:!0,complete:this.clearZip.bind(l.instance)})}clearZip(){this.event(i.default.CLEAR_OLD_END),this._fs.rmdir({dirPath:this.wxPath,recursive:!0,complete:this.download.bind(l.instance)})}download(){let e=this;e._downLoadCount++,e._downloadTask=e._wx.downloadFile({url:e._resUrl,success:t=>{e.event(i.default.DOWNLOAD_SUCCESS),e.unzip(t.tempFilePath)},fail:()=>{e._downLoadCount<l.MAX_DOWNLOAD_NUM?Laya.timer.once(3e3,l.instance,l.instance.download):e.event(i.default.LOAD_FAIL)}}),e._downloadTask.onProgressUpdate(t=>{null!=t&&e.event(i.default.DOWNLOAD_PROGRESS,t.progress)})}unzip(e){let t=this;t.event(i.default.UNZIP_START),t._fs.unzip({zipFilePath:e,targetPath:t.wxPath,success:()=>{t.event(i.default.UNZIP_SUCCESS),Laya.LocalStorage.setItem(l.VER_FLAG,t._ver),t.event(i.default.LOADED),o.default.logLoadEvent(n.LoadStep.LoadStepLoadCDNOk)},fail:e=>{t._downLoadCount<l.MAX_DOWNLOAD_NUM?Laya.timer.once(3e3,l.instance,l.instance.clearOld):t.event(i.default.LOAD_FAIL)}})}}a.default=l,l.VER_FLAG="res_version",l.MAX_DOWNLOAD_NUM=3,l._instance=null},{"../Version":3,"../base/olympus/data/LogLoad":39,"../game/network/NetworkModule":166,"./ResDownloadEvent":321}],321:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.LOADED="loaded",i.LOAD_FAIL="load_fail",i.CLEAR_OLD_START="clear_old_start",i.CLEAR_OLD_END="clear_old_end",i.DOWNLOAD_PROGRESS="download_progress",i.DOWNLOAD_SUCCESS="download_success",i.UNZIP_START="unzip_start",i.UNZIP_SUCCESS="unzip_success"},{}],322:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./Wechat"),n=e("../base/olympus/data/LogAdLoad"),s=e("../game/network/NetworkModule"),o=e("./WechatEvent"),l=e("../game/common/Notice"),r=e("./MiniGameSDK"),d=e("./LogSDK");var u;!function(e){e[e.NO_INIT=-6]="NO_INIT",e[e.NOT_ON_WECHAT=-5]="NOT_ON_WECHAT",e[e.SDK_VERSION=-4]="SDK_VERSION",e[e.CREATE_FAIL=-3]="CREATE_FAIL",e[e.LOADING=-2]="LOADING",e[e.LOADED=-1]="LOADED"}(u=a.EnumRewardedVideoAdStateCode||(a.EnumRewardedVideoAdStateCode={}));class h{constructor(){}static init(){if(!Laya.Browser.onMiniGame)return this._isVaild=!1,void(this._errCode=u.NOT_ON_WECHAT);let e=this;Laya.Browser.window.wx.getSystemInfoSync();return i.default.needVersion("2.0.4")?(this._videoAd=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:h.adUnitId}),this._videoAd?(this._errCode=u.LOADING,s.default.logAdLoad(n.LoadAdStep.LoadADStepStart,0,this._errCode),this._lastTime=Date.now(),this._videoAd.onClose(t=>{i.default.resumeMusic(),console.log("激励视频关闭"),t&&t.isEnded||void 0===t?(e.doCallback(!0,!0),i.default.logEvent(this._source+"VideoSuccess")):(e.doCallback(!1,!0),i.default.logEvent(this._source+"VideoFail")),e._videoAd.load(),e._errCode=u.LOADING,s.default.logAdLoad(n.LoadAdStep.LoadADStepStart,Date.now()-this._lastTime,this._errCode),this._lastTime=Date.now()}),this._videoAd.onLoad(()=>{console.log("激励视频广告加载成功"),e._isVaild=!0,u.LOADING==e._errCode&&(s.default.logAdLoad(n.LoadAdStep.LoadADStepOver,Date.now()-this._lastTime,u.LOADED),this._lastTime=Date.now()),e._errCode=u.LOADED,i.default.instance.event(o.default.REWARDED_VIDEO_AD_LOADED),e._isLoaded=!0}),void this._videoAd.onError(t=>{console.log("拉取激励视频失败："+JSON.stringify(t)),e._errCode=t.errCode,s.default.logAdLoad(n.LoadAdStep.LoadADStepOver,Date.now()-this._lastTime,this._errCode),this._lastTime=Date.now(),e._isVaild=!1,e.doCallback(!1,!1)})):(this._isVaild=!1,void(this._errCode=u.CREATE_FAIL))):(e._isVaild=!1,void(this._errCode=u.SDK_VERSION))}static get isVaild(){return!this._isVaild&&Date.now()-this._lastTime>1e3&&null!=this._videoAd&&(console.log("当前视频不可用，重新拉取"),this._videoAd.load(),this._errCode=u.LOADING,s.default.logAdLoad(n.LoadAdStep.LoadADStepStart,Date.now()-this._lastTime,this._errCode),this._lastTime=Date.now()),this._isVaild}static get isLoaded(){return!this._isLoaded&&Date.now()-this._lastTime>1e3&&null!=this._videoAd&&(console.log("当前视频不可用，重新拉取"),this._videoAd.load(),this._errCode=u.LOADING,s.default.logAdLoad(n.LoadAdStep.LoadADStepStart,Date.now()-this._lastTime,this._errCode),this._lastTime=Date.now()),this._isLoaded}static show(e,t,a){if(console.log("显示视频"),r.default.showRewardedVideoAd(),d.default.writeLogToHttpServer({event_name:"showRewardedVideoAd",event_param:""}),this._caller=e,this._callback=t,this._source=a,i.default.logEvent(this._source+"VideoClick"),console.log("当前视频是否可用："+this._isVaild),!Laya.Browser.onMiniGame)return console.log("非微信平台，直接返回"),void i.default.pauseMusic();if(!this._isVaild)return l.default.show("video loading..."),void this.doCallback(!1,!1);let n=this._videoAd;n.show().catch(e=>{l.default.show("video loading..."),n.load().then(()=>n.show())}),i.default.pauseMusic(),this._isLoaded=!1}static cancelShow(){console.log("取消显示视频"),this._caller=null,this._callback=null}static get errCode(){return this._errCode}static doCallback(e,t){this._callback&&this._caller&&this._callback.call(this._caller,e,t),this._callback=null,this._caller=null}static doCallbackByOut(e,t){this._callback&&this._caller&&this._callback.call(this._caller,e,t),this._callback=null,this._caller=null}}a.default=h,h.adUnitId="adunit-2b35193a66054da3",h._videoAd=null,h._isVaild=!1,h._isLoaded=!1,h._caller=null,h._callback=null,h._source="",h._errCode=u.NO_INIT,h._lastTime=0},{"../base/olympus/data/LogAdLoad":35,"../game/common/Notice":57,"../game/network/NetworkModule":166,"./LogSDK":318,"./MiniGameSDK":319,"./Wechat":324,"./WechatEvent":325}],323:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.gameBgm="res/sounds/gameBgm.mp3",i.indexBgm="res/sounds/indexBgm.mp3",i.bonusBgm="res/sounds/bonus_bgm.mp3",i.buyWeapon="res/sounds/buyWeapon.mp3",i.levelFail="res/sounds/levelFail.mp3",i.levelWin="res/sounds/levelWin.mp3",i.bgmOfTheFirstZombie="res/sounds/bgmOfTheFirstZombie.mp3",i.sellWeapon="res/sounds/sellWeapon.mp3",i.combine="res/sounds/combine.mp3",i.changeWeapon="res/sounds/changeWeapon.mp3",i.lastWaveOfZombie="res/sounds/lastWaveOfZombie.mp3",i.awardDiamond="res/sounds/awardDiamond.mp3",i.weaponLevelUp="res/sounds/weaponlevelUp.mp3",i.earnCoin="res/sounds/earnCoin.mp3",i.weapoinChangeSlot="res/sounds/weapoinChangeSlot.mp3",i.chicken="res/sounds/chicken.mp3",i.zombieDamage="res/sounds/zombie_damage.mp3",i.Combo="res/sounds/firstBlood.mp3",i.Turn="res/sounds/turn.mp3",i.Explosion="res/sounds/explosion.mp3"},{}],324:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const i=e("./WechatEvent"),n=e("../base/base/Dictionary"),s=e("../base/olympus/data/PromoData"),o=e("../config/ResGameConfig"),l=e("../base/base/MathUtil"),r=e("../game/data/GameDataModule"),d=e("../game/data/user/UserData"),u=e("./RewardedVideoAdUtil"),h=e("./BannerAdUtil"),c=e("../game/network/NetworkModule"),m=e("../game/common/Notice"),p=e("./DynamicConfig");class f extends Laya.EventDispatcher{static get instance(){return null==this._instance&&(this._instance=new f),this._instance}static init(){Laya.Browser.onMiniGame&&(u.default.init(),h.default.init(),f._wx=Laya.Browser.window.wx,f._wx.onShow(f.onShow),f._wx.onHide(f.onHide),f._wx.onAudioInterruptionEnd(function(){f._bgPlaying&&f._bgAudio&&f._bgAudio.play()}),f._wx.setKeepScreenOn({keepScreenOn:!0}),f.setOnShareHandler(),this.sceneCheck(this.scene))}static onShow(e){f._bgPlaying&&f._bgAudio&&f._bgAudio.play(),f.sceneCheck(e.scene),c.default.logEnter(e.scene),f.instance.event(i.default.ON_SHOW,e)}static onHide(){c.default.logExit(),f.instance.event(i.default.ON_HIDE)}static sceneCheck(e){this._isMyProgramScene=1089==e||1103==e||1104==e}static get isMyProgramScene(){return this._isMyProgramScene}static destory(){f._wx=null}static playMusic(e,t,a){r.default.getData(d.default).isSoundOn&&(e=Laya.URL.formatURL(e),f._bgPlaying=!0,Laya.Browser.onMiniGame?f._bgUrl==e&&null!=f._bgAudio?(f._bgAudio.loop=t,f._bgAudio.volume=f._musicVolume,f._bgAudio.play()):(f._bgUrl=e,null!=f._bgAudio&&(f._bgAudio.destroy(),f._bgAudio=null),f._bgAudio=f._wx.createInnerAudioContext(),f._bgAudio.autoplay=!0,f._bgAudio.loop=t,f._bgAudio.volume=f._musicVolume,f._bgAudio.src=f._bgUrl):Laya.SoundManager.playMusic(e,t?0:1,a))}static stopMusic(){Laya.Browser.onMiniGame?f._bgPlaying&&null!=f._bgAudio&&f._bgAudio.stop():Laya.SoundManager.stopMusic(),f._bgPlaying=!1}static playSound(e,t=!1){if(r.default.getData(d.default).isSoundOn&&!this._soundPause)if(e=Laya.URL.formatURL(e),Laya.Browser.onMiniGame){let a=f._soundDic.getValue(e);null==a?((a=f._wx.createInnerAudioContext()).src=e,a.volume=f._soundVolume,a.loop=t,a.play(),f._soundDic.setValue(e,a)):(Laya.Browser.onIOS?a.seek(0):a.stop(),a.play())}else Laya.SoundManager.playSound(e,t?0:1)}static stopSound(e){if(e=Laya.URL.formatURL(e),Laya.Browser.onMiniGame){let t=f._soundDic.getValue(e);null!=t&&t.stop()}else Laya.SoundManager.stopSound(e)}static stopAllSound(){if(Laya.Browser.onMiniGame)for(let e of f._soundDic.values)null!=e&&e.stop()}static pauseMusic(){Laya.Browser.onMiniGame?null!=f._bgAudio&&f._bgAudio.pause():Laya.SoundManager.stopMusic(),this._soundPause=!0}static resumeMusic(){Laya.Browser.onMiniGame?f._bgPlaying&&f._bgAudio&&f._bgAudio.play():f._bgPlaying&&Laya.SoundManager.playMusic(this._bgUrl,0),this._soundPause=!1}static setMusicVolume(e){Laya.Browser.onMiniGame?(f._musicVolume=e,null!=f._bgAudio&&(f._bgAudio.volume=f._musicVolume)):(Laya.SoundManager.setMusicVolume(e),Laya.SoundManager.musicMuted=0==e)}static setSoundVolume(e){Laya.Browser.onMiniGame?(f._soundVolume=e,f._soundDic.values.forEach(e=>{null!=e&&(e.volume=f._soundVolume)})):(Laya.SoundManager.setSoundVolume(e),Laya.SoundManager.soundMuted=0==e)}static vibrateLong(){Laya.Browser.onMiniGame&&r.default.getData(d.default).isVibrateOn&&f._wx.vibrateLong()}static vibrateShort(){Laya.Browser.onMiniGame&&r.default.getData(d.default).isVibrateOn&&f._wx.vibrateShort()}static get chanel(){if(Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getLaunchOptionsSync();if(e&&e.query&&"{}"!=JSON.stringify(e.query)&&e.query.channel)return e.query.channel}}static get gdt_vid(){if(Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getLaunchOptionsSync();if(e&&e.query&&"{}"!=JSON.stringify(e.query)&&e.query.gdt_vid)return e.query.gdt_vid}}static get aid(){if(Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getLaunchOptionsSync();if(e&&e.query&&"{}"!=JSON.stringify(e.query)&&e.query.weixinadinfo){return e.query.weixinadinfo.split(".")[0]}}}static get share_uuid(){if(Laya.Browser.onMiniGame){var e=Laya.Browser.window.wx.getLaunchOptionsSync();if(e&&e.query&&"{}"!=JSON.stringify(e.query)&&e.query.share_uuid)return e.query.share_uuid}}static get scene(){return Laya.Browser.onMiniGame?Laya.Browser.window.wx.getLaunchOptionsSync().scene:0}static getLaunchOptions(){return Laya.Browser.onMiniGame?Laya.Browser.window.wx.getLaunchOptionsSync():null}static postMessage(e,t=""){if(f._wx&&f._wx.getOpenDataContext){let a=JSON.stringify({tag:e,key:t});console.log("postMessage",e,t,a)}else console.log("postMessage",e,t)}static updateRankData(e){var t=new Array;let a=(new Date).getTime();var i=JSON.stringify({wxgame:{score:e,update_time:a.toString()}});t.push({key:"rank",value:i}),console.log("updateRankData",t)}static share(e,t,a,i,n,s){if(this._shareCaller=e,this._shareCallback=t,Laya.Browser.onMiniGame){if(e&&t){this._shareSource=a,this.logEvent(this._shareSource+"ShareClick");let e=r.default.instance.getData(d.default);e.shareCount<=3?this.newPlayerShare(e.shareCount,i,n,s):this.oldPlayerShare(i,n,s),e.shareCount++}this.toShare(i,s)}else e&&t&&this._shareCallback.call(this._shareCaller,!0)}static newPlayerShare(e,t,a,n){f.instance.once(i.default.ON_SHOW,this,()=>{if(2==e)f.logEvent(this._shareSource+"ShareSuccess"),f._shareCallback&&f._shareCaller&&f._shareCallback.call(f._shareCaller,!0);else{f.logEvent(this._shareSource+"ShareFail");let i="分享失败，请分享到群";3==e&&(i="分享失败，请分享到其他群");let s=o.default.zeroShareTemplate;s.text=i,this.showModal(s,t,a,n)}})}static oldPlayerShare(e,t,a){f._shareCaller&&f._shareCallback&&(f.instance.once(i.default.ON_HIDE,this,()=>{f._shareStartTime=Date.now()}),f.instance.once(i.default.ON_SHOW,this,()=>{let i=Date.now()-f._shareStartTime,n=p.default.Config.InTimeFailRate;if(i>2500&&(n=p.default.Config.OutTimeFailRate),.01*l.default.randomInt(0,100)<n){if(f.logEvent(this._shareSource+"ShareFail"),f._shareCallback&&f._shareCaller){let i="分享失败，请分享到群";Math.random()>.5&&(i="分享失败，请分享到其他群");let n=o.default.zeroShareTemplate;n.text=i,this.showModal(n,e,t,a)}}else f.logEvent(this._shareSource+"ShareSuccess"),f._shareCallback&&f._shareCaller&&f._shareCallback.call(f._shareCaller,!0)}))}static showModal(e,t,a,i){wx.showModal({title:e.title,content:e.text,showCancel:!0,cancelText:e.cancel_text,confirmText:e.sure_text,fail:function(){f._shareCallback&&f._shareCaller&&f._shareCallback.call(f._shareCaller,!1)},success:function(e){e.confirm&&(a++,f.share(f._shareCaller,f._shareCallback,f._shareSource,t,a,i)),e.cancel&&f._shareCallback&&f._shareCaller&&f._shareCallback.call(f._shareCaller,!1)}})}static toShare(e,t){let a=0,i="",n="";if(null!=t)i=t.title,n=t.image_url,a=t.id;else{let e=l.default.randomInt(0,o.default.shareDatas.length-1),t=o.default.shareDatas[e];i=t.title,n=t.image_url,a=t.id}let s="";s+="share_uuid="+e,f._wx.aldShareAppMessage({title:i,imageUrl:n,query:s,success:function(){console.log("分享成功")},cancel:function(){console.log("分享取消")}})}static cancelShare(){this._shareCaller=null,this._shareCallback=null}static setUserCloudStorage(e){Laya.Browser.window.wx&&Laya.Browser.window.wx.setUserCloudStorage&&Laya.Browser.window.wx.setUserCloudStorage({KVDataList:e,success:e=>{console.log("上传用户托管数据成功")}})}static setOnShareHandler(){Laya.Browser.onMiniGame&&(Laya.Browser.window.wx.showShareMenu({}),Laya.Browser.window.wx.aldOnShareAppMessage(()=>{let e=l.default.randomInt(0,o.default.shareDatas.length-1),t=o.default.shareDatas[e],a="share_uuid="+r.default.getData(d.default).ShareUuid+"id="+t.id;return{title:t.title,imageUrl:t.image_url,query:a}}))}static logEvent(e,t={}){t?console.log("logEvent...",e,JSON.stringify(t)):console.log(e)}static isOnIPhoneX(){if(Laya.Browser.onMiniGame){let e=(Laya.Browser.window.wx.getSystemInfoSync().model+"").toLowerCase();if(Laya.Browser.onIPhone&&-1!=e.search(/[iI][pP]hone\s*[xX]/))return!0}return!1}static isFringe(){let e=!1;return Laya.Browser.onIPhone&&Math.abs(Laya.Browser.pixelRatio-3)<.01?e=375==Laya.Browser.clientWidth&&812==Laya.Browser.clientHeight||812==Laya.Browser.clientWidth&&375==Laya.Browser.clientHeight||414==Laya.Browser.clientWidth&&896==Laya.Browser.clientHeight||896==Laya.Browser.clientWidth&&414==Laya.Browser.clientHeight:Laya.Browser.onIPhone&&Math.abs(Laya.Browser.pixelRatio-2)<.01?e=414==Laya.Browser.clientWidth&&896==Laya.Browser.clientHeight||896==Laya.Browser.clientWidth&&414==Laya.Browser.clientHeight:Laya.Browser.onAndroid&&Math.abs(Laya.Browser.pixelRatio-2)<.01&&(e=360==Laya.Browser.clientWidth&&760==Laya.Browser.clientHeight||760==Laya.Browser.clientWidth&&360==Laya.Browser.clientHeight||360==Laya.Browser.clientWidth&&780==Laya.Browser.clientHeight||780==Laya.Browser.clientWidth&&360==Laya.Browser.clientHeight),e}static getMenuButtonBoundingClientRect(){if(f._wx){Laya.Browser.window.wx.getSystemInfoSync();return f.needVersion("2.1.0")?f._wx.getMenuButtonBoundingClientRect():null}}static toMiniProgram(e,t="pages/index/index?channel=kycc",a=null,i="release"){if(!Laya.Browser.onMiniGame)return;Laya.Browser.window.wx.getSystemInfoSync();f.needVersion("2.2.0")&&Laya.Browser.window.wx.navigateToMiniProgram({appId:e,path:t,extraData:a,envVersion:i,success:e=>{c.default.logPromoResult(s.PromoResult.Ok)},fail:()=>{c.default.logPromoResult(s.PromoResult.Cancel)}})}static triggerGC(){Laya.Browser.onMiniGame&&f._wx.triggerGC()}static openServiceConversation(e,t,a,i){Laya.Browser.onMiniGame?this.needVersion("2.0.3")?f._wx.openCustomerServiceConversation({sessionFrom:"",showMessageCard:!0,sendMessageTitle:e,sendMessageImg:t,success:e=>{null!=a&&a.run()},fail:e=>{null!=i&&i.run()},complete:e=>{}}):m.default.show("The current WeChat version is too low. Please upgrade WeChat and try again"):null!=a&&a.run()}static get isShareVaild(){return!0}static needVersion(e){if(Laya.Browser.onMiniGame){let t=Laya.Browser.window.wx.getSystemInfoSync();return this.compareVersion(t.SDKVersion,e)>=0}return!0}static compareVersion(e,t){let a=e.split("."),i=t.split(".");const n=Math.max(a.length,i.length);for(;a.length<n;)a.push("0");for(;i.length<n;)i.push("0");for(let e=0;e<n;e++){const t=parseInt(a[e]),n=parseInt(i[e]);if(t>n)return 1;if(t<n)return-1}return 0}}a.default=f,f._wx=null,f._bgUrl="",f._bgComplete=null,f._bgAudio=null,f._bgPlaying=!1,f._soundPause=!1,f._soundDic=new n.default,f._musicVolume=1,f._soundVolume=1,f._shareCaller=null,f._shareCallback=null,f._shareSource="",f._shareStartTime=0,f._isMyProgramScene=!1,f._instance=null},{"../base/base/Dictionary":9,"../base/base/MathUtil":11,"../base/olympus/data/PromoData":44,"../config/ResGameConfig":50,"../game/common/Notice":57,"../game/data/GameDataModule":77,"../game/data/user/UserData":86,"../game/network/NetworkModule":166,"./BannerAdUtil":316,"./DynamicConfig":317,"./RewardedVideoAdUtil":322,"./WechatEvent":325}],325:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});class i{}a.default=i,i.ON_SHOW="onShow",i.ON_HIDE="onHide",i.REWARDED_VIDEO_AD_LOADED="RewardedVideoAdLoaded"},{}]},{},[2]);